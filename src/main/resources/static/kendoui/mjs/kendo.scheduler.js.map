{"version":3,"file":"kendo.scheduler.js","names":["__meta__","id","name","category","description","depends","features","$","undefined$1","kendo","window","date","MS_PER_DAY","getDate","getMilliseconds","recurrence","keys","extend","F10","ui","Widget","DataBoundWidget","STRING","Popup","Calendar","DataSource","data","isPlainObject","toString","Object","prototype","isArray","Array","NS","CLICK","MOUSEDOWN","TOUCHSTART","support","pointers","TOUCHMOVE","TOUCHEND","MOUSEMOVE","mousemove","CHANGE","PROGRESS","ERROR","CANCEL","REMOVE","RESET","SAVE","EDIT","DISABLED","FOCUSEDSTATE","valueStartEndBoundRegex","TODAY","Date","EXCEPTION_SEPARATOR","OLD_EXCEPTION_SEPARATOR_REGEXP","RECURRENCE_EXCEPTION","EDITRECURRING","VIEWS_DROPDOWN_TEMPLATE","template","TOOLBARTEMPLATE","MOBILETOOLBARTEMPLATE","timezoneButtonText","model","message","startTimezone","endTimezone","appendTimezoneAttr","attrs","options","timezone","attr","appendValidDateValidator","validationRules","fields","field","validation","validDateRule","validDateValidator","appendDateCompareValidator","dateCompareRule","dateCompare","convertData","method","removeUid","event","idx","length","startOffset","endOffset","start","getTimezoneOffset","end","convert","uid","getTime","getOccurrenceByUid","SchedulerDataReader","Class","init","schema","reader","this","originalFunction","wrapDataAccess","bind","serialize","call","ObservableArray","wrapDataSerialization","errors","parse","total","groups","aggregates","applyZone","fromZone","toZone","remove","input","filter","picker","widgetInstance","parseDate","val","format","value","SchedulerEvent","Model","define","that","fn","_defaultId","defaults","idField","_time","fieldTime","toUtcTime","_date","clone","updateUid","constructor","toJSON","duration","offset","MS_PER_MINUTE","expand","zone","update","eventInfo","set","_startTime","_endTime","isMultiDay","isAllDay","isException","isNew","recurrenceId","isOccurrence","isRecurring","recurrenceRule","isRecurrenceHead","toOccurrence","recurrenceException","obj","shouldSerialize","key","milliseconds","setTime","type","title","defaultValue","required","validDate","container","closest","startInput","find","endInput","startPicker","endPicker","editable","untilDateCompare","until","SchedulerDataSource","modelBase","view","apply","logic","filters","operator","Query","events","concat","expandAll","toArray","cancelChanges","_removeExceptionDate","insert","index","_createNewModel","accept","_pushCreated","_addExceptionDate","pushCreate","items","_removeExceptions","slice","item","shift","head","get","replaceRegExp","RegExp","toExceptionString","replace","test","newException","create","dataSource","Error","defaultCommands","text","className","canceledit","destroy","imageClass","iconClass","descriptionEditor","createValidationAttributes","appendTo","wrap","ruleName","rule","modelField","specialRules","datatype","inArray","isFunction","filterResourceEditorData","editor","parentValue","parentValueField","valueField","valueArray","editorValue","isMs","JSON","stringify","forEach","currentValue","indexOf","splice","trigger","bindParentValueChangeHandler","currentEditor","resource","parent","parentElement","ns","parentWidget","getKendoDropDownList","ev","sender","dataParentValueField","dataValueField","on","target","filterMobileResourceEditorData","parentSelectedValue","itemParentValue","getter","removeAttribute","setAttribute","moveEventRange","distance","editors","mobile","dateRange","dateTimeValidate","dateValidate","hide","timezonePopUp","messages","noTimezone","click","kendoMobileTimezoneEditor","optionLabel","kendoMobileRecurrenceEditor","pane","multipleResources","dataTextField","setTimeout","resources","desktop","timezoneEditorButton","visible","toggle","kendoTimezoneEditor","kendoRecurrenceEditor","kendoMultiSelect","valuePrimitive","itemTemplate","dataColorField","tagTemplate","select","e","dataItem","disabled","preventDefault","dataBound","list","each","i","el","element","addClass","kendoDropDownList","Editor","Observable","createButton","toggleDateValidationHandler","_toggleDateValidation","isDateTimeInput","shouldValidate","bindAttribute","is","allDayEvent","checkHierarchical","windows_zones","push","_initTimezoneEditor","repeat","recurrenceEditor","resourceIndex","parentResource","some","multiple","_buildDesktopEditTemplate","editableFields","settings","Template","templateSettings","paramName","html","renderCheckBox","label","separateTimezones","tmpl","expr","_createEndTimezoneButton","_buildMobileEditTemplate","_buildEditTemplate","isMobile","unescape","_revertTimezones","_startTimezone","_endTimezone","MobileEditor","arguments","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","css","height","animations","left","right","close","unbind","timezoneView","content","kSwitch","endTimezoneRow","last","cancel","timezoneTitle","save","append","contentElement","show","stopPropagation","hasClass","editView","_editPane","navigate","checked","enable","showDialog","actions","buttons","map","button","action","primary","document","body","kendoDialog","modal","preventScroll","closable","editEvent","updateText","removeText","cancelText","titleText","editorTitle","resetSeries","resetSeriesBtn","deleteBtn","kendoEditable","clearContainer","validateOnBlur","_views","roleSelector","not","views","eq","purge","PopupEditor","fieldName","deleteText","kendoWindow","resizable","draggable","userTriggered","center","open","cycleForm","popup","_timezonePopup","buttonIndex","wrapper","currentTarget","getKendoWindow","activator","wnd","checkbox","saveButton","cancelButton","timezonePopup","startTimezoneChange","prop","timezoneEditorTitle","focus","Scheduler","_initModel","_wrapper","selectable","_tabindex","_toolbar","_dataSource","_resources","_resizeHandler","resize","_resizable","_movable","_bindResize","_navigation","_selectable","_touchHandlers","_ariaId","guid","_createEditor","_unbindResize","off","dataItems","_data","eventsUids","dict","eventsUidsLength","eventsCount","sortedData","_isMobile","mobileOS","_isTouch","originalEvent","pointerType","_isInverseColor","eventElement","_groupsByResource","groupIndex","groupsArray","parentFieldValue","parentField","group","prevIndex","dataIndex","fieldValue","currentGroupIndex","selectedGroups","selection","_selection","selectedEvents","slots","_selectedSlots","_selectedEvents","_resourceBySlot","_old","clearSelection","groupsByResource","groupedResources","_selectEvents","_select","ranges","rangeStart","_startDate","rangeEnd","addDays","_endDate","timeSlotCollectionCount","toLocalDate","isDaySlot","eventsLength","isGrouped","ctrlKey","_ctrlKey","currentGroup","daySlotCollectionCount","collIdx","getTimeSlotCollection","dayCollIdx","getDaySlotCollection","_createSelection","startX","startY","endX","endY","timeStamp","touchMoveHandler","_touchMove","stop","_touchPosX","_tapPosition","_touchPosY","_userTouched","_scrolling","now","_preventFocus","delta","amplitude","_amplitude","_dragging","Math","abs","_mouseDownSelection","kineticScrollNeeded","animate","scrollTop","_mouseDown","_initialFocus","_shiftKey","_keydown","shiftKey","mouseMoveHandler","_mouseMove","which","isRight","_activeElement","focusElement","toolbar","removeClass","_selectFirstSlot","firstSlot","firstAllDay","first","firstContent","_firstEvent","firstEvent","contentEvent","firstEventInAllDay","firstEventInContent","occurrenceByUid","_focusToolbar","current","oldSelection","oldEventsLength","removeAttr","currentUid","uids","coordinate","changedTouches","verticalScroll","scrollHeight","clientHeight","horizontalScroll","scrollWidth","clientWidth","round","scrollLeft","applyVerticalScroll","applyhorizontalScroll","clearTimeout","_moveTimer","slot","selectionByElement","startDate","endDate","backward","_viewByIndex","_keydownToolbar","itemToFocus","keyCode","focusableItems","shouldNavigate","isRtl","focusedItem","TAB","altKey","DOWN","_showCalendar","RIGHT","LEFT","_focusedView","ENTER","SPACEBAR","focusedViewName","_selectedViewName","calendar","activeElement","_keydownView","previous","cell","isModifier","arrowKeys","UP","DELETE","BACKSPACE","moveToEvent","HOME","END","_scrollTo","removeEvent","_keydownShortcut","currentDate","toggleFullDay","addEvent","timezoneOffset","_keydownYearView","_adjustSelectedDate","_keydownAgendaView","move","_keydownChangeView","viewByIndex","viewIndex","_keydownChangeDate","direction","nextDate","previousDate","toolbarIsFocused","ESC","_updateSelection","_updateEventForSelection","_timeSlotInterval","indexOfEvent","autoBind","snap","allDaySlot","min","max","workWeekStart","workWeekEnd","workDays","showWorkHours","startTime","endTime","currentTimeMarker","updateInterval","useLocalTimezone","footer","today","pdf","deleteWindowTitle","next","refresh","selectView","ariaSlotLabel","ariaEventLabel","at","to","allDay","prefix","search","day","week","workWeek","agenda","month","timeline","timelineWeek","timelineWorkWeek","timelineMonth","year","recurrenceMessages","resetSeriesWindowTitle","deleteWindowOccurrence","deleteWindowSeries","editWindowTitle","editWindowOccurrence","editWindowSeries","confirmation","width","orientation","_refreshHandler","_progressHandler","_errorHandler","_resourceRefreshHandler","resourceDS","_resourceProgressHandler","_resourceErrorHandler","_editor","_moveDraggable","_resizeDraggable","add","_model","setDataSource","fetch","_selectedView","siblings","startSlot","endSlot","startResources","clonedEvent","originSlot","originStartTime","clonedEvents","cachedEvents","movable","android","Draggable","ignore","holdToDrag","autoScroll","isTouch","_eventOptionsForMove","inverseColor","evtClone","evtCloneElement","_slotByPosition","x","startLocation","y","range","location","slotIndex","targetSlotElement","children","top","_updateMoveHint","_removeMoveHint","endResources","_isMultiDrag","evt","updatedEventOptions","eventOptions","_updateEvent","sync","cancelHold","handle","directions","dragstart","_updateEventForResize","drag","dir","currentSlot","originalStart","originalEnd","_updateResizeHint","dragend","dragHandle","_removeResizeHint","setHours","setMinutes","dragcancel","updateEvent","callback","_preventRefresh","_convertDates","getHours","getMinutes","getSeconds","recurrenceHead","getByUid","_showRecurringDialog","eventUid","exception","editRecurring","occurrenceText","seriesText","_modelForContainer","_confirmation","isResetSeries","_isEditorOpened","deleteRecurringConfirmation","deleteSeriesConfirmation","resetSeriesConfirmation","cancelEvent","_editEvent","saveEvent","dirty","_editRecurringDialog","_createPopupEditor","editOccurrence","editSeries","editRecurringMode","_createButton","command","commandName","edit","_set","_attemptRefresh","_deleteRecurringDialog","_removeEvent","occurrence","occurrencesInRange","deleteOccurrence","deleteSeries","createException","deleteOccurrenceConfirmation","createExceptionConfirmation","currentModel","seriesCallback","occurrenceCallback","exeptionCallback","deleteRecurring","_unbindView","angular","elements","_bindView","_viewRemoveHandler","_viewAddHandler","_viewEditHandler","_viewNavigateHandler","isWorkDay","switchWorkDay","_workDayMode","_selectView","_viewActivateHandler","constrainSelection","_renderView","_viewsCount","viewsDropdown","viewButtons","prepend","toLowerCase","rebind","viewName","_initializeView","mouseAndTouchPresent","dateForTitle","shortDateForTitle","mobileDateForTitle","force","size","getSize","currentSize","_size","selectedDate","isInDateRange","setFullYear","getFullYear","getMonth","isSettings","overrideOptions","trimOptions","defaultView","selected","hasType","defaultViews","time","resourceFetchArray","_preventRebind","when","then","_requestStart","_error","_progress","progress","resourcePromises","_resourceDataSource","groupName","promises","dataSourceInstance","_bindResourceEvents","isResourceGrouped","_refreshResource","observable","formattedDate","formattedShortDate","commands","grep","viewsCount","saveAsPDF","throttle","targetElm","anchor","activate","_toggleResize","change","setOptions","depth","copyAnchorStyles","preventRefresh","visibleEndDate","refreshLayout","render","slotByPosition","slotByElement","centerX","centerY","resourcesBySlot","plugin","PDFMixin","SCHEDULER_EXPORT","_drawPDF","styles","style","cssText","scheduler","promise","Deferred","table","_drawPDFShadow","avoidLinks","done","args","page","pageNumber","totalPages","notify","resolve","fail","err","reject","always","TimezoneEditor","zones","zones_titles","_zonesQuery","_zoneTitleId","_zoneTitlePicker","_zonePicker","_zoneTitle","_zone","_value","zoneTitle","DropDownList","cascadeFrom","other_zone","ZONETITLEOPTIONTEMPLATE","ZONEOPTIONTEMPLATE","MobileTimezoneEditor","_bindZones","_filter","_options","_zonePickerLabel","zoneSelect","after","zonePicker","zone_value","jQuery"],"sources":["kendo.scheduler.js"],"mappings":"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","sourcesContent":["import './kendo.dropdownlist.js';\nimport './kendo.editable.js';\nimport './kendo.multiselect.js';\nimport './kendo.window.js';\nimport './kendo.datetimepicker.js';\nimport './kendo.scheduler.recurrence.js';\nimport './kendo.scheduler.view.js';\nimport './kendo.scheduler.dayview.js';\nimport './kendo.scheduler.agendaview.js';\nimport './kendo.scheduler.monthview.js';\nimport './kendo.scheduler.timelineview.js';\nimport './kendo.scheduler.yearview.js';\nimport './kendo.dialog.js';\nimport './kendo.pane.js';\nimport './kendo.pdf.js';\nimport './kendo.switch.js';\n\nvar __meta__ = {\n    id: \"scheduler\",\n    name: \"Scheduler\",\n    category: \"web\",\n    description: \"The Scheduler is an event calendar.\",\n    depends: [ \"dropdownlist\", \"editable\", \"multiselect\", \"window\", \"datepicker\", \"datetimepicker\", \"scheduler.recurrence\", \"scheduler.view\" ],\n    features: [ {\n        id: \"scheduler-dayview\",\n        name: \"Scheduler Day View\",\n        description: \"Scheduler Day View\",\n        depends: [ \"scheduler.dayview\" ]\n    }, {\n        id: \"scheduler-agendaview\",\n        name: \"Scheduler Agenda View\",\n        description: \"Scheduler Agenda View\",\n        depends: [ \"scheduler.agendaview\" ]\n    }, {\n        id: \"scheduler-monthview\",\n        name: \"Scheduler Month View\",\n        description: \"Scheduler Month View\",\n        depends: [ \"scheduler.monthview\" ]\n    }, {\n        id: \"scheduler-timelineview\",\n        name: \"Scheduler Timeline View\",\n        description: \"Scheduler Timeline View\",\n        depends: [ \"scheduler.timelineview\" ]\n    }, {\n        id: \"scheduler-yearview\",\n        name: \"Scheduler Year View\",\n        description: \"Scheduler Year View\",\n        depends: [ \"scheduler.yearview\" ]\n    }, {\n        id: \"scheduler-mobile\",\n        name: \"Scheduler adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"scheduler-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export the scheduler events as PDF\",\n        depends: [ \"pdf\", \"drawing\" ]\n    }, {\n        id: \"scheduler-timezones\",\n        name: \"Timezones\",\n        description: \"Allow selecting timezones different than Etc/UTC\",\n        depends: [ \"timezones\" ]\n    }]\n};\n\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        date = kendo.date,\n        MS_PER_DAY = date.MS_PER_DAY,\n        getDate = date.getDate,\n        getMilliseconds = kendo.date.getMilliseconds,\n        recurrence = kendo.recurrence,\n        keys = $.extend({ F10: 121 }, kendo.keys),\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        DataBoundWidget = ui.DataBoundWidget,\n        STRING = \"string\",\n        Popup = ui.Popup,\n        Calendar = ui.Calendar,\n        DataSource = kendo.data.DataSource,\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        toString = Object.prototype.toString,\n        isArray = Array.isArray,\n        NS = \".kendoScheduler\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        TOUCHSTART = kendo.support.pointers ? \"pointerdown\" : \"touchstart\",\n        TOUCHMOVE = kendo.support.pointers ? \"pointermove\" : \"touchmove\",\n        TOUCHEND = kendo.support.pointers ? \"pointerup\" : \"touchend\",\n        MOUSEMOVE = kendo.support.mousemove,\n        CHANGE = \"change\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        CANCEL = \"cancel\",\n        REMOVE = \"remove\",\n        RESET = \"resetSeries\",\n        SAVE = \"save\",\n        ADD = \"add\",\n        EDIT = \"edit\",\n        DISABLED = \"disabled\",\n        OPTION = \"option\",\n        FOCUSEDSTATE = \"k-focus\",\n        VIEWSSELECTOR = \".k-scheduler-views\",\n        INVERSECOLORCLASS = \"k-event-inverse\",\n        valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/,\n        TODAY = getDate(new Date()),\n        EXCEPTION_SEPARATOR = \",\",\n        OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g,\n        RECURRENCE_EXCEPTION = \"recurrenceException\",\n        DELETECONFIRM = \"Are you sure you want to delete this event?\",\n        DELETERECURRING = \"Do you want to delete only this event occurrence or the whole series?\",\n        EDITRECURRING = \"Do you want to edit only this event occurrence or the whole series?\",\n        DELETERECURRINGCONFIRM = \"Are you sure you want to delete this event occurrence?\",\n        RESETSERIESCONFIRM = \"Are you sure you want to reset the whole series?\",\n        DELETESERIESCONFIRM = \"Are you sure you want to delete the whole series?\",\n        COMMANDBUTTONTMPL = '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid #=className#\" #=attr#><span class=\"k-button-text\">#=text#</span></button>',\n        VIEWS_DROPDOWN_TEMPLATE = kendo.template('' +\n            '<select aria-label=\"#= label #\" class=\"k-picker k-dropdown-list k-dropdown k-views-dropdown\" tabindex=\"-1\">' +\n                '#for (var view in views) {#' +\n                    '<option value=\"#= view #\">${views[view].title}</option>' +\n                '#}#' +\n            '</select>'\n        ),\n        TOOLBARTEMPLATE = kendo.template('' +\n            '<div class=\"k-scheduler-toolbar k-toolbar\" role=\"toolbar\">' +\n                '# if (pdf) { #' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-pdf\"><span class=\"k-button-icon k-icon k-i-file-pdf\"></span><span class=\"k-button-text\">${messages.pdf}</span></button>' +\n                '# } #' +\n                '<span class=\"k-scheduler-navigation k-button-group\">' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-nav-today\" title=\"${messages.today}\"><span class=\"k-button-text\">${messages.today}</span></button>' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-prev\" title=\"${messages.previous}\" aria-label=\"${messages.previous}\"><span class=\"k-button-icon k-icon k-i-arrow-60-left\"></span></button>' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-next\" title=\"${messages.next}\" aria-label=\"${messages.next}\"><span class=\"k-button-icon k-icon k-i-arrow-60-right\"></span></button>' +\n                '</span>' +\n                '<a tabindex=\"-1\" role=\"button\" href=\"\\\\#\" class=\"k-nav-current\" aria-live=\"polite\">' +\n                    '<span class=\"k-icon k-i-calendar\"></span>' +\n                    '<span class=\"k-sm-date-format\" data-#=ns#bind=\"text: formattedShortDate\"></span>' +\n                    '<span class=\"k-lg-date-format\" data-#=ns#bind=\"text: formattedDate\"></span>' +\n                '</a>' +\n                '<span class=\"k-spacer k-toolbar-spacer\"></span>' +\n                '# if (search) { #' +\n                    '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' +\n                        '<input tabindex=\"-1\" autocomplete=\"off\" placeholder=\"${messages.search}\" title=\"${messages.search}\" class=\"k-input-inner k-scheduler-search-input k-input-inner\" />' +\n                        '<span class=\"k-input-suffix\"><span class=\"k-icon k-i-search\"></span></span>' +\n                    '</span>' +\n                '# } #' +\n                '# if (viewsCount === 1) { #' +\n                    '<a role=\"button\" tabindex=\"-1\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-scheduler-refresh\" aria-label=\"${messages.refresh}\">' +\n                        '<span class=\"k-button-icon k-icon k-i-reload\"></span>' +\n                    '</a>' +\n                '# } else { #' +\n                    '<span class=\"k-scheduler-views-wrapper\">' +\n                        '<span class=\"k-scheduler-views k-button-group\">' +\n                            '# for (var view in views) { #' +\n                                '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-view-#= view.toLowerCase() #\" data-#=ns#name=\"#=view#\"><span class=\"k-button-text\">${views[view].title}</span></button>' +\n                            '# } #' +\n                        '</span>' +\n                    '</span>' +\n                '# } #' +\n            '</div>'),\n        MOBILETOOLBARTEMPLATE = kendo.template('<div class=\"k-scheduler-toolbar k-toolbar\" role=\"toolbar\">' +\n            '<span class=\"k-scheduler-tools k-button-group\">' +\n                '# if (pdf) { #' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-pdf\"><span class=\"k-button-icon k-icon k-i-file-pdf\"></span></button>' +\n                '# } #' +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-calendar\"><span class=\"k-button-icon k-icon k-i-calendar\"></span></button>' +\n                \"# if (editable) { #\" +\n                    '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-create-event\"><span class=\"k-button-icon k-icon k-i-plus\"></span></button>' +\n                \"# } #\" +\n            '</span>' +\n            '<span class=\"k-spacer k-toolbar-spacer\"></span>' +\n            '# if (search) { #' +\n                '<span class=\"k-scheduler-search k-textbox k-input k-input-md k-rounded-md k-input-solid\">' +\n                    '<input tabindex=\"-1\" autocomplete=\"off\" placeholder=\"${messages.search}\" title=\"${messages.search}\" class=\"k-scheduler-search-input k-input-inner\" />' +\n                    '<span class=\"k-input-suffix\"><span class=\"k-icon k-i-search\"></span></span>' +\n                '</span>' +\n            '# } #' +\n            '#if(viewsCount === 1){#' +\n                '<a role=\"button\" tabindex=\"-1\" data-#=ns#name=\"#=view#\" href=\"\\\\#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-scheduler-refresh\">' +\n                    '<span class=\"k-button-icon k-icon k-i-reload\"></span>' +\n                '</a>' +\n            '#} else {#' +\n                '<select tabindex=\"-1\" class=\"k-picker k-dropdown-list k-dropdown k-scheduler-mobile-views\">' +\n                    '#for(var view in views){#' +\n                        '<option class=\"k-view-#= view.toLowerCase() #\" value=\"#=view#\">${views[view].title}</option>' +\n                    '#}#' +\n                '</select>' +\n            '#}#' +\n            '</div>' +\n            '<div class=\"k-scheduler-toolbar k-toolbar\" role=\"toolbar\">' +\n                '<span class=\"k-scheduler-navigation\">' +\n                   '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-prev\"><span class=\"k-button-icon k-icon k-i-arrow-chevron-left\"></span></button>' +\n                   '<span class=\"k-nav-current\">' +\n                        '<span class=\"k-m-date-format\" data-#=ns#bind=\"text: formattedMobileDate\"></span>' +\n                        '<span class=\"k-y-date-format\" data-#=ns#bind=\"text: formattedYear\"></span>' +\n                    '</span>' +\n                   '<button tabindex=\"-1\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-nav-next\"><span class=\"k-button-icon k-icon k-i-arrow-chevron-right\"></span></button>' +\n                '</span>' +\n            '</div>'),\n        MOBILEDATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title };\n            var isAllDay = options.model.isAllDay;\n            var dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"'\";\n            var dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"'\";\n\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n\n            $('<input type=\"datetime-local\" required ' + kendo.attr(\"type\") + '=\"datetime-local\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ', invisible:isAllDay\" ' + dateTimeValidate + '/>')\n                .attr(attr)\n                .appendTo(container);\n\n            $('<input type=\"date\" required ' + kendo.attr(\"type\") + '=\"date\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                dateValidate + '/>')\n                .attr(attr).appendTo(container);\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n        },\n        DATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title },\n                isAllDay = options.model.isAllDay,\n                dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"' \",\n                dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"' \";\n\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datetimepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',invisible:isAllDay\" ' +\n                dateTimeValidate + '/>')\n            .attr(attr).appendTo(container);\n\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                dateValidate + '/>')\n            .attr(attr).appendTo(container);\n\n            $('<span ' + kendo.attr(\"bind\") + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n\n            if (options.field === \"end\") {\n                $('<span ' + kendo.attr(\"bind\") + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n            }\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n        },\n        RECURRENCEEDITOR = function(container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages\n                });\n        },\n        MOBILERECURRENCEEDITOR = function(container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoMobileRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages,\n                    pane: options.pane,\n                    value: options.model[options.field]\n                });\n        },\n        MOBILEISALLDAYEDITOR = function(container, options) {\n            $('<input type=\"checkbox\" data-role=\"switch\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').appendTo(container);\n        },\n        ISALLDAYEDITOR = function(container, options) {\n            $('<input type=\"checkbox\" data-role=\"checkbox\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" data-label=\"' + options.title + '\" />')\n                .attr({\n                    id: options.field,\n                    name: options.field,\n                    title: options.title ? options.title : options.field\n                })\n                .appendTo(container);\n        },\n        MOBILETIMEZONEPOPUP = function(container, options) {\n            var text = timezoneButtonText(options.model, options.messages.noTimezone);\n            $('<span class=\"k-timezone-label\"></span>').text(text).appendTo(container);\n            $('<span class=\"k-icon k-i-arrow-chevron-right\"></span>').appendTo(container);\n            container.closest(\"li.k-item label\").on(CLICK, options.click);\n        },\n        TIMEZONEPOPUP = function(container, options) {\n            $('<a href=\"#\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" data-bind=\"invisible:isAllDay\"><span class=\"k-button-text\">' + options.messages.timezoneEditorButton + '</span></a>').on(CLICK, options.click).appendTo(container);\n        },\n        MOBILETIMEZONEEDITOR = function(container, options) {\n            $('<div class=\"k-mobiletimezoneeditor\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoMobileTimezoneEditor({\n                    optionLabel: options.noTimezone\n                });\n        },\n        TIMEZONEEDITOR = function(container, options) {\n            var visible = options.visible || options.visible === undefined$1;\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({ name: options.field })\n                .toggle(visible)\n                .appendTo(container)\n                .kendoTimezoneEditor({\n                    optionLabel: options.noTimezone,\n                    title: options.title\n                });\n        };\n\n    function timezoneButtonText(model, message) {\n        message = message || \"\";\n\n        if (model.startTimezone) {\n            message = model.startTimezone;\n\n            if (model.endTimezone) {\n                message += \" | \" + model.endTimezone;\n            }\n        }\n\n        return message;\n    }\n\n    function appendTimezoneAttr(attrs, options) {\n        var timezone = options.timezone;\n\n        if (timezone) {\n            attrs[kendo.attr(\"timezone\")] = timezone;\n        }\n    }\n\n    function appendValidDateValidator(attrs, options) {\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules) {\n            var validDateRule = validationRules.validDateValidator;\n            if (validDateRule && isPlainObject(validDateRule) && validDateRule.message) {\n                attrs[kendo.attr(\"validDate-msg\")] = validDateRule.message;\n            }\n        }\n    }\n\n    function appendDateCompareValidator(attrs, options) {\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules) {\n            var dateCompareRule = validationRules.dateCompare;\n            if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                attrs[kendo.attr(\"dateCompare-msg\")] = dateCompareRule.message;\n            }\n        }\n    }\n\n    function wrapDataAccess(originalFunction, timezone) {\n        return function(data) {\n            data = originalFunction(data);\n\n            convertData(data, \"apply\", timezone);\n\n            return data || [];\n        };\n    }\n\n    function wrapDataSerialization(originalFunction, timezone) {\n        return function(data) {\n\n            if (data) {\n                if (toString.call(data) !== \"[object Array]\" && !(data instanceof kendo.data.ObservableArray)) {\n                    data = [data];\n                }\n            }\n\n            convertData(data, \"remove\", timezone, true);\n\n            data = originalFunction(data);\n\n            return data || [];\n        };\n    }\n\n    function convertData(data, method, timezone, removeUid) {\n        var event,\n            idx,\n            length,\n            startOffset,\n            endOffset;\n\n        data = data || [];\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            event = data[idx];\n            startOffset = event.start ? event.start.getTimezoneOffset() : null;\n            endOffset = event.start ? event.end.getTimezoneOffset() : null;\n\n            if (removeUid) {\n                if (event.startTimezone || event.endTimezone) {\n                    if (timezone) {\n                        event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                        event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    } else {\n                        event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                        event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                    }\n\n                } else if (timezone) {\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                }\n            } else {\n                if (event.startTimezone || event.endTimezone) {\n                    event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                    event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n\n                    if (timezone) {\n                        event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                        event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                    }\n\n                } else if (timezone) {\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                }\n            }\n\n            if (removeUid) {\n                delete event.uid;\n            }\n\n            if (method === \"remove\" && event.start && startOffset && startOffset !== event.start.getTimezoneOffset()) {\n                event.start = new Date(event.start.getTime() + (startOffset - event.start.getTimezoneOffset()) * 60000);\n            }\n            if (method === \"remove\" && event.end && endOffset && endOffset !== event.end.getTimezoneOffset()) {\n                event.end = new Date(event.end.getTime() + (endOffset - event.end.getTimezoneOffset()) * 60000);\n            }\n        }\n        return data;\n    }\n\n    function getOccurrenceByUid(data, uid) {\n        var length = data.length,\n            idx = 0,\n            event;\n\n        for (; idx < length; idx++) {\n            event = data[idx];\n\n            if (event.uid === uid) {\n                return event;\n            }\n        }\n    }\n\n    var SchedulerDataReader = kendo.Class.extend({\n        init: function(schema, reader) {\n            var timezone = schema.timezone;\n\n            this.reader = reader;\n\n            if (reader.model) {\n                this.model = reader.model;\n            }\n\n            this.timezone = timezone;\n            this.data = wrapDataAccess(this.data.bind(this), timezone);\n            this.serialize = wrapDataSerialization(this.serialize.bind(this), timezone);\n        },\n        errors: function(data) {\n            return this.reader.errors(data);\n        },\n        parse: function(data) {\n            return this.reader.parse(data);\n        },\n        data: function(data) {\n            return this.reader.data(data);\n        },\n        total: function(data) {\n            return this.reader.total(data);\n        },\n        groups: function(data) {\n            return this.reader.groups(data);\n        },\n        aggregates: function(data) {\n            return this.reader.aggregates(data);\n        },\n        serialize: function(data) {\n            return this.reader.serialize(data);\n        }\n    });\n\n    function applyZone(date, fromZone, toZone) {\n        if (toZone) {\n            date = kendo.timezone.convert(date, fromZone, toZone);\n        } else {\n            date = kendo.timezone.remove(date, fromZone);\n        }\n\n        return date;\n    }\n\n    function validDateValidator(input) {\n        if ((input.filter(\"[name=start]\").length && input.filter(\"[title=Start]\").length) ||\n            (input.filter(\"[name=end]\").length && input.filter(\"[title=End]\").length) ||\n            input.filter(\".k-recur-until\").length) {\n            var date;\n            var picker = kendo.widgetInstance(input, kendo.ui);\n\n            if (picker) {\n                date = kendo.parseDate(input.val(), picker.options.format);\n                return !!date && picker.value();\n            } else {\n                date = kendo.parseDate(input.val());\n                return !!date;\n            }\n        }\n\n        return true;\n    }\n\n    function dateCompareValidator(input) {\n        if (input.filter(\"[name=end]\").length) {\n            var container = input.closest(\".k-scheduler-edit-form\");\n            var startInput = container.find(\"[name=start]:visible\");\n            var endInput = container.find(\"[name=end]:visible\");\n\n            if (endInput[0] && startInput[0]) {\n                var start, end;\n                var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n\n                var editable = container.data(\"kendoEditable\");\n                var model = editable ? editable.options.model : null;\n\n                if (startPicker && endPicker) {\n                    start = startPicker.value();\n                    end = endPicker.value();\n                } else {\n                    start = kendo.parseDate(startInput.val());\n                    end = kendo.parseDate(endInput.val());\n                }\n\n                if (start && end) {\n                    if (model) {\n                        var timezone = startInput.attr(kendo.attr(\"timezone\"));\n                        var startTimezone = model.startTimezone;\n                        var endTimezone = model.endTimezone;\n\n                        startTimezone = startTimezone || endTimezone;\n                        endTimezone = endTimezone || startTimezone;\n\n                        if (startTimezone) {\n                            start = applyZone(start, startTimezone, timezone);\n                            end = applyZone(end, endTimezone, timezone);\n                        }\n                    }\n\n                    return start <= end;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function untilDateCompareValidator(input) {\n        var untilPicker, until,\n            container, startInput, start, startPicker;\n\n        if (input.filter(\".k-recur-until\").length) {\n            untilPicker = kendo.widgetInstance(input, kendo.ui);\n            until = untilPicker.value();\n            container = input.closest(\".k-scheduler-edit-form\");\n            startInput = container.find(\"[name=start]:visible\");\n\n            if (startInput[0]) {\n                startPicker = kendo.widgetInstance(startInput, kendo.ui);\n\n                if (startPicker) {\n                    start = startPicker.value();\n                } else {\n                    start = kendo.parseDate(startInput.val());\n                }\n\n                if (start && until) {\n                    return start <= until;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    var SchedulerEvent = kendo.data.Model.define({\n        init: function(value) {\n            var that = this;\n\n            kendo.data.Model.fn.init.call(that, value);\n\n            that._defaultId = that.defaults[that.idField];\n        },\n\n        _time: function(field) {\n            var date = this[field];\n            var fieldTime = \"_\" + field + \"Time\";\n\n            if (this[fieldTime]) {\n                return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n            }\n\n            return getMilliseconds(date);\n        },\n\n        _date: function(field) {\n            var fieldTime = \"_\" + field + \"Time\";\n\n            if (this[fieldTime]) {\n                return this[fieldTime] - this._time(field);\n            }\n\n            return kendo.date.getDate(this[field]);\n        },\n\n        clone: function(options, updateUid) {\n            var uid = this.uid,\n                event = new this.constructor($.extend({}, this.toJSON(), options));\n\n            if (!updateUid) {\n                event.uid = uid;\n            }\n\n            return event;\n        },\n\n        duration: function() {\n            var end = this.end;\n            var start = this.start;\n            var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n\n            return end - start - offset;\n        },\n\n        expand: function(start, end, zone) {\n            return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n        },\n\n        update: function(eventInfo) {\n            for (var field in eventInfo) {\n                this.set(field, eventInfo[field]);\n            }\n\n            if (this._startTime) {\n                this.set(\"_startTime\", kendo.date.toUtcTime(this.start));\n            }\n\n            if (this._endTime) {\n                this.set(\"_endTime\", kendo.date.toUtcTime(this.end));\n            }\n        },\n\n        isMultiDay: function() {\n            return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n        },\n\n        isException: function() {\n            return !this.isNew() && this.recurrenceId;\n        },\n\n        isOccurrence: function() {\n            return this.isNew() && this.recurrenceId;\n        },\n\n        isRecurring: function() {\n            return !!(this.recurrenceRule || this.recurrenceId);\n        },\n\n        isRecurrenceHead: function() {\n            return !!(this.id && this.recurrenceRule);\n        },\n\n        toOccurrence: function(options) {\n            options = $.extend(options, {\n                recurrenceException: null,\n                recurrenceRule: null,\n                recurrenceId: this.id || this.recurrenceId\n            });\n\n            options[this.idField] = this.defaults[this.idField];\n\n            return this.clone(options, true);\n        },\n\n        toJSON: function() {\n            var obj = kendo.data.Model.fn.toJSON.call(this);\n            obj.uid = this.uid;\n\n            delete obj._startTime;\n            delete obj._endTime;\n\n            return obj;\n        },\n\n        shouldSerialize: function(field) {\n            return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== \"_defaultId\";\n        },\n\n        set: function(key, value) {\n            var isAllDay = this.isAllDay || false;\n\n            kendo.data.Model.fn.set.call(this, key, value);\n\n            if (key == \"isAllDay\" && value != isAllDay) {\n                var start = kendo.date.getDate(this.start);\n                var end = new Date(this.end);\n                var milliseconds = kendo.date.getMilliseconds(end);\n\n                if (milliseconds === 0 && value) {\n                    milliseconds = MS_PER_DAY;\n                }\n\n                this.set(\"start\", start);\n\n                if (value === true) {\n                    kendo.date.setTime(end, -milliseconds);\n\n                    if (end < start) {\n                        end = start;\n                    }\n                } else {\n                    kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                }\n\n                this.set(\"end\", end);\n            }\n        },\n        id: \"id\",\n        fields: {\n            id: { type: \"number\" },\n            title: { defaultValue: \"\", type: \"string\" },\n            start: { type: \"date\", validation: { required: true, validDate: { value: validDateValidator } } },\n            startTimezone: { type: \"string\" },\n            end: {\n                type: \"date\",\n                validation: {\n                    required: true,\n                    validDate: { value: validDateValidator },\n                    dateCompare: { value: dateCompareValidator }\n                }\n            },\n            endTimezone: { type: \"string\" },\n            recurrenceRule: {\n                defaultValue: \"\",\n                type: \"string\",\n                validation: {\n                    validDate: { value: validDateValidator },\n                    untilDateCompare: { value: untilDateCompareValidator }\n                }\n            },\n            recurrenceException: { defaultValue: \"\", type: \"string\" },\n            isAllDay: { type: \"boolean\", defaultValue: false },\n            description: { type: \"string\" }\n        }\n    });\n\n    var SchedulerDataSource = DataSource.extend({\n        init: function(options) {\n\n            DataSource.fn.init.call(this, extend(true, {}, {\n                schema: {\n                    modelBase: SchedulerEvent,\n                    model: SchedulerEvent\n                }\n            }, options));\n\n            this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n        },\n\n        expand: function(start, end) {\n            var data = this.view(),\n                filter = {},\n                endOffset;\n\n            if (start && end) {\n                endOffset = end.getTimezoneOffset();\n                end = new Date(end.getTime() + MS_PER_DAY - 1);\n\n                if (end.getTimezoneOffset() !== endOffset) {\n                    end = kendo.timezone.apply(end, endOffset);\n                }\n\n                filter = {\n                    logic: \"or\",\n                    filters: [\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"gte\", value: start },\n                                { field: \"end\", operator: \"gte\", value: start },\n                                { field: \"start\", operator: \"lte\", value: end }\n                            ]\n                        },\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"lte\", value: new Date(start.getTime() + MS_PER_DAY - 1) },\n                                { field: \"end\", operator: \"gte\", value: start }\n                            ]\n                        }\n                    ]\n                };\n\n                data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n            }\n\n            return data;\n        },\n\n        cancelChanges: function(model) {\n            if (model && model.isOccurrence()) {\n                this._removeExceptionDate(model);\n            }\n\n            DataSource.fn.cancelChanges.call(this, model);\n        },\n\n        insert: function(index, model) {\n            if (!model) {\n                return;\n            }\n\n            if (!(model instanceof SchedulerEvent)) {\n                var eventInfo = model;\n\n                model = this._createNewModel();\n                model.accept(eventInfo);\n            }\n\n            if ((!this._pushCreated && model.isRecurrenceHead()) || model.recurrenceId) {\n                model = model.recurrenceId ? model : model.toOccurrence();\n                this._addExceptionDate(model);\n            }\n\n            return DataSource.fn.insert.call(this, index, model);\n        },\n\n        pushCreate: function(items) {\n            this._pushCreated = true;\n            DataSource.fn.pushCreate.call(this, items);\n            this._pushCreated = false;\n        },\n\n        remove: function(model) {\n            if (model.isRecurrenceHead()) {\n                this._removeExceptions(model);\n            } else if (model.isRecurring()) {\n                this._addExceptionDate(model);\n            }\n\n            return DataSource.fn.remove.call(this, model);\n        },\n\n        _removeExceptions: function(model) {\n            var data = this.data().slice(0),\n                item = data.shift(),\n                id = model.id;\n\n            while (item) {\n                if (item.recurrenceId === id) {\n                    DataSource.fn.remove.call(this, item);\n                }\n\n                item = data.shift();\n            }\n\n            model.set(RECURRENCE_EXCEPTION, \"\");\n        },\n\n        _removeExceptionDate: function(model) {\n            if (model.recurrenceId) {\n                var head = this.get(model.recurrenceId);\n\n                if (head) {\n                    var start = model.defaults.start;\n                    var replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                    var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n                    if (replaceRegExp.test(recurrenceException)) {\n                        head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                    } else {\n                        start = model.start;\n                        replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                        head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                    }\n                }\n            }\n        },\n\n        _addExceptionDate: function(model) {\n            var start = model.start;\n            var zone = this.reader.timezone;\n            var head = this.get(model.recurrenceId);\n            var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n            if (!recurrence.isException(recurrenceException, start, zone)) {\n                var newException = recurrence.toExceptionString(start, zone);\n                model.defaults.start = start;\n                head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : \"\") + newException);\n            }\n        }\n    });\n\n    function expandAll(events, start, end, zone) {\n        var length = events.length,\n            data = [],\n            idx = 0;\n\n        for (; idx < length; idx++) {\n            data = data.concat(events[idx].expand(start, end, zone));\n        }\n\n        return data;\n    }\n\n    SchedulerDataSource.create = function(options) {\n        if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n            options = { data: options };\n        }\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        dataSource.data = data;\n\n        if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n            throw new Error(\"Incorrect DataSource type. Only SchedulerDataSource instances are supported\");\n        }\n\n        return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n    };\n\n    extend(true, kendo.data, {\n       SchedulerDataSource: SchedulerDataSource,\n       SchedulerDataReader: SchedulerDataReader,\n       SchedulerEvent: SchedulerEvent\n    });\n\n    var defaultCommands = {\n        update: {\n            text: \"Save\",\n            className: \"k-button-solid-primary k-scheduler-update\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-scheduler-cancel\"\n        },\n        destroy: {\n            text: \"Delete\",\n            imageClass: \"k-i-close\",\n            className: \"k-button-solid-primary k-scheduler-delete\",\n            iconClass: \"k-icon\"\n        }\n    };\n\n    function trimOptions(options, overrideOptions) {\n        delete options.name;\n        delete options.prefix;\n\n        delete options.remove;\n        delete options.edit;\n        delete options.add;\n        delete options.navigate;\n\n        for (var key in overrideOptions) {\n            options[key] = overrideOptions[key];\n        }\n\n        return options;\n    }\n\n    /*\n    function fieldType(field) {\n        field = field != null ? field : \"\";\n        return field.type || kendo.type(field) || \"string\";\n    }\n    */\n\n    function descriptionEditor(options) {\n        var attr = createValidationAttributes(options.model, options.field);\n\n        return function(container, model) {\n            $('<textarea name=\"description\" class=\"k-input-inner\" title=\"' + model.title + '\"/>').attr(attr)\n                .appendTo(container)\n                .wrap('<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"></span>');\n        };\n    }\n\n    function createValidationAttributes(model, field) {\n        var modelField = (model.fields || model)[field];\n        var specialRules = [\"url\", \"email\", \"number\", \"date\", \"boolean\"];\n        var validation = modelField ? modelField.validation : {};\n        // var type = fieldType(modelField);\n        var datatype = kendo.attr(\"type\");\n        var inArray = $.inArray;\n        var ruleName;\n        var rule;\n\n        var attr = {};\n\n        for (ruleName in validation) {\n            rule = validation[ruleName];\n\n            if (inArray(ruleName, specialRules) >= 0) {\n                attr[datatype] = ruleName;\n            } else if (!kendo.isFunction(rule)) {\n                attr[ruleName] = isPlainObject(rule) ? (rule.value || ruleName) : rule;\n            }\n\n            attr[kendo.attr(ruleName + \"-msg\")] = rule.message;\n        }\n\n        return attr;\n    }\n\n    function filterResourceEditorData(editor, parentValue, parentValueField, valueField) {\n        var editorValue = editor.value(),\n            isMs = Array.isArray(editorValue),\n            valueArray;\n\n        if (isMs) {\n            valueArray = JSON.parse(JSON.stringify(editorValue));\n        } else {\n            valueArray = [editorValue.toString()];\n        }\n\n        editor.dataSource.data().forEach(function(item) {\n            if (item[parentValueField] === null || item[parentValueField] === undefined$1 || item[parentValueField] == parentValue) {\n                item.set(DISABLED, false);\n            } else {\n                var currentValue = item.get(valueField);\n\n                item.set(DISABLED, true);\n\n                if (valueArray.indexOf(currentValue) >= 0 || valueArray.indexOf(currentValue.toString()) >= 0) {\n                    if (isMs) {\n                        valueArray.splice(valueArray.indexOf(currentValue), 1);\n                    } else {\n                        editor.value(null);\n                        editor.trigger(CHANGE);\n                    }\n                }\n            }\n        });\n\n        if (isMs && valueArray.length < editorValue.length) {\n            editor.value(valueArray);\n            editor.trigger(CHANGE);\n        }\n    }\n\n    function bindParentValueChangeHandler(container, currentEditor, resource, parent) {\n        var parentElement = container.closest(\".k-edit-form-container\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n        var parentWidget = parentElement.getKendoDropDownList();\n\n        if (parentWidget) {\n            parentWidget.bind(CHANGE, function(ev) {\n                var parentValue = ev.sender.value();\n\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n            });\n        } else {\n            parentElement.on(CHANGE, function(ev) {\n                var parentValue = ev.target.value;\n\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n            });\n        }\n    }\n\n    function filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue) {\n        var options = currentEditor.find(OPTION),\n            editorValue = currentEditor.val(),\n            isMs = Array.isArray(editorValue),\n            valueArray;\n\n        if (isMs) {\n            valueArray = JSON.parse(JSON.stringify(editorValue));\n        } else {\n            valueArray = [editorValue];\n        }\n\n        resource.dataSource.view().forEach(function(item, index) {\n            var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n            var valid = itemParentValue === null || itemParentValue === undefined$1 || itemParentValue == parentSelectedValue;\n\n            if (valid) {\n                options[index].removeAttribute(DISABLED);\n            } else {\n                options[index].setAttribute(DISABLED, DISABLED);\n\n                var currentValue = \"\" + item.get(resource.dataValueField);\n\n                if (valueArray.indexOf(currentValue) >= 0) {\n                    if (isMs) {\n                        valueArray.splice(valueArray.indexOf(currentValue), 1);\n                    } else {\n                        currentEditor.val(null);\n                        currentEditor.trigger(CHANGE);\n                    }\n                }\n            }\n        });\n\n        if (isMs && valueArray.length < editorValue.length) {\n            currentEditor.val(valueArray);\n            currentEditor.trigger(CHANGE);\n        }\n    }\n\n    function dropDownResourceEditor(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var currentEditor;\n\n            if (parent) {\n                setTimeout(function() {\n                    filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                    bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n            }\n\n            currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field))\n                .appendTo(container)\n                .attr(attr)\n                .kendoDropDownList({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    optionLabel: \"None\",\n                    template: kendo.format('<span #= data.disabled ? \"data-disabled\": \"\"#><span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#</span>', resource.dataColorField, resource.dataTextField),\n                    select: function(e) {\n                        if (e.dataItem && e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function(e) {\n                        var options = e.sender.list.find('li');\n\n                        options.each(function(i, el) {\n                            var element = $(el);\n\n                            if (element.find(\"[data-disabled]\").length > 0) {\n                                element.addClass(\"k-disabled\");\n                            }\n                        });\n                    }\n                }).data(\"kendoDropDownList\");\n       };\n    }\n\n    function dropDownResourceEditorMobile(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var options = \"\";\n            var view = resource.dataSource.view();\n\n            for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>',\n                    kendo.getter(resource.dataValueField)(view[idx]),\n                    kendo.getter(resource.dataTextField)(view[idx])\n                );\n            }\n\n            var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">{2}</select>',\n                kendo.ns,\n                resource.field,\n                options\n            ))\n            .appendTo(container)\n            .attr(attr);\n\n            if (parent) {\n                setTimeout(function() {\n                    var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                    var parentSelectedValue = model[parent];\n\n                    filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                    parentElement.on(CHANGE, function(ev) {\n                        var parentValue = ev.target.value;\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                    });\n                });\n            }\n       };\n    }\n\n    function multiSelectResourceEditor(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var currentEditor;\n\n            if (parent) {\n                setTimeout(function() {\n                    filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                    bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n            }\n\n            currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">', kendo.ns, resource.field))\n                .appendTo(container)\n                .attr(attr)\n                .kendoMultiSelect({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    itemTemplate: kendo.format('<span #= data.disabled ? \"data-disabled\": \"\" #><span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#</span>', resource.dataColorField, resource.dataTextField),\n                    tagTemplate: kendo.format('<span class=\"k-scheduler-mark\" style=\"background-color:#= data.{0}?{0}:\"none\" #\"></span>#={1}#', resource.dataColorField, resource.dataTextField),\n                    select: function(e) {\n                        if (e.dataItem && e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function(e) {\n                        var options = e.sender.list.find('li');\n\n                        options.each(function(i, el) {\n                            var element = $(el);\n\n                            if (element.find(\"[data-disabled]\").length > 0) {\n                                element.addClass(\"k-disabled\");\n                            }\n                        });\n                    }\n                }).data(\"kendoMultiSelect\");\n       };\n    }\n\n    function multiSelectResourceEditorMobile(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var options = \"\";\n            var view = resource.dataSource.view();\n\n            for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>',\n                    kendo.getter(resource.dataValueField)(view[idx]),\n                    kendo.getter(resource.dataTextField)(view[idx])\n                );\n            }\n\n            var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" multiple=\"multiple\">{2}</select>',\n                kendo.ns,\n                resource.field,\n                options\n            ))\n            .appendTo(container)\n            .attr(attr);\n\n            if (parent) {\n                setTimeout(function() {\n                    var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                    var parentSelectedValue = model[parent];\n\n                    filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                    parentElement.on(CHANGE, function(ev) {\n                        var parentValue = ev.target.value;\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                    });\n                });\n            }\n       };\n    }\n\n    function moveEventRange(event, distance) {\n        var duration = event.end.getTime() - event.start.getTime();\n\n        var start = new Date(event.start.getTime());\n\n        kendo.date.setTime(start, distance);\n\n        var end = new Date(start.getTime());\n\n        kendo.date.setTime(end, duration, true);\n\n        return {\n            start: start,\n            end: end\n        };\n    }\n\n    var editors = {\n        mobile: {\n            dateRange: MOBILEDATERANGEEDITOR,\n            timezonePopUp: MOBILETIMEZONEPOPUP,\n            timezone: MOBILETIMEZONEEDITOR,\n            recurrence: MOBILERECURRENCEEDITOR,\n            description: descriptionEditor,\n            multipleResources: multiSelectResourceEditorMobile,\n            resources: dropDownResourceEditorMobile,\n            isAllDay: MOBILEISALLDAYEDITOR\n        },\n        desktop: {\n            dateRange: DATERANGEEDITOR,\n            timezonePopUp: TIMEZONEPOPUP,\n            timezone: TIMEZONEEDITOR,\n            recurrence: RECURRENCEEDITOR,\n            description: descriptionEditor,\n            multipleResources: multiSelectResourceEditor,\n            resources: dropDownResourceEditor,\n            isAllDay: ISALLDAYEDITOR\n        }\n    };\n\n    var Editor = kendo.Observable.extend({\n        init: function(element, options) {\n\n            kendo.Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n            this.createButton = this.options.createButton;\n\n            this.toggleDateValidationHandler = this._toggleDateValidation.bind(this);\n        },\n\n        _toggleDateValidation: function(e) {\n            if (e.field == \"isAllDay\") {\n                var container = this.container,\n                    isAllDay = this.editable.options.model.isAllDay,\n                    bindAttribute = kendo.attr(\"bind\"),\n                    element, isDateTimeInput, shouldValidate;\n                container.find(\"[\" + bindAttribute + \"*=end],[\" + bindAttribute + \"*=start]\").each(function() {\n                    element = $(this);\n                    if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                        isDateTimeInput = element.is(\"[\" + kendo.attr(\"role\") + \"=datetimepicker],[type*=datetime]\");\n                        shouldValidate = isAllDay !== isDateTimeInput;\n                        element.attr(kendo.attr(\"validate\"), shouldValidate);\n                    }\n                });\n            }\n        },\n\n        fields: function(editors, model) {\n            var that = this;\n            var messages = that.options.messages;\n            var timezone = that.options.timezone;\n\n            var click = function(e) {\n                e.preventDefault();\n                that._initTimezoneEditor(model, this);\n            };\n\n            var fields = [\n                { field: \"title\", title: messages.editor.title /*, format: field.format, editor: field.editor, values: field.values*/ },\n                { field: \"start\", title: messages.editor.start, editor: editors.dateRange, timezone: timezone },\n                { field: \"end\", title: messages.editor.end, editor: editors.dateRange, timezone: timezone },\n                { field: \"isAllDay\", title: messages.editor.allDayEvent, editor: editors.isAllDay }\n            ];\n\n            var checkHierarchical = function(item) {\n                return !!item[resource.dataParentValueField];\n            };\n\n            if (kendo.timezone.windows_zones) {\n                fields.push({ field: \"timezone\", title: messages.editor.timezone, editor: editors.timezonePopUp, click: click, messages: messages.editor, model: model });\n                fields.push({ field: \"startTimezone\", title: messages.editor.startTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n                fields.push({ field: \"endTimezone\", title: messages.editor.endTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n            }\n\n            if (!model.recurrenceId) {\n                fields.push({ field: \"recurrenceRule\", title: messages.editor.repeat, editor: editors.recurrence, timezone: timezone, messages: messages.recurrenceEditor, pane: this.pane });\n            }\n\n            if (\"description\" in model) {\n                fields.push({ field: \"description\", title: messages.editor.description, editor: editors.description({ model: model, field: \"description\" }) });\n            }\n\n            for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                var resource = this.options.resources[resourceIndex];\n                var resourceView = resource.dataSource.view();\n                var hasParent = resourceView.some(checkHierarchical);\n                var parentResource, parent;\n\n                if (hasParent) {\n                    parentResource = this.options.resources[resourceIndex - 1];\n\n                    if (parentResource) {\n                        parent = parentResource.field;\n                    }\n                }\n\n                fields.push({\n                    field: resource.field,\n                    title: resource.title,\n                    editor: resource.multiple ? editors.multipleResources(resource, model, parent) : editors.resources(resource, model, parent)\n                });\n            }\n\n            return fields;\n        },\n\n        end: function() {\n            return this.editable.end();\n        },\n\n        _buildDesktopEditTemplate: function(model, fields, editableFields) {\n            var messages = this.options.messages;\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var html = \"\";\n\n            html += '<div class=\"k-form\">';\n\n            for (var idx = 0, length = fields.length; idx < length; idx++) {\n                var field = fields[idx];\n\n                if (field.field === \"startTimezone\") {\n                    html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                    html += '<div class=\"k-form\">';\n                    html += '<div class=\"k-form-field\"><div class=\"k-form-field-wrap\">' + kendo.html.renderCheckBox($('<input class=\"k-timezone-toggle\"/>'), { label: messages.editor.separateTimezones }) + '</div></div>';\n                }\n\n                if (model.fields[field.field] && model.fields[field.field].type === \"boolean\") {\n                    html += '<div class=\"k-form-field\">';\n                } else {\n                    html += '<div class=\"k-form-field\"><label class=\"k-label k-form-label\" for=\"' + field.field + '\" id=\"' + field.field + '_label\">' + (field.title || field.field || \"\") + '</label>';\n                }\n\n                if ((!model.editable || model.editable(field.field))) {\n                    editableFields.push(field);\n                    html += '<div ' + kendo.attr(\"container-for\") + '=\"' + field.field + '\" class=\"k-form-field-wrap\"></div>';\n                } else {\n                    var tmpl = \"#:\";\n\n                    if (field.field) {\n                        field = kendo.expr(field.field, paramName);\n                        tmpl += field + \"==null?'':\" + field;\n                    } else {\n                        tmpl += \"''\";\n                    }\n\n                    tmpl += \"#\";\n\n                    tmpl = kendo.template(tmpl, settings);\n\n                    html += '<div class=\"k-form-field-wrap\">' + tmpl(model) + '</div>';\n                }\n\n                html += \"</div>\";\n\n                if (field.field === \"endTimezone\") {\n                    html += this._createEndTimezoneButton();\n                }\n            }\n\n            html += '</div>';\n\n            return html;\n        },\n\n        _buildMobileEditTemplate: function(model, fields, editableFields) {\n            var messages = this.options.messages;\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var html = \"\";\n\n            html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n\n            for (var idx = 0, length = fields.length; idx < length; idx++) {\n                var field = fields[idx];\n\n                if (field.field === \"timezone\" || field.field === \"recurrenceRule\") {\n                    html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                }\n\n                if (field.field === \"startTimezone\") {\n                    html += '<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" style=\"display:none\">';\n                    html += '<ul class=\"k-listgroup k-listgroup-flush\">';\n                    html += '<li class=\"k-item k-listgroup-item\">';\n                    html += '<label class=\"k-label k-listgroup-form-row\">';\n                    html += '<span class=\"k-item-title k-listgroup-form-row\">' + messages.editor.separateTimezones + '</span>';\n                    html += '<span class=\"k-listgroup-form-field-wrapper\">';\n                    html += '<input class=\"k-timezone-toggle\" data-role=\"switch\" type=\"checkbox\" />';\n                    html += '</span>';\n                    html += '</label>';\n                    html += '</li>';\n                }\n\n                if ((!model.editable || model.editable(field.field))) {\n                    html += '<li class=\"k-item k-listgroup-item\">';\n                    if (field.field === \"timezone\") {\n                        html += '<label class=\"k-label k-listgroup-form-row\" data-bind=\"css: { k-disabled: isAllDay }\">';\n                    } else {\n                        html += '<label class=\"k-label k-listgroup-form-row\">';\n                    }\n                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || \"\") + '</span>';\n\n                    editableFields.push(field);\n                    html += '<div class=\"k-listgroup-form-field-wrapper\" ' + kendo.attr(\"container-for\") + '=\"' + field.field + '\"></div>';\n\n                    html += '</label></li>';\n                } else {\n                    var tmpl = \"#:\";\n\n                    html += '<li class=\"k-item k-listgroup-item\">';\n                    html += '<label class=\"k-label k-no-click k-listgroup-form-row\">';\n                    html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (field.title || field.field || \"\") + '</span>';\n\n                    if (field.field) {\n                        field = kendo.expr(field.field, paramName);\n                        tmpl += field + \"==null?'':\" + field;\n                    } else {\n                        tmpl += \"''\";\n                    }\n\n                    tmpl += \"#\";\n\n                    tmpl = kendo.template(tmpl, settings);\n\n                    html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n\n                    html += '</label></li>';\n                }\n\n                if (field.field === \"recurrenceRule\") {\n                    html += '</ul><ul class=\"k-listgroup k-listgroup-flush\">';\n                }\n\n                if (field.field === \"endTimezone\") {\n                    html += \"</ul></div>\";\n                }\n            }\n            html += '</ul>';\n\n            return html;\n        },\n\n        _buildEditTemplate: function(model, fields, editableFields, isMobile) {\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var template = this.options.editable.template;\n            var html = \"\";\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n                html += (kendo.template(template, settings))(model);\n            } else if (isMobile) {\n                html += '<div data-role=\"content\">' + this._buildMobileEditTemplate(model, fields, editableFields) + '</div>';\n            } else {\n                html += this._buildDesktopEditTemplate(model, fields, editableFields);\n            }\n\n            return html;\n        },\n\n        _createEndTimezoneButton: function() {\n            return '</ul></div>';\n        },\n\n        _revertTimezones: function(model) {\n            model.set(\"startTimezone\", this._startTimezone);\n            model.set(\"endTimezone\", this._endTimezone);\n\n            delete this._startTimezone;\n            delete this._endTimezone;\n        }\n    });\n\n    var MobileEditor = Editor.extend({\n        init: function() {\n            Editor.fn.init.apply(this, arguments);\n\n            this.pane = kendo.Pane.wrap(this.element, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n            this.pane.element.parent().css(\"height\", this.options.height);\n            this.view = this.pane.view();\n        },\n\n        options: {\n            animations: {\n                left: \"slide\",\n                right: \"slide:right\"\n            }\n        },\n\n        destroy: function() {\n            this.close();\n            this.unbind();\n            this.pane.destroy();\n        },\n\n        _initTimezoneEditor: function(model) {\n            var that = this;\n            var pane = that.pane;\n            var messages = that.options.messages;\n            var timezoneView = that.timezoneView;\n            var container = timezoneView ? timezoneView.content.find(\".k-scheduler-timezones\") : that.container.find(\".k-scheduler-timezones\");\n            var kSwitch = container.find(\"input.k-timezone-toggle\").data(\"kendoSwitch\");\n            var endTimezoneRow = container.find(\"li.k-item:not(.k-zonepicker)\").last();\n            var startTimezoneChange = function(e) {\n                if (e.field === \"startTimezone\") {\n                    var value = model.startTimezone;\n\n                    kSwitch.enable(value);\n\n                    if (!value) {\n                        endTimezoneRow.hide();\n                        model.set(\"endTimezone\", \"\");\n                        kSwitch.value(false);\n                    }\n                }\n            };\n\n            that._startTimezone = model.startTimezone || \"\";\n            that._endTimezone = model.endTimezone || \"\";\n\n            if (!timezoneView) {\n                var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\">' +\n                '<div data-role=\"header\" class=\"k-header\">' +\n                    '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + messages.cancel + '\"' +\n                    'aria-label=\"' + messages.cancel + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' +\n                    messages.editor.timezoneTitle +\n                    '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + messages.save + '\" ' +\n                    'aria-label=\"' + messages.save + '\"><span class=\"k-icon k-i-check\"></span></a>' +\n                '</div><div data-role=\"content\"></div>';\n\n                this.timezoneView = timezoneView = pane.append(html);\n\n                timezoneView.contentElement.append(container.show());\n\n                timezoneView.element.on(CLICK + NS, \".k-scheduler-cancel, .k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    if ($(this).hasClass(\"k-scheduler-cancel\")) {\n                        that._revertTimezones(model);\n                    }\n\n                    var editView = that._editPane;\n\n                    var text = timezoneButtonText(model, messages.editor.noTimezone);\n\n                    editView.content.find(\".k-timezone-label\").text(text);\n\n                    pane.navigate(editView, that.options.animations.right);\n                });\n\n                kSwitch.bind(CHANGE, function(ev) {\n                    endTimezoneRow.toggle(ev.checked);\n                    model.set(\"endTimezone\", \"\");\n                });\n                model.bind(CHANGE, startTimezoneChange);\n            }\n\n            kSwitch.value(!!model.endTimezone);\n            kSwitch.enable(!!model.startTimezone);\n\n            if (model.endTimezone) {\n                endTimezoneRow.show();\n            } else {\n                endTimezoneRow.hide();\n            }\n\n            pane.navigate(timezoneView, that.options.animations.left);\n        },\n\n        showDialog: function(options) {\n            var actions = options.buttons.map(function(button) {\n                return {\n                    text: button.text,\n                    action: button.click\n                };\n            });\n\n            actions.push({\n                text: this.options.messages.cancel,\n                primary: true\n            });\n\n            $(\"<div />\").appendTo(document.body)\n                .kendoDialog({\n                    close: function() {\n                        this.destroy();\n                    },\n                    modal: {\n                        preventScroll: true\n                    },\n                    closable: false,\n                    title: false,\n                    content: options.text,\n                    actions: actions\n                });\n        },\n\n        editEvent: function(model) {\n            var pane = this.pane;\n            var html = \"\";\n\n            var messages = this.options.messages;\n            var updateText = messages.save;\n            var removeText = messages.destroy;\n            var cancelText = messages.cancel;\n            var titleText = messages.editor.editorTitle;\n            var resetSeries = messages.resetSeries;\n\n            html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\"' + kendo.attr(\"uid\") + '=\"' + model.uid + '\">' +\n                '<div data-role=\"header\" class=\"k-header\">' +\n                    '<a href=\"\\\\#\" class=\"k-header-cancel k-scheduler-cancel k-link\" title=\"' + cancelText + '\"' +\n                    'aria-label=\"' + cancelText + '\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' +\n                    titleText +\n                    '<a href=\"\\\\#\" class=\"k-header-done k-scheduler-update k-link\" title=\"' + updateText + '\" ' +\n                    'aria-label=\"' + updateText + '\"><span class=\"k-icon k-i-check\"></span></a>' +\n                '</div>';\n\n            var fields = this.fields(editors.mobile, model);\n\n            var that = this;\n\n            var editableFields = [];\n\n            html += this._buildEditTemplate(model, fields, editableFields, true);\n\n            html += \"</div>\";\n\n            var view = pane.append(html);\n\n            if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                var resetSeriesBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-resetSeries k-link k-label\" aria-label=\"' + resetSeries + '\">' + resetSeries + '</span></li></ul>';\n                view.contentElement.append(resetSeriesBtn);\n            }\n\n            if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                var deleteBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-delete k-link k-label\" aria-label=\"' + removeText + '\">' + removeText + '</span></li></ul>';\n                view.contentElement.append(deleteBtn);\n            }\n\n            this._editPane = view;\n\n            var container = this.container = view.element;\n\n            this.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                target: that.options.target,\n                validateOnBlur: true\n            }).data(\"kendoEditable\");\n\n            if (!this.trigger(\"edit\", { container: container, model: model })) {\n\n                container.on(CLICK + NS, \"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    var button = $(this);\n\n                    if (!button.hasClass(\"k-scheduler-edit\")) {\n\n                        var name = \"cancel\";\n\n                        if (button.hasClass(\"k-scheduler-update\")) {\n                            name = \"save\";\n                        } else if (button.hasClass(\"k-scheduler-delete\")) {\n                            name = \"remove\";\n                        } else if (button.hasClass(\"k-scheduler-resetSeries\")) {\n                            name = RESET;\n                        }\n\n                        that.trigger(name, { container: container, model: model });\n                    } else {\n                        pane.navigate(this._editPane, that.options.animations.right);\n                    }\n                });\n\n                pane.navigate(view, that.options.animations.left);\n\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n            } else {\n                this.trigger(\"cancel\", { container: container, model: model });\n            }\n\n            return this.editable;\n        },\n\n        _views: function() {\n            return this.pane.element\n                    .find(kendo.roleSelector(\"view\"))\n                    .not(this.view.element);\n        },\n\n        close: function() {\n            if (this.container) {\n                this.pane.navigate(\"\", this.options.animations.right);\n\n                var views = this._views();\n                var view;\n\n                for (var idx = 0, length = views.length; idx < length; idx++) {\n                    view = views.eq(idx).data(\"kendoView\");\n                    if (view) {\n                       view.purge();\n                    }\n                }\n\n                views.remove();\n\n                this.container = null;\n                if (this.editable) {\n                    this.editable.options.model.unbind(CHANGE, this.toggleDateValidationHandler);\n                    this.editable.destroy();\n                    this.editable = null;\n                }\n                this.timezoneView = null;\n            }\n        }\n    });\n\n    var PopupEditor = Editor.extend({\n        destroy: function() {\n            this.close();\n            this.unbind();\n        },\n\n        editEvent: function(model) {\n            var that = this;\n            var editable = that.options.editable;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n            var messages = that.options.messages;\n            var updateText = messages.save;\n            var cancelText = messages.cancel;\n            var deleteText = messages.destroy;\n            var resetSeries = messages.resetSeries;\n            var fields = this.fields(editors.desktop, model);\n            var editableFields = [];\n            var fieldName;\n\n            html += this._buildEditTemplate(model, fields, editableFields, false);\n\n            var attr;\n            var options = isPlainObject(editable) ? editable.window : {};\n\n            html += '<div class=\"k-edit-buttons\">';\n            html += this.createButton({ name: \"update\", text: updateText, attr: attr }) + this.createButton({ name: \"canceledit\", text: cancelText, attr: attr });\n\n            if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                html += this.createButton({ name: \"resetSeries\", text: resetSeries, attr: attr });\n            }\n\n            if ((!model.isNew() || model.isRecurring()) && editable.destroy !== false) {\n                html += this.createButton({ name: \"delete\", text: deleteText, attr: attr });\n            }\n\n            html += '</div></div></div>';\n\n            var container = this.container = $(html)\n                .appendTo(that.element).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(CANCEL, { container: container, model: model })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n\n            that.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                validateOnBlur: true,\n                target: that.options.target\n            }).data(\"kendoEditable\");\n\n            for (var field in editableFields) {\n                if (editableFields[field].field !== \"recurrenceRule\") {\n                    fieldName = editableFields[field].field;\n                    container.find(\"[name='\" + fieldName + \"']\").attr(\"aria-labelledby\", fieldName + \"_label\");\n                }\n\n                if (editableFields[field].field === \"isAllDay\") {\n                    container.find(\"label[for='\" + fieldName + \"']\").attr(\"id\", fieldName + \"_label\");\n                }\n            }\n\n            if (!that.trigger(EDIT, { container: container, model: model })) {\n\n                container.data(\"kendoWindow\").center().open();\n\n                container.on(CLICK + NS, \"button.k-scheduler-cancel\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(CANCEL, { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(\"save\", { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-delete\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(REMOVE, { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-resetSeries\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    that.trigger(RESET, { container: container, model: model });\n                });\n\n                kendo.cycleForm(container);\n\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n            } else {\n                that.trigger(CANCEL, { container: container, model: model });\n            }\n\n            return that.editable;\n        },\n\n        close: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n                    that.editable.options.model.unbind(CHANGE, that.toggleDateValidationHandler);\n                    that.editable.destroy();\n                    that.editable = null;\n                    that.container = null;\n                }\n                if (that.popup) {\n                    that.popup.destroy();\n                    that.popup = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._timezonePopup && that._timezonePopup.data(\"kendoWindow\")) {\n                    that._timezonePopup.data(\"kendoWindow\").destroy();\n                    that._timezonePopup = null;\n                }\n\n                if (that.container.is(\":visible\")) {\n                    that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                } else {\n                    destroy();\n                }\n            } else {\n                destroy();\n            }\n        },\n\n        _createEndTimezoneButton: function() {\n            var messages = this.options.messages;\n            var html = \"\";\n\n            html += '<div class=\"k-edit-buttons\">';\n            html += this.createButton({ name: \"savetimezone\", text: messages.save }) + this.createButton({ name: \"canceltimezone\", text: messages.cancel });\n            html += '</div></div></div>';\n\n            return html;\n        },\n\n        showDialog: function(options) {\n            var html = kendo.format(\"<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>\", options.text);\n\n            html += '<div class=\"k-edit-buttons\">';\n\n            for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                html += this.createButton(options.buttons[buttonIndex]);\n            }\n\n            html += '</div></div></div>';\n\n            var wrapper = this.element;\n\n            if (this.popup) {\n                this.popup.destroy();\n            }\n\n            var popup = this.popup = $(html).appendTo(wrapper)\n                               .eq(0)\n                               .on(CLICK, \".k-button\", function(e) {\n                                    e.preventDefault();\n\n                                    popup.close();\n\n                                    var buttonIndex = $(e.currentTarget).index();\n\n                                    options.buttons[buttonIndex].click();\n                               })\n                               .kendoWindow({\n                                   modal: true,\n                                   resizable: false,\n                                   draggable: false,\n                                   title: options.title,\n                                   visible: false,\n                                   close: function() {\n                                       this.destroy();\n                                       wrapper.trigger(\"focus\");\n                                   }\n                               })\n                               .getKendoWindow();\n\n            popup.center().open();\n        },\n\n        _initTimezoneEditor: function(model, activator) {\n            var that = this;\n            var container = that.container.find(\".k-scheduler-timezones\");\n            var checkbox = container.find(\"input.k-timezone-toggle\");\n            var endTimezoneRow = container.find(\".k-form-field\").last();\n            var saveButton = container.find(\".k-scheduler-savetimezone\");\n            var cancelButton = container.find(\".k-scheduler-canceltimezone\");\n            var timezonePopup = that._timezonePopup;\n            var startTimezoneChange = function(e) {\n                if (e.field === \"startTimezone\") {\n                    var value = model.startTimezone;\n\n                    checkbox.prop(DISABLED, !value);\n\n                    if (!value) {\n                        endTimezoneRow.hide();\n                        model.set(\"endTimezone\", \"\");\n                        checkbox.prop(\"checked\", false);\n                    }\n                }\n            };\n            var wnd;\n\n            that._startTimezone = model.startTimezone;\n            that._endTimezone = model.endTimezone;\n\n            if (!timezonePopup) {\n                that._timezonePopup = timezonePopup = container.kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.editor.timezoneEditorTitle,\n                    visible: false,\n                    close: function(e) {\n                        model.unbind(CHANGE, startTimezoneChange);\n\n                        if (e.userTriggered) {\n                            that._revertTimezones(model);\n                        }\n\n                        if (activator) {\n                            activator.focus();\n                        }\n                    }\n                });\n\n                checkbox.on(CLICK, function() {\n                    endTimezoneRow.toggle(checkbox.prop(\"checked\"));\n                    model.set(\"endTimezone\", \"\");\n                });\n\n                saveButton.on(CLICK, function(e) {\n                    e.preventDefault();\n                    wnd.close();\n                });\n\n                cancelButton.on(CLICK, function(e) {\n                    e.preventDefault();\n                    that._revertTimezones(model);\n                    wnd.close();\n                });\n\n                model.bind(CHANGE, startTimezoneChange);\n            }\n\n            checkbox.prop(\"checked\", model.endTimezone).prop(DISABLED, !model.startTimezone);\n\n            if (model.endTimezone) {\n                endTimezoneRow.show();\n            } else {\n                endTimezoneRow.hide();\n            }\n\n            wnd = timezonePopup.data(\"kendoWindow\");\n            wnd.center().open();\n        }\n    });\n\n    var Scheduler = DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (!that.options.views || !that.options.views.length) {\n                that.options.views = [\"day\", \"week\"];\n            }\n\n            that.resources = [];\n\n            that._initModel();\n\n            that._wrapper();\n\n            if (that.options.selectable) {\n                that._tabindex();\n            }\n\n            that._views();\n\n            that._toolbar();\n\n            that._dataSource();\n\n            that._resources();\n\n            that._resizeHandler = function() {\n                that.resize();\n            };\n\n            that.wrapper.on(MOUSEDOWN + NS + \" selectstart\" + NS, function(e) {\n                if (!$(e.target).is(\":kendoFocusable\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (that.options.editable && that.options.editable.resize !== false) {\n                that._resizable();\n            }\n\n            that._movable();\n\n            that._bindResize();\n\n            if (that.options.messages && that.options.messages.recurrence) {\n                recurrence.options = that.options.messages.recurrence;\n            }\n\n            that._navigation();\n            that._selectable();\n            that._touchHandlers();\n\n            that._ariaId = kendo.guid();\n\n            that._createEditor();\n        },\n\n        _bindResize: function() {\n            $(window).on(\"resize\" + NS, this._resizeHandler);\n        },\n\n        _unbindResize: function() {\n            $(window).off(\"resize\" + NS, this._resizeHandler);\n        },\n\n        dataItems: function() {\n            var that = this;\n            var items = that.items();\n            var events = that._data;\n            var eventsUids = $.map(items, function(item) {\n                return $(item).attr(\"data-uid\");\n            });\n            var i;\n            var key;\n\n            var dict = {};\n            var eventsUidsLength = eventsUids.length;\n            for (i = 0; i < eventsUidsLength; i++) {\n                dict[eventsUids[i]] = null;\n            }\n\n            var eventsCount = events.length;\n            for (i = 0; i < eventsCount; i++) {\n                var event = events[i];\n                if (dict[event.uid] !== undefined$1) {\n                    dict[event.uid] = event;\n                }\n            }\n\n            var sortedData = [];\n            for (key in dict) {\n                sortedData.push(dict[key]);\n            }\n\n            return sortedData;\n        },\n\n        _isMobile: function() {\n            var options = this.options;\n            return (options.mobile === true && kendo.support.mobileOS) || options.mobile === \"phone\" || options.mobile === \"tablet\";\n        },\n\n        _isTouch: function(event) {\n            return /touch/.test(event.type) || (event.originalEvent && /touch/.test(event.originalEvent.pointerType));\n        },\n\n        _isInverseColor: function(eventElement) {\n            return eventElement.hasClass(INVERSECOLORCLASS);\n        },\n\n        _groupsByResource: function(resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n            if (!groupsArray) {\n                groupsArray = [];\n            }\n\n            var resource = resources[0];\n            if (resource) {\n                var group;\n                var data = resource.dataSource.view();\n                var prevIndex = 0;\n\n                for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                    var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                    var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n\n                    group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                    group[resource.field] = fieldValue;\n                    prevIndex = group.groupIndex;\n\n                    if (parentField && parentFieldValue) {\n                        group[parentField] = parentFieldValue;\n                    }\n\n                    if (resources.length === 1) {\n                        group.groupIndex = groupIndex + dataIndex;\n                        groupsArray.push(group);\n                    }\n                }\n                return group;\n            } else {\n                return {};\n            }\n        },\n\n        data: function() {\n            return this._data;\n        },\n\n        select: function(options) {\n            var that = this;\n            var view = that.view();\n            var selection = that._selection;\n            var groups = view.groups;\n            var selectedGroups;\n\n            if (options === undefined$1) {\n                var selectedEvents;\n                var slots = view._selectedSlots;\n\n                if (!selection) {\n                    return [];\n                }\n\n                if (selection && selection.events) {\n                    selectedEvents = that._selectedEvents();\n                }\n\n                return {\n                    start: selection.start,\n                    end: selection.end,\n                    events: selectedEvents,\n                    slots: slots,\n                    resources: view._resourceBySlot(selection)\n                };\n            }\n\n            if (!options) {\n                that._selection = null;\n                that._old = null;\n                view.clearSelection();\n\n                return;\n            }\n\n            if (Array.isArray(options)) {\n                options = {\n                    events: options.splice(0)\n                };\n            }\n\n            if (options.resources) {\n                var fieldName;\n                var filters = [];\n                var groupsByResource = [];\n\n                if (view.groupedResources) {\n                    that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                }\n\n                for (fieldName in options.resources) {\n                    filters.push({ field: fieldName, operator: \"eq\", value: options.resources[fieldName] });\n                }\n\n                selectedGroups = new kendo.data.Query(groupsByResource)\n                    .filter(filters)\n                    .toArray();\n            }\n\n            if (options.events && options.events.length) {\n                that._selectEvents(options.events, selectedGroups);\n                that._select();\n\n                return;\n            }\n\n            if (groups && (options.start && options.end)) {\n                var rangeStart = getDate(view._startDate);\n                var rangeEnd = kendo.date.addDays(getDate(view._endDate),1);\n                var group;\n                var ranges;\n\n                if (options.start < rangeEnd && rangeStart <= options.end) {\n                    if (selectedGroups && selectedGroups.length) {\n                        group = groups[selectedGroups[0].groupIndex];\n                    } else {\n                        group = groups[0];\n                    }\n\n                    if (!group.timeSlotCollectionCount()) {\n                        options.isAllDay = true;\n                    }\n\n                    ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n\n                    if (ranges.length) {\n                        that._selection = {\n                            start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                            end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                            groupIndex: ranges[0].start.groupIndex,\n                            index: ranges[0].start.index,\n                            isAllDay: ranges[0].start.isDaySlot,\n                            events: []\n                        };\n\n                        that._select();\n                    }\n                }\n            }\n        },\n\n        _selectEvents: function(eventsUids, selectedGroups) {\n            var that = this;\n            var idx;\n            var view = that.view();\n            var groups = view.groups;\n            var eventsLength = eventsUids.length;\n            var isGrouped = selectedGroups && selectedGroups.length;\n            var ctrlKey = that._ctrlKey;\n\n            that._ctrlKey = true;\n\n            for (idx = 0; idx < eventsLength; idx++) {\n                if (groups && isGrouped) {\n                    var currentGroup = groups[selectedGroups[0].groupIndex];\n                    var events = [];\n                    var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                    var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n\n                    for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                        events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                    }\n\n                    for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                        events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                    }\n\n                    events = new kendo.data.Query(events)\n                        .filter({ field: \"element[0].getAttribute('data-uid')\", operator: \"eq\", value: eventsUids[idx] })\n                        .toArray();\n\n                    if (events[0]) {\n                        that._createSelection(events[0].element);\n                    }\n                } else {\n                    var element = view.element.find(kendo.format(\".k-event[data-uid={0}], .k-task[data-uid={0}]\", eventsUids[idx]));\n\n                    if (element.length) {\n                        that._createSelection(element[0]);\n                    }\n                }\n            }\n\n            that._ctrlKey = ctrlKey;\n        },\n\n        _touchHandlers: function() {\n            var that = this;\n            var startX;\n            var startY;\n            var endX;\n            var endY;\n            var timeStamp;\n            var wrapper = that.wrapper;\n            var touchMoveHandler = that._touchMove.bind(that);\n\n            wrapper.on(TOUCHSTART + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                var content = that.wrapper.find(\".k-scheduler-content\");\n\n                if (!that._isTouch(e)) {\n                    return;\n                }\n\n                content.stop(true, false);\n\n                that._touchPosX = startX = that._tapPosition(e, 'X');\n                that._touchPosY = startY = that._tapPosition(e, 'Y');\n                that._userTouched = true;\n                that.view()._scrolling = false;\n                timeStamp = Date.now();\n\n                wrapper.on(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", touchMoveHandler);\n            });\n\n            wrapper.on(\"contextmenu\" + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                that._preventFocus = true;\n            });\n\n            wrapper.on(TOUCHEND + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                if (!that._isTouch(e)) {\n                    return;\n                }\n\n                var delta = Date.now() - timeStamp;\n                var content = that.wrapper.find(\".k-scheduler-content\");\n                var amplitude = -that._amplitude * (3000 / delta);\n\n                endX = that._tapPosition(e, 'X');\n                endY = that._tapPosition(e, 'Y');\n\n                if (that._dragging) {\n                    return;\n                }\n\n                if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                    that._mouseDownSelection(e);\n                }\n\n                if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                    content.animate({\n                        scrollTop: content[0].scrollTop + amplitude\n                    });\n                }\n\n                wrapper.off(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", touchMoveHandler);\n            });\n        },\n\n        _navigation: function() {\n            var that = this,\n                wrapper = that.wrapper;\n\n            wrapper.on(\"focus\" + NS, function() {\n                var selection = that._selection;\n\n                setTimeout(function() {\n                    if (!that._preventFocus) {\n                        if ((!selection ||\n                                (selection.events.length > 0 && wrapper.find(\"[data-uid='\" + selection.events[0] + \"']\").length === 0)) &&\n                            !that._userTouched &&\n                            !that._mouseDown) {\n                                that._initialFocus();\n                        } else {\n                            that._mouseDown = false;\n                        }\n\n                        that._select();\n                    } else {\n                        that._preventFocus = false;\n                    }\n                }, 300);\n            });\n\n            wrapper.on(\"focusout\" + NS, function() {\n                that._ctrlKey = that._shiftKey = false;\n            });\n\n            wrapper.on(\"keydown\" + NS, that._keydown.bind(that));\n\n            wrapper.on(\"keyup\" + NS, function(e) {\n                that._ctrlKey = e.ctrlKey;\n                that._shiftKey = e.shiftKey;\n            });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            if (!that.options.selectable) {\n                return;\n            }\n\n            wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link\", function(e) {\n                if (that._isTouch(e)) {\n                    return;\n                }\n                that._mouseDownSelection(e);\n            });\n\n            var mouseMoveHandler = that._mouseMove.bind(that);\n\n            wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", function(e) {\n                var which = e.which;\n                var button = e.button;\n                var isRight = which && which === 3 || button && button == 2;\n\n                if (that._isTouch(e)) {\n                    return;\n                }\n\n                if (!isRight) {\n                    wrapper.on(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n                }\n            });\n\n            wrapper.on(\"mouseup\" + NS + \" mousecancel\" + NS, function() {\n                wrapper.off(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n            });\n        },\n\n        _mouseDownSelection: function(e) {\n            var which = e.which;\n            var button = e.button;\n            var isRight = which && which === 3 || button && button == 2;\n\n            if (!isRight) {\n                if (e.ctrlKey) {\n                    this._ctrlKey = e.ctrlKey;\n                }\n\n                if (e.shiftKey) {\n                    this._shiftKey = e.shiftKey;\n                }\n\n                this._mouseDown = true;\n                this._createSelection(e.currentTarget);\n\n                if ($(e.currentTarget).hasClass(\"k-event\")) {\n                    this._selection.eventElement = e.currentTarget;\n                }\n            }\n\n            if (kendo._activeElement() !== this.wrapper.get(0)) {\n                kendo.focusElement(this.wrapper);\n            } else {\n                this._select();\n            }\n\n            if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n        },\n\n        _selectFirstSlot: function() {\n            var firstAllDay = this.wrapper.find(\".k-scheduler-header-all-day\").find(\"td\").first(),\n                firstContent = this.wrapper.find(\".k-scheduler-content\").find(\"td\").first(),\n                firstSlot;\n\n            if (firstAllDay.length > 0) {\n                firstSlot = firstAllDay;\n            } else if (firstContent.length > 0) {\n                firstSlot = firstContent;\n            } else {\n                firstSlot = this.wrapper.find(\".k-scheduler-body\").find(\".k-link\").first();\n            }\n\n            this._createSelection(firstSlot);\n        },\n\n        _firstEvent: function() {\n            var firstEventInAllDay = this.wrapper.find(\".k-scheduler-header-wrap .k-event, .k-task\").first(),\n                firstEventInContent = this.wrapper.find(\".k-scheduler-content .k-event\").first(),\n                firstEvent, allDayEvent, contentEvent;\n\n            if (firstEventInAllDay.length > 0) {\n                if (firstEventInContent.length > 0) {\n                    allDayEvent = this.occurrenceByUid(firstEventInAllDay.data(\"uid\"));\n                    contentEvent = this.occurrenceByUid(firstEventInContent.data(\"uid\"));\n\n                    firstEvent = allDayEvent.start <= contentEvent.start ? firstEventInAllDay : firstEventInContent;\n                } else {\n                    firstEvent = firstEventInAllDay;\n                }\n            } else if (firstEventInContent) {\n                firstEvent = firstEventInContent;\n            }\n\n            return firstEvent;\n        },\n\n        _initialFocus: function() {\n            var firstEvent = this._firstEvent();\n\n            if (this.options.selectable) {\n                if (firstEvent && firstEvent.length > 0) {\n                    this._createSelection(firstEvent);\n                    this._selection.eventElement = firstEvent[0];\n                } else {\n                    this._selectFirstSlot();\n                }\n            } else if (this.toolbar && this.toolbar.find(\".\" + FOCUSEDSTATE).length === 0) {\n                this._focusToolbar();\n            } else if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n        },\n\n        _select: function() {\n            var that = this;\n            var view = that.view();\n            var wrapper = that.wrapper;\n            var current = view.current();\n            var selection = that._selection;\n            var oldSelection = that._old ? that._old.selection : null;\n            var oldEventsLength = that._old ? that._old.eventsLength : null;\n            if (!selection) {\n                return;\n            }\n\n            if (current) {\n                current.removeAttribute(\"id\");\n                wrapper.removeAttr(\"aria-activedescendant\");\n            }\n\n            view.select(selection);\n            that._selection.eventElement = null;\n\n            current = view.current();\n            if (current) {\n                current.setAttribute(\"id\", that._ariaId);\n                wrapper.attr(\"aria-activedescendant\", that._ariaId);\n\n                if (oldSelection !== current || (selection.events && (oldEventsLength !== selection.events.length ))) {\n                    var currentUid = $(current).data(\"uid\");\n\n                    if (that._old && currentUid &&\n                        currentUid === $(that._old.selection).data(\"uid\") &&\n                        (selection.events && that._old.eventsLength === selection.events.length)) {\n                        return;\n                    }\n\n                    var events = that._selectedEvents();\n                    var slots = view._selectedSlots;\n\n                    that._old = {\n                        selection: current,\n                        eventsLength: events.length\n                    };\n\n                    that.trigger(CHANGE, {\n                        start: selection.start,\n                        end: selection.end,\n                        events: events,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    });\n                }\n            }\n        },\n\n        _selectedEvents: function() {\n            var uids = this._selection.events;\n            var length = uids.length;\n            var idx = 0;\n            var event;\n\n            var events = [];\n\n            for (; idx < length; idx++) {\n                event = this.occurrenceByUid(uids[idx]);\n                if (event) {\n                    events.push(event);\n                }\n            }\n\n            return events;\n        },\n\n        _tapPosition: function(event, coordinate) {\n            return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n        },\n\n        _touchMove: function(e) {\n            var that = this;\n            var content = that.wrapper.find(\".k-scheduler-content\");\n            var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n            var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n            var endY = that._tapPosition(e, 'Y');\n            var endX = that._tapPosition(e, 'X');\n            var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n            var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n            var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n            var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n\n\n            if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                return;\n            }\n\n            if (applyVerticalScroll || applyhorizontalScroll) {\n                that._amplitude = Math.round(endY - that._touchPosY);\n                that._touchPosY = endY;\n                that._touchPosX = endX;\n                content.animate({\n                    scrollTop: scrollTop,\n                    scrollLeft: scrollLeft\n                }, 0);\n                that.view()._scrolling = true;\n            }\n        },\n\n        _mouseMove: function(e) {\n            var that = this;\n            clearTimeout(that._moveTimer);\n\n            if (that._isTouch(e)) {\n                return;\n            }\n\n            that._moveTimer = setTimeout(function() {\n                var view = that.view();\n                var selection = that._selection;\n\n                if (selection) {\n                    var slot = view.selectionByElement($(e.currentTarget));\n\n                    if (slot && selection.groupIndex === slot.groupIndex) {\n                        var startDate = slot.startDate();\n                        var endDate = slot.endDate();\n\n                        if (startDate >= selection.end) {\n                            selection.backward = false;\n                        } else if (endDate <= selection.start) {\n                            selection.backward = true;\n                        }\n\n                        if (selection.backward) {\n                            selection.start = startDate;\n                        } else {\n                            selection.end = endDate;\n                        }\n\n                        that._select();\n                    }\n                }\n            }, 5);\n        },\n\n        _viewByIndex: function(index) {\n            var view, views = this.views;\n\n            for (view in views) {\n                if (!index) {\n                    return view;\n                }\n\n                index--;\n            }\n        },\n\n        _keydownToolbar: function(e) {\n            var key = e.keyCode,\n                focusableToolBarSelector = \"> .k-button,\" +\n                    \".k-scheduler-navigation > .k-button,\" +\n                    \".k-nav-current,\" +\n                    \".k-views-dropdown:visible,\" +\n                    \".k-scheduler-views:visible > .k-button,\" +\n                    \".k-scheduler-search-input,\" +\n                    \".k-scheduler-mobile-views,\" +\n                    \".k-button-group > .k-button\",\n                focusableItems = this.toolbar.find(focusableToolBarSelector),\n                shouldNavigate = $(e.target).closest(VIEWSSELECTOR).length || this.toolbar.find('.k-scheduler-views .k-focus').length,\n                isRtl = kendo.support.isRtl(this.element),\n                focusedItem = this.toolbar.find(\".\" + FOCUSEDSTATE + \", :focus\"),\n                idx = focusableItems.index(focusedItem),\n                itemToFocus;\n\n            if (key === keys.TAB && (!e.shiftKey || this.options.selectable)) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            } else if (e.altKey && key === keys.DOWN && this.toolbar.find(\".k-nav-current\").hasClass(FOCUSEDSTATE)) {\n                this._showCalendar();\n                e.preventDefault();\n                return;\n            } else if (key === keys.RIGHT || key === keys.LEFT) {\n                if ((key === keys.RIGHT && !isRtl) || (key === keys.LEFT && isRtl)) {\n\n                    idx = idx + 1;\n\n                    if (idx === focusableItems.length) {\n                        this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                        this.element.focus();\n\n                        return;\n                    }\n                } else if ((key === keys.LEFT && !isRtl) || (key === keys.RIGHT && isRtl)) {\n                    idx = idx - 1;\n\n                    if (idx < 0) {\n                        return;\n                    }\n                }\n\n                itemToFocus = focusableItems[idx];\n\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(itemToFocus).addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).focus().attr(\"tabindex\", -1);\n                this._focusedView = null;\n                e.preventDefault();\n\n                return;\n            } else if (key === keys.ENTER || key === keys.SPACEBAR) {\n                if (shouldNavigate && this._focusedView && !this._focusedView.hasClass(\"k-selected\")) {\n                    var focusedViewName = this._focusedView.data().name;\n\n                    if (!this.trigger(\"navigate\", { view: focusedViewName, action: \"changeView\", date: this.date() })) {\n                        this.view(focusedViewName);\n                    }\n                    e.preventDefault();\n                    return;\n                }\n\n                this.toolbar.find(\".\" + FOCUSEDSTATE + ':visible').click();\n                e.preventDefault();\n\n                return;\n            } else if (key === keys.DOWN && !this.wrapper.find(\".k-views-dropdown\").hasClass(\"k-focus\")) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n                if (this._selectedViewName === \"year\") {\n                    this.view().calendar.focus();\n                } else if (document.activeElement !== this.element[0]) {\n                    this.element.focus();\n                }\n\n                e.preventDefault();\n\n                return;\n            }\n        },\n\n        _keydownView: function(e) {\n            var key = e.keyCode,\n                isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92,\n                selection = this._selection,\n                view = this.view(),\n                editable = view.options.editable,\n                arrowKeys = [ keys.LEFT, keys.RIGHT, keys.UP, keys.DOWN ],\n                isRtl = kendo.support.isRtl(this.element),\n                previous, content, cell;\n\n            if (isModifier) {\n                return;\n            }\n\n            // slots selection via keyboard is no longer available\n            // see here: https://github.com/telerik/kendo-themes/blob/develop/docs/accessibility/Scheduler.md\n            if (!selection) {\n                return;\n            }\n\n            if (key === keys.ENTER) {\n                if (selection.events.length && editable) {\n                    if (editable.update !== false) {\n                        this.editEvent(selection.events[0]);\n                    }\n                }\n            } else if ((key === keys.DELETE || key === keys.BACKSPACE) && editable !== false && editable.destroy !== false) {\n                this.removeEvent(selection.events[0]);\n            } else if (arrowKeys.indexOf(key) > -1) {\n                previous = key === keys.UP || (key === keys.LEFT && !isRtl) || (key === keys.RIGHT && isRtl);\n\n                if (view.moveToEvent(selection, previous)) {\n                    this._select();\n\n                    // Focus the Scheduler element only if it not the currently focused element\n                    if (document.activeElement !== this.element[0]) {\n                        this.element.focus();\n                    }\n\n                    e.preventDefault();\n                }\n            } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                    cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                    cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n            }\n        },\n\n        _keydownShortcut: function(key) {\n            var currentDate = new Date(),\n                timezone = this.options.timezone,\n                editable = this.view().options.editable;\n\n            if (key === 66 && !!this.view().toggleFullDay) {\n                this.view().toggleFullDay();\n            } else if (key === 67 && editable && editable.create !== false) {\n                this.addEvent(extend({}, {\n                    start: this.date(),\n                    end: this.date()\n                }));\n            } else if (key === 84) {\n                if (timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                    date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                } else {\n                    date = currentDate;\n                }\n\n                if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: \"today\", date: date })) {\n                    this.date(date);\n                }\n            }\n        },\n\n        _keydownYearView: function(e) {\n            var view = this.view(),\n                selection = this._selection,\n                key = e.keyCode;\n\n            if (key === keys.TAB) {\n                return;\n            }\n\n            if (key === keys.F10) {\n                this._focusToolbar();\n                e.preventDefault();\n            } else {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                view.calendar.focus();\n            }\n\n            if (selection) {\n                this._adjustSelectedDate();\n            }\n\n            e.preventDefault();\n        },\n\n        _keydownAgendaView: function(e) {\n            var key = e.keyCode,\n                view = this.view(),\n                selection = this._selection,\n                content, cell;\n\n            if (view.move(selection, key)) {\n                e.preventDefault();\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                this._select();\n            } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                    cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                    cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n            }\n        },\n\n        _keydownChangeView: function(key) {\n            var viewIndex = key - 49,\n                viewByIndex;\n\n            if (viewIndex === -1) {\n                viewIndex = 9;\n            }\n\n            viewByIndex = this._viewByIndex(viewIndex);\n\n            if (viewByIndex && !this.trigger(\"navigate\", { view: viewByIndex, action: \"changeView\", date: this.date() })) {\n                this.view(viewByIndex);\n            }\n        },\n\n        _keydownChangeDate: function(key) {\n            var isRtl = kendo.support.isRtl(this.element),\n                direction = (isRtl && key === keys.LEFT) || (!isRtl && key === keys.RIGHT) ? \"next\" : \"previous\";\n\n            if (direction === \"next\") {\n                date = this.view().nextDate();\n            } else {\n                date = this.view().previousDate();\n            }\n\n            if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: direction, date: date })) {\n                this.date(date);\n                this._initialFocus();\n                this._select();\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode,\n                shortcutKeys = [66, 67, 84],\n                toolbarIsFocused = $(e.target).closest(\".k-toolbar\").length > 0,\n                altKey = e.altKey;\n\n            this._ctrlKey = e.ctrlKey;\n            this._shiftKey = e.shiftKey;\n\n            if (key === keys.ESC && this.popup && this.popup.visible()) {\n                this.popup.close();\n                e.preventDefault();\n                return;\n            }\n\n            if ((key === keys.LEFT || key === keys.RIGHT) && this._shiftKey) {\n                this._keydownChangeDate(key);\n                return;\n            }\n\n            if (altKey && key >= 48 && key <= 57) {\n                this._keydownChangeView(key);\n                return;\n            }\n\n            if (shortcutKeys.indexOf(key) > -1) {\n                this._keydownShortcut(key);\n                return;\n            }\n\n            if (toolbarIsFocused) {\n                this._keydownToolbar(e);\n            } else {\n                if (this._selectedViewName === \"year\") {\n                    this._keydownYearView(e);\n                    return;\n                }\n\n                if (key === keys.F10) {\n                    this._focusToolbar();\n                    e.preventDefault();\n                    return;\n                }\n\n                if (this._selectedViewName === \"agenda\") {\n                    this._keydownAgendaView(e);\n                    return;\n                }\n\n                this._keydownView(e);\n            }\n        },\n\n        _focusToolbar: function() {\n            this.toolbar.find(\".k-button\").first()\n                .trigger(\"focus\")\n                .addClass(FOCUSEDSTATE);\n        },\n\n        _createSelection: function(item) {\n            var selection = this._selection,\n                uid, slot;\n\n            item = $(item);\n\n            if (item.is(\".k-event\")) {\n                uid = item.attr(kendo.attr(\"uid\"));\n\n                if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                    return;\n                }\n            }\n\n            if (!selection || (!this._ctrlKey && !this._shiftKey)) {\n                selection = this._selection = {\n                    events: [],\n                    groupIndex: 0\n                };\n            }\n\n            slot = this.view().selectionByElement(item);\n\n            if (slot) {\n                selection.groupIndex = slot.groupIndex || 0;\n            }\n\n            if (uid) {\n                slot = getOccurrenceByUid(this._data, uid);\n            }\n\n            if (slot && slot.uid) {\n                uid = [slot.uid];\n            }\n\n            this._updateSelection(slot, uid);\n            this._adjustSelectedDate();\n        },\n\n        _updateSelection: function(dataItem, events, groupIndex) {\n            var selection = this._selection;\n\n            if (dataItem && selection) {\n                var view = this.view();\n\n                if (dataItem.uid) {\n                    dataItem = view._updateEventForSelection(dataItem);\n                }\n\n                if (this._shiftKey && selection.start && selection.end) {\n                    var backward = dataItem.end < selection.end;\n\n                    selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n\n                    if (backward && view._timeSlotInterval) {\n                        kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                    }\n                } else {\n                    selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                    selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                }\n\n                if (\"isDaySlot\" in dataItem) {\n                    selection.isAllDay = dataItem.isDaySlot;\n                } else {\n                    selection.isAllDay = dataItem.isAllDay;\n                }\n\n                if (groupIndex !== null && groupIndex !== undefined$1) {\n                    selection.groupIndex = groupIndex;\n                }\n\n                selection.index = dataItem.index;\n                if (this._ctrlKey) {\n                    var indexOfEvent = (events && events.length) ? selection.events.indexOf(events[0]) : -1;\n\n                    if (indexOfEvent > -1) {\n                        selection.events.splice(indexOfEvent, 1);\n                    } else {\n                        selection.events = selection.events.concat(events || []);\n                    }\n                } else {\n                        selection.events = events || [];\n                }\n            }\n        },\n\n        options: {\n            name: \"Scheduler\",\n            date: TODAY,\n            editable: true,\n            autoBind: true,\n            snap: true,\n            mobile: false,\n            timezone: \"\",\n            allDaySlot: true,\n            min: new Date(1900, 0, 1),\n            max: new Date(2099, 11, 31),\n            toolbar: null,\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            workDays: null,\n            showWorkHours: false,\n            startTime: TODAY,\n            endTime: TODAY,\n            currentTimeMarker: {\n                updateInterval: 10000,\n                useLocalTimezone: true\n            },\n            footer: {},\n            messages: {\n                today: \"Today\",\n                pdf: \"Export to PDF\",\n                save: \"Save\",\n                cancel: \"Cancel\",\n                destroy: \"Delete\",\n                resetSeries: \"Reset Series\",\n                deleteWindowTitle: \"Delete event\",\n                next: \"Next\",\n                previous: \"Previous\",\n                refresh: \"Refresh\",\n                selectView: \"Select view\",\n                ariaSlotLabel: \"Selected from {0:t} to {1:t}\",\n                ariaEventLabel: {\n                    on: \"on\",\n                    at: \"at\",\n                    to: \"to\",\n                    allDay: \"(all day)\",\n                    prefix: \"\"\n                },\n                search: \"Search...\",\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    workWeek: \"Work Week\",\n                    agenda: \"Agenda\",\n                    month: \"Month\",\n                    timeline: \"Timeline\",\n                    timelineWeek: \"Timeline Week\",\n                    timelineWorkWeek: \"Timeline Work Week\",\n                    timelineMonth: \"Timeline Month\",\n                    year: \"Year\"\n                },\n                recurrenceMessages: {\n                    deleteWindowTitle: \"Delete Recurring Item\",\n                    resetSeriesWindowTitle: \"Reset Series\",\n                    deleteWindowOccurrence: \"Delete current occurrence\",\n                    deleteWindowSeries: \"Delete the series\",\n                    editWindowTitle: \"Edit Recurring Item\",\n                    editWindowOccurrence: \"Edit current occurrence\",\n                    editWindowSeries: \"Edit the series\"\n                },\n                editable: {\n                    confirmation: DELETECONFIRM\n                },\n                editor: {\n                    title: \"Title\",\n                    start: \"Start\",\n                    end: \"End\",\n                    allDayEvent: \"All day event\",\n                    description: \"Description\",\n                    repeat: \"Repeat\",\n                    timezone: \"Timezone\",\n                    startTimezone: \"Start timezone\",\n                    endTimezone: \"End timezone\",\n                    separateTimezones: \"Use separate start and end time zones\",\n                    timezoneEditorTitle: \"Timezones\",\n                    timezoneEditorButton: \"Time zone\",\n                    timezoneTitle: \"Time zones\",\n                    noTimezone: \"No timezone\",\n                    editorTitle: \"Event\"\n                }\n            },\n            height: null,\n            width: null,\n            resources: [],\n            group: {\n                resources: [],\n                orientation: \"horizontal\"\n            },\n            views: [],\n            selectable: false\n        },\n\n        events: [\n            REMOVE,\n            EDIT,\n            CANCEL,\n            SAVE,\n            \"add\",\n            \"dataBinding\",\n            \"dataBound\",\n            \"moveStart\",\n            \"move\",\n            \"moveEnd\",\n            \"resizeStart\",\n            \"resize\",\n            \"resizeEnd\",\n            \"navigate\",\n            CHANGE\n        ],\n\n        destroy: function() {\n            var that = this,\n                element;\n\n            Widget.fn.destroy.call(that);\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.dataSource.unbind(PROGRESS, that._progressHandler);\n                that.dataSource.unbind(ERROR, that._errorHandler);\n            }\n\n            if (that._resourceRefreshHandler) {\n                for (var idx = 0; idx < that.resources.length; idx++) {\n                    var resourceDS = that.resources[idx].dataSource;\n                    resourceDS.unbind(CHANGE, that._resourceRefreshHandler);\n                    resourceDS.unbind(PROGRESS, that._resourceProgressHandler);\n                    resourceDS.unbind(ERROR, that._resourceErrorHandler);\n                }\n            }\n\n            if (that.calendar) {\n                that.calendar.destroy();\n                that.popup.destroy();\n            }\n\n            if (that.view()) {\n                that.view().destroy();\n            }\n\n            if (that._editor) {\n                that._editor.destroy();\n            }\n\n            if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.toolbar)\n                .add(that.popup);\n\n            element.off(NS);\n\n            clearTimeout(that._moveTimer);\n\n            that._model = null;\n            that.toolbar = null;\n            that.element = null;\n\n            $(window).off(\"resize\" + NS, that._resizeHandler);\n\n            kendo.destroy(that.wrapper);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            if (this.options.autoBind && dataSource.fetch) {\n                dataSource.fetch();\n            } else if (isArray(dataSource)) {\n                this.view(this._selectedView);\n            }\n        },\n\n        items: function() {\n            var content = this.wrapper.find(\".k-scheduler-content\");\n            var view = this.view();\n\n            if (view && view.options.name === \"agenda\") {\n                return content.find(\".k-task\");\n            } else {\n                return content.find(\".k-event\")\n                              .add(this.wrapper.find(\".k-scheduler-header-wrap\")\n                                       .find(\".k-scheduler-header-all-day\").siblings());\n            }\n        },\n\n        _movable: function() {\n            var startSlot;\n            var endSlot;\n            var startResources;\n            var startTime;\n            var endTime;\n            var event;\n            var clonedEvent;\n            var that = this;\n            var originSlot;\n            var originStartTime;\n            var originalEvent;\n            var distance = 0;\n            var clonedEvents = [];\n            var cachedEvents = [];\n\n            var isMobile = that._isMobile();\n            var movable = that.options.editable && that.options.editable.move !== false;\n            var resizable = that.options.editable && that.options.editable.resize !== false;\n\n            if (movable || (resizable && isMobile)) {\n                that._dragging = false;\n                if (isMobile && kendo.support.mobileOS.android) {\n                    distance = 5;\n                }\n\n                that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                    distance: distance,\n                    filter: \".k-event\",\n                    ignore: \".k-resize-handle\",\n                    holdToDrag: isMobile,\n                    autoScroll: true\n                });\n\n                if (movable) {\n                    that._moveDraggable.bind(\"dragstart\", function(e) {\n                        var view = that.view();\n                        var eventElement = e.currentTarget;\n                        var isTouch = that._isTouch(e);\n                        that._dragging = true;\n\n                        if (!view.options.editable || view.options.editable.move === false) {\n                            that._dragging = false;\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (isTouch && !eventElement.hasClass(\"k-event-active\")) {\n                            that._dragging = false;\n                            that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                            e.preventDefault();\n                            return;\n                        }\n\n                        event = that.occurrenceByUid(eventElement.attr(kendo.attr(\"uid\")));\n\n                        clonedEvent = event.clone();\n                        originalEvent = event.clone();\n\n                        clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n\n                        clonedEvent.inverseColor = that._isInverseColor(eventElement);\n\n                        clonedEvents = [];\n                        if (that._selection) {\n                            var events = that._selection.events;\n\n                            for (var i = 0; i < events.length; i++) {\n                                var evtClone = that.occurrenceByUid(events[i]).clone();\n                                var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n\n                                evtClone.update(view._eventOptionsForMove(evtClone));\n\n                                if (evtCloneElement.length) {\n                                    evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                                }\n\n                                clonedEvents.push(evtClone);\n                            }\n                        } else {\n                            clonedEvents.push(clonedEvent);\n                        }\n\n                        startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                        startResources = view._resourceBySlot(startSlot);\n\n                        originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n\n                        endSlot = startSlot;\n\n                        originSlot = startSlot;\n\n                        if (!startSlot || that.trigger(\"moveStart\", { event: event })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"drag\", function(e) {\n                        var view = that.view();\n                        var slot = view._slotByPosition(e.x.location, e.y.location);\n                        var distance;\n                        var range;\n                        var i;\n\n                        if (!slot) {\n                            return;\n                        }\n\n                        endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n\n                        if (slot.isDaySlot !== startSlot.isDaySlot) {\n\n                            if (slot.isDaySlot !== originSlot.isDaySlot) {\n                                var slotIndex = $(startSlot.element).index();\n\n                                var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n\n                                startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n\n                                startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n\n                                cachedEvents = clonedEvents.map(function(event) { return event.clone(); });\n\n                                for (i = 0; i < clonedEvents.length; i++) {\n                                    if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                                        clonedEvents[i].isAllDay = slot.isDaySlot;\n\n                                        clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                                        clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n\n                                        if (!slot.isDaySlot) {\n                                            kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                                            kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                                        }\n                                    }\n                                }\n                            } else {\n                                startSlot = $.extend(true, { }, originSlot);\n                                startTime = originStartTime;\n\n                                clonedEvents = cachedEvents;\n                            }\n                        }\n\n                        distance = endTime - startTime;\n\n                        for (i = 0; i < clonedEvents.length; i++) {\n                            view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                        }\n\n                        range = moveEventRange(clonedEvent, distance);\n\n                        if (!that.trigger(\"move\", {\n                            event: event,\n                            slot: { element: slot.element, start: slot.startDate(), end: slot.endDate(), isDaySlot: slot.isDaySlot },\n                            resources: view._resourceBySlot(slot),\n                            start: range.start,\n                            end: range.end\n                        })) {\n                            endSlot = slot;\n                        } else {\n                            for (i = 0; i < clonedEvents.length; i++) {\n                                view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                            }\n                        }\n                    })\n                    .bind(\"dragend\", function(e) {\n                        that.view()._removeMoveHint();\n                        var distance = endTime - startTime;\n                        var range = moveEventRange(clonedEvent, distance);\n                        var start = range.start;\n                        var end = range.end;\n                        that._dragging = false;\n\n                        var endResources = that.view()._resourceBySlot(endSlot);\n\n                        var prevented = that.trigger(\"moveEnd\", {\n                            event: event,\n                            slot: { element: endSlot.element, start: endSlot.startDate(), end: endSlot.endDate() },\n                            start: start,\n                            end: end,\n                            resources: endResources\n                        });\n\n                        if (!prevented && (event.start.getTime() !== start.getTime() ||\n                            event.end.getTime() !== end.getTime() ||\n                            originSlot.isDaySlot !== endSlot.isDaySlot ||\n                            kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n\n                            that._isMultiDrag = clonedEvents.length > 1;\n\n                            for (var i = 0; i < clonedEvents.length; i++) {\n                                var evt = clonedEvents[i];\n\n                                range = moveEventRange(evt, distance);\n\n                                var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n                                var eventOptions = $.extend(\n                                    {\n                                        isAllDay: evt.isAllDay,\n                                        start: range.start,\n                                        end: range.end\n                                    },\n                                    updatedEventOptions,\n                                    endResources\n                                );\n\n                                that._updateEvent(null, evt, eventOptions);\n                            }\n\n                            if (that._isMultiDrag) {\n                                that.dataSource.sync();\n                                that._isMultiDrag = false;\n                            }\n                        }\n\n                        e.currentTarget.removeClass(\"k-event-active\");\n                        this.cancelHold();\n                        clonedEvents = [];\n                        cachedEvents = [];\n                    })\n                    .bind(\"dragcancel\", function() {\n                        that.view()._removeMoveHint();\n                        this.cancelHold();\n                        clonedEvents = [];\n                        cachedEvents = [];\n                    });\n                }\n\n                that._moveDraggable.bind(\"hold\", function(e) {\n                    if (that._isTouch(e)) {\n                        that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                        if (that.options.selectable) {\n                            that._createSelection(e.currentTarget);\n                        }\n                        e.currentTarget.addClass(\"k-event-active\");\n                    }\n                });\n            }\n        },\n\n        _resizable: function() {\n            var startTime;\n            var endTime;\n            var event;\n            var clonedEvent;\n            var slot;\n            var that = this;\n            var distance = 0;\n\n            function direction(handle) {\n                var directions = {\n                    \"k-resize-e\": \"east\",\n                    \"k-resize-w\": \"west\",\n                    \"k-resize-n\": \"north\",\n                    \"k-resize-s\": \"south\"\n                };\n\n                for (var key in directions) {\n                    if (handle.hasClass(key)) {\n                        return directions[key];\n                    }\n                }\n            }\n\n            if (that._isMobile() && kendo.support.mobileOS.android) {\n                distance = 5;\n            }\n\n            that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                distance: distance,\n                filter: \".k-resize-handle\",\n                autoScroll: true,\n                dragstart: function(e) {\n                    var dragHandle = $(e.currentTarget);\n\n                    var eventElement = dragHandle.closest(\".k-event\");\n\n                    var uid = eventElement.attr(kendo.attr(\"uid\"));\n\n                    var view = that.view();\n\n                    that._dragging = true;\n                    event = that.occurrenceByUid(uid);\n\n                    clonedEvent = event.clone();\n\n                    view._updateEventForResize(clonedEvent);\n\n                    slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n\n                    if (that.trigger(\"resizeStart\", { event: event })) {\n                        e.preventDefault();\n                    }\n\n                    startTime = kendo.date.toUtcTime(clonedEvent.start);\n\n                    endTime = kendo.date.toUtcTime(clonedEvent.end);\n                },\n                drag: function(e) {\n                    if (!slot) {\n                        return;\n                    }\n\n                    var dragHandle = $(e.currentTarget);\n\n                    var dir = direction(dragHandle);\n\n                    var view = that.view();\n\n                    var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n\n                    if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                        return;\n                    }\n\n                    slot = currentSlot;\n\n                    var originalStart = startTime;\n\n                    var originalEnd = endTime;\n\n                    if (dir == \"south\") {\n                        if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                            if (clonedEvent.isAllDay) {\n                                endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        }\n                    } else if (dir == \"north\") {\n                        if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    } else if (dir == \"east\") {\n                        if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                            if (clonedEvent.isAllDay) {\n                                endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                            endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    } else if (dir == \"west\") {\n                        if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    }\n\n                    if (!that.trigger(\"resize\", {\n                        event: event,\n                        slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                        start: kendo.timezone.toLocalDate(startTime),\n                        end: kendo.timezone.toLocalDate(endTime),\n                        resources: view._resourceBySlot(slot)\n                    })) {\n                        view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                    } else {\n                        startTime = originalStart;\n                        endTime = originalEnd;\n                    }\n                },\n                dragend: function(e) {\n                    var dragHandle = $(e.currentTarget);\n                    var start = new Date(clonedEvent.start.getTime());\n                    var end = new Date(clonedEvent.end.getTime());\n                    var dir = direction(dragHandle);\n\n                    that._dragging = false;\n                    that.view()._removeResizeHint();\n\n                    if (dir == \"south\") {\n                        end = kendo.timezone.toLocalDate(endTime);\n                    } else if (dir == \"north\") {\n                        start = kendo.timezone.toLocalDate(startTime);\n                    } else if (dir == \"east\") {\n                        if (slot.isDaySlot) {\n                            end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                        } else {\n                            end = kendo.timezone.toLocalDate(endTime);\n                        }\n                    } else if (dir == \"west\") {\n                        if (slot.isDaySlot) {\n                            start = new Date(kendo.timezone.toLocalDate(startTime));\n                            start.setHours(0);\n                            start.setMinutes(0);\n                        } else {\n                            start = kendo.timezone.toLocalDate(startTime);\n                        }\n                    }\n\n                    var prevented = that.trigger(\"resizeEnd\", {\n                        event: event,\n                        slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                        start: start,\n                        end: end,\n                        resources: that.view()._resourceBySlot(slot)\n                    });\n\n                    if (!prevented && end.getTime() >= start.getTime()) {\n                        if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                            that.view()._updateEventForResize(event);\n                            that._updateEvent(dir, event, { start: start, end: end });\n                        }\n                    }\n\n                    slot = null;\n                    event = null;\n                },\n                dragcancel: function() {\n                    that._dragging = false;\n                    that.view()._removeResizeHint();\n\n                    slot = null;\n                    event = null;\n                }\n            });\n        },\n\n        _updateEvent: function(dir, event, eventInfo) {\n            var that = this;\n\n            var updateEvent = function(event, callback) {\n                var start;\n\n                try {\n                    that._preventRefresh = true;\n                    event.update(eventInfo);\n                    that._convertDates(event);\n                    start = event.start;\n\n                    if (dir && event.duration() % MS_PER_DAY === 0 && start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0 && start.getMilliseconds() === 0) {\n                        event.set(\"isAllDay\", true);\n                    }\n                } finally {\n                    that._preventRefresh = false;\n                }\n\n                if (!that.trigger(SAVE, { event: event })) {\n                    if (callback) {\n                        callback();\n                    }\n\n                    if (!that._isMultiDrag) {\n                        that.dataSource.sync();\n                    }\n                }\n            };\n\n            var recurrenceHead = function(event) {\n                if (event.recurrenceRule) {\n                    return that.dataSource.getByUid(event.uid);\n                } else {\n                    return that.dataSource.get(event.recurrenceId);\n                }\n            };\n\n            var updateSeries = function() {\n                var head = recurrenceHead(event);\n\n                if (dir == \"south\" || dir == \"north\") {\n                    if (eventInfo.start) {\n                        var start = kendo.date.getDate(head.start);\n                        kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                        eventInfo.start = start;\n                    }\n                    if (eventInfo.end) {\n                        var end = kendo.date.getDate(head.end);\n                        kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                        eventInfo.end = end;\n                    }\n                }\n\n                that.dataSource._removeExceptions(head);\n\n                updateEvent(head);\n            };\n\n            var updateOccurrence = function() {\n                var head = recurrenceHead(event);\n                var eventUid;\n\n                var callback = function() {\n                    that._convertDates(head);\n\n                    if (that._selection) {\n                        that._selection.events.push(eventUid);\n                    }\n                };\n\n                var exception = head.toOccurrence({ start: event.start, end: event.end });\n\n                eventUid = exception.uid;\n\n                updateEvent(that.dataSource.add(exception), callback);\n            };\n\n            if (event.recurrenceRule || event.isOccurrence()) {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n\n                that._showRecurringDialog(event, updateOccurrence, updateSeries,{\n                    title: recurrenceMessages.editWindowTitle,\n                    text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                    occurrenceText: recurrenceMessages.editWindowOccurrence,\n                    seriesText: recurrenceMessages.editWindowSeries\n                });\n            } else {\n                updateEvent(that.dataSource.getByUid(event.uid));\n            }\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n\n            return this.dataSource.getByUid(container.attr(kendo.attr(\"uid\")));\n        },\n\n        showDialog: function(options) {\n            this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            this._editor.showDialog(options);\n        },\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        _confirmation: function(callback, model, isResetSeries) {\n            var editable = this.options.editable;\n\n            if (editable === true || editable.confirmation !== false) {\n                var messages = this.options.messages;\n                var title = messages.deleteWindowTitle;\n                var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n\n                if (this._isEditorOpened() && model.isRecurring()) {\n                    var recurrenceMessages = this.options.messages.recurrenceMessages;\n                    title = recurrenceMessages.deleteWindowTitle;\n\n                    if (model.isException() || model.isNew()) {\n                        text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                    } else {\n                        text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                    }\n\n                    if (isResetSeries) {\n                        title = recurrenceMessages.resetSeriesWindowTitle;\n                        text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                    }\n                }\n\n                var buttons = [\n                    { name: \"destroy\", text: isResetSeries ? messages.resetSeries : messages.destroy, click: function() { callback(); } }\n                ];\n\n                if (!(this._isMobile() && kendo.Pane)) {\n                    buttons.push({ name: \"canceledit\", text: messages.cancel, click: function() { callback(true); } });\n                }\n\n                this._unbindResize();\n\n                this.showDialog({\n                    model: model,\n                    text: text,\n                    title: title,\n                    buttons: buttons\n                });\n\n                this._bindResize();\n            } else {\n                callback();\n            }\n        },\n\n        addEvent: function(eventInfo) {\n            var editable = this._editor.editable;\n            var dataSource = this.dataSource;\n            var event;\n\n            eventInfo = eventInfo || {};\n\n            var prevented = this.trigger(\"add\", { event: eventInfo });\n\n            if (!prevented && ((editable && editable.end()) || !editable)) {\n                this.cancelEvent();\n\n                if (eventInfo && eventInfo.toJSON) {\n                    eventInfo = eventInfo.toJSON();\n                }\n\n                event = dataSource.add(eventInfo);\n\n                if (event) {\n                    this.cancelEvent();\n                    this._editEvent(event);\n                }\n            }\n       },\n\n       saveEvent: function() {\n            var that = this;\n            var editor = that._editor;\n            var dataSource = that.dataSource;\n\n            if (!editor) {\n                return;\n            }\n\n            var editable = editor.editable;\n            var container = editor.container;\n            var model = that._modelForContainer(container);\n            var events, i, event;\n\n            if (container && editable && editable.end() &&\n                !that.trigger(SAVE, { container: container, event: model } )) {\n\n                if (!model.isOccurrence() && !!model.recurrenceException && !model.recurrenceRule) {\n                    events = dataSource.data();\n\n                    for (i = events.length - 1; i >= 0; i -= 1) {\n                        event = events[i];\n                        if (event && event.recurrenceId === model.id) {\n                            dataSource.remove(event);\n                        }\n                    }\n\n                    model.set(\"recurrenceException\", \"\");\n                }\n\n                if (!model.dirty && !model.isOccurrence()) {\n                    that._convertDates(model, \"remove\");\n                }\n\n                dataSource.sync();\n            }\n        },\n\n        cancelEvent: function() {\n            var editor = this._editor;\n            var container = editor.container;\n            var model;\n\n            if (container) {\n                model = this._modelForContainer(container);\n\n                if (model && model.isOccurrence()) {\n                    this._convertDates(model, \"remove\");\n                    this._convertDates(this.dataSource.get(model.recurrenceId), \"remove\");\n                }\n\n                this.dataSource.cancelChanges(model);\n\n                //TODO: handle the cancel in UI\n\n                editor.close();\n            }\n        },\n\n        editEvent: function(uid) {\n            var model = typeof uid == \"string\" ? this.occurrenceByUid(uid) : uid;\n\n            if (!model) {\n                return;\n            }\n\n            this.cancelEvent();\n\n            if (model.isRecurring()) {\n                this._editRecurringDialog(model);\n            } else {\n                this._editEvent(model);\n            }\n        },\n\n        _editEvent: function(model) {\n            this._preventRefresh = true;\n            this._unbindResize();\n\n            this._createPopupEditor(model);\n            this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n            this._bindResize();\n        },\n\n        _editRecurringDialog: function(model) {\n            var that = this;\n\n            var editOccurrence = function() {\n                if (model.isException()) {\n                    that._editEvent(model);\n                } else {\n                    that.addEvent(model);\n                }\n            };\n\n            var editSeries = function() {\n                if (model.recurrenceId) {\n                    model = that.dataSource.get(model.recurrenceId);\n                }\n\n                that._editEvent(model);\n            };\n\n            var recurrenceMessages = that.options.messages.recurrenceMessages;\n            that._showRecurringDialog(model, editOccurrence, editSeries, {\n                title: recurrenceMessages.editWindowTitle,\n                text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                occurrenceText: recurrenceMessages.editWindowOccurrence,\n                seriesText: recurrenceMessages.editWindowSeries\n            });\n         },\n\n         _showRecurringDialog: function(model, editOccurrence, editSeries, messages) {\n             var editable = this.options.editable;\n             var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n             if (editRecurringMode === \"occurrence\" || this._isMultiDrag) {\n                 editOccurrence();\n             } else if (editRecurringMode === \"series\") {\n                 editSeries();\n             } else {\n                 this._unbindResize();\n\n                 this.showDialog({\n                     model: model,\n                     title: messages.title,\n                     text: messages.text,\n                     buttons: [\n                         { text: messages.occurrenceText, click: editOccurrence },\n                         { text: messages.seriesText, click: editSeries }\n                     ]\n                 });\n\n                 this._bindResize();\n             }\n        },\n\n        _createButton: function(command) {\n            var template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                options = { className: \"k-scheduler-\" + (commandName || \"\").replace(/\\s/g, \"\"), text: commandName, attr: \"\" };\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                if (command.className) {\n                    command.className += \" \" + options.className;\n                }\n\n                if (commandName === \"edit\" && isPlainObject(command.text)) {\n                    command = extend(true, {}, command);\n                    command.text = command.text.edit;\n                }\n\n                options = extend(true, options, defaultCommands[commandName], command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName]);\n            }\n\n            if (!options.className) {\n                options.className = \"k-button-solid-base\";\n            } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                options.className += \" k-button-solid-base\";\n            }\n\n            return kendo.template(template)(options);\n        },\n\n        _convertDates: function(model, method) {\n            var timezone = this.dataSource.reader.timezone;\n            var startTimezone = model.startTimezone;\n            var endTimezone = model.endTimezone;\n            var start = model.start;\n            var end = model.start;\n\n            method = method || \"apply\";\n            startTimezone = startTimezone || endTimezone;\n            endTimezone = endTimezone || startTimezone;\n\n            if (startTimezone) {\n                if (timezone) {\n                    if (method === \"apply\") {\n                        start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                        end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                    } else {\n                        start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                        end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                    }\n                } else {\n                    start = kendo.timezone[method](model.start, startTimezone);\n                    end = kendo.timezone[method](model.end, endTimezone);\n                }\n\n                model._set(\"start\", start);\n                model._set(\"end\", end);\n            }\n        },\n\n        _createEditor: function() {\n            var that = this;\n\n            var editor;\n\n            if (this._isMobile() && kendo.Pane) {\n                editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    timezone: that.dataSource.reader.timezone,\n                    resources: that.resources,\n                    createButton: this._createButton.bind(this)\n                }));\n            } else {\n                editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    createButton: this._createButton.bind(this),\n                    timezone: that.dataSource.reader.timezone,\n                    resources: that.resources\n                }));\n            }\n\n            editor.bind(\"cancel\", function(e) {\n                if (that.trigger(\"cancel\", { container: e.container, event: e.model })) {\n                    e.preventDefault();\n                    return;\n                }\n                that._preventRefresh = false;\n                that.cancelEvent();\n\n                if (that._attemptRefresh) {\n                    that.refresh();\n                }\n\n                that.focus();\n            });\n\n            editor.bind(\"edit\", function(e) {\n                if (that.trigger(EDIT, { container: e.container, event: e.model })) {\n                    e.preventDefault();\n                }\n            });\n\n            editor.bind(\"save\", function() {\n                that._preventRefresh = false;\n                that.saveEvent();\n            });\n\n            editor.bind(\"remove\", function(e) {\n                that._preventRefresh = false;\n                that.removeEvent(e.model);\n            });\n\n            editor.bind(\"resetSeries\", function(e) {\n                that._confirmation(function(cancel) {\n                    that._preventRefresh = false;\n                    if (!cancel) {\n                        that.dataSource._removeExceptions(e.model);\n                        that.saveEvent();\n                    }\n                }, e.model, true);\n            });\n        },\n\n        _createPopupEditor: function(model) {\n            var editor = this._editor;\n\n            if (!model.isNew() || model.isOccurrence()) {\n                if (model.isOccurrence()) {\n                    this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                }\n                this._convertDates(model);\n            }\n\n            this.editable = editor.editEvent(model);\n        },\n\n        removeEvent: function(uid) {\n            var that = this,\n                model = typeof uid == \"string\" ? that.occurrenceByUid(uid) : uid;\n\n            if (!model) {\n                return;\n            }\n\n            if (model.isRecurring()) {\n                that._deleteRecurringDialog(model);\n            } else {\n                that._confirmation(function(cancel) {\n                    if (!cancel) {\n                        that._removeEvent(model);\n                    }\n                }, model);\n            }\n        },\n\n        occurrenceByUid: function(uid) {\n            var occurrence = this.dataSource.getByUid(uid);\n            if (!occurrence) {\n                occurrence = getOccurrenceByUid(this._data, uid);\n            }\n\n            return occurrence;\n        },\n\n        occurrencesInRange: function(start, end) {\n            return new kendo.data.Query(this._data).filter({\n                logic: \"or\",\n                filters: [\n                    {\n                        logic: \"and\",\n                        filters: [\n                            { field: \"start\", operator: \"gte\", value: start },\n                            { field: \"end\", operator: \"gte\", value: start },\n                            { field: \"start\", operator: \"lt\", value: end }\n                        ]\n                    },\n                    {\n                        logic: \"and\",\n                        filters: [\n                            { field: \"start\", operator: \"lte\", value: start },\n                            { field: \"end\", operator: \"gt\", value: start }\n                        ]\n                    }\n                ]\n            }).toArray();\n        },\n\n        _removeEvent: function(model) {\n            if (!this.trigger(REMOVE, { event: model })) {\n                if (this.dataSource.remove(model)) {\n                    this.dataSource.sync();\n                }\n            }\n        },\n\n        _deleteRecurringDialog: function(model) {\n            var that = this;\n            var currentModel = model;\n            var editable = that.options.editable;\n            var deleteOccurrence;\n            var deleteSeries;\n            var createException;\n            var deleteOccurrenceConfirmation;\n            var deleteSeriesConfirmation;\n            var createExceptionConfirmation;\n            var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n            deleteOccurrence = function() {\n                var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                var head = that.dataSource.get(occurrence.recurrenceId);\n\n                that._convertDates(head);\n                that._removeEvent(occurrence);\n            };\n\n            deleteSeries = function() {\n                if (currentModel.recurrenceId) {\n                    currentModel = that.dataSource.get(currentModel.recurrenceId);\n                }\n\n                that._removeEvent(currentModel);\n            };\n\n            createException = function() {\n                that.dataSource.remove(currentModel);\n                that.dataSource.sync();\n            };\n\n            if (editRecurringMode != \"dialog\" || that._isEditorOpened()) {\n                deleteOccurrenceConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            deleteOccurrence();\n                        }\n                    }, currentModel);\n                };\n\n                deleteSeriesConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            deleteSeries();\n                        }\n                    }, currentModel);\n                };\n\n                createExceptionConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            createException();\n                        }\n                    }, currentModel);\n                };\n            }\n\n            var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n            var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n            var exeptionCallback = createExceptionConfirmation || createException;\n\n            if (that._isEditorOpened()) {\n                if (model.isException()) {\n                    occurrenceCallback();\n                } else if (model.isNew()) {\n                    exeptionCallback();\n                } else {\n                    seriesCallback();\n                }\n            } else {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n                that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                    title: recurrenceMessages.deleteWindowTitle,\n                    text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                    occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                    seriesText: recurrenceMessages.deleteWindowSeries\n                });\n            }\n        },\n\n        _isEditorOpened: function() {\n            return !!this._editor.container;\n        },\n\n        _unbindView: function(view) {\n            var that = this;\n            that.angular(\"cleanup\", function() {\n                return { elements: that.items() };\n            });\n\n            view.destroy();\n        },\n\n        _bindView: function(view) {\n            var that = this;\n\n            if (that.options.editable) {\n                if (that._viewRemoveHandler) {\n                    view.unbind(REMOVE, that._viewRemoveHandler);\n                }\n\n                that._viewRemoveHandler = function(e) {\n                    that.removeEvent(e.uid);\n                };\n\n                view.bind(REMOVE, that._viewRemoveHandler);\n\n                if (that._viewAddHandler) {\n                    view.unbind(ADD, that._viewAddHandler);\n                }\n\n                that._viewAddHandler = function(e) {\n                    that.addEvent(e.eventInfo);\n                };\n\n                view.bind(ADD, this._viewAddHandler);\n\n                if (that._viewEditHandler) {\n                    view.unbind(EDIT, that._viewEditHandler);\n                }\n\n                that._viewEditHandler = function(e) {\n                    that.editEvent(e.uid);\n                };\n\n                view.bind(EDIT, this._viewEditHandler);\n            }\n\n            if (that._viewNavigateHandler) {\n                view.unbind(\"navigate\", that._viewNavigateHandler);\n            }\n\n            that._viewNavigateHandler = function(e) {\n                if (e.action) {\n                    if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: e.action, date: e.date })) {\n                        that.date(e.date);\n                    }\n                } else if (e.view) {\n                    var switchWorkDay = \"isWorkDay\" in e;\n                    var action = switchWorkDay ? \"changeWorkDay\" : \"changeView\";\n\n                    if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: action, date: e.date })) {\n                        if (switchWorkDay) {\n                            that._workDayMode = e.isWorkDay;\n                        }\n\n                        that._selectView(e.view);\n                        that.date(e.date);\n                    }\n                }\n            };\n\n            view.bind(\"navigate\", that._viewNavigateHandler);\n\n            if (that._viewActivateHandler) {\n                view.unbind(\"activate\", that._viewActivateHandler);\n            }\n\n            that._viewActivateHandler = function() {\n                var view = this;\n                if (that._selection) {\n                    view.constrainSelection(that._selection);\n\n                    if ($(document.activeElement).closest(\".k-scheduler-toolbar\").length === 0) {\n                        if (document.activeElement !== that.wrapper[0]) {\n                            that.element.focus();\n                        } else {\n                            that._select();\n                        }\n                    }\n\n                    that._adjustSelectedDate();\n                }\n            };\n\n            view.bind(\"activate\", that._viewActivateHandler);\n        },\n\n        _selectView: function(name) {\n            var that = this;\n\n            if (name && that.views[name]) {\n\n                if (that._selectedView) {\n                    that._unbindView(that._selectedView);\n                }\n\n                that._selectedView = that._renderView(name);\n                that._selectedViewName = name;\n\n                if (that._viewsCount > 1 && !that._isMobile()) {\n                    var viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                    var viewButtons = that.toolbar.find(\".k-scheduler-views > .k-button\");\n\n                    if ( that.toolbar.find(\".k-views-dropdown\").length === 0 ) {\n                        that.toolbar.find(\".k-scheduler-views-wrapper\").prepend(VIEWS_DROPDOWN_TEMPLATE({ views: that.views, view: name, ns: kendo.ns, label: that.options.messages.selectView }));\n                        viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                    }\n\n                    viewsDropdown.val(name);\n\n                    viewButtons.removeClass(\"k-selected\");\n                    viewButtons.filter(\".k-view-\" + name.replace(/\\./g, \"\\\\.\").toLowerCase()).addClass(\"k-selected\");\n                } else {\n                    var viewSelect = that.toolbar.find(\".k-scheduler-mobile-views\");\n\n                    viewSelect.find(\"[value=\" + name.replace(/\\./g, \"\\\\.\") + \"]\")\n                        .prop(\"selected\", \"selected\");\n                }\n            }\n        },\n\n        view: function(name) {\n            var that = this;\n\n            if (name) {\n                if (name === \"year\") {\n                    that.wrapper.removeAttr(\"tabindex\");\n                } else {\n                    that.wrapper.attr(\"tabindex\", 0);\n                }\n\n                that._selectView(name);\n                that.rebind();\n\n                return;\n            }\n\n            return that._selectedView;\n        },\n\n        viewName: function() {\n            return this.view().name;\n        },\n\n        _renderView: function(name) {\n            var view = this._initializeView(name);\n\n            this._bindView(view);\n\n            if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                view.content.css(\"-ms-touch-action\", \"pinch-zoom\");\n                view.content.css(\"touch-action\", \"pinch-zoom\");\n            }\n\n            this._model.set(\"formattedDate\", view.dateForTitle());\n            this._model.set(\"formattedShortDate\", view.shortDateForTitle());\n            this._model.set(\"formattedMobileDate\", view.mobileDateForTitle ? view.mobileDateForTitle() : view.shortDateForTitle());\n            this._model.set(\"formattedYear\", kendo.format(\"{0:yyyy}\", view.startDate()));\n\n            return view;\n        },\n\n        resize: function(force) {\n            var size = this.getSize();\n            var currentSize = this._size;\n            var view = this.view();\n\n            if (!view || !view.groups) {\n                return;\n            }\n\n            if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                this.refresh({ action: \"resize\" });\n                this._size = size;\n            }\n        },\n\n        _adjustSelectedDate: function() {\n            var date = this._model.selectedDate,\n                selection = this._selection,\n                start = selection.start;\n\n            if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n            }\n        },\n\n        _initializeView: function(name) {\n            var view = this.views[name];\n\n            if (view) {\n                var isSettings = isPlainObject(view),\n                    overrideOptions = {},\n                    type = view.type;\n\n                if (typeof type === STRING) {\n                    type = kendo.getter(view.type)(window);\n                }\n\n                if (isSettings && view.workDays && view.workDays.length) {\n                    overrideOptions.workDays = view.workDays;\n                }\n\n                if (type) {\n                    view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                        resources: this.resources,\n                        date: this.date(),\n                        startTime: kendo.parseDate(view.startTime) || kendo.parseDate(this.options.startTime),\n                        endTime: kendo.parseDate(view.endTime) || kendo.parseDate(this.options.endTime),\n                        showWorkHours: this._workDayMode\n                    }),overrideOptions));\n\n                } else {\n                    throw new Error(\"There is no such view\");\n                }\n            }\n\n            return view;\n        },\n\n        _views: function() {\n            var views = this.options.views;\n            var view;\n            var defaultView;\n            var selected;\n            var isSettings;\n            var name;\n            var type;\n            var idx;\n            var length;\n\n            this.views = {};\n            this._viewsCount = 0;\n\n            for (idx = 0, length = views.length; idx < length; idx++) {\n                var hasType = false;\n\n                view = views[idx];\n\n                isSettings = isPlainObject(view);\n\n                if (isSettings) {\n                    type = name = view.type ? view.type : view;\n                    if (typeof type !== STRING) {\n                        name = view.name || view.title;\n                        hasType = true;\n                    }\n                } else {\n                    type = name = view;\n                    view = {};\n                }\n\n                defaultView = defaultViews[name];\n\n                if (defaultView && !hasType) {\n                    view.type = defaultView.type;\n                    defaultView.title = this.options.messages.views[name];\n                    if (defaultView.type === \"day\") {\n                        defaultView.messages = { allDay: this.options.messages.allDay };\n                    } else if (defaultView.type === \"agenda\") {\n                        defaultView.messages = {\n                            event: this.options.messages.event,\n                            date: this.options.messages.date,\n                            time: this.options.messages.time\n                        };\n                    }\n                }\n\n                view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                    this.views[name] = view;\n                    this._viewsCount++;\n\n                    if (!selected || view.selected) {\n                        selected = name;\n                    }\n                }\n            }\n\n            if (selected) {\n                this._selectedViewName = selected; // toolbar is not rendered yet\n            }\n        },\n\n        rebind: function() {\n            var that = this,\n                resources = that.resources,\n                resourceFetchArray = [];\n\n            if (that._preventRebind) {\n                that._preventRebind = false;\n                return;\n            }\n\n            if (that.options.autoBind === false && resources && resources.length > 0) {\n                resources.forEach(function(resource) {\n                    if (resource.dataSource.data().length === 0) {\n                        that._preventRebind = true;\n                        resourceFetchArray.push(resource.dataSource.fetch());\n                    }\n                });\n\n                $.when.apply(null, resourceFetchArray).then(function() {\n                    that.dataSource.fetch();\n                    that._preventRebind = false;\n                });\n            } else {\n                that.dataSource.fetch();\n            }\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                dataSource = extend(true, dataSource, { schema: { timezone: options.timezone } });\n            } else if (dataSource instanceof SchedulerDataSource) {\n                options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : \"\";\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource\n                    .unbind(CHANGE, that._refreshHandler)\n                    .unbind(PROGRESS, that._progressHandler)\n                    .unbind(ERROR, that._errorHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.SchedulerDataSource.create(dataSource)\n                .bind(CHANGE, that._refreshHandler)\n                .bind(PROGRESS, that._progressHandler)\n                .bind(ERROR, that._errorHandler);\n\n            that.options.dataSource = that.dataSource;\n        },\n\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _progress: function(toggle) {\n            var element = this.element.find(\".k-scheduler-content\");\n            kendo.ui.progress(element, toggle);\n        },\n\n        _resources: function() {\n            var that = this;\n            var resources = that.options.resources;\n            var resourcePromises = [];\n\n            for (var idx = 0; idx < resources.length; idx++) {\n                var resource = resources[idx];\n                var field = resource.field;\n                var name = resource.name || field;\n                var dataSource = resource.dataSource;\n\n                if (!field || !dataSource) {\n                    throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                }\n\n                that.resources.push({\n                    field: field,\n                    name: name,\n                    title: resource.title || field,\n                    dataTextField: resource.dataTextField || \"text\",\n                    dataValueField: resource.dataValueField || \"value\",\n                    dataColorField: resource.dataColorField || \"color\",\n                    dataParentValueField: resource.dataParentValueField || \"parentValue\",\n                    valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                    multiple: resource.multiple || false,\n                    dataSource: that._resourceDataSource(dataSource, name, resourcePromises)\n                });\n            }\n\n            if (!that.options.autoBind) {\n                that._selectView(that._selectedViewName);\n            } else {\n                $.when.apply(null, resourcePromises)\n                      .then(function() {\n                            that.view(that._selectedViewName);\n                        });\n            }\n        },\n\n        _resourceDataSource: function(resourceDS, groupName, promises) {\n            var that = this;\n            var dataSource = isArray(resourceDS) ? { data: resourceDS } : resourceDS;\n            var dataSourceInstance = kendo.data.DataSource.create(dataSource);\n\n            if (that.options.autoBind) {\n                promises.push(dataSourceInstance.fetch(function() {\n                    // 'this' is the DataSource instance not the Scheduler\n                    that._bindResourceEvents(this, groupName);\n                }));\n            } else {\n                that._bindResourceEvents(dataSourceInstance, groupName);\n            }\n\n            return dataSourceInstance;\n        },\n\n        _bindResourceEvents: function(resourceDS, groupName) {\n            var that = this;\n            var isGrouped = that.options.group && that.options.group.resources.length;\n            var isResourceGrouped = isGrouped && that.options.group.resources.indexOf(groupName) > -1;\n\n            if (!that._resourceRefreshHandler && isResourceGrouped) {\n                that._resourceRefreshHandler = that._refreshResource.bind(that);\n                that._resourceErrorHandler = that._error.bind(that);\n            }\n\n            if (isResourceGrouped) {\n                resourceDS.bind(CHANGE, that._resourceRefreshHandler)\n                    .bind(ERROR, that._resourceErrorHandler);\n            }\n        },\n\n        _refreshResource: function() {\n            var that = this;\n            var preventRefresh = (that._editor && that._editor.editable) || that._preventRefresh;\n\n            if (!preventRefresh) {\n                that.view(that._selectedViewName);\n            }\n        },\n\n        _initModel: function() {\n            var that = this;\n            that._model = kendo.observable({\n               selectedDate: new Date(this.options.date),\n               formattedDate: \"\",\n               formattedShortDate: \"\"\n           });\n\n           that._model.bind(CHANGE, function(e) {\n                if (e.field === \"selectedDate\") {\n                    that.view(that._selectedViewName);\n                }\n           });\n        },\n\n        _wrapper: function() {\n            var that = this;\n            var options = that.options;\n            var height = options.height;\n            var width = options.width;\n\n            that.wrapper = that.element.addClass(\"k-widget k-scheduler k-floatwrap\");\n\n            if (that._isMobile()) {\n               that.wrapper.addClass(\"k-scheduler-mobile\");\n            }\n\n            if (height) {\n                that.wrapper.height(height);\n            }\n\n            if (width) {\n                that.wrapper.width(width);\n            }\n        },\n\n        date: function(value) {\n            if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                this._model.set(\"selectedDate\", value);\n            }\n            return getDate(this._model.get(\"selectedDate\"));\n        },\n\n        _toolbar: function() {\n            var that = this;\n            var options = that.options;\n            var commands = [];\n\n            if (options.toolbar) {\n                commands = Array.isArray(options.toolbar) ? options.toolbar : [options.toolbar];\n            }\n\n            var template = this._isMobile() ? MOBILETOOLBARTEMPLATE : TOOLBARTEMPLATE;\n\n            var toolbar = $(template({\n                    messages: options.messages,\n                    pdf: $.grep(commands, function(item) {\n                            return item == \"pdf\" || item.name == \"pdf\";\n                        }).length > 0,\n                    search: $.grep(commands, function(item) {\n                        return item == \"search\" || item.name == \"search\";\n                    }).length > 0,\n                    ns: kendo.ns,\n                    view: that._selectedViewName,\n                    views: that.views,\n                    viewsCount: that._viewsCount,\n                    editable: that.options.editable\n                }));\n\n            that.wrapper.append(toolbar);\n            that.toolbar = toolbar;\n\n            kendo.bind(that.toolbar, that._model);\n\n            toolbar.on(CLICK + NS, \".k-pdf\", function(e) {\n                e.preventDefault();\n                that.saveAsPDF();\n            });\n\n            toolbar.on(\"input\" + NS, \".k-scheduler-search-input\", kendo.throttle(function(e) {\n                that.dataSource.filter({\n                    logic: \"or\",\n                    filters: [\n                        { field: \"title\", operator: \"contains\", value: e.target.value },\n                        { field: \"description\", operator: \"contains\", value: e.target.value }\n                    ]\n                });\n            }, 250));\n\n            toolbar.on(CLICK + NS, \".k-create-event\", function(e) {\n                e.preventDefault();\n                that.addEvent();\n            });\n\n            toolbar.on(CLICK + NS, \".k-nav-calendar\", function(e) {\n                e.preventDefault();\n                that._showCalendar(e.target);\n            });\n\n            toolbar.on(CLICK + NS, \".k-scheduler-navigation > .k-button\", function(e) {\n                var button = $(this);\n                var date = new Date(that.date());\n                var action = \"\";\n                var currentDate = new Date();\n                var timezone = that.options.timezone;\n\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                button.addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).trigger(\"focus\").attr(\"tabindex\", -1);\n\n                if ($(e.target).is(\"input\")) {\n                    return;\n                }\n\n                e.preventDefault();\n\n                if (button.hasClass(\"k-nav-today\")) {\n                    action = \"today\";\n                    if (timezone) {\n                        var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                        date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                    } else {\n                        date = currentDate;\n                    }\n                } else if (button.hasClass(\"k-nav-next\")) {\n                    action = \"next\";\n                    date = that.view().nextDate();\n                } else if (button.hasClass(\"k-nav-prev\")) {\n                    action = \"previous\";\n                    date = that.view().previousDate();\n                }\n\n                if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: action, date: date })) {\n                    that.date(date);\n                }\n            });\n\n            toolbar.on(CLICK + NS, \".k-nav-current\", function(e) {\n                e.preventDefault();\n\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(this).addClass(FOCUSEDSTATE);\n\n                if (!that._isMobile()) {\n                    that._showCalendar();\n                }\n            });\n\n            toolbar.on(CLICK + NS, \".k-scheduler-views > .k-button, .k-scheduler-refresh\", function(e) {\n                e.preventDefault();\n\n                var name = $(this).attr(kendo.attr(\"name\"));\n\n                that.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                $(this).addClass(FOCUSEDSTATE).attr(\"tabindex\", 0).trigger(\"focus\").attr(\"tabindex\", -1);\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            });\n\n            toolbar.on(CHANGE + NS, \".k-views-dropdown, .k-scheduler-mobile-views\", function() {\n                var name = this.value;\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            });\n        },\n\n        _showCalendar: function(targetElm) {\n            var that = this,\n                target = targetElm || that.toolbar.find(\".k-nav-current\"),\n                html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"></div></div>');\n\n            if (!that.popup) {\n                that.popup = new Popup(html, {\n                    anchor: target,\n                    activate: function() {\n                        if (that.popup && that.calendar) {\n                            that.popup._toggleResize(false);\n                            that.calendar.element.find(\"table\").trigger(\"focus\");\n                            that.popup._toggleResize(true);\n                        }\n                    },\n                    open: function() {\n                        if (!that.calendar) {\n                            that.calendar = new Calendar(this.element.find(\".k-scheduler-calendar\"),\n                            {\n                                change: function() {\n                                    var date = this.value();\n                                    if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"changeDate\", date: date })) {\n                                        that.date(date);\n                                        that.popup.close();\n                                    }\n\n                                    if (!that._isMobile()) {\n                                        that._selectedView.element.trigger(\"focus\");\n                                        that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                                    }\n                                },\n                                min: that.options.min,\n                                max: that.options.max\n                            });\n                        }\n                        that.calendar.element.on(\"keydown\" + NS, function(e) {\n                            if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                                that.popup.close();\n                                that._selectedView.element.trigger(\"focus\");\n                                that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                            }\n                        });\n\n                        that.calendar.setOptions({\n                            start: that._selectedViewName === \"year\" ? \"decade\" : \"month\",\n                            depth: that._selectedViewName === \"year\" ? \"decade\" : \"month\"\n                        });\n\n                        that.calendar.value(that.date());\n                    },\n                    copyAnchorStyles: false\n                });\n            }\n\n            that.popup.open();\n        },\n\n        refresh: function(e) {\n            var that = this;\n            var view = this.view();\n            var preventRefresh = (e && e.action === \"itemchange\" && (this._editor.editable || this._preventRefresh)) ||\n                                 (this.dataSource.options.type === \"signalr\" && this._preventRefresh);\n\n            this._progress(false);\n\n            this.angular(\"cleanup\", function() {\n                return { elements: that.items() };\n            });\n\n            e = e || {};\n\n            if (!view) {\n                return;\n            }\n\n            if (preventRefresh) { // skip rebinding if editing is in progress\n                this._attemptRefresh = true && this.dataSource.options.type === \"signalr\";\n                return;\n            }\n\n            if (this.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (!(e && e.action === \"resize\") && this._editor) {\n                this._editor.close();\n            }\n\n            this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n\n            view.refreshLayout();\n\n            view.render(this._data);\n\n            this.trigger(\"dataBound\");\n            this._attemptRefresh = false;\n        },\n\n        slotByPosition: function(x, y) {\n            var view = this.view();\n\n            if (!view._slotByPosition) {\n                return null;\n            }\n\n            var slot = view._slotByPosition(x, y);\n\n            if (!slot) {\n                return null;\n            }\n\n            return {\n                startDate: slot.startDate(),\n                endDate: slot.endDate(),\n                groupIndex: slot.groupIndex,\n                element: slot.element,\n                isDaySlot: slot.isDaySlot\n            };\n        },\n\n        slotByElement: function(element) {\n            var el = $(element),\n                offset = el.offset(),\n                width = el.width(),\n                height = el.height(),\n                centerX = offset.left + width / 2,\n                centerY = offset.top + height / 2,\n                offset = $(element).offset();\n\n            return this.slotByPosition(centerX, centerY);\n        },\n\n        resourcesBySlot: function(slot) {\n            return this.view()._resourceBySlot(slot);\n        }\n    });\n\n    var defaultViews = {\n        day: {\n            type: \"kendo.ui.DayView\"\n        },\n        week: {\n            type: \"kendo.ui.WeekView\"\n        },\n        workWeek: {\n            type: \"kendo.ui.WorkWeekView\"\n        },\n        agenda: {\n            type: \"kendo.ui.AgendaView\"\n        },\n        month: {\n            type: \"kendo.ui.MonthView\"\n        },\n        timeline: {\n            type: \"kendo.ui.TimelineView\"\n        },\n        timelineWeek: {\n            type: \"kendo.ui.TimelineWeekView\"\n        },\n        timelineWorkWeek: {\n            type: \"kendo.ui.TimelineWorkWeekView\"\n        },\n        timelineMonth: {\n            type: \"kendo.ui.TimelineMonthView\"\n        },\n        year: {\n            type: \"kendo.ui.YearView\"\n        }\n    };\n\n    ui.plugin(Scheduler);\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Scheduler.prototype);\n\n        var SCHEDULER_EXPORT = \"k-scheduler-pdf-export\";\n        Scheduler.fn._drawPDF = function(progress) {\n            var wrapper = this.wrapper;\n            var styles = wrapper[0].style.cssText;\n\n            wrapper.css({\n                width: wrapper.width(),\n                height: wrapper.height()\n            });\n\n            wrapper.addClass(SCHEDULER_EXPORT);\n\n            var scheduler = this;\n            var promise = new $.Deferred();\n            var table = wrapper.find(\".k-scheduler-content\").find(\"table\").css(\"table-layout\", \"auto\");\n\n            setTimeout(function() {\n                table.css(\"table-layout\", \"fixed\");\n                scheduler.resize(true);\n\n                scheduler._drawPDFShadow({}, {\n                    avoidLinks: scheduler.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var args = {\n                        page: group,\n                        pageNumber: 1,\n                        progress: 1,\n                        totalPages: 1\n                    };\n\n                    progress.notify(args);\n                    promise.resolve(args.page);\n                })\n                .fail(function(err) {\n                    promise.reject(err);\n                })\n                .always(function() {\n                    wrapper[0].style.cssText = styles;\n                    wrapper.removeClass(SCHEDULER_EXPORT);\n                    scheduler.resize(true);\n\n                    //Required because slot.offsetLeft is incorrect after first resize\n                    scheduler.resize(true);\n                });\n            });\n\n            return promise;\n        };\n    }\n\n    var TimezoneEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                zones = kendo.timezone.windows_zones;\n\n            if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            that._zonesQuery = new kendo.data.Query(zones);\n            that._zoneTitleId = kendo.guid();\n            that._zoneTitlePicker();\n            that._zonePicker();\n\n            that._zoneTitle.bind(\"cascade\", function() {\n                if (!this.value()) {\n                    that._zone.wrapper.hide();\n                }\n            });\n\n            that._zone.bind(\"cascade\", function() {\n                that._value = this.value();\n                that.trigger(CHANGE);\n            });\n\n            that.value(that.options.value);\n        },\n        options: {\n            name: \"TimezoneEditor\",\n            value: \"\",\n            optionLabel: \"No timezone\"\n        },\n        events: [ CHANGE ],\n\n        _zoneTitlePicker: function() {\n            var that = this,\n                zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n\n            that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                dataSource: kendo.timezone.zones_titles,\n                dataValueField: \"other_zone\",\n                dataTextField: \"name\",\n                optionLabel: that.options.optionLabel\n            });\n        },\n\n        _zonePicker: function() {\n            var that = this,\n                zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n\n            that._zone = new kendo.ui.DropDownList(zone, {\n                dataValueField: \"zone\",\n                dataTextField: \"territory\",\n                dataSource: that._zonesQuery.data,\n                cascadeFrom: that._zoneTitleId,\n                dataBound: function() {\n                    that._value = this.value();\n                    this.wrapper.toggle(this.dataSource.view().length > 1);\n                }\n            });\n\n            that._zone.wrapper.hide();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        value: function(value) {\n            var that = this,\n                zone;\n\n            if (value === undefined$1) {\n                return that._value;\n            }\n\n            zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n            if (zone) {\n                that._zoneTitle.value(zone.other_zone);\n                that._zone.value(zone.zone);\n            } else {\n                that._zoneTitle.select(0);\n            }\n\n        }\n    });\n\n    ui.plugin(TimezoneEditor);\n\n    var ZONETITLEOPTIONTEMPLATE = kendo.template('<option value=\"#=other_zone#\">#=name#</option>');\n    var ZONEOPTIONTEMPLATE = kendo.template('<option value=\"#=zone#\">#=territory#</option>');\n\n    var MobileTimezoneEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                zones = kendo.timezone.windows_zones;\n\n            if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            that._zonesQuery = new kendo.data.Query(zones);\n            that._zoneTitlePicker();\n            that._zonePicker();\n\n            that.value(that.options.value);\n        },\n\n        options: {\n            name: \"MobileTimezoneEditor\",\n            optionLabel: \"No timezone\",\n            value: \"\"\n        },\n\n        events: [ CHANGE ],\n\n        _bindZones: function(value) {\n            var data = value ? this._filter(value) : [];\n\n            this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n        },\n\n        _filter: function(value) {\n            return this._zonesQuery.filter({ field: \"other_zone\", operator: \"eq\", value: value }).data;\n        },\n\n        _options: function(data, template, optionLabel) {\n            var idx = 0;\n            var html = \"\";\n            var length = data.length;\n\n            if (optionLabel) {\n                html += template({ other_zone: \"\", name: optionLabel });\n            }\n\n            for (; idx < length; idx++) {\n                html += template(data[idx]);\n            }\n\n            return html;\n        },\n\n        _zoneTitlePicker: function() {\n            var that = this;\n            var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n\n            that._zoneTitle = $('<select>' + options + '</select>')\n                                .appendTo(that.wrapper)\n                                .on(\"change\", function() {\n                                    var value = this.value;\n                                    var zone = that._zonePickerLabel;\n                                    var zoneSelect = zone.find(\"select\");\n\n                                    that._bindZones(value);\n\n                                    if (value && zoneSelect.children().length > 1) {\n                                        zone.show();\n                                    } else {\n                                        zone.hide();\n                                    }\n\n                                    that._value = that._zone[0].value;\n\n                                    that.trigger(CHANGE);\n                                });\n        },\n\n        _zonePicker: function() {\n            var that = this;\n\n            that._zonePickerLabel = $(\"<li class='k-item k-listgroup-item k-zonepicker' style='display:none'>\" +\n                                        \"<label class='k-label k-listgroup-form-row'>\" +\n                                            \"<span class='k-item-title k-listgroup-form-field-label'></span>\" +\n                                            \"<div class='k-listgroup-form-field-wrapper'></div>\" +\n                                        \"</label>\" +\n                                    \"</li>\");\n\n            that._zone = $('<select></select>')\n                            .appendTo(that._zonePickerLabel.find(\"div\"))\n                            .on(\"change\", function() {\n                                that._value = this.value;\n\n                                that.trigger(CHANGE);\n                            });\n\n            this.wrapper.closest(\".k-item\").after(that._zonePickerLabel);\n\n            that._bindZones(that._zoneTitle.val());\n            that._value = that._zone[0].value;\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        value: function(value) {\n            var that = this;\n            var zonePicker = that._zone;\n            var other_zone = \"\";\n            var zone_value = \"\";\n            var zone;\n\n            if (value === undefined$1) {\n                return that._value;\n            }\n\n            zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n            if (zone) {\n                zone_value = zone.zone;\n                other_zone = zone.other_zone;\n            }\n\n            that._zoneTitle.val(other_zone);\n            that._bindZones(other_zone);\n\n            zonePicker.val(zone_value);\n            zone_value = zonePicker[0].value;\n\n            if (zone_value && zonePicker.children.length > 1) {\n                that._zonePickerLabel.show();\n            } else {\n                that._zonePickerLabel.hide();\n            }\n\n            that._value = zone_value;\n        }\n    });\n\n    ui.plugin(MobileTimezoneEditor);\n\n})(window.kendo.jQuery);\n"]}