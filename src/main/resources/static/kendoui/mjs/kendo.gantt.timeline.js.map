{"version":3,"file":"kendo.gantt.timeline.js","names":["__meta__","id","name","category","description","depends","hidden","$","Widget","kendo","ui","kendoDomElement","dom","element","kendoTextElement","text","kendoHtmlElement","html","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","isRtl","keys","Query","data","NS","CLICK","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","DOT","TIME_HEADER_TEMPLATE","template","DAY_HEADER_TEMPLATE","WEEK_HEADER_TEMPLATE","MONTH_HEADER_TEMPLATE","YEAR_HEADER_TEMPLATE","RESIZE_HINT","RESIZE_TOOLTIP_TEMPLATE","PERCENT_RESIZE_TOOLTIP_TEMPLATE","TASK_TOOLTIP_TEMPLATE","OFFSET_TOOLTIP_TEMPLATE","PLANNED_TOOLTIP_TEMPLATE","defaultViews","day","type","week","month","year","blurActiveElement","activeElement","_activeElement","nodeName","toLowerCase","trigger","GanttView","init","options","fn","call","this","title","header","find","styles","gridHeader","content","gridContent","contentWidth","width","_workDays","workDays","dayIndex","workWeekStart","push","workWeekEnd","getWorkDays","_headerTree","headerTree","_taskTree","taskTree","_taskTemplate","taskTemplate","Template","templateSettings","_dependencyTree","dependencyTree","_taskCoordinates","_currentTime","destroy","clearTimeout","_tooltipTimeout","headerRow","_dragHint","_resizeHint","_resizeTooltip","_taskTooltip","_percentCompleteResizeTooltip","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","hourSpan","slotSize","currentTimeMarker","updateInterval","renderLayout","_slots","_createSlots","_tableWidth","_calculateTableWidth","createLayout","_layout","_slotDimensions","_adjustHeight","dependenciesWrapper","height","rows","headers","_headers","colgroup","_colgroup","tree","table","style","role","render","first","last","slot","children","slots","_timeSlots","i","length","offsetLeft","offsetWidth","tasks","contentTable","totalHeight","taskCount","rowsTable","_rowsTable","columnsTable","_columnsTable","tasksTable","_tasksTable","calculatedSize","row","_contentHeight","_rowHeight","undefined","_renderCurrentTime","rowCount","attributes","className","alt","_createTable","slotSpan","cells","slotsCount","totalSpan","span","colspan","isNonWorking","nonWorking","cell","position","plannedPosition","task","resourcesPosition","resourceStyle","rowIndex","taskLeft","taskRight","coordinates","size","_calculateMilestoneWidth","milestoneWidth","Math","round","resourcesField","resource","resourceAlt","resourcesMargin","_calculateResourcesMargin","taskBorderWidth","_calculateTaskBorderWidth","showPlannedTasks","l","_taskPosition","_taskPositionPlanned","borderWidth","start","end","_renderTask","left","max","clientWidth","resourcesWrap","_renderResources","isMilestone","tbody","cols","currentSpan","maxSpan","boundingClientRect","taskMilestone","milestone","append","getBoundingClientRect","right","remove","margin","wrapper","parseInt","css","computedStyle","taskSingle","getComputedStyles","parseFloat","taskWrapper","taskElement","progressHandleOffset","plannedElement","endTaskDotLeft","taskOffsetWrap","offsetElement","editable","wrapClassName","taskWrap","dragHandleStyle","taskWrapAttr","endTaskDotRight","taskFullWidth","_renderPlannedMilestone","_renderPlannedSingleTask","summary","_renderSummary","taskSummaryWrap","_renderMilestone","taskMilestoneWrap","_renderSingleTask","plannedStart","plannedEnd","taskOffset","resize","update","taskActions","link","taskDelete","href","icon","iconDelete","taskResizeHandle","taskResizeHandleWest","taskResizeHandleEast","taskInnerWrap","dependencyCreate","taskDot","taskDotStart","taskDotEnd","dragPercentComplete","percentComplete","taskDragHandle","progressWidth","taskContent","taskChildren","classes","widthExceptDelay","taskDelayed","taskAdvanced","taskComplete","uid","taskSummary","taskSummaryProgress","taskSummaryComplete","taskPlannedMoment","taskPlannedMomentLeft","taskPlannedDuration","taskPlanned","resources","color","get","reverse","startLeft","_offset","date","slotOffset","_slotIndex","field","value","middle","startIdx","endIdx","slice","ceil","_timeByPosition","x","snap","snapToEnd","_slotByPosition","offset","duration","getTime","slotIndex","_renderDependencies","dependencies","elements","apply","_renderDependency","dependency","predecessor","predecessorId","successor","successorId","attr","_renderFF","from","to","lines","_dependencyFF","_arrow","_renderSS","_renderFS","_dependencyFS","_renderSF","delta","that","top","dir","rowHeight","fromTop","floor","toTop","addHorizontal","_line","line","lineHorizontal","addVertical","lineVertical","abs","minLineHeight","direction","arrowWest","arrowEast","count","j","_createDragHint","clone","addClass","dragHint","cursor","visibility","closest","_updateDragHint","_removeDragHint","_createResizeHint","tooltipTop","taskTop","messages","views","format","resizeTooltipFormat","_resizeTooltipWidth","_resizeTooltipTop","_updateResizeHint","resizeStart","tooltipLeft","tablesWidth","support","scrollbar","tooltipWidth","tableOffset","tasksWrapper","appendTo","_removeResizeHint","_updatePercentCompleteTooltip","_removePercentCompleteTooltip","tooltip","tooltipMiddle","arrow","callout","arrowHeight","_updateDependencyDragHint","_removeDependencyDragHint","_creteDependencyDragHint","deltaX","deltaY","y","sqrt","angle","atan","PI","dependencyHint","transform","_createTaskTooltip","mouseLeft","contentOffset","contentScrollLeft","scrollLeft","parents","rowOffset","scrollTop","tooltipWrapper","_adjustTooltipDimensions","_removeTaskTooltip","_createOffsetTooltip","hours","_offsetTooltip","offsetValue","plannedTasksMessages","plannedTasks","minutes","offsetText","days","offsetTooltipDelay","offsetPrefix","_removeOffsetTooltip","_createPlannedTooltip","_plannedTooltip","plannedTooltip","editorMessages","editor","startDate","toString","endDate","_removePlannedTooltip","_scrollTo","elementLeft","elementWidth","elementRight","rowTop","rowBottom","contentTop","contentBottom","contentLeft","contentRight","scrollbarWidth","_scrollToDate","viewStart","viewEnd","columnLevels","level","column","headerText","levelIndex","levelCount","columnIndex","columnCount","_hours","slotEnd","isWorkHour","getHours","setHours","_days","isWorkDay","nextDay","_isWorkDay","_weeks","daySlots","firstDay","calendarInfo","dayOfWeek","addDays","_months","endMonth","firstDayOfMonth","setMonth","getMonth","_years","monthSpan","_slotHeaders","columns","getDay","getCulture","calendars","standard","currentTime","_getCurrentTime","timeOffset","viewStyles","tablesWrap","markerOptions","_currentTimeUpdateTimer","setInterval","bind","reset","gridHeaderWrap","taskDetails","taskDetailsPercent","tooltipContent","tooltipCallout","marquee","marqueeColor","offsetTooltipAdvanced","GanttDayView","timeHeaderTemplate","dayHeaderTemplate","range","optionsRange","getDate","getMilliseconds","daySlot","hourSlots","GanttWeekView","weekHeaderTemplate","endDay","rangeEnd","setDate","GanttMonthView","monthHeaderTemplate","lastDayOfMonth","GanttYearView","yearHeaderTemplate","monthSlots","each","index","GanttTimeline","_wrapper","_domTrees","_views","_selectable","_draggable","_resizable","_percentResizeDraggable","_createDependencyDraggable","_attachEvents","_tooltip","selectable","clearInterval","_unbindView","_selectedView","_moveDraggable","_resizeDraggable","_percentDraggable","_dependencyDraggable","touch","off","calculatedRowHeight","calculatedCellHeight","gridContentWrap","_calculatedSize","Tree","view","isSettings","defaultView","selected","_selectedViewName","_selectView","action","_initializeView","_viewByIndex","getter","window","Error","newRange","newDate","prefix","_range","sort","toArray","_render","_tasks","_taskByUid","currentStart","startOffset","cleanUp","dragInProgress","move","Draggable","distance","filter","holdToDrag","mobileOS","ignore","e","currentTarget","parent","preventDefault","location","throttle","updateHintDate","userEvents","currentEnd","hasClass","taskElementOffset","timelineOffset","originalPercentWidth","maxPercentWidth","currentPercentComplete","updateElement","siblings","initialDelta","currentWidth","min","originalHandle","startX","startY","hoveredHandle","hoveredTask","removeClass","hovered","origin","toggleHandles","toggleClass","elementOffset","tablesOffset","target","elementUnderCursor","currentX","currentY","fromStart","toStart","predecessorElement","successorElement","on","stopPropagation","ctrlKey","document","elementFromPoint","clientX","clientY","click","selectDependency","clearSelection","select","taskWrapActive","_tabindex","selectedDependency","keyCode","DELETE","dependencyDestroy","kendoTouch","doubletap","currentMousePosition","tooltipOptions","mouseMoveHandler","visible","relatedTarget","currentPosition","client","setTimeout","_offsetTooltipTimeout","_plannedTooltipTimeout","_setPlanned","jQuery"],"sources":["kendo.gantt.timeline.js"],"mappings":"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","sourcesContent":["import './kendo.dom.js';\nimport './kendo.touch.js';\nimport './kendo.draganddrop.js';\n\nvar __meta__ = {\n    id: \"gantt.timeline\",\n    name: \"Gantt Timeline\",\n    category: \"web\",\n    description: \"The Gantt Timeline\",\n    depends: [ \"dom\", \"touch\", \"draganddrop\" ],\n    hidden: true\n};\n\n(function($) {\n\n    var Widget = kendo.ui.Widget;\n    var kendoDomElement = kendo.dom.element;\n    var kendoTextElement = kendo.dom.text;\n    var kendoHtmlElement = kendo.dom.html;\n    var isPlainObject = $.isPlainObject;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var extend = $.extend;\n    var isRtl = false;\n    var keys = kendo.keys;\n    var Query = kendo.data.Query;\n    var STRING = \"string\";\n    var NS = \".kendoGanttTimeline\";\n    var CLICK = \"click\";\n    var DBLCLICK = \"dblclick\";\n    var MOUSEMOVE = \"mousemove\";\n    var MOUSEENTER = \"mouseenter\";\n    var MOUSELEAVE = \"mouseleave\";\n    var KEYDOWN = \"keydown\";\n    var DOT = \".\";\n    var TIME_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 't')#\");\n    var DAY_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'ddd M/dd')#\");\n    var WEEK_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'ddd M/dd')# - #=kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')#\");\n    var MONTH_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'MMM')#\");\n    var YEAR_HEADER_TEMPLATE = kendo.template(\"#=kendo.toString(start, 'yyyy')#\");\n    var RESIZE_HINT = kendo.template('<div class=\"#=styles.marquee#\">' +\n                           '<div class=\"#=styles.marqueeColor#\"></div>' +\n                       '</div>');\n    var RESIZE_TOOLTIP_TEMPLATE = kendo.template('<div style=\"z-index: 100002;\" class=\"#=styles.tooltipWrapper# k-gantt-resize-hint\">' +\n                                   '<div class=\"#=styles.tooltipContent#\">' +\n                                        '<div>#=messages.start#: #=kendo.toString(start, format)#</div>' +\n                                        '<div>#=messages.end#: #=kendo.toString(end, format)#</div>' +\n                                   '</div>' +\n                              '</div>');\n    var PERCENT_RESIZE_TOOLTIP_TEMPLATE = kendo.template('<div style=\"z-index: 100002;\" class=\"#=styles.tooltipWrapper#\" >' +\n                                   '<div class=\"#=styles.tooltipContent#\">#=text#%</div>' +\n                                   '<div class=\"#=styles.tooltipCallout#\" style=\"left:13px;\"></div>' +\n                              '</div>');\n    var TASK_TOOLTIP_TEMPLATE = kendo.template('<div class=\"#=kendo.htmlEncode(styles.taskDetails)#\">' +\n                                    '<strong>#=kendo.htmlEncode(task.title)#</strong>' +\n                                    '<div class=\"#=styles.taskDetailsPercent#\">#=kendo.toString(task.percentComplete, \"p0\")#</div>' +\n                                    '<ul class=\"#=styles.reset#\">' +\n                                        '<li>#=messages.start#: #=kendo.toString(task.start, \"h:mm tt ddd, MMM d\")#</li>' +\n                                        '<li>#=messages.end#: #=kendo.toString(task.end, \"h:mm tt ddd, MMM d\")#</li>' +\n                                    '</ul>' +\n                                '</div>');\n    var OFFSET_TOOLTIP_TEMPLATE = kendo.template('<span>#=offsetPrefix#: #=offsetText#</span>');\n    var PLANNED_TOOLTIP_TEMPLATE = kendo.template('<div class=\"k-task-content\">' +\n            '<div>#=plannedStart#: #=startDate#</div>' +\n            '<div>#=plannedEnd#: #=endDate#</div>' +\n        '</div>');\n    var SIZE_CALCULATION_TEMPLATE = \"<table style='visibility: hidden;'>\" +\n        \"<tbody>\" +\n            \"<tr style='height:{0}'>\" +\n                \"<td>&nbsp;</td>\" +\n            \"</tr>\" +\n        \"</tbody>\" +\n    \"</table>\";\n\n    var defaultViews = {\n        day: {\n            type: \"kendo.ui.GanttDayView\"\n        },\n        week: {\n            type: \"kendo.ui.GanttWeekView\"\n        },\n        month: {\n            type: \"kendo.ui.GanttMonthView\"\n        },\n        year: {\n            type: \"kendo.ui.GanttYearView\"\n        }\n    };\n\n    function trimOptions(options) {\n        delete options.name;\n        delete options.prefix;\n        delete options.views;\n\n        return options;\n    }\n\n    function getWorkDays(options) {\n        var workDays = [];\n        var dayIndex = options.workWeekStart;\n\n        workDays.push(dayIndex);\n\n        while (options.workWeekEnd != dayIndex) {\n            if (dayIndex > 6) {\n                dayIndex -= 7;\n            } else {\n                dayIndex++;\n            }\n            workDays.push(dayIndex);\n        }\n        return workDays;\n    }\n\n    function blurActiveElement() {\n        var activeElement = kendo._activeElement();\n\n        if (activeElement && activeElement.nodeName.toLowerCase() !== \"body\") {\n            $(activeElement).trigger(\"blur\");\n        }\n    }\n\n    var viewStyles = {\n        alt: \"k-alt\",\n        reset: \"k-reset\",\n        nonWorking: \"k-nonwork-hour\",\n        header: \"k-header\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        tasksWrapper: \"k-gantt-tables\",\n        rowsTable: \"k-gantt-rows\",\n        columnsTable: \"k-gantt-columns\",\n        tasksTable: \"k-gantt-tasks\",\n        dependenciesWrapper: \"k-gantt-dependencies\",\n        resource: \"k-resource\",\n        resourceAlt: \"k-resource k-alt\",\n        task: \"k-task\",\n        taskSingle: \"k-task-single\",\n        taskMilestone: \"k-task-milestone\",\n        taskSummary: \"k-task-summary\",\n        taskWrap: \"k-task-wrap\",\n        taskMilestoneWrap: \"k-milestone-wrap\",\n        taskSummaryWrap: \"k-summary-wrap\",\n        taskPlanned: \"k-task-planned\",\n        taskPlannedMoment: \"k-task-moment\",\n        taskPlannedDuration: \"k-task-duration\",\n        taskPlannedMomentLeft: \"k-moment-left\",\n        taskAdvanced: \"k-task-advanced\",\n        taskDelayed: \"k-task-delayed\",\n        taskOffset: \"k-task-offset\",\n        taskOffsetWrap: \"k-task-offset-wrap\",\n        taskInnerWrap: \"k-task-inner-wrap\",\n        resourcesWrap: \"k-resources-wrap\",\n        taskDot: \"k-task-dot\",\n        taskDotStart: \"k-task-start\",\n        taskDotEnd: \"k-task-end\",\n        taskDragHandle: \"k-task-draghandle\",\n        taskContent: \"k-task-content\",\n        taskTemplate: \"k-task-template\",\n        taskActions: \"k-task-actions\",\n        taskDelete: \"k-task-delete\",\n        taskComplete: \"k-task-complete\",\n        taskDetails: \"k-task-details\",\n        taskDetailsPercent: \"k-task-pct\",\n        link: \"k-link\",\n        icon: \"k-icon\",\n        iconDelete: \"k-i-close\",\n        taskResizeHandle: \"k-resize-handle\",\n        taskResizeHandleWest: \"k-resize-w\",\n        taskResizeHandleEast: \"k-resize-e\",\n        taskSummaryProgress: \"k-task-summary-progress\",\n        taskSummaryComplete: \"k-task-summary-complete\",\n        line: \"k-gantt-line\",\n        lineHorizontal: \"k-gantt-line-h\",\n        lineVertical: \"k-gantt-line-v\",\n        arrowWest: \"k-arrow-w\",\n        arrowEast: \"k-arrow-e\",\n        dragHint: \"k-drag-hint\",\n        dependencyHint: \"k-gantt-dependency-hint\",\n        tooltipWrapper: \"k-tooltip\",\n        tooltipContent: \"k-tooltip-content\",\n        tooltipCallout: \"k-callout k-callout-s\",\n        callout: \"k-callout\",\n        marquee: \"k-marquee k-gantt-marquee\",\n        marqueeColor: \"k-marquee-color\",\n        offsetTooltipAdvanced: \"k-offset-tooltip-advanced\",\n        offsetTooltipDelay: \"k-offset-tooltip-delayed\",\n        plannedTooltip: \"k-planned-tooltip\"\n    };\n\n    var GanttView = kendo.ui.GanttView = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.title = this.options.title || this.options.name;\n\n            this.header = this.element.find(DOT + GanttView.styles.gridHeader);\n\n            this.content = this.element.find(DOT + GanttView.styles.gridContent);\n\n            this.contentWidth = this.content.width();\n\n            this._workDays = getWorkDays(this.options);\n\n            this._headerTree = options.headerTree;\n\n            this._taskTree = options.taskTree;\n\n            this._taskTemplate = options.taskTemplate ?\n                kendo.template(options.taskTemplate, extend({}, kendo.Template, options.templateSettings)) :\n                null;\n\n            this._dependencyTree = options.dependencyTree;\n\n            this._taskCoordinates = {};\n\n            this._currentTime();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._tooltipTimeout);\n\n            this.headerRow = null;\n            this.header = null;\n            this.content = null;\n\n            this._dragHint = null;\n            this._resizeHint = null;\n            this._resizeTooltip = null;\n            this._taskTooltip = null;\n            this._percentCompleteResizeTooltip = null;\n\n            this._headerTree = null;\n            this._taskTree = null;\n            this._dependencyTree = null;\n        },\n\n        options: {\n            showWorkHours: false,\n            showWorkDays: false,\n            workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n            workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            hourSpan: 1,\n            slotSize: 100,\n            currentTimeMarker: {\n                updateInterval: 10000\n            }\n        },\n\n        renderLayout: function() {\n            this._slots = this._createSlots();\n\n            this._tableWidth = this._calculateTableWidth();\n\n            this.createLayout(this._layout());\n\n            this._slotDimensions();\n\n            this._adjustHeight();\n\n            this.content.find(DOT + GanttView.styles.dependenciesWrapper).width(this._tableWidth);\n        },\n\n        _adjustHeight: function() {\n            if (this.content) {\n                this.content.height(this.element.height() - outerHeight(this.header));\n            }\n        },\n\n        createLayout: function(rows) {\n            var headers = this._headers(rows);\n            var colgroup = this._colgroup();\n            var tree = this._headerTree;\n            var header = kendoDomElement(\"tbody\", null, headers);\n            var table = kendoDomElement(\"table\", { style: { width: this._tableWidth + \"px\" }, role: \"presentation\" }, [colgroup, header]);\n\n            tree.render([table]);\n\n            this.headerRow = this.header.find(\"table\").first().find(\"tr\").last();\n        },\n\n        _slotDimensions: function() {\n            var headers = this.headerRow[0].children;\n            var slots = this._timeSlots();\n            var slot;\n            var header;\n\n            for (var i = 0, length = headers.length; i < length; i++) {\n                header = headers[i];\n                slot = slots[i];\n\n                slot.offsetLeft = header.offsetLeft;\n                slot.offsetWidth = header.offsetWidth;\n            }\n        },\n\n        render: function(tasks) {\n            var taskCount = tasks.length;\n            var styles = GanttView.styles;\n            var contentTable;\n            var rowsTable = this._rowsTable(taskCount);\n            var columnsTable = this._columnsTable(taskCount);\n            var tasksTable = this._tasksTable(tasks);\n            var currentTimeMarker = this.options.currentTimeMarker;\n            var calculatedSize = this.options.calculatedSize;\n            var totalHeight;\n\n            this._taskTree.render([rowsTable, columnsTable, tasksTable]);\n\n            contentTable = this.content.find(DOT + styles.rowsTable);\n\n            if (calculatedSize) {\n                totalHeight = calculatedSize.row * tasks.length;\n                this.content.find(DOT + styles.tasksTable).height(totalHeight);\n                contentTable.height(totalHeight);\n            }\n\n            this._contentHeight = contentTable.height();\n            this._rowHeight = calculatedSize ? calculatedSize.row : this._contentHeight / contentTable.find(\"tr\").length;\n\n            this.content.find(DOT + styles.columnsTable).height(this._contentHeight);\n\n            if (currentTimeMarker !== false && currentTimeMarker.updateInterval !== undefined) {\n                this._renderCurrentTime();\n            }\n        },\n\n        _rowsTable: function(rowCount) {\n            var rows = [];\n            var row;\n            var styles = GanttView.styles;\n            var attributes = [null, { className: styles.alt }];\n\n            for (var i = 0; i < rowCount; i++) {\n                row = kendoDomElement(\"tr\", attributes[i % 2], [\n                    kendoDomElement(\"td\", null, [\n                        kendoTextElement(\"\\u00a0\")\n                    ])\n                ]);\n\n                rows.push(row);\n            }\n\n            return this._createTable(1, rows, { className: styles.rowsTable });\n        },\n\n        _columnsTable: function() {\n            var cells = [];\n            var row;\n            var styles = GanttView.styles;\n            var slots = this._timeSlots();\n            var slotsCount = slots.length;\n            var slot;\n            var slotSpan;\n            var totalSpan = 0;\n            var attributes;\n\n            for (var i = 0; i < slotsCount; i++) {\n                slot = slots[i];\n\n                attributes = {};\n\n                slotSpan = slot.span;\n\n                totalSpan += slotSpan;\n\n                if (slotSpan !== 1) {\n                    attributes.colspan = slotSpan;\n                }\n\n                if (slot.isNonWorking) {\n                    attributes.className = styles.nonWorking;\n                }\n\n                cells.push(kendoDomElement(\"td\", attributes, [\n                    kendoTextElement(\"\\u00a0\")\n                ]));\n            }\n\n            row = kendoDomElement(\"tr\", null, cells);\n\n            return this._createTable(totalSpan, [row], { className: styles.columnsTable });\n        },\n\n        _tasksTable: function(tasks) {\n            var rows = [];\n            var row;\n            var cell;\n            var position;\n            var plannedPosition;\n            var task;\n            var styles = GanttView.styles;\n            var coordinates = this._taskCoordinates = {};\n            var size = this._calculateMilestoneWidth();\n            var milestoneWidth = Math.round(size.width);\n            var resourcesField = this.options.resourcesField;\n            var className = [styles.resource, styles.resourceAlt];\n            var calculatedSize = this.options.calculatedSize;\n            var resourcesPosition;\n            var resourcesMargin = this._calculateResourcesMargin();\n            var taskBorderWidth = this._calculateTaskBorderWidth();\n            var resourceStyle;\n            var showPlannedTasks = this.options.showPlannedTasks;\n\n            var addCoordinates = function(rowIndex) {\n                var taskLeft;\n                var taskRight;\n\n                taskLeft = position.left;\n                taskRight = taskLeft + position.width;\n\n                if (task.isMilestone()) {\n                    taskLeft -= milestoneWidth / 2;\n                    taskRight = taskLeft + milestoneWidth;\n                }\n\n                coordinates[task.id] = {\n                    start: taskLeft,\n                    end: taskRight,\n                    rowIndex: rowIndex\n                };\n            };\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                task = tasks[i];\n\n                position = this._taskPosition(task);\n\n                if (showPlannedTasks) {\n                    plannedPosition = this._taskPositionPlanned(task);\n                    plannedPosition.borderWidth = taskBorderWidth;\n                }\n                position.borderWidth = taskBorderWidth;\n\n                row = kendoDomElement(\"tr\", null);\n                cell = kendoDomElement(\"td\");\n\n                if (task.start <= this.end && task.end >= this.start) {\n                    cell.children.push(this._renderTask(tasks[i], position, plannedPosition));\n\n                    if (task[resourcesField] && task[resourcesField].length) {\n                        if (isRtl) {\n                            resourcesPosition = this._tableWidth - position.left;\n                        } else {\n                            resourcesPosition = Math.max((position.width || size.clientWidth), 0) + position.left;\n                        }\n\n                        resourceStyle = {\n                            width: (this._tableWidth - (resourcesPosition + resourcesMargin)) + \"px\"\n                        };\n\n                        resourceStyle[isRtl ? \"right\" : \"left\"] = resourcesPosition + \"px\";\n\n                        if (calculatedSize) {\n                            resourceStyle.height = calculatedSize.cell + \"px\";\n                        }\n\n                        cell.children.push(kendoDomElement(\"div\",\n                            {\n                                className: styles.resourcesWrap,\n                                style: resourceStyle\n                            },\n                            this._renderResources(task[resourcesField], className[i % 2]))\n                        );\n                    }\n\n                    addCoordinates(i);\n                }\n                row.children.push(cell);\n                rows.push(row);\n            }\n\n            return this._createTable(1, rows, { className: GanttView.styles.tasksTable });\n        },\n\n        _createTable: function(colspan, rows, styles) {\n            var cols = [];\n            var colgroup;\n            var tbody;\n\n            for (var i = 0; i < colspan; i++) {\n                cols.push(kendoDomElement(\"col\"));\n            }\n\n            colgroup = kendoDomElement(\"colgroup\", null, cols);\n\n            tbody = kendoDomElement(\"tbody\", null, rows);\n\n            if (!styles.style) {\n                styles.style = {};\n            }\n\n            styles.style.width = this._tableWidth + \"px\";\n            styles.role = \"presentation\";\n\n            return kendoDomElement(\"table\", styles, [colgroup, tbody]);\n        },\n\n        _calculateTableWidth: function() {\n            var slots = this._timeSlots();\n            var maxSpan = 0;\n            var totalSpan = 0;\n            var currentSpan;\n            var tableWidth;\n\n            for (var i = 0, length = slots.length; i < length; i++) {\n                currentSpan = slots[i].span;\n\n                totalSpan += currentSpan;\n\n                if (currentSpan > maxSpan) {\n                    maxSpan = currentSpan;\n                }\n            }\n\n            tableWidth = Math.round((totalSpan * this.options.slotSize) / maxSpan);\n\n            return tableWidth;\n        },\n\n        _calculateMilestoneWidth: function() {\n            var size;\n            var className = GanttView.styles.task + \" \" + GanttView.styles.taskMilestone;\n            var milestone = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n            var boundingClientRect;\n\n            this.content.append(milestone);\n\n            boundingClientRect = milestone[0].getBoundingClientRect();\n\n            size = {\n                \"width\": boundingClientRect.right - boundingClientRect.left,\n                \"clientWidth\": milestone[0].clientWidth\n            };\n\n            milestone.remove();\n\n            return size;\n        },\n\n        _calculateResourcesMargin: function() {\n            var margin;\n            var wrapper = $(\"<div class='\" + GanttView.styles.resourcesWrap + \"' style='visibility: hidden; position: absolute'>\");\n\n            this.content.append(wrapper);\n\n            margin = parseInt(wrapper.css(isRtl ? \"margin-right\" : \"margin-left\"), 10);\n\n            wrapper.remove();\n\n            return margin;\n        },\n\n        _calculateTaskBorderWidth: function() {\n            var width;\n            var className = GanttView.styles.task + \" \" + GanttView.styles.taskSingle;\n            var task = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n            var computedStyle;\n\n            this.content.append(task);\n\n            computedStyle = kendo.getComputedStyles(task[0], [\"border-left-width\"]);\n\n            width = parseFloat(computedStyle[\"border-left-width\"], 10);\n\n            task.remove();\n\n            return width;\n        },\n\n        _renderTask: function(task, position, plannedPosition) {\n            var editable = this.options.editable;\n            var taskLeft = position.left;\n            var styles = GanttView.styles;\n            var wrapClassName = styles.taskWrap;\n            var calculatedSize = this.options.calculatedSize;\n            var dragHandleStyle = {};\n            var taskWrapAttr = {\n                className: wrapClassName,\n                style: { left: taskLeft + \"px\" }\n            };\n            var children = [];\n            var endTaskDotRight = 0;\n            var taskFullWidth = position.width;\n            var taskWrapper, taskElement, progressHandleOffset, plannedElement;\n            var endTaskDotLeft, taskOffsetWrap, offsetElement, offsetWidth;\n\n            if (calculatedSize) {\n                taskWrapAttr.style.height = calculatedSize.cell + \"px\";\n            }\n\n            if (plannedPosition) {\n                if (task.isMilestone()) {\n                    plannedElement = this._renderPlannedMilestone(position, plannedPosition);\n                } else {\n                    plannedElement = this._renderPlannedSingleTask(position, plannedPosition, task);\n                }\n\n                children.push(plannedElement);\n\n                if (isRtl && plannedPosition.left <= position.left) {\n                    taskWrapAttr.style.left = plannedPosition.left + \"px\";\n                }\n            }\n\n            if (task.summary) {\n                taskElement = this._renderSummary(task, position, plannedPosition);\n                taskWrapAttr.className += \" \" + styles.taskSummaryWrap;\n            } else if (task.isMilestone()) {\n                taskElement = this._renderMilestone(task, position);\n                taskWrapAttr.className += \" \" + styles.taskMilestoneWrap;\n            } else {\n                taskElement = this._renderSingleTask(task, position, plannedPosition);\n            }\n\n            if (plannedPosition && !task.isMilestone() && task.plannedStart < task.end && task.plannedEnd > task.start && task.plannedEnd < task.end) {\n                if (isRtl) {\n                    taskFullWidth = position.left + position.width - plannedPosition.left;\n                } else {\n                    taskFullWidth = plannedPosition.left + plannedPosition.width - position.left;\n                }\n\n                if (isRtl) {\n                    offsetWidth = plannedPosition.left - position.left;\n                } else {\n                    offsetWidth = position.left + position.width - (plannedPosition.left + plannedPosition.width);\n                }\n\n                offsetElement = kendoDomElement(\"div\", {\n                    className: styles.taskOffset,\n                    style: { width: offsetWidth - 2 * plannedPosition.borderWidth + \"px\" }\n                });\n\n                if (editable && editable.resize !== false && editable.update !== false && !task.summary) {\n                    if (editable.destroy !== false) {\n                        offsetElement.children.push(kendoDomElement(\"span\", { className: styles.taskActions }, [\n                            kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                                kendoDomElement(\"span\", { className: styles.icon + \" \" + styles.iconDelete })\n                            ])\n                        ]));\n                    }\n\n                    if (isRtl) {\n                        offsetElement.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest,\n                            style: {\n                                right: position.width - 5 + \"px\"\n                            }\n                        }));\n                    } else {\n                        offsetElement.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                        }));\n                    }\n                }\n\n                taskOffsetWrap = kendoDomElement(\"div\", {\n                    className: styles.taskOffsetWrap + \" \" + styles.taskInnerWrap\n                }, [ taskElement, offsetElement ]);\n\n                children.push(taskOffsetWrap);\n            } else if (plannedPosition) {\n                children.push(kendoDomElement(\"div\", {\n                    className: styles.taskInnerWrap\n                }, [ taskElement ]));\n            } else {\n                children.push(taskElement);\n            }\n\n            taskWrapper = kendoDomElement(\"div\", taskWrapAttr, children);\n\n            if (editable && editable.dependencyCreate !== false) {\n                if (plannedPosition && task.plannedEnd > task.end) {\n                    endTaskDotRight = plannedPosition.left + plannedPosition.width - position.left - position.width - 3 + \"px\";\n                }\n\n                taskWrapper.children.push(kendoDomElement(\"div\", {\n                    className: styles.taskDot + \" \" + styles.taskDotStart\n                }));\n\n                if (isRtl) {\n                    endTaskDotRight = \"auto\";\n                    if (plannedPosition && task.plannedEnd > task.end) {\n                        endTaskDotLeft = position.left - plannedPosition.left + \"px\";\n                    }\n                }\n\n                taskWrapper.children.push(kendoDomElement(\"div\", {\n                    className: styles.taskDot + \" \" + styles.taskDotEnd,\n                    style: { right: endTaskDotRight, left: endTaskDotLeft }\n                }));\n            }\n\n            if (!task.summary && !task.isMilestone() && editable && editable.dragPercentComplete !== false && editable.update !== false && this._taskTemplate === null) {\n                progressHandleOffset = Math.round(taskFullWidth * task.percentComplete);\n\n                dragHandleStyle[isRtl ? \"right\" : \"left\"] = progressHandleOffset + \"px\";\n                taskWrapper.children.push(kendoDomElement(\"div\", { className: styles.taskDragHandle, style: dragHandleStyle }));\n            }\n\n            return taskWrapper;\n        },\n\n        _renderSingleTask: function(task, position, plannedPosition) {\n            var styles = GanttView.styles;\n            var progressWidth;\n            var taskChildren = [];\n            var taskContent;\n            var editable = this.options.editable;\n            var classes = styles.task + \" \" + styles.taskSingle;\n            var widthExceptDelay = position.width;\n\n            if (plannedPosition) {\n                if (task.plannedEnd && task.plannedEnd <= task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                    if (!isRtl) {\n                        widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                    } else {\n                        widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                    }\n                }\n            }\n\n            progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n            if (this._taskTemplate !== null) {\n                taskContent = kendoHtmlElement(this._taskTemplate(task));\n            } else {\n                taskContent = kendoTextElement(task.title);\n                taskChildren.push(kendoDomElement(\"div\", { className: styles.taskComplete, style: { width: progressWidth + \"px\" } }));\n            }\n\n            var content = kendoDomElement(\"div\", { className: styles.taskContent }, [\n                kendoDomElement(\"div\", { className: styles.taskTemplate }, [\n                    taskContent\n                ])\n            ]);\n\n            taskChildren.push(content);\n\n            if (editable) {\n                if (editable.destroy !== false && (!plannedPosition || !task.plannedEnd || (task.end <= task.plannedEnd || task.start >= task.plannedEnd))) {\n                    content.children.push(kendoDomElement(\"span\", { className: styles.taskActions }, [\n                        kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                            kendoDomElement(\"span\", { className: styles.icon + \" \" + styles.iconDelete })\n                        ])\n                    ]));\n                }\n\n                if (editable.resize !== false && editable.update !== false) {\n                    content.children.push(kendoDomElement(\"span\", {\n                        className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest\n                    }));\n                    content.children.push(kendoDomElement(\"span\", {\n                        className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                    }));\n                }\n            }\n\n            var element = kendoDomElement(\"div\", {\n                className: classes, \"data-uid\": task.uid, style:\n                    { width: Math.max((widthExceptDelay - position.borderWidth * 2), 0) + \"px\" }\n            }, taskChildren);\n\n            return element;\n        },\n\n        _renderMilestone: function(task) {\n            var styles = GanttView.styles;\n            var classes = styles.task + \" \" + styles.taskMilestone;\n            var showPlanned = this.options.showPlannedTasks;\n\n            if (showPlanned && task.plannedEnd && task.plannedEnd < task.start) {\n                classes += \" \" + styles.taskDelayed;\n            } else if (task.plannedStart && task.plannedStart > task.end) {\n                classes += \" \" + styles.taskAdvanced;\n            }\n\n            return kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid });\n        },\n\n        _renderSummary: function(task, position, plannedPosition) {\n            var styles = GanttView.styles;\n            var widthExceptDelay = position.width;\n            var progressWidth;\n            var classes = styles.task + \" \" + styles.taskSummary;\n\n            if (plannedPosition) {\n                if (task.plannedEnd && task.plannedEnd <= task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                    if (!isRtl) {\n                        widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                    } else {\n                        widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                    }\n                }\n            }\n\n            progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n            var element = kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, style: { width: widthExceptDelay + \"px\" } }, [\n                kendoDomElement(\"div\", { className: styles.taskSummaryProgress, style: { width: progressWidth + \"px\" } }, [\n                    kendoDomElement(\"div\", { className: styles.taskSummaryComplete, style: { width: position.width + \"px\" } })\n                ])\n            ]);\n\n            return element;\n        },\n\n        _renderPlannedSingleTask: function(position, plannedPosition, task) {\n            var styles = GanttView.styles;\n            var children = [];\n            var style = {};\n\n            if (task.plannedStart && task.plannedEnd) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n                children.push(kendoDomElement(\"div\", {\n                    className: styles.taskPlannedDuration, style:\n                        { width: Math.max((plannedPosition.width - plannedPosition.borderWidth * 2 - 16), 0) + \"px\" }\n                }));\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment }));\n            } else if (task.plannedStart) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n            } else if (task.plannedEnd) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment, style: { \"margin-left\": Math.max(plannedPosition.width - 5, 0) + \"px\" } }));\n            }\n\n            if (isRtl) {\n                style = {\n                    \"margin-right\": position.left - plannedPosition.left + position.width - plannedPosition.width + \"px\"\n                };\n            } else {\n                style = {\n                    \"margin-left\": plannedPosition.left - position.left + \"px\"\n                };\n            }\n\n            var element = kendoDomElement(\"div\", {\n                className: styles.taskPlanned,\n                style: style\n            }, children);\n\n            return element;\n        },\n\n        _renderPlannedMilestone: function(position, plannedPosition) {\n            var styles = GanttView.styles;\n            var style = {};\n            var element;\n\n            if (isRtl) {\n                style = {\n                    \"margin-right\": position.left - plannedPosition.left + \"px\"\n                };\n            } else {\n                style = {\n                    \"margin-left\": plannedPosition.left - position.left + \"px\"\n                };\n            }\n\n            element = kendoDomElement(\"div\", {\n                className: styles.taskPlanned,\n                style: style\n            }, [\n                kendoDomElement(\"div\", { className: styles.taskPlannedMoment })\n            ]);\n\n            return element;\n        },\n\n        _renderResources: function(resources, className) {\n            var children = [];\n            var resource;\n\n            for (var i = 0, length = resources.length; i < length; i++) {\n                resource = resources[i];\n                children.push(kendoDomElement(\"span\", {\n                    className: className,\n                    style: {\n                        \"color\": resource.get(\"color\")\n                    }\n                }, [kendoTextElement(resource.get(\"name\"))]));\n            }\n\n            if (isRtl) {\n                children.reverse();\n            }\n\n            return children;\n        },\n\n        _taskPosition: function(task) {\n            var round = Math.round;\n\n            var startLeft = round(this._offset(isRtl ? task.end : task.start));\n            var endLeft = round(this._offset(isRtl ? task.start : task.end));\n\n            return { left: startLeft, width: endLeft - startLeft };\n        },\n\n        _taskPositionPlanned: function(task) {\n            var round = Math.round;\n\n            var startLeft = round(this._offset(isRtl ? task.plannedEnd : task.plannedStart));\n            var endLeft = round(this._offset(isRtl ? task.plannedStart : task.plannedEnd));\n\n            return { left: startLeft, width: endLeft - startLeft };\n        },\n\n        _offset: function(date) {\n            var slots = this._timeSlots();\n            var slot;\n            var startOffset;\n            var slotDuration;\n            var slotOffset = 0;\n            var startIndex;\n\n            if (!slots.length) {\n                return 0;\n            }\n\n            startIndex = this._slotIndex(\"start\", date);\n\n            slot = slots[startIndex];\n\n            if (slot.end < date) {\n                slotOffset = slot.offsetWidth;\n            } else if (slot.start <= date) {\n                startOffset = date - slot.start;\n                slotDuration = slot.end - slot.start;\n                slotOffset = (startOffset / slotDuration) * slot.offsetWidth;\n            }\n\n            if (isRtl) {\n                slotOffset = (slot.offsetWidth + 1) - slotOffset; // Add one pixel for border\n            }\n\n            return slot.offsetLeft + slotOffset;\n        },\n\n        _slotIndex: function(field, value, reverse) {\n            var slots = this._timeSlots();\n            var startIdx = 0;\n            var endIdx = slots.length - 1;\n            var middle;\n\n            if (reverse) {\n                slots = [].slice.call(slots).reverse();\n            }\n\n            do {\n                middle = Math.ceil((endIdx + startIdx) / 2);\n\n                if (slots[middle][field] < value) {\n                    startIdx = middle;\n                } else {\n                    if (middle === endIdx) {\n                        middle--;\n                    }\n\n                    endIdx = middle;\n                }\n            } while (startIdx !== endIdx);\n\n            if (reverse) {\n                startIdx = (slots.length - 1) - startIdx;\n            }\n\n            return startIdx;\n        },\n\n        _timeByPosition: function(x, snap, snapToEnd) {\n            var slot = this._slotByPosition(x);\n\n            if (snap) {\n                return snapToEnd ? slot.end : slot.start;\n            }\n\n            var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n            var duration = slot.end - slot.start;\n            var slotOffset = offsetLeft - slot.offsetLeft;\n\n            if (isRtl) {\n                slotOffset = slot.offsetWidth - slotOffset;\n            }\n\n            return new Date(slot.start.getTime() + (duration * (slotOffset / slot.offsetWidth)));\n        },\n\n        _slotByPosition: function(x) {\n            var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n            var slotIndex = this._slotIndex(\"offsetLeft\", offsetLeft, isRtl);\n\n            return this._timeSlots()[slotIndex];\n        },\n\n        _renderDependencies: function(dependencies) {\n            var elements = [];\n            var tree = this._dependencyTree;\n\n            for (var i = 0, l = dependencies.length; i < l; i++) {\n                elements.push.apply(elements, this._renderDependency(dependencies[i]));\n            }\n\n            tree.render(elements);\n        },\n\n        _renderDependency: function(dependency) {\n            var predecessor = this._taskCoordinates[dependency.predecessorId];\n            var successor = this._taskCoordinates[dependency.successorId];\n            var elements;\n            var method;\n\n            if (!predecessor || !successor) {\n                return [];\n            }\n\n            method = \"_render\" + [\"FF\", \"FS\", \"SF\", \"SS\"][isRtl ? 3 - dependency.type : dependency.type];\n\n            elements = this[method](predecessor, successor);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].attr[\"data-uid\"] = dependency.uid;\n            }\n\n            return elements;\n        },\n\n        _renderFF: function(from, to) {\n            var lines = this._dependencyFF(from, to, false);\n\n            lines[lines.length - 1].children[0] = this._arrow(true);\n\n            return lines;\n        },\n\n        _renderSS: function(from, to) {\n            var lines = this._dependencyFF(to, from, true);\n\n            lines[0].children[0] = this._arrow(false);\n\n            return lines.reverse();\n        },\n\n        _renderFS: function(from, to) {\n            var lines = this._dependencyFS(from, to, false);\n\n            lines[lines.length - 1].children[0] = this._arrow(false);\n\n            return lines;\n        },\n\n        _renderSF: function(from, to) {\n            var lines = this._dependencyFS(to, from, true);\n\n            lines[0].children[0] = this._arrow(true);\n\n            return lines.reverse();\n        },\n\n        _dependencyFF: function(from, to, reverse) {\n            var that = this;\n            var lines = [];\n            var left = 0;\n            var top = 0;\n            var width = 0;\n            var height = 0;\n            var dir = reverse ? \"start\" : \"end\";\n            var delta;\n            var overlap = 2;\n            var arrowOverlap = 1;\n            var rowHeight = this._rowHeight;\n            var minLineWidth = 10;\n            var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var styles = GanttView.styles;\n\n            var addHorizontal = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n            };\n            var addVertical = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n            };\n\n            left = from[dir];\n            top = fromTop;\n            width = minLineWidth;\n\n            delta = to[dir] - from[dir];\n\n            if ((delta) > 0 !== reverse) {\n                width = Math.abs(delta) + minLineWidth;\n            }\n\n            if (reverse) {\n                left -= width;\n                width -= arrowOverlap;\n                addHorizontal();\n            } else {\n                addHorizontal();\n                left += width - overlap;\n            }\n\n            if (toTop < top) {\n                height = top - toTop;\n                height += overlap;\n                top = toTop;\n                addVertical();\n            } else {\n                height = toTop - top;\n                height += overlap;\n                addVertical();\n                top += (height - overlap);\n            }\n\n            width = Math.abs(left - to[dir]);\n\n            if (!reverse) {\n                width -= arrowOverlap;\n                left -= width;\n            }\n\n            addHorizontal();\n\n            return lines;\n        },\n\n        _dependencyFS: function(from, to, reverse) {\n            var that = this;\n            var lines = [];\n            var left = 0;\n            var top = 0;\n            var width = 0;\n            var height = 0;\n            var rowHeight = this._rowHeight;\n            var minLineHeight = Math.floor(rowHeight / 2);\n            var minLineWidth = 10;\n            var minDistance = 2 * minLineWidth;\n            var delta = to.start - from.end;\n            var overlap = 2;\n            var arrowOverlap = 1;\n            var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var styles = GanttView.styles;\n\n            var addHorizontal = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n            };\n            var addVertical = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n            };\n\n            left = from.end;\n            top = fromTop;\n            width = minLineWidth;\n\n            if (reverse) {\n                left += arrowOverlap;\n\n                if (delta > minDistance) {\n                    width = delta - (minLineWidth - overlap);\n                }\n\n                width -= arrowOverlap;\n            }\n\n            addHorizontal();\n            left += width - overlap;\n\n            if ((delta) <= minDistance) {\n                height = reverse ? Math.abs(toTop - fromTop) - minLineHeight : minLineHeight;\n\n                if (toTop < fromTop) {\n                    top -= height;\n\n                    height += overlap;\n\n                    addVertical();\n                } else {\n                    addVertical();\n                    top += height;\n                }\n\n                width = (from.end - to.start) + minDistance;\n\n                if (width < minLineWidth) {\n                    width = minLineWidth;\n                }\n\n                left -= width - overlap;\n\n                addHorizontal();\n            }\n\n            if (toTop < fromTop) {\n                height = top - toTop;\n                top = toTop;\n\n                height += overlap;\n\n                addVertical();\n            } else {\n                height = toTop - top;\n                addVertical();\n                top += height;\n            }\n\n            width = to.start - left;\n\n            if (!reverse) {\n                width -= arrowOverlap;\n            }\n\n            addHorizontal();\n\n            return lines;\n        },\n\n        _line: function(className, styles) {\n            return kendoDomElement(\"div\", { className: className, style: styles });\n        },\n\n        _arrow: function(direction) {\n            return kendoDomElement(\"span\", { className: direction ? GanttView.styles.arrowWest : GanttView.styles.arrowEast });\n        },\n\n        _colgroup: function() {\n            var slots = this._timeSlots();\n            var count = slots.length;\n            var cols = [];\n\n            for (var i = 0; i < count; i++) {\n                for (var j = 0, length = slots[i].span; j < length; j++) {\n                    cols.push(kendoDomElement(\"col\"));\n                }\n            }\n\n            return kendoDomElement(\"colgroup\", null, cols);\n        },\n\n        _createDragHint: function(element) {\n            var styles = GanttView.styles;\n            var plannedElement;\n\n            this._dragHint = element\n                .clone()\n                .addClass(styles.dragHint)\n                .css({\n                    \"cursor\": \"move\"\n                });\n\n            plannedElement = this._dragHint.find(DOT + styles.taskPlanned);\n\n            plannedElement.css({\n                \"visibility\": \"hidden\"\n            });\n\n            if (isRtl && element.find(DOT + styles.taskAdvanced).length > 0) {\n                plannedElement.css({\n                    \"margin-right\": \"auto\",\n                    \"width\": 0\n                });\n\n                this._dragHint.find(DOT + styles.taskDotEnd).css({\n                    \"left\": 0\n                });\n            }\n\n            element\n                .closest(\"td\")\n                .append(this._dragHint);\n        },\n\n        _updateDragHint: function(start) {\n            var left = this._offset(start);\n            this._dragHint\n                .css({\n                    \"left\": left\n                });\n        },\n\n        _removeDragHint: function() {\n            this._dragHint.remove();\n            this._dragHint = null;\n        },\n\n        _createResizeHint: function(task) {\n            var styles = GanttView.styles;\n            var taskTop = this._taskCoordinates[task.id].rowIndex * this._rowHeight;\n            var tooltipHeight;\n            var tooltipTop;\n            var options = this.options;\n            var messages = options.messages;\n\n            this._resizeHint = $(RESIZE_HINT({ styles: styles })).css({\n                \"top\": 0,\n                \"height\": this._contentHeight\n            });\n\n            this.content.append(this._resizeHint);\n\n            this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                styles: styles,\n                start: task.start,\n                end: task.end,\n                messages: messages.views,\n                format: options.resizeTooltipFormat\n            }))\n            .css({\n                \"top\": 0,\n                \"left\": 0\n            });\n\n            this.content.append(this._resizeTooltip);\n\n            this._resizeTooltipWidth = outerWidth(this._resizeTooltip);\n            tooltipHeight = outerHeight(this._resizeTooltip);\n\n            tooltipTop = taskTop - tooltipHeight;\n\n            if (tooltipTop < 0) {\n                tooltipTop = taskTop + this._rowHeight;\n            }\n\n            this._resizeTooltipTop = tooltipTop;\n        },\n\n        _updateResizeHint: function(start, end, resizeStart) {\n            var left = this._offset(isRtl ? end : start);\n            var right = this._offset(isRtl ? start : end);\n            var width = right - left;\n            var tooltipLeft = (resizeStart !== isRtl) ? left : right;\n            var tablesWidth = this._tableWidth - kendo.support.scrollbar();\n            var tooltipWidth = this._resizeTooltipWidth;\n            var options = this.options;\n            var messages = options.messages;\n            var tableOffset = this.element.find(DOT + GanttView.styles.tasksTable).offset().left - this.element.find(DOT + GanttView.styles.tasksWrapper).offset().left;\n\n            if (isRtl) {\n                left += tableOffset;\n            }\n\n            this._resizeHint\n                .css({\n                    \"left\": left,\n                    \"width\": width\n                });\n\n            if (this._resizeTooltip) {\n                this._resizeTooltip.remove();\n            }\n\n            tooltipLeft -= Math.round(tooltipWidth / 2);\n\n            if (tooltipLeft < 0) {\n                tooltipLeft = 0;\n            } else if (tooltipLeft + tooltipWidth > tablesWidth) {\n                tooltipLeft = tablesWidth - tooltipWidth;\n            }\n\n            if (isRtl) {\n                tooltipLeft += tableOffset;\n            }\n\n            this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                styles: GanttView.styles,\n                start: start,\n                end: end,\n                messages: messages.views,\n                format: options.resizeTooltipFormat\n            }))\n            .css({\n                \"top\": this._resizeTooltipTop,\n                \"left\": tooltipLeft,\n                \"min-width\": tooltipWidth\n            })\n            .appendTo(this.content);\n        },\n\n        _removeResizeHint: function() {\n            this._resizeHint.remove();\n            this._resizeHint = null;\n\n            this._resizeTooltip.remove();\n            this._resizeTooltip = null;\n        },\n\n        _updatePercentCompleteTooltip: function(top, left, text) {\n            this._removePercentCompleteTooltip();\n\n            var tooltip = this._percentCompleteResizeTooltip = $(PERCENT_RESIZE_TOOLTIP_TEMPLATE({ styles: GanttView.styles, text: text }))\n                .appendTo(this.element);\n\n            var tooltipMiddle = Math.round(outerWidth(tooltip) / 2);\n            var arrow = tooltip.find(DOT + GanttView.styles.callout);\n            var arrowHeight = Math.round(outerWidth(arrow) / 2);\n\n            tooltip.css({\n                \"top\": top - (outerHeight(tooltip) + arrowHeight),\n                \"left\": left - tooltipMiddle\n            });\n\n            arrow.css(\"left\", tooltipMiddle - arrowHeight);\n        },\n\n        _removePercentCompleteTooltip: function() {\n            if (this._percentCompleteResizeTooltip) {\n                this._percentCompleteResizeTooltip.remove();\n            }\n\n            this._percentCompleteResizeTooltip = null;\n        },\n\n        _updateDependencyDragHint: function(from, to) {\n            this._removeDependencyDragHint();\n\n            this._creteDependencyDragHint(from, to);\n        },\n\n        _creteDependencyDragHint: function(from, to) {\n            var styles = GanttView.styles;\n\n            var deltaX = to.x - from.x;\n            var deltaY = to.y - from.y;\n\n            var width = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n            var angle = Math.atan(deltaY / deltaX);\n\n            if (deltaX < 0) {\n                angle += Math.PI;\n            }\n\n            $(\"<div class='\" + styles.line + \" \" + styles.lineHorizontal + \" \" + styles.dependencyHint + \"'></div>\")\n                .css({\n                    \"top\": from.y,\n                    \"left\": from.x,\n                    \"width\": width,\n                    \"transform-origin\": \"0% 0\",\n                    \"-ms-transform-origin\": \"0% 0\",\n                    \"-webkit-transform-origin\": \"0% 0\",\n                    \"transform\": \"rotate(\" + angle + \"rad)\",\n                    \"-ms-transform\": \"rotate(\" + angle + \"rad)\",\n                    \"-webkit-transform\": \"rotate(\" + angle + \"rad)\"\n                })\n                .appendTo(this.content);\n        },\n\n        _removeDependencyDragHint: function() {\n            this.content.find(DOT + GanttView.styles.dependencyHint).remove();\n        },\n\n        _createTaskTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var options = this.options;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = $(element).parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var template = (options.tooltip && options.tooltip.template) ? kendo.template(options.tooltip.template) : TASK_TOOLTIP_TEMPLATE;\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._taskTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" >' +\n                                   '<div class=\"' + styles.taskContent + '\"></div></div>');\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .appendTo(content)\n                .find(DOT + styles.taskContent)\n                .append(template({\n                    styles: styles,\n                    task: task,\n                    messages: options.messages.views\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removeTaskTooltip: function() {\n            if (this._taskTooltip) {\n                this._taskTooltip.remove();\n            }\n\n            this._taskTooltip = null;\n        },\n\n        _createOffsetTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = element.parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._offsetTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" ></div>');\n            var offsetValue = Math.round((task.end.getTime() - task.plannedEnd.getTime()) / 60000);\n            var plannedTasksMessages = this.options.messages.plannedTasks;\n            var minutes = offsetValue % 60;\n            var offsetText = minutes + \" \" + plannedTasksMessages.minutes;\n            var hours, days;\n\n            if (offsetValue >= 60) {\n                hours = offsetValue = Math.floor(offsetValue / 60);\n\n                offsetText = hours + \" \" + plannedTasksMessages.hours;\n\n                if (minutes !== 0) {\n                    offsetText += (\" \" + minutes + \" \" + plannedTasksMessages.minutes);\n                }\n\n                if (offsetValue >= 24) {\n                    hours = offsetValue % 24;\n                    days = offsetValue = Math.floor(offsetValue / 24);\n\n                    offsetText = days + \" \" + plannedTasksMessages.days;\n\n                    if (hours !== 0) {\n                        offsetText += (\" \" + hours + \" \" + plannedTasksMessages.hours);\n                    }\n                }\n            }\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .addClass(styles.offsetTooltipDelay)\n                .appendTo(content)\n                .append(OFFSET_TOOLTIP_TEMPLATE({\n                    offsetPrefix: plannedTasksMessages.offsetTooltipDelay,\n                    offsetText: offsetText\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removeOffsetTooltip: function() {\n            if (this._offsetTooltip) {\n                this._offsetTooltip.remove();\n            }\n\n            this._offsetTooltip = null;\n        },\n\n        _createPlannedTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = element.parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._plannedTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + ' ' + styles.plannedTooltip + '\" ></div>');\n            var editorMessages = this.options.messages.editor;\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .appendTo(content)\n                .append(PLANNED_TOOLTIP_TEMPLATE({\n                    plannedStart: editorMessages.plannedStart,\n                    startDate: kendo.toString(task.plannedStart, \"H:mm tt ddd, MMM dd\"),\n                    plannedEnd: editorMessages.plannedEnd,\n                    endDate: kendo.toString(task.plannedEnd, \"H:mm tt ddd, MMM dd\")\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removePlannedTooltip: function() {\n            if (this._plannedTooltip) {\n                this._plannedTooltip.remove();\n            }\n\n            this._plannedTooltip = null;\n        },\n\n        _adjustTooltipDimensions: function(tooltip, rowOffset, contentOffset, left, contentScrollLeft) {\n            var content = this.content;\n            var contentWidth = content.width();\n            var tooltipWidth;\n\n            if (outerHeight(tooltip) < rowOffset.top - contentOffset.top) {\n                tooltip.css(\"top\", ((rowOffset.top - contentOffset.top) - outerHeight(tooltip)) + content.scrollTop());\n            }\n\n            tooltipWidth = outerWidth(tooltip);\n\n            if ((tooltipWidth + left) - contentScrollLeft > contentWidth) {\n                left -= tooltipWidth;\n\n                if (left < contentScrollLeft) {\n                    left = (contentScrollLeft + contentWidth) - (tooltipWidth + 17);\n                }\n\n                tooltip.css(\"left\", left);\n            }\n        },\n\n        _scrollTo: function(element) {\n            var elementLeft = element.offset().left;\n            var elementWidth = element.width();\n            var elementRight = elementLeft + elementWidth;\n\n            var row = element.closest(\"tr\");\n            var rowTop = row.offset().top;\n            var rowHeight = row.height();\n            var rowBottom = rowTop + rowHeight;\n\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentTop = contentOffset.top;\n            var contentHeight = content.height();\n            var contentBottom = contentTop + contentHeight;\n            var contentLeft = contentOffset.left;\n            var contentWidth = content.width();\n            var contentRight = contentLeft + contentWidth;\n\n            var scrollbarWidth = kendo.support.scrollbar();\n\n            if (rowTop < contentTop) {\n                content.scrollTop(content.scrollTop() + (rowTop - contentTop));\n            } else if (rowBottom > contentBottom) {\n                content.scrollTop(content.scrollTop() + (rowBottom + scrollbarWidth - contentBottom));\n            }\n\n            if (elementLeft < contentLeft && elementWidth > contentWidth && elementRight < contentRight ||\n                elementRight > contentRight && elementWidth < contentWidth) {\n                    kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementRight + scrollbarWidth - contentRight));\n            } else if (elementRight > contentRight && elementWidth > contentWidth && elementLeft > contentLeft ||\n                elementLeft < contentLeft && elementWidth < contentWidth) {\n            kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementLeft - contentLeft));\n            }\n        },\n\n        _scrollToDate: function(date) {\n            var viewStart = this.start;\n            var viewEnd = this.end;\n            var offset;\n\n            if (date >= viewStart && date < viewEnd) {\n                offset = this._offset(date);\n\n                if (kendo.support.isRtl(this.element)) {\n                    offset = this._tableWidth - offset;\n                }\n\n                kendo.scrollLeft(this.content, offset);\n            }\n        },\n\n        _timeSlots: function() {\n            if (!this._slots || !this._slots.length) {\n                return [];\n            }\n\n            return this._slots[this._slots.length - 1];\n        },\n\n        _headers: function(columnLevels) {\n            var rows = [];\n            var level;\n            var headers;\n            var column;\n            var headerText;\n            var styles = GanttView.styles;\n\n            for (var levelIndex = 0, levelCount = columnLevels.length; levelIndex < levelCount; levelIndex++) {\n                level = columnLevels[levelIndex];\n                headers = [];\n\n                for (var columnIndex = 0, columnCount = level.length; columnIndex < columnCount; columnIndex++) {\n                    column = level[columnIndex];\n\n                    headerText = kendoHtmlElement(column.text);\n                    headers.push(kendoDomElement(\"td\", { colspan: column.span, className: styles.header + (column.isNonWorking ? (\" \" + styles.nonWorking) : \"\") }, [headerText]));\n                }\n\n                rows.push(kendoDomElement(\"tr\", null, headers));\n            }\n\n            return rows;\n        },\n\n        _hours: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var options = this.options;\n            var workDayStart = options.workDayStart.getHours();\n            var workDayEnd = options.workDayEnd.getHours();\n            var isWorkHour;\n            var hours;\n            var hourSpan = options.hourSpan;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            if (options.showWorkHours) {\n                start.setHours(workDayStart);\n            }\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                hours = slotEnd.getHours();\n\n                isWorkHour = hours >= workDayStart && hours < workDayEnd;\n\n                slotEnd.setHours(slotEnd.getHours() + hourSpan);\n\n                if (hours == slotEnd.getHours()) {\n                    // Chrome DTS Fix\n                    slotEnd.setHours(slotEnd.getHours() + 2 * hourSpan);\n                }\n\n                if (!options.showWorkHours || isWorkHour) {\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        isNonWorking: !isWorkHour,\n                        span: 1\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _days: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var isWorkDay;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = end < kendo.date.nextDay(start) ? end : kendo.date.nextDay(start);\n\n                isWorkDay = this._isWorkDay(start);\n\n                if (!this.options.showWorkDays || isWorkDay) {\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        isNonWorking: !isWorkDay,\n                        span: 1\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _weeks: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var firstDay = this.calendarInfo().firstDay;\n            var daySlots;\n            var span;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = kendo.date.dayOfWeek(kendo.date.addDays(start, 1), firstDay, 1);\n\n                if (slotEnd > end) {\n                    slotEnd = end;\n                }\n\n                daySlots = this._days(start, slotEnd);\n                span = daySlots.length;\n\n                if (span > 0) {\n                    slots.push({\n                        start: daySlots[0].start,\n                        end: daySlots[span - 1].end,\n                        span: span\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _months: function(start, end) {\n            var slotEnd;\n            var endMonth;\n            var slots = [];\n            var daySlots;\n            var span;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                endMonth = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(slotEnd.getMonth() + 1)));\n                slotEnd = end < endMonth ? end : endMonth;\n\n                daySlots = this._days(start, slotEnd);\n                span = daySlots.length;\n\n                if (span > 0) {\n                    slots.push({\n                        start: daySlots[0].start,\n                        end: daySlots[span - 1].end,\n                        span: span\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _years: function(start, end) {\n            var slotEnd;\n            var monthSpan;\n            var endMonth;\n            var slots = [];\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                slotEnd = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(12)));\n\n                if (slotEnd >= end) {\n                    slotEnd = end;\n                }\n\n                endMonth = slotEnd.getMonth() || 12;\n                monthSpan = endMonth - start.getMonth();\n\n                slots.push({\n                    start: start,\n                    end: slotEnd,\n                    span: monthSpan\n                });\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _slotHeaders: function(slots, template) {\n            var columns = [];\n            var slot;\n\n            for (var i = 0, l = slots.length; i < l; i++) {\n                slot = slots[i];\n\n                columns.push({\n                    text: template(slot),\n                    isNonWorking: !!slot.isNonWorking,\n                    span: slot.span\n                });\n            }\n\n            return columns;\n        },\n\n        _isWorkDay: function(date) {\n            var day = date.getDay();\n            var workDays = this._workDays;\n\n            for (var i = 0, l = workDays.length; i < l; i++) {\n                if (workDays[i] === day) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        calendarInfo: function() {\n            return kendo.getCulture().calendars.standard;\n        },\n\n        _renderCurrentTime: function() {\n            var currentTime = this._getCurrentTime();\n            var timeOffset = this._offset(currentTime);\n            var element = $(\"<div class='k-current-time'></div>\");\n            var viewStyles = GanttView.styles;\n            var tablesWrap = this.element.find(DOT + viewStyles.tasksWrapper);\n            var tasksTable = this.element.find(DOT + viewStyles.tasksTable);\n            var slot;\n\n            if (!this.content || !this._timeSlots().length) {\n                return;\n            }\n\n            this.content.find(\".k-current-time\").remove();\n\n            slot = this._timeSlots()[this._slotIndex(\"start\", currentTime)];\n\n            if (currentTime < slot.start || currentTime > slot.end) {\n                return;\n            }\n\n            if (tablesWrap.length && tasksTable.length) {\n                timeOffset += tasksTable.offset().left - tablesWrap.offset().left;\n            }\n\n            element.css({\n                left: timeOffset + \"px\",\n                top: \"0px\",\n                width: \"1px\",\n                height: this._contentHeight + \"px\"\n            })\n            .appendTo(this.content);\n        },\n\n        _getCurrentTime: function() {\n            // Introduced for testing purposes\n            return new Date();\n        },\n\n        _currentTime: function() {\n            var markerOptions = this.options.currentTimeMarker;\n\n            if (markerOptions !== false && markerOptions.updateInterval !== undefined) {\n                this._renderCurrentTime();\n                this._currentTimeUpdateTimer = setInterval(this._renderCurrentTime.bind(this), markerOptions.updateInterval);\n            }\n        }\n    });\n\n    extend(true, GanttView, { styles: viewStyles });\n\n    kendo.ui.GanttDayView = GanttView.extend({\n        name: \"day\",\n\n        options: {\n            timeHeaderTemplate: TIME_HEADER_TEMPLATE,\n            dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            this.start = kendo.date.getDate(range.start);\n            this.end = kendo.date.getDate(range.end);\n\n            if (kendo.date.getMilliseconds(range.end) > 0 || this.end.getTime() === this.start.getTime()) {\n                this.end = kendo.date.addDays(this.end, 1);\n            }\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n                this.start.setHours(optionsRange.start.getHours());\n            }\n\n            if (optionsRange && optionsRange.end) {\n                this.end = kendo.date.getDate(optionsRange.end);\n                this.end.setHours(optionsRange.end.getHours());\n            }\n        },\n\n        _createSlots: function() {\n            var daySlots;\n            var daySlot;\n            var hourSlots;\n            var hours;\n            var slots = [];\n\n            daySlots = this._days(this.start, this.end);\n            hourSlots = [];\n\n            for (var i = 0, l = daySlots.length; i < l; i++) {\n                daySlot = daySlots[i];\n                hours = this._hours(daySlot.start, daySlot.end);\n\n                daySlot.span = hours.length;\n\n                hourSlots.push.apply(hourSlots, hours);\n            }\n\n            slots.push(daySlots);\n            slots.push(hourSlots);\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.dayHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.timeHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttWeekView = GanttView.extend({\n        name: \"week\",\n\n        options: {\n            dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n            weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var calendarInfo = this.calendarInfo();\n            var firstDay = calendarInfo.firstDay;\n            var rangeEnd = range.end;\n            var endDay;\n\n            if (firstDay === rangeEnd.getDay()) {\n                rangeEnd.setDate(rangeEnd.getDate() + 7);\n            }\n\n            this.start = kendo.date.getDate(kendo.date.dayOfWeek(range.start, firstDay, -1));\n            this.end = kendo.date.getDate(kendo.date.dayOfWeek(rangeEnd, firstDay, 1));\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                endDay = new Date(optionsRange.end);\n\n                if (kendo.date.getDate(endDay) < optionsRange.end) {\n                    this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                } else {\n                    this.end = kendo.date.getDate(endDay);\n                }\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n\n            slots.push(this._weeks(this.start, this.end));\n            slots.push(this._days(this.start, this.end));\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.weekHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.dayHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttMonthView = GanttView.extend({\n        name: \"month\",\n\n        options: {\n            weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n            monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var endDay;\n            this.start = kendo.date.firstDayOfMonth(range.start);\n            this.end = kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(range.end)), 1);\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                endDay = new Date(optionsRange.end);\n\n                if (kendo.date.getDate(endDay) < optionsRange.end) {\n                    this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                } else {\n                    this.end = kendo.date.getDate(endDay);\n                }\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n\n            slots.push(this._months(this.start, this.end));\n            slots.push(this._weeks(this.start, this.end));\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.monthHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.weekHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttYearView = GanttView.extend({\n        name: \"year\",\n\n        options: {\n            yearHeaderTemplate: YEAR_HEADER_TEMPLATE,\n            monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var firstDayOfMonth;\n            this.start = kendo.date.firstDayOfMonth(new Date(range.start.setMonth(0)));\n            this.end = kendo.date.firstDayOfMonth(new Date(range.end.setMonth(12))); //set month to first month of next year\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.firstDayOfMonth(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                firstDayOfMonth = kendo.date.firstDayOfMonth(optionsRange.end);\n\n                this.end = kendo.date.getDate(new Date(firstDayOfMonth.setMonth(firstDayOfMonth.getMonth() + 1)));\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n            var monthSlots = this._months(this.start, this.end);\n\n            $(monthSlots).each(function(index, slot) {\n                slot.span = 1;\n            });\n\n            slots.push(this._years(this.start, this.end));\n            slots.push(monthSlots);\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.yearHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.monthHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    var timelineStyles = {\n        wrapper: \"k-timeline k-grid k-widget\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        gridContentWrap: \"k-grid-content\",\n        tasksWrapper: \"k-gantt-tables\",\n        dependenciesWrapper: \"k-gantt-dependencies\",\n        task: \"k-task\",\n        taskOffset: \"k-task-offset\",\n        taskOffsetWrap: \"k-task-offset-wrap\",\n        taskPlanned: \"k-task-planned\",\n        line: \"k-gantt-line\",\n        taskResizeHandle: \"k-resize-handle\",\n        taskResizeHandleWest: \"k-resize-w\",\n        taskDragHandle: \"k-task-draghandle\",\n        taskComplete: \"k-task-complete\",\n        taskDelete: \"k-task-delete\",\n        taskWrapActive: \"k-task-wrap-active\",\n        taskWrap: \"k-task-wrap\",\n        taskDot: \"k-task-dot\",\n        taskDotStart: \"k-task-start\",\n        taskDotEnd: \"k-task-end\",\n        hovered: \"k-hover\",\n        selected: \"k-selected\",\n        origin: \"k-origin\"\n    };\n\n    var GanttTimeline = kendo.ui.GanttTimeline = Widget.extend({\n        init: function(element, options) {\n\n            Widget.fn.init.call(this, element, options);\n\n            if (!this.options.views || !this.options.views.length) {\n                this.options.views = [\"day\", \"week\", \"month\"];\n            }\n\n            isRtl = kendo.support.isRtl(element);\n\n            this._wrapper();\n\n            this._domTrees();\n\n            this._views();\n\n            this._selectable();\n\n            this._draggable();\n\n            this._resizable();\n\n            this._percentResizeDraggable();\n\n            this._createDependencyDraggable();\n\n            this._attachEvents();\n\n            this._tooltip();\n        },\n\n        options: {\n            name: \"GanttTimeline\",\n            messages: {\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    month: \"Month\",\n                    year: \"Year\",\n                    start: \"Start\",\n                    end: \"End\"\n                }\n            },\n            snap: true,\n            selectable: true,\n            editable: true\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._tooltipTimeout);\n\n            if (this._currentTimeUpdateTimer) {\n                clearInterval(this._currentTimeUpdateTimer);\n            }\n\n            this._unbindView(this._selectedView);\n\n            if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            if (this._percentDraggable) {\n                this._percentDraggable.destroy();\n            }\n\n            if (this._dependencyDraggable) {\n                this._dependencyDraggable.destroy();\n            }\n\n            if (this.touch) {\n                this.touch.destroy();\n            }\n\n            this._headerTree = null;\n            this._taskTree = null;\n            this._dependencyTree = null;\n\n            this.wrapper.off(NS);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _wrapper: function() {\n            var styles = GanttTimeline.styles;\n            var that = this;\n            var options = this.options;\n            var calculateSize = function() {\n                var rowHeight = typeof options.rowHeight === STRING ? options.rowHeight :\n                    options.rowHeight + \"px\";\n                var table = $(kendo.format(SIZE_CALCULATION_TEMPLATE, rowHeight));\n                var calculatedRowHeight;\n                var calculatedCellHeight;\n                var content = that.wrapper.find(DOT + styles.tasksWrapper);\n\n                content.append(table);\n\n                calculatedRowHeight = outerHeight(table.find(\"tr\"));\n                calculatedCellHeight = table.find(\"td\").height();\n\n                table.remove();\n\n                return {\n                    \"row\": calculatedRowHeight,\n                    \"cell\": calculatedCellHeight\n                };\n            };\n\n            this.wrapper = this.element\n                .addClass(styles.wrapper)\n                .append(\"<div class='\" + styles.gridHeader + \"'><div class='\" + styles.gridHeaderWrap + \"'></div></div>\")\n                .append(\"<div class='\" + styles.gridContentWrap + \"'><div class='\" + styles.tasksWrapper + \"'></div><div class='\" + styles.dependenciesWrapper + \"'></div></div>\");\n\n            if (options.rowHeight) {\n                this._calculatedSize = calculateSize();\n            }\n        },\n\n        _domTrees: function() {\n            var styles = GanttTimeline.styles;\n            var tree = kendo.dom.Tree;\n            var wrapper = this.wrapper;\n\n            this._headerTree = new tree(wrapper.find(DOT + styles.gridHeaderWrap)[0]);\n\n            this._taskTree = new tree(wrapper.find(DOT + styles.tasksWrapper)[0]);\n\n            this._dependencyTree = new tree(wrapper.find(DOT + styles.dependenciesWrapper)[0]);\n        },\n\n        _views: function() {\n            var views = this.options.views;\n            var view;\n            var isSettings;\n            var name;\n            var defaultView;\n            var selected;\n\n            this.views = {};\n\n            for (var i = 0, l = views.length; i < l; i++) {\n                view = views[i];\n\n                isSettings = isPlainObject(view);\n\n                if (isSettings && view.selectable === false) {\n                    continue;\n                }\n\n                name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                defaultView = defaultViews[name];\n\n                if (defaultView) {\n                    if (isSettings) {\n                        view.type = defaultView.type;\n                    }\n\n                    defaultView.title = this.options.messages.views[name];\n                }\n\n                view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                    this.views[name] = view;\n\n                    if (!selected || view.selected) {\n                        selected = name;\n                    }\n                }\n            }\n\n            if (selected) {\n                this._selectedViewName = selected;\n            }\n        },\n\n        view: function(name) {\n            if (name) {\n                this._selectView(name);\n\n                this.trigger(\"navigate\", { view: name, action: \"changeView\" });\n            }\n\n            return this._selectedView;\n        },\n\n        _selectView: function(name) {\n            if (name && this.views[name]) {\n                if (this._selectedView) {\n                    this._unbindView(this._selectedView);\n                }\n\n                this._selectedView = this._initializeView(name);\n                this._selectedViewName = name;\n            }\n        },\n\n        _viewByIndex: function(index) {\n            var view;\n            var views = this.views;\n\n            for (view in views) {\n                if (!index) {\n                    return view;\n                }\n\n                index--;\n            }\n        },\n\n        _initializeView: function(name) {\n            var view = this.views[name];\n\n            if (view) {\n                var type = view.type;\n\n                if (typeof type === \"string\") {\n                    type = kendo.getter(view.type)(window);\n                }\n\n                if (type) {\n                    var newRange = {};\n                    extend(newRange, this.options.range, view.range);\n\n                    var newDate = view.date || this.options.date;\n\n                    view = new type(this.wrapper, trimOptions(extend(true, {\n                        headerTree: this._headerTree,\n                        taskTree: this._taskTree,\n                        dependencyTree: this._dependencyTree,\n                        calculatedSize: this._calculatedSize\n                    }, view, this.options, {\n                        date: newDate,\n                        range: newRange\n                    })));\n                } else {\n                    throw new Error(\"There is no such view\");\n                }\n            }\n\n            return view;\n        },\n\n        _unbindView: function(view) {\n            if (view) {\n                view.destroy();\n            }\n        },\n\n        _range: function(tasks) {\n            var startOrder = {\n                field: \"start\",\n                dir: \"asc\"\n            };\n            var endOrder = {\n                field: \"end\",\n                dir: \"desc\"\n            };\n\n            if (!tasks || !tasks.length) {\n                return { start: new Date(), end: new Date() };\n            }\n\n            var start = new Query(tasks).sort(startOrder).toArray()[0].start || new Date();\n            var end = new Query(tasks).sort(endOrder).toArray()[0].end || new Date();\n\n            return {\n                start: new Date(start),\n                end: new Date(end)\n            };\n        },\n\n        _render: function(tasks) {\n            var view = this.view();\n            var range = this._range(tasks);\n            var date = view.options.date;\n\n            this._tasks = tasks;\n\n            view.range(range);\n\n            view.renderLayout();\n\n            view.render(tasks);\n\n            if (date) {\n                view._scrollToDate(date);\n            }\n        },\n\n        _renderDependencies: function(dependencies) {\n            this.view()._renderDependencies(dependencies);\n        },\n\n        _taskByUid: function(uid) {\n            var tasks = this._tasks;\n            var length = tasks.length;\n            var task;\n\n            for (var i = 0; i < length; i++) {\n                task = tasks[i];\n\n                if (task.uid === uid) {\n                    return task;\n                }\n            }\n        },\n\n        _draggable: function() {\n            var that = this;\n            var element;\n            var task;\n            var currentStart;\n            var startOffset;\n            var snap = this.options.snap;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removeDragHint();\n\n                if (element) {\n                    element.css(\"opacity\", 1);\n                }\n\n                element = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            if (!editable || editable.move === false || editable.update === false) {\n                return;\n            }\n\n            this._moveDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                holdToDrag: kendo.support.mobileOS,\n                ignore: DOT + styles.taskResizeHandle\n            });\n\n            this._moveDraggable\n                .bind(\"dragstart\", function(e) {\n                    var view = that.view();\n                    element = e.currentTarget.closest(DOT + styles.taskWrap);\n                    task = that._taskByUid(e.currentTarget.parent().find(DOT + styles.task).attr(\"data-uid\"));\n\n                    if (that.trigger(\"moveStart\", { task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    currentStart = task.start;\n                    startOffset = view._timeByPosition(e.x.location, snap) - currentStart;\n\n                    view._createDragHint(element);\n\n                    element.css(\"opacity\", 0.5);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    var view = that.view();\n                    var date = new Date(view._timeByPosition(e.x.location, snap) - startOffset);\n                    var updateHintDate = date;\n\n                    if (!that.trigger(\"move\", { task: task, start: date })) {\n                        currentStart = date;\n\n                        if (isRtl) {\n                            updateHintDate = new Date(currentStart.getTime() + task.duration());\n                        }\n\n                        view._updateDragHint(updateHintDate);\n                    }\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"moveEnd\", { task: task, start: currentStart });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _resizable: function() {\n            var that = this;\n            var element;\n            var task;\n            var currentStart;\n            var currentEnd;\n            var resizeStart;\n            var snap = this.options.snap;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removeResizeHint();\n                element = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            if (!editable || editable.resize === false || editable.update === false) {\n                return;\n            }\n\n            this._resizeDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskResizeHandle,\n                holdToDrag: false\n            });\n\n            this._resizeDraggable\n                .bind(\"dragstart\", function(e) {\n                    resizeStart = e.currentTarget.hasClass(styles.taskResizeHandleWest);\n\n                    if (isRtl) {\n                        resizeStart = !resizeStart;\n                    }\n\n                    element = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n\n                    task = that._taskByUid(element.attr(\"data-uid\"));\n\n                    if (that.trigger(\"resizeStart\", { task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    currentStart = task.start;\n                    currentEnd = task.end;\n\n                    that.view()._createResizeHint(task);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    var view = that.view();\n                    var date = view._timeByPosition(e.x.location, snap, !resizeStart);\n\n                    if (resizeStart) {\n                        if (date < currentEnd) {\n                            currentStart = date;\n                        } else {\n                            currentStart = currentEnd;\n                        }\n                    } else {\n                        if (date > currentStart) {\n                            currentEnd = date;\n                        } else {\n                            currentEnd = currentStart;\n                        }\n                    }\n\n                    if (!that.trigger(\"resize\", { task: task, start: currentStart, end: currentEnd })) {\n                        view._updateResizeHint(currentStart, currentEnd, resizeStart);\n                    }\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"resizeEnd\", { task: task, resizeStart: resizeStart, start: currentStart, end: currentEnd });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _percentResizeDraggable: function() {\n            var that = this;\n            var task;\n            var taskElement;\n            var taskElementOffset;\n            var timelineOffset;\n            var originalPercentWidth;\n            var maxPercentWidth;\n            var currentPercentComplete;\n            var tooltipTop;\n            var tooltipLeft;\n            var styles = GanttTimeline.styles;\n            var delta;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removePercentCompleteTooltip();\n                taskElement = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            var updateElement = function(width) {\n                var taskDragHandle = taskElement.siblings(DOT + styles.taskDragHandle);\n\n                if (!taskDragHandle.length) {\n                    taskDragHandle = taskElement.closest(DOT + styles.taskWrap).find(DOT + styles.taskDragHandle);\n                }\n\n                taskDragHandle.css(isRtl ? \"right\" : \"left\", width);\n\n                taskElement\n                    .find(DOT + styles.taskComplete)\n                    .width(width);\n            };\n\n            if (!editable || editable.dragPercentComplete === false || editable.update === false) {\n                return;\n            }\n\n            this._percentDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskDragHandle,\n                holdToDrag: false\n            });\n\n            this._percentDraggable\n                .bind(\"dragstart\", function(e) {\n                    if (that.trigger(\"percentResizeStart\")) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    taskElement = e.currentTarget.siblings(DOT + styles.task);\n\n                    if (!taskElement.length) {\n                        taskElement = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                    }\n\n                    task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                    currentPercentComplete = task.percentComplete;\n\n                    taskElementOffset = taskElement.offset();\n                    timelineOffset = this.element.offset();\n\n                    originalPercentWidth = taskElement.find(DOT + styles.taskComplete).width();\n                    maxPercentWidth = outerWidth(taskElement);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    delta = isRtl ? -e.x.initialDelta : e.x.initialDelta;\n\n                    var currentWidth = Math.max(0, Math.min(maxPercentWidth, originalPercentWidth + delta));\n\n                    currentPercentComplete = Math.round((currentWidth / maxPercentWidth) * 100);\n\n                    updateElement(currentWidth);\n\n                    tooltipTop = taskElementOffset.top - timelineOffset.top;\n                    tooltipLeft = taskElementOffset.left + currentWidth - timelineOffset.left;\n\n                    if (isRtl) {\n                        tooltipLeft += (maxPercentWidth - 2 * currentWidth);\n                    }\n\n                    that.view()._updatePercentCompleteTooltip(tooltipTop, tooltipLeft, currentPercentComplete);\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"percentResizeEnd\", { task: task, percentComplete: currentPercentComplete / 100 });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    updateElement(originalPercentWidth);\n\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _createDependencyDraggable: function() {\n            var that = this;\n            var originalHandle;\n            var hoveredHandle = $();\n            var hoveredTask = $();\n            var startX;\n            var startY;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                originalHandle\n                    .css(\"display\", \"\")\n                    .removeClass(styles.hovered);\n\n                originalHandle.parent().removeClass(styles.origin);\n                originalHandle = null;\n\n                toggleHandles(false);\n\n                hoveredTask = $();\n                hoveredHandle = $();\n\n                that.view()._removeDependencyDragHint();\n\n                that.dragInProgress = false;\n            };\n\n            var toggleHandles = function(value) {\n                if (!hoveredTask.hasClass(styles.origin)) {\n                    hoveredTask.find(DOT + styles.taskDot).css(\"display\", value ? \"block\" : \"\");\n                    hoveredHandle.toggleClass(styles.hovered, value);\n                }\n            };\n\n            if (!editable || editable.dependencyCreate === false) {\n                return;\n            }\n\n            this._dependencyDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskDot,\n                holdToDrag: false\n            });\n\n            this._dependencyDraggable\n                .bind(\"dragstart\", function(e) {\n                    if (that.trigger(\"dependencyDragStart\")) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    originalHandle = e.currentTarget\n                        .css(\"display\", \"block\")\n                        .addClass(styles.hovered);\n\n                    originalHandle.parent().addClass(styles.origin);\n\n                    var elementOffset = originalHandle.offset();\n                    var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n\n                    startX = Math.round(elementOffset.left - tablesOffset.left + (outerHeight(originalHandle) / 2));\n                    startY = Math.round(elementOffset.top - tablesOffset.top + (outerWidth(originalHandle) / 2));\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    that.view()._removeDependencyDragHint();\n\n                    var target = $(kendo.elementUnderCursor(e));\n                    var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n                    var currentX = e.x.location - tablesOffset.left;\n                    var currentY = e.y.location - tablesOffset.top;\n\n                    that.view()._updateDependencyDragHint({ x: startX, y: startY }, { x: currentX, y: currentY });\n\n                    toggleHandles(false);\n\n                    hoveredHandle = (target.hasClass(styles.taskDot)) ? target : $();\n                    hoveredTask = target.closest(DOT + styles.taskWrap);\n\n                    toggleHandles(true);\n                }, 15))\n                .bind(\"dragend\", function() {\n                    if (hoveredHandle.length) {\n                        var fromStart = originalHandle.hasClass(styles.taskDotStart);\n                        var toStart = hoveredHandle.hasClass(styles.taskDotStart);\n\n                        var type = fromStart ? (toStart ? 3 : 2) : (toStart ? 1 : 0);\n\n                        var predecessorElement = originalHandle.siblings(DOT + styles.task);\n                        if (!predecessorElement.length) {\n                            predecessorElement = originalHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n                        var predecessor = that._taskByUid(predecessorElement.attr(\"data-uid\"));\n\n                        var successorElement = hoveredHandle.siblings(DOT + styles.task);\n                        if (!successorElement.length) {\n                            successorElement = hoveredHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n                        var successor = that._taskByUid(successorElement.attr(\"data-uid\"));\n\n                        if (predecessor !== successor) {\n                            that.trigger(\"dependencyDragEnd\", { type: type, predecessor: predecessor, successor: successor });\n                        }\n                    }\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var styles = GanttTimeline.styles;\n\n            if (this.options.selectable) {\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                        e.stopPropagation();\n\n                        var uid = $(this).attr(\"data-uid\");\n\n                        if (!uid) {\n                            uid = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).data(\"uid\");\n                        }\n\n                        if (!e.ctrlKey) {\n                            that.trigger(\"select\", { uid: uid });\n                        } else {\n                            that.trigger(\"clear\");\n                        }\n                    })\n                    .on(CLICK + NS, DOT + styles.taskWrap, function(e) {\n                        e.stopPropagation();\n\n                        // Decrease z-index of wrap so the we can get to the\n                        // dependency line underneath, if there is any\n                        $(this).css(\"z-index\", \"0\");\n\n                        var target = $(document.elementFromPoint(e.clientX, e.clientY));\n\n                        if (target.hasClass(styles.line)) {\n                            target.click();\n                        }\n\n                        $(this).css(\"z-index\", \"\");\n                    })\n                    .on(CLICK + NS, DOT + styles.tasksWrapper, function() {\n                        if (that.selectDependency().length > 0) {\n                            that.clearSelection();\n                        } else {\n                            that.trigger(\"clear\");\n                        }\n                    })\n                    .on(CLICK + NS, DOT + styles.line, function(e) {\n                        e.stopPropagation();\n\n                        that.selectDependency(this);\n                    });\n            }\n        },\n\n        select: function(value) {\n            var element = this.wrapper.find(value);\n            var styles = GanttTimeline.styles;\n\n            if (element.length) {\n                this.clearSelection();\n\n                element.addClass(styles.selected);\n\n                if (kendo.support.mobileOS) {\n                    element.parent().addClass(styles.taskWrapActive);\n                }\n\n                return;\n            }\n\n            return this.wrapper.find(DOT + styles.task + DOT + styles.selected);\n        },\n\n        selectDependency: function(value) {\n            var element = this.wrapper.find(value);\n            var uid;\n            var styles = GanttTimeline.styles;\n\n            if (element.length) {\n                this.clearSelection();\n                this.trigger(\"clear\");\n\n                uid = $(element).attr(\"data-uid\");\n\n                this.wrapper.find(DOT + styles.line + \"[data-uid='\" + uid + \"']\").addClass(styles.selected);\n\n                return;\n            }\n\n            return this.wrapper.find(DOT + styles.line + DOT + styles.selected);\n        },\n\n        clearSelection: function() {\n            var styles = GanttTimeline.styles;\n\n            this.wrapper\n                .find(DOT + styles.selected)\n                .removeClass(styles.selected);\n\n            if (kendo.support.mobileOS) {\n                this.wrapper\n                    .find(DOT + styles.taskWrapActive)\n                    .removeClass(styles.taskWrapActive);\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            if (editable) {\n                this._tabindex();\n\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                        that.trigger(\"removeTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                        e.stopPropagation();\n                        e.preventDefault();\n                    })\n                    .on(KEYDOWN + NS, function(e) {\n                        var selectedDependency;\n                        var editable = that.options.editable;\n\n                        if (e.keyCode === keys.DELETE && editable && editable.dependencyDestroy !== false) {\n                            selectedDependency = that.selectDependency();\n\n                            if (selectedDependency.length) {\n                                that.trigger(\"removeDependency\", { uid: selectedDependency.attr(\"data-uid\") });\n                                that.clearSelection();\n                            }\n                        }\n                    });\n\n                if (!kendo.support.mobileOS) {\n                    this.wrapper\n                        .on(DBLCLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                            if (that.options.editable.update !== false) {\n                                that.trigger(\"editTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n\n                                e.stopPropagation();\n                                e.preventDefault();\n                            }\n                        });\n                } else {\n                    this.touch = this.wrapper\n                        .kendoTouch({\n                            filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                            doubletap: function(e) {\n                                if (that.options.editable.update !== false) {\n                                    that.trigger(\"editTask\", { uid: $(e.touch.currentTarget).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                                }\n                            }\n                        }).data(\"kendoTouch\");\n                }\n            }\n        },\n\n        _tooltip: function() {\n            var that = this;\n            var tooltipOptions = this.options.tooltip;\n            var styles = GanttTimeline.styles;\n            var currentMousePosition;\n            var mouseMoveHandler = function(e) {\n                currentMousePosition = e.clientX;\n            };\n\n            if (tooltipOptions && tooltipOptions.visible === false) {\n                return;\n            }\n\n            if (!kendo.support.mobileOS) {\n                this.wrapper\n                        .on(MOUSEENTER + NS, DOT + styles.task, function() {\n                            var element = this;\n                            var task = that._taskByUid($(this).attr(\"data-uid\"));\n\n                            if (that.dragInProgress) {\n                                return;\n                            }\n\n                            that._tooltipTimeout = setTimeout(function() {\n                                that.view()._createTaskTooltip(task, element, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.task, function() {\n                            clearTimeout(that._tooltipTimeout);\n\n                            that.view()._removeTaskTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSEENTER + NS, DOT + styles.taskOffset, function() {\n                            var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                            if (that.dragInProgress) {\n                                return;\n                            }\n\n                            that._offsetTooltipTimeout = setTimeout(function() {\n                                that.view()._createOffsetTooltip(task, taskElement, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function() {\n                            clearTimeout(that._offsetTooltipTimeout);\n\n                            that.view()._removeOffsetTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSEENTER + NS, DOT + styles.taskPlanned, function() {\n                            var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                            that._plannedTooltipTimeout = setTimeout(function() {\n                                that.view()._createPlannedTooltip(task, taskElement, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function() {\n                            clearTimeout(that._plannedTooltipTimeout);\n\n                            that.view()._removePlannedTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        });\n            } else {\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                        e.stopPropagation();\n                        that.view()._removeTaskTooltip();\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.task, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removeTaskTooltip();\n                        }\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removeOffsetTooltip();\n                        }\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removePlannedTooltip();\n                        }\n                    });\n\n                if (this.touch) {\n                    this.touch\n                        .bind(\"tap\", function(e) {\n                            var element = $(e.touch.target);\n                            var currentPosition = e.touch.x.client;\n                            var task;\n\n                            if (!element.hasClass(styles.task)) {\n                                task = that._taskByUid(element.closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\"));\n                                if (that.view()._offsetTooltip) {\n                                    that.view()._removeOffsetTooltip();\n                                }\n\n                                that.view()._createOffsetTooltip(task, element, currentPosition);\n                            } else {\n                                task = that._taskByUid(element.attr(\"data-uid\"));\n                                if (that.view()._taskTooltip) {\n                                    that.view()._removeTaskTooltip();\n                                }\n\n                                that.view()._createTaskTooltip(task, element, currentPosition);\n                            }\n                        })\n                        .bind(\"doubletap\", function() {\n                            that.view()._removeTaskTooltip();\n                            that.view()._removeOffsetTooltip();\n                        });\n                }\n            }\n        },\n        _setPlanned: function(value) {\n            this.options.showPlannedTasks = value;\n            this.view().options.showPlannedTasks = value;\n        }\n    });\n\n    extend(true, GanttTimeline, { styles: timelineStyles });\n\n})(window.kendo.jQuery);\n"]}