{"version":3,"file":"kendo.gantt.timeline.js","names":["__meta__","id","name","category","description","depends","hidden","$","Widget","kendo","ui","kendoDomElement","dom","element","kendoTextElement","text","kendoHtmlElement","html","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","isRtl","keys","Query","data","NS","CLICK","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","DOT","DAY_HEADER_TEMPLATE","start","toString","WEEK_HEADER_TEMPLATE","end","date","addDays","MONTH_HEADER_TEMPLATE","RESIZE_TOOLTIP_TEMPLATE","styles","messages","format","tooltipWrapper","tooltipContent","TASK_TOOLTIP_TEMPLATE","task","htmlEncode","taskDetails","title","taskDetailsPercent","percentComplete","reset","defaultViews","day","type","week","month","year","blurActiveElement","activeElement","_activeElement","nodeName","toLowerCase","trigger","GanttView","init","options","fn","call","this","header","find","gridHeader","content","gridContent","contentWidth","width","_workDays","workDays","dayIndex","workWeekStart","push","workWeekEnd","getWorkDays","_headerTree","headerTree","_taskTree","taskTree","_taskTemplate","taskTemplate","template","Template","templateSettings","_dependencyTree","dependencyTree","_taskCoordinates","_currentTime","destroy","clearTimeout","_tooltipTimeout","headerRow","_dragHint","_resizeHint","_resizeTooltip","_taskTooltip","_percentCompleteResizeTooltip","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","hourSpan","slotSize","currentTimeMarker","updateInterval","renderLayout","_slots","_createSlots","_tableWidth","_calculateTableWidth","createLayout","_layout","_slotDimensions","_adjustHeight","dependenciesWrapper","height","rows","headers","_headers","colgroup","_colgroup","tree","table","style","role","render","first","last","slot","children","slots","_timeSlots","i","length","offsetLeft","offsetWidth","tasks","contentTable","totalHeight","taskCount","rowsTable","_rowsTable","columnsTable","_columnsTable","tasksTable","_tasksTable","calculatedSize","row","_contentHeight","_rowHeight","undefined","_renderCurrentTime","rowCount","attributes","className","alt","_createTable","slotSpan","cells","slotsCount","totalSpan","span","colspan","isNonWorking","nonWorking","cell","position","plannedPosition","resourcesPosition","resourceStyle","rowIndex","taskLeft","taskRight","coordinates","size","_calculateMilestoneWidth","milestoneWidth","Math","round","resourcesField","resource","resourceAlt","resourcesMargin","_calculateResourcesMargin","taskBorderWidth","_calculateTaskBorderWidth","showPlannedTasks","l","_taskPosition","_taskPositionPlanned","borderWidth","_renderTask","left","max","clientWidth","resourcesWrap","_renderResources","isMilestone","tbody","cols","currentSpan","maxSpan","boundingClientRect","taskMilestone","milestone","append","getBoundingClientRect","right","remove","margin","wrapper","parseInt","css","computedStyle","taskSingle","getComputedStyles","parseFloat","taskWrapper","taskElement","progressHandleOffset","plannedElement","endTaskDotLeft","taskOffsetWrap","offsetElement","editable","wrapClassName","taskWrap","dragHandleStyle","taskWrapAttr","endTaskDotRight","taskFullWidth","_renderPlannedMilestone","_renderPlannedSingleTask","summary","_renderSummary","taskSummaryWrap","_renderMilestone","taskMilestoneWrap","_renderSingleTask","plannedStart","plannedEnd","taskOffset","resize","update","taskActions","link","taskDelete","href","icon","iconDelete","taskResizeHandle","taskResizeHandleWest","taskResizeHandleEast","taskInnerWrap","dependencyCreate","taskDot","taskDotStart","taskDotEnd","dragPercentComplete","taskDragHandle","progressWidth","taskContent","taskChildren","classes","widthExceptDelay","taskDelayed","taskAdvanced","taskComplete","uid","taskSummary","taskSummaryProgress","taskSummaryComplete","taskPlannedMoment","taskPlannedMomentLeft","taskPlannedDuration","taskPlanned","resources","color","get","reverse","startLeft","_offset","slotOffset","_slotIndex","field","value","middle","startIdx","endIdx","slice","ceil","_timeByPosition","x","snap","snapToEnd","_slotByPosition","offset","duration","getTime","slotIndex","_renderDependencies","dependencies","elements","apply","_renderDependency","dependency","predecessor","predecessorId","successor","successorId","attr","_renderFF","from","to","lines","_dependencyFF","_arrow","_renderSS","_renderFS","_dependencyFS","_renderSF","delta","that","top","dir","rowHeight","fromTop","floor","toTop","addHorizontal","_line","line","lineHorizontal","addVertical","lineVertical","abs","minLineHeight","direction","arrowWest","arrowEast","count","j","_createDragHint","clone","addClass","dragHint","cursor","visibility","closest","_updateDragHint","_removeDragHint","_createResizeHint","tooltipTop","taskTop","marquee","marqueeColor","RESIZE_HINT","views","resizeTooltipFormat","_resizeTooltipWidth","_resizeTooltipTop","_updateResizeHint","resizeStart","tooltipLeft","tablesWidth","support","scrollbar","tooltipWidth","tableOffset","tasksWrapper","appendTo","_removeResizeHint","_updatePercentCompleteTooltip","_removePercentCompleteTooltip","tooltip","tooltipCallout","PERCENT_RESIZE_TOOLTIP_TEMPLATE","tooltipMiddle","arrow","callout","arrowHeight","_updateDependencyDragHint","_removeDependencyDragHint","_creteDependencyDragHint","deltaX","deltaY","y","sqrt","angle","atan","PI","dependencyHint","transform","_createTaskTooltip","mouseLeft","contentOffset","contentScrollLeft","scrollLeft","parents","rowOffset","scrollTop","_adjustTooltipDimensions","_removeTaskTooltip","_createOffsetTooltip","hours","_offsetTooltip","offsetValue","plannedTasksMessages","plannedTasks","minutes","offsetText","days","offsetTooltipDelay","offsetPrefix","OFFSET_TOOLTIP_TEMPLATE","_removeOffsetTooltip","_createPlannedTooltip","_plannedTooltip","plannedTooltip","editorMessages","editor","startDate","endDate","PLANNED_TOOLTIP_TEMPLATE","_removePlannedTooltip","_scrollTo","elementLeft","elementWidth","elementRight","rowTop","rowBottom","contentTop","contentBottom","contentLeft","contentRight","scrollbarWidth","_scrollToDate","viewStart","viewEnd","columnLevels","level","column","headerText","levelIndex","levelCount","columnIndex","columnCount","_hours","slotEnd","isWorkHour","getHours","setHours","_days","isWorkDay","nextDay","_isWorkDay","_weeks","daySlots","firstDay","calendarInfo","dayOfWeek","_months","endMonth","firstDayOfMonth","setMonth","getMonth","_years","monthSpan","_slotHeaders","columns","getDay","getCulture","calendars","standard","currentTime","_getCurrentTime","timeOffset","viewStyles","tablesWrap","markerOptions","_currentTimeUpdateTimer","setInterval","bind","gridHeaderWrap","offsetTooltipAdvanced","GanttDayView","timeHeaderTemplate","dayHeaderTemplate","range","optionsRange","getDate","getMilliseconds","daySlot","hourSlots","GanttWeekView","weekHeaderTemplate","endDay","rangeEnd","setDate","GanttMonthView","monthHeaderTemplate","lastDayOfMonth","GanttYearView","yearHeaderTemplate","monthSlots","each","index","GanttTimeline","_wrapper","_domTrees","_views","_selectable","_draggable","_resizable","_percentResizeDraggable","_createDependencyDraggable","_attachEvents","_tooltip","selectable","clearInterval","_unbindView","_selectedView","_moveDraggable","_resizeDraggable","_percentDraggable","_dependencyDraggable","touch","off","calculatedRowHeight","calculatedCellHeight","gridContentWrap","_calculatedSize","Tree","view","isSettings","defaultView","selected","_selectedViewName","_selectView","action","_initializeView","_viewByIndex","getter","window","Error","newRange","newDate","prefix","_range","sort","toArray","_render","_tasks","_taskByUid","currentStart","startOffset","cleanUp","dragInProgress","move","Draggable","distance","filter","holdToDrag","mobileOS","ignore","e","currentTarget","parent","preventDefault","location","throttle","updateHintDate","userEvents","currentEnd","hasClass","taskElementOffset","timelineOffset","originalPercentWidth","maxPercentWidth","currentPercentComplete","updateElement","siblings","initialDelta","currentWidth","min","originalHandle","startX","startY","hoveredHandle","hoveredTask","removeClass","hovered","origin","toggleHandles","toggleClass","elementOffset","tablesOffset","target","elementUnderCursor","currentX","currentY","fromStart","toStart","predecessorElement","successorElement","on","stopPropagation","ctrlKey","document","elementFromPoint","clientX","clientY","click","selectDependency","clearSelection","select","taskWrapActive","_tabindex","selectedDependency","keyCode","DELETE","dependencyDestroy","kendoTouch","doubletap","currentMousePosition","tooltipOptions","mouseMoveHandler","visible","relatedTarget","currentPosition","client","setTimeout","_offsetTooltipTimeout","_plannedTooltipTimeout","_setPlanned","jQuery"],"sources":["kendo.gantt.timeline.js"],"mappings":"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","sourcesContent":["import './kendo.dom.js';\nimport './kendo.touch.js';\nimport './kendo.draganddrop.js';\n\nvar __meta__ = {\n    id: \"gantt.timeline\",\n    name: \"Gantt Timeline\",\n    category: \"web\",\n    description: \"The Gantt Timeline\",\n    depends: [ \"dom\", \"touch\", \"draganddrop\" ],\n    hidden: true\n};\n\n(function($) {\n\n    var Widget = kendo.ui.Widget;\n    var kendoDomElement = kendo.dom.element;\n    var kendoTextElement = kendo.dom.text;\n    var kendoHtmlElement = kendo.dom.html;\n    var isPlainObject = $.isPlainObject;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var extend = $.extend;\n    var isRtl = false;\n    var keys = kendo.keys;\n    var Query = kendo.data.Query;\n    var STRING = \"string\";\n    var NS = \".kendoGanttTimeline\";\n    var CLICK = \"click\";\n    var DBLCLICK = \"dblclick\";\n    var MOUSEMOVE = \"mousemove\";\n    var MOUSEENTER = \"mouseenter\";\n    var MOUSELEAVE = \"mouseleave\";\n    var KEYDOWN = \"keydown\";\n    var DOT = \".\";\n    var TIME_HEADER_TEMPLATE = ({ start }) => kendo.toString(start, 't');\n    var DAY_HEADER_TEMPLATE = ({ start }) => kendo.toString(start, 'ddd M/dd');\n    var WEEK_HEADER_TEMPLATE = ({ start, end }) => `${kendo.toString(start, 'ddd M/dd')} - ${kendo.toString(kendo.date.addDays(end, -1), 'ddd M/dd')}`;\n    var MONTH_HEADER_TEMPLATE = ({ start }) => kendo.toString(start, 'MMM');\n    var YEAR_HEADER_TEMPLATE = ({ start }) => kendo.toString(start, 'yyyy');\n    var RESIZE_HINT = ({ styles }) => `<div class=\"${styles.marquee}\">` +\n                           `<div class=\"${styles.marqueeColor}\"></div>` +\n                       '</div>';\n    var RESIZE_TOOLTIP_TEMPLATE = ({ styles, messages, start, end, format }) => `<div style=\"z-index: 100002;\" class=\"${styles.tooltipWrapper} k-gantt-resize-hint\">` +\n                                   `<div class=\"${styles.tooltipContent}\">` +\n                                        `<div>${messages.start}: ${kendo.toString(start, format)}</div>` +\n                                        `<div>${messages.end}: ${kendo.toString(end, format)}</div>` +\n                                   '</div>' +\n                              '</div>';\n    var PERCENT_RESIZE_TOOLTIP_TEMPLATE = ({ styles, text }) => `<div style=\"z-index: 100002;\" class=\"${styles.tooltipWrapper}\" >` +\n                                   `<div class=\"${styles.tooltipContent}\">${text}%</div>` +\n                                   `<div class=\"${styles.tooltipCallout}\" style=\"left:13px;\"></div>` +\n                              '</div>';\n    var TASK_TOOLTIP_TEMPLATE = ({ styles, task, messages }) => `<div class=\"${kendo.htmlEncode(styles.taskDetails)}\">` +\n                                    `<strong>${kendo.htmlEncode(task.title)}</strong>` +\n                                    `<div class=\"${styles.taskDetailsPercent}\">${kendo.toString(task.percentComplete, \"p0\")}</div>` +\n                                    `<ul class=\"${styles.reset}\">` +\n                                        `<li>${messages.start}: ${kendo.toString(task.start, \"h:mm tt ddd, MMM d\")}</li>` +\n                                        `<li>${messages.end}: ${kendo.toString(task.end, \"h:mm tt ddd, MMM d\")}</li>` +\n                                    '</ul>' +\n                                '</div>';\n    var OFFSET_TOOLTIP_TEMPLATE = ({ offsetPrefix, offsetText }) => `<span>${offsetPrefix}: ${offsetText}</span>`;\n    var PLANNED_TOOLTIP_TEMPLATE = ({ plannedStart, plannedEnd, startDate, endDate }) => '<div class=\"k-task-content\">' +\n            `<div>${plannedStart}: ${startDate}</div>` +\n            `<div>${plannedEnd}: ${endDate}</div>` +\n        '</div>';\n    var SIZE_CALCULATION_TEMPLATE = \"<table style='visibility: hidden;'>\" +\n        \"<tbody>\" +\n            \"<tr style='height:{0}'>\" +\n                \"<td>&nbsp;</td>\" +\n            \"</tr>\" +\n        \"</tbody>\" +\n    \"</table>\";\n\n    var defaultViews = {\n        day: {\n            type: \"kendo.ui.GanttDayView\"\n        },\n        week: {\n            type: \"kendo.ui.GanttWeekView\"\n        },\n        month: {\n            type: \"kendo.ui.GanttMonthView\"\n        },\n        year: {\n            type: \"kendo.ui.GanttYearView\"\n        }\n    };\n\n    function trimOptions(options) {\n        delete options.name;\n        delete options.prefix;\n        delete options.views;\n\n        return options;\n    }\n\n    function getWorkDays(options) {\n        var workDays = [];\n        var dayIndex = options.workWeekStart;\n\n        workDays.push(dayIndex);\n\n        while (options.workWeekEnd != dayIndex) {\n            if (dayIndex > 6) {\n                dayIndex -= 7;\n            } else {\n                dayIndex++;\n            }\n            workDays.push(dayIndex);\n        }\n        return workDays;\n    }\n\n    function blurActiveElement() {\n        var activeElement = kendo._activeElement();\n\n        if (activeElement && activeElement.nodeName.toLowerCase() !== \"body\") {\n            $(activeElement).trigger(\"blur\");\n        }\n    }\n\n    var viewStyles = {\n        alt: \"k-alt\",\n        reset: \"k-reset\",\n        nonWorking: \"k-nonwork-hour\",\n        header: \"k-header\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        tasksWrapper: \"k-gantt-tables\",\n        rowsTable: \"k-gantt-rows\",\n        columnsTable: \"k-gantt-columns\",\n        tasksTable: \"k-gantt-tasks\",\n        dependenciesWrapper: \"k-gantt-dependencies\",\n        resource: \"k-resource\",\n        resourceAlt: \"k-resource k-alt\",\n        task: \"k-task\",\n        taskSingle: \"k-task-single\",\n        taskMilestone: \"k-task-milestone\",\n        taskSummary: \"k-task-summary\",\n        taskWrap: \"k-task-wrap\",\n        taskMilestoneWrap: \"k-milestone-wrap\",\n        taskSummaryWrap: \"k-summary-wrap\",\n        taskPlanned: \"k-task-planned\",\n        taskPlannedMoment: \"k-task-moment\",\n        taskPlannedDuration: \"k-task-duration\",\n        taskPlannedMomentLeft: \"k-moment-left\",\n        taskAdvanced: \"k-task-advanced\",\n        taskDelayed: \"k-task-delayed\",\n        taskOffset: \"k-task-offset\",\n        taskOffsetWrap: \"k-task-offset-wrap\",\n        taskInnerWrap: \"k-task-inner-wrap\",\n        resourcesWrap: \"k-resources-wrap\",\n        taskDot: \"k-task-dot\",\n        taskDotStart: \"k-task-start\",\n        taskDotEnd: \"k-task-end\",\n        taskDragHandle: \"k-task-draghandle\",\n        taskContent: \"k-task-content\",\n        taskTemplate: \"k-task-template\",\n        taskActions: \"k-task-actions\",\n        taskDelete: \"k-task-delete\",\n        taskComplete: \"k-task-complete\",\n        taskDetails: \"k-task-details\",\n        taskDetailsPercent: \"k-task-pct\",\n        link: \"k-link\",\n        icon: \"k-icon\",\n        iconDelete: \"k-i-close\",\n        taskResizeHandle: \"k-resize-handle\",\n        taskResizeHandleWest: \"k-resize-w\",\n        taskResizeHandleEast: \"k-resize-e\",\n        taskSummaryProgress: \"k-task-summary-progress\",\n        taskSummaryComplete: \"k-task-summary-complete\",\n        line: \"k-gantt-line\",\n        lineHorizontal: \"k-gantt-line-h\",\n        lineVertical: \"k-gantt-line-v\",\n        arrowWest: \"k-arrow-w\",\n        arrowEast: \"k-arrow-e\",\n        dragHint: \"k-drag-hint\",\n        dependencyHint: \"k-gantt-dependency-hint\",\n        tooltipWrapper: \"k-tooltip\",\n        tooltipContent: \"k-tooltip-content\",\n        tooltipCallout: \"k-callout k-callout-s\",\n        callout: \"k-callout\",\n        marquee: \"k-marquee k-gantt-marquee\",\n        marqueeColor: \"k-marquee-color\",\n        offsetTooltipAdvanced: \"k-offset-tooltip-advanced\",\n        offsetTooltipDelay: \"k-offset-tooltip-delayed\",\n        plannedTooltip: \"k-planned-tooltip\"\n    };\n\n    var GanttView = kendo.ui.GanttView = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.title = this.options.title || this.options.name;\n\n            this.header = this.element.find(DOT + GanttView.styles.gridHeader);\n\n            this.content = this.element.find(DOT + GanttView.styles.gridContent);\n\n            this.contentWidth = this.content.width();\n\n            this._workDays = getWorkDays(this.options);\n\n            this._headerTree = options.headerTree;\n\n            this._taskTree = options.taskTree;\n\n            this._taskTemplate = options.taskTemplate ?\n                kendo.template(options.taskTemplate, extend({}, kendo.Template, options.templateSettings)) :\n                null;\n\n            this._dependencyTree = options.dependencyTree;\n\n            this._taskCoordinates = {};\n\n            this._currentTime();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._tooltipTimeout);\n\n            this.headerRow = null;\n            this.header = null;\n            this.content = null;\n\n            this._dragHint = null;\n            this._resizeHint = null;\n            this._resizeTooltip = null;\n            this._taskTooltip = null;\n            this._percentCompleteResizeTooltip = null;\n\n            this._headerTree = null;\n            this._taskTree = null;\n            this._dependencyTree = null;\n        },\n\n        options: {\n            showWorkHours: false,\n            showWorkDays: false,\n            workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n            workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            hourSpan: 1,\n            slotSize: 100,\n            currentTimeMarker: {\n                updateInterval: 10000\n            }\n        },\n\n        renderLayout: function() {\n            this._slots = this._createSlots();\n\n            this._tableWidth = this._calculateTableWidth();\n\n            this.createLayout(this._layout());\n\n            this._slotDimensions();\n\n            this._adjustHeight();\n\n            this.content.find(DOT + GanttView.styles.dependenciesWrapper).width(this._tableWidth);\n        },\n\n        _adjustHeight: function() {\n            if (this.content) {\n                this.content.height(this.element.height() - outerHeight(this.header));\n            }\n        },\n\n        createLayout: function(rows) {\n            var headers = this._headers(rows);\n            var colgroup = this._colgroup();\n            var tree = this._headerTree;\n            var header = kendoDomElement(\"tbody\", null, headers);\n            var table = kendoDomElement(\"table\", { style: { width: this._tableWidth + \"px\" }, role: \"presentation\" }, [colgroup, header]);\n\n            tree.render([table]);\n\n            this.headerRow = this.header.find(\"table\").first().find(\"tr\").last();\n        },\n\n        _slotDimensions: function() {\n            var headers = this.headerRow[0].children;\n            var slots = this._timeSlots();\n            var slot;\n            var header;\n\n            for (var i = 0, length = headers.length; i < length; i++) {\n                header = headers[i];\n                slot = slots[i];\n\n                slot.offsetLeft = header.offsetLeft;\n                slot.offsetWidth = header.offsetWidth;\n            }\n        },\n\n        render: function(tasks) {\n            var taskCount = tasks.length;\n            var styles = GanttView.styles;\n            var contentTable;\n            var rowsTable = this._rowsTable(taskCount);\n            var columnsTable = this._columnsTable(taskCount);\n            var tasksTable = this._tasksTable(tasks);\n            var currentTimeMarker = this.options.currentTimeMarker;\n            var calculatedSize = this.options.calculatedSize;\n            var totalHeight;\n\n            this._taskTree.render([rowsTable, columnsTable, tasksTable]);\n\n            contentTable = this.content.find(DOT + styles.rowsTable);\n\n            if (calculatedSize) {\n                totalHeight = calculatedSize.row * tasks.length;\n                this.content.find(DOT + styles.tasksTable).height(totalHeight);\n                contentTable.height(totalHeight);\n            }\n\n            this._contentHeight = contentTable.height();\n            this._rowHeight = calculatedSize ? calculatedSize.row : this._contentHeight / contentTable.find(\"tr\").length;\n\n            this.content.find(DOT + styles.columnsTable).height(this._contentHeight);\n\n            if (currentTimeMarker !== false && currentTimeMarker.updateInterval !== undefined) {\n                this._renderCurrentTime();\n            }\n        },\n\n        _rowsTable: function(rowCount) {\n            var rows = [];\n            var row;\n            var styles = GanttView.styles;\n            var attributes = [null, { className: styles.alt }];\n\n            for (var i = 0; i < rowCount; i++) {\n                row = kendoDomElement(\"tr\", attributes[i % 2], [\n                    kendoDomElement(\"td\", null, [\n                        kendoTextElement(\"\\u00a0\")\n                    ])\n                ]);\n\n                rows.push(row);\n            }\n\n            return this._createTable(1, rows, { className: styles.rowsTable });\n        },\n\n        _columnsTable: function() {\n            var cells = [];\n            var row;\n            var styles = GanttView.styles;\n            var slots = this._timeSlots();\n            var slotsCount = slots.length;\n            var slot;\n            var slotSpan;\n            var totalSpan = 0;\n            var attributes;\n\n            for (var i = 0; i < slotsCount; i++) {\n                slot = slots[i];\n\n                attributes = {};\n\n                slotSpan = slot.span;\n\n                totalSpan += slotSpan;\n\n                if (slotSpan !== 1) {\n                    attributes.colspan = slotSpan;\n                }\n\n                if (slot.isNonWorking) {\n                    attributes.className = styles.nonWorking;\n                }\n\n                cells.push(kendoDomElement(\"td\", attributes, [\n                    kendoTextElement(\"\\u00a0\")\n                ]));\n            }\n\n            row = kendoDomElement(\"tr\", null, cells);\n\n            return this._createTable(totalSpan, [row], { className: styles.columnsTable });\n        },\n\n        _tasksTable: function(tasks) {\n            var rows = [];\n            var row;\n            var cell;\n            var position;\n            var plannedPosition;\n            var task;\n            var styles = GanttView.styles;\n            var coordinates = this._taskCoordinates = {};\n            var size = this._calculateMilestoneWidth();\n            var milestoneWidth = Math.round(size.width);\n            var resourcesField = this.options.resourcesField;\n            var className = [styles.resource, styles.resourceAlt];\n            var calculatedSize = this.options.calculatedSize;\n            var resourcesPosition;\n            var resourcesMargin = this._calculateResourcesMargin();\n            var taskBorderWidth = this._calculateTaskBorderWidth();\n            var resourceStyle;\n            var showPlannedTasks = this.options.showPlannedTasks;\n\n            var addCoordinates = function(rowIndex) {\n                var taskLeft;\n                var taskRight;\n\n                taskLeft = position.left;\n                taskRight = taskLeft + position.width;\n\n                if (task.isMilestone()) {\n                    taskLeft -= milestoneWidth / 2;\n                    taskRight = taskLeft + milestoneWidth;\n                }\n\n                coordinates[task.id] = {\n                    start: taskLeft,\n                    end: taskRight,\n                    rowIndex: rowIndex\n                };\n            };\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                task = tasks[i];\n\n                position = this._taskPosition(task);\n\n                if (showPlannedTasks) {\n                    plannedPosition = this._taskPositionPlanned(task);\n                    plannedPosition.borderWidth = taskBorderWidth;\n                }\n                position.borderWidth = taskBorderWidth;\n\n                row = kendoDomElement(\"tr\", null);\n                cell = kendoDomElement(\"td\");\n\n                if (task.start <= this.end && task.end >= this.start) {\n                    cell.children.push(this._renderTask(tasks[i], position, plannedPosition));\n\n                    if (task[resourcesField] && task[resourcesField].length) {\n                        if (isRtl) {\n                            resourcesPosition = this._tableWidth - position.left;\n                        } else {\n                            resourcesPosition = Math.max((position.width || size.clientWidth), 0) + position.left;\n                        }\n\n                        resourceStyle = {\n                            width: (this._tableWidth - (resourcesPosition + resourcesMargin)) + \"px\"\n                        };\n\n                        resourceStyle[isRtl ? \"right\" : \"left\"] = resourcesPosition + \"px\";\n\n                        if (calculatedSize) {\n                            resourceStyle.height = calculatedSize.cell + \"px\";\n                        }\n\n                        cell.children.push(kendoDomElement(\"div\",\n                            {\n                                className: styles.resourcesWrap,\n                                style: resourceStyle\n                            },\n                            this._renderResources(task[resourcesField], className[i % 2]))\n                        );\n                    }\n\n                    addCoordinates(i);\n                }\n                row.children.push(cell);\n                rows.push(row);\n            }\n\n            return this._createTable(1, rows, { className: GanttView.styles.tasksTable });\n        },\n\n        _createTable: function(colspan, rows, styles) {\n            var cols = [];\n            var colgroup;\n            var tbody;\n\n            for (var i = 0; i < colspan; i++) {\n                cols.push(kendoDomElement(\"col\"));\n            }\n\n            colgroup = kendoDomElement(\"colgroup\", null, cols);\n\n            tbody = kendoDomElement(\"tbody\", null, rows);\n\n            if (!styles.style) {\n                styles.style = {};\n            }\n\n            styles.style.width = this._tableWidth + \"px\";\n            styles.role = \"presentation\";\n\n            return kendoDomElement(\"table\", styles, [colgroup, tbody]);\n        },\n\n        _calculateTableWidth: function() {\n            var slots = this._timeSlots();\n            var maxSpan = 0;\n            var totalSpan = 0;\n            var currentSpan;\n            var tableWidth;\n\n            for (var i = 0, length = slots.length; i < length; i++) {\n                currentSpan = slots[i].span;\n\n                totalSpan += currentSpan;\n\n                if (currentSpan > maxSpan) {\n                    maxSpan = currentSpan;\n                }\n            }\n\n            tableWidth = Math.round((totalSpan * this.options.slotSize) / maxSpan);\n\n            return tableWidth;\n        },\n\n        _calculateMilestoneWidth: function() {\n            var size;\n            var className = GanttView.styles.task + \" \" + GanttView.styles.taskMilestone;\n            var milestone = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n            var boundingClientRect;\n\n            this.content.append(milestone);\n\n            boundingClientRect = milestone[0].getBoundingClientRect();\n\n            size = {\n                \"width\": boundingClientRect.right - boundingClientRect.left,\n                \"clientWidth\": milestone[0].clientWidth\n            };\n\n            milestone.remove();\n\n            return size;\n        },\n\n        _calculateResourcesMargin: function() {\n            var margin;\n            var wrapper = $(\"<div class='\" + GanttView.styles.resourcesWrap + \"' style='visibility: hidden; position: absolute'>\");\n\n            this.content.append(wrapper);\n\n            margin = parseInt(wrapper.css(isRtl ? \"margin-right\" : \"margin-left\"), 10);\n\n            wrapper.remove();\n\n            return margin;\n        },\n\n        _calculateTaskBorderWidth: function() {\n            var width;\n            var className = GanttView.styles.task + \" \" + GanttView.styles.taskSingle;\n            var task = $(\"<div class='\" + className + \"' style='visibility: hidden; position: absolute'>\");\n            var computedStyle;\n\n            this.content.append(task);\n\n            computedStyle = kendo.getComputedStyles(task[0], [\"border-left-width\"]);\n\n            width = parseFloat(computedStyle[\"border-left-width\"], 10);\n\n            task.remove();\n\n            return width;\n        },\n\n        _renderTask: function(task, position, plannedPosition) {\n            var editable = this.options.editable;\n            var taskLeft = position.left;\n            var styles = GanttView.styles;\n            var wrapClassName = styles.taskWrap;\n            var calculatedSize = this.options.calculatedSize;\n            var dragHandleStyle = {};\n            var taskWrapAttr = {\n                className: wrapClassName,\n                style: { left: taskLeft + \"px\" }\n            };\n            var children = [];\n            var endTaskDotRight = 0;\n            var taskFullWidth = position.width;\n            var taskWrapper, taskElement, progressHandleOffset, plannedElement;\n            var endTaskDotLeft, taskOffsetWrap, offsetElement, offsetWidth;\n\n            if (calculatedSize) {\n                taskWrapAttr.style.height = calculatedSize.cell + \"px\";\n            }\n\n            if (plannedPosition) {\n                if (task.isMilestone()) {\n                    plannedElement = this._renderPlannedMilestone(position, plannedPosition);\n                } else {\n                    plannedElement = this._renderPlannedSingleTask(position, plannedPosition, task);\n                }\n\n                children.push(plannedElement);\n\n                if (isRtl && plannedPosition.left <= position.left) {\n                    taskWrapAttr.style.left = plannedPosition.left + \"px\";\n                }\n            }\n\n            if (task.summary) {\n                taskElement = this._renderSummary(task, position, plannedPosition);\n                taskWrapAttr.className += \" \" + styles.taskSummaryWrap;\n            } else if (task.isMilestone()) {\n                taskElement = this._renderMilestone(task, position);\n                taskWrapAttr.className += \" \" + styles.taskMilestoneWrap;\n            } else {\n                taskElement = this._renderSingleTask(task, position, plannedPosition);\n            }\n\n            if (plannedPosition && !task.isMilestone() && task.plannedStart < task.end && task.plannedEnd > task.start && task.plannedEnd < task.end) {\n                if (isRtl) {\n                    taskFullWidth = position.left + position.width - plannedPosition.left;\n                } else {\n                    taskFullWidth = plannedPosition.left + plannedPosition.width - position.left;\n                }\n\n                if (isRtl) {\n                    offsetWidth = plannedPosition.left - position.left;\n                } else {\n                    offsetWidth = position.left + position.width - (plannedPosition.left + plannedPosition.width);\n                }\n\n                offsetElement = kendoDomElement(\"div\", {\n                    className: styles.taskOffset,\n                    style: { width: offsetWidth - 2 * plannedPosition.borderWidth + \"px\" }\n                });\n\n                if (editable && editable.resize !== false && editable.update !== false && !task.summary) {\n                    if (editable.destroy !== false) {\n                        offsetElement.children.push(kendoDomElement(\"span\", { className: styles.taskActions, \"aria-hidden\": \"true\" }, [\n                            kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                                kendoDomElement(\"span\", { className: styles.icon + \" \" + styles.iconDelete })\n                            ])\n                        ]));\n                    }\n\n                    if (isRtl) {\n                        offsetElement.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest,\n                            style: {\n                                right: position.width - 5 + \"px\"\n                            }\n                        }));\n                    } else {\n                        offsetElement.children.push(kendoDomElement(\"span\", {\n                            className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                        }));\n                    }\n                }\n\n                taskOffsetWrap = kendoDomElement(\"div\", {\n                    className: styles.taskOffsetWrap + \" \" + styles.taskInnerWrap\n                }, [ taskElement, offsetElement ]);\n\n                children.push(taskOffsetWrap);\n            } else if (plannedPosition) {\n                children.push(kendoDomElement(\"div\", {\n                    className: styles.taskInnerWrap\n                }, [ taskElement ]));\n            } else {\n                children.push(taskElement);\n            }\n\n            taskWrapper = kendoDomElement(\"div\", taskWrapAttr, children);\n\n            if (editable && editable.dependencyCreate !== false) {\n                if (plannedPosition && task.plannedEnd > task.end) {\n                    endTaskDotRight = plannedPosition.left + plannedPosition.width - position.left - position.width - 3 + \"px\";\n                }\n\n                taskWrapper.children.push(kendoDomElement(\"div\", {\n                    className: styles.taskDot + \" \" + styles.taskDotStart\n                }));\n\n                if (isRtl) {\n                    endTaskDotRight = \"auto\";\n                    if (plannedPosition && task.plannedEnd > task.end) {\n                        endTaskDotLeft = position.left - plannedPosition.left + \"px\";\n                    }\n                }\n\n                taskWrapper.children.push(kendoDomElement(\"div\", {\n                    className: styles.taskDot + \" \" + styles.taskDotEnd,\n                    style: { right: endTaskDotRight, left: endTaskDotLeft }\n                }));\n            }\n\n            if (!task.summary && !task.isMilestone() && editable && editable.dragPercentComplete !== false && editable.update !== false && this._taskTemplate === null) {\n                progressHandleOffset = Math.round(taskFullWidth * task.percentComplete);\n\n                dragHandleStyle[isRtl ? \"right\" : \"left\"] = progressHandleOffset + \"px\";\n                taskWrapper.children.push(kendoDomElement(\"div\", { className: styles.taskDragHandle, style: dragHandleStyle }));\n            }\n\n            return taskWrapper;\n        },\n\n        _renderSingleTask: function(task, position, plannedPosition) {\n            var styles = GanttView.styles;\n            var progressWidth;\n            var taskChildren = [];\n            var taskContent;\n            var editable = this.options.editable;\n            var classes = styles.task + \" \" + styles.taskSingle;\n            var widthExceptDelay = position.width;\n\n            if (plannedPosition) {\n                if (task.plannedEnd && task.plannedEnd <= task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                    if (!isRtl) {\n                        widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                    } else {\n                        widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                    }\n                }\n            }\n\n            progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n            if (this._taskTemplate !== null) {\n                taskContent = kendoHtmlElement(this._taskTemplate(task));\n            } else {\n                taskContent = kendoTextElement(task.title);\n                taskChildren.push(kendoDomElement(\"div\", { className: styles.taskComplete, style: { width: progressWidth + \"px\" }, \"aria-hidden\": \"true\" }));\n            }\n\n            var content = kendoDomElement(\"div\", { className: styles.taskContent }, [\n                kendoDomElement(\"div\", { className: styles.taskTemplate }, [\n                    taskContent\n                ])\n            ]);\n\n            taskChildren.push(content);\n\n            if (editable) {\n                if (editable.destroy !== false && (!plannedPosition || !task.plannedEnd || (task.end <= task.plannedEnd || task.start >= task.plannedEnd))) {\n                    content.children.push(kendoDomElement(\"span\", { className: styles.taskActions, \"aria-hidden\": \"true\" }, [\n                        kendoDomElement(\"a\", { className: styles.link + \" \" + styles.taskDelete, href: \"#\", \"aria-label\": \"Delete\" }, [\n                            kendoDomElement(\"span\", { className: styles.icon + \" \" + styles.iconDelete })\n                        ])\n                    ]));\n                }\n\n                if (editable.resize !== false && editable.update !== false) {\n                    content.children.push(kendoDomElement(\"span\", {\n                        className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleWest\n                    }));\n                    content.children.push(kendoDomElement(\"span\", {\n                        className: styles.taskResizeHandle + \" \" + styles.taskResizeHandleEast\n                    }));\n                }\n            }\n\n            var element = kendoDomElement(\"div\", {\n                className: classes, \"data-uid\": task.uid, role: \"treeitem\", style:\n                    { width: Math.max((widthExceptDelay - position.borderWidth * 2), 0) + \"px\" }\n            }, taskChildren);\n\n            return element;\n        },\n\n        _renderMilestone: function(task) {\n            var styles = GanttView.styles;\n            var classes = styles.task + \" \" + styles.taskMilestone;\n            var showPlanned = this.options.showPlannedTasks;\n\n            if (showPlanned && task.plannedEnd && task.plannedEnd < task.start) {\n                classes += \" \" + styles.taskDelayed;\n            } else if (task.plannedStart && task.plannedStart > task.end) {\n                classes += \" \" + styles.taskAdvanced;\n            }\n\n            return kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, role: \"treeitem\", \"aria-label\": task.title });\n        },\n\n        _renderSummary: function(task, position, plannedPosition) {\n            var styles = GanttView.styles;\n            var widthExceptDelay = position.width;\n            var progressWidth;\n            var classes = styles.task + \" \" + styles.taskSummary;\n\n            if (plannedPosition) {\n                if (task.plannedEnd && task.plannedEnd <= task.start) {\n                    classes += \" \" + styles.taskDelayed;\n                } else if (task.plannedEnd && task.plannedEnd > task.end) {\n                    classes += \" \" + styles.taskAdvanced;\n                } else if (task.plannedEnd && task.plannedEnd < task.end) {\n                    if (!isRtl) {\n                        widthExceptDelay = widthExceptDelay - (position.left + position.width - plannedPosition.left - plannedPosition.width);\n                    } else {\n                        widthExceptDelay = widthExceptDelay + position.left - plannedPosition.left;\n                    }\n                }\n            }\n\n            progressWidth = Math.round(widthExceptDelay * task.percentComplete);\n\n            var element = kendoDomElement(\"div\", { className: classes, \"data-uid\": task.uid, role: \"treeitem\", \"aria-label\": task.title, style: { width: widthExceptDelay + \"px\" } }, [\n                kendoDomElement(\"div\", { className: styles.taskSummaryProgress, style: { width: progressWidth + \"px\" } }, [\n                    kendoDomElement(\"div\", { className: styles.taskSummaryComplete, style: { width: position.width + \"px\" } })\n                ])\n            ]);\n\n            return element;\n        },\n\n        _renderPlannedSingleTask: function(position, plannedPosition, task) {\n            var styles = GanttView.styles;\n            var children = [];\n            var style = {};\n\n            if (task.plannedStart && task.plannedEnd) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n                children.push(kendoDomElement(\"div\", {\n                    className: styles.taskPlannedDuration, style:\n                        { width: Math.max((plannedPosition.width - plannedPosition.borderWidth * 2 - 16), 0) + \"px\" }\n                }));\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment }));\n            } else if (task.plannedStart) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment + \" \" + styles.taskPlannedMomentLeft }));\n            } else if (task.plannedEnd) {\n                children.push(kendoDomElement(\"div\", { className: styles.taskPlannedMoment, style: { \"margin-left\": Math.max(plannedPosition.width - 5, 0) + \"px\" } }));\n            }\n\n            if (isRtl) {\n                style = {\n                    \"margin-right\": position.left - plannedPosition.left + position.width - plannedPosition.width + \"px\"\n                };\n            } else {\n                style = {\n                    \"margin-left\": plannedPosition.left - position.left + \"px\"\n                };\n            }\n\n            var element = kendoDomElement(\"div\", {\n                className: styles.taskPlanned,\n                style: style\n            }, children);\n\n            return element;\n        },\n\n        _renderPlannedMilestone: function(position, plannedPosition) {\n            var styles = GanttView.styles;\n            var style = {};\n            var element;\n\n            if (isRtl) {\n                style = {\n                    \"margin-right\": position.left - plannedPosition.left + \"px\"\n                };\n            } else {\n                style = {\n                    \"margin-left\": plannedPosition.left - position.left + \"px\"\n                };\n            }\n\n            element = kendoDomElement(\"div\", {\n                className: styles.taskPlanned,\n                style: style\n            }, [\n                kendoDomElement(\"div\", { className: styles.taskPlannedMoment })\n            ]);\n\n            return element;\n        },\n\n        _renderResources: function(resources, className) {\n            var children = [];\n            var resource;\n\n            for (var i = 0, length = resources.length; i < length; i++) {\n                resource = resources[i];\n                children.push(kendoDomElement(\"span\", {\n                    className: className,\n                    style: {\n                        \"color\": resource.get(\"color\")\n                    }\n                }, [kendoTextElement(resource.get(\"name\"))]));\n            }\n\n            if (isRtl) {\n                children.reverse();\n            }\n\n            return children;\n        },\n\n        _taskPosition: function(task) {\n            var round = Math.round;\n\n            var startLeft = round(this._offset(isRtl ? task.end : task.start));\n            var endLeft = round(this._offset(isRtl ? task.start : task.end));\n\n            return { left: startLeft, width: endLeft - startLeft };\n        },\n\n        _taskPositionPlanned: function(task) {\n            var round = Math.round;\n\n            var startLeft = round(this._offset(isRtl ? task.plannedEnd : task.plannedStart));\n            var endLeft = round(this._offset(isRtl ? task.plannedStart : task.plannedEnd));\n\n            return { left: startLeft, width: endLeft - startLeft };\n        },\n\n        _offset: function(date) {\n            var slots = this._timeSlots();\n            var slot;\n            var startOffset;\n            var slotDuration;\n            var slotOffset = 0;\n            var startIndex;\n\n            if (!slots.length) {\n                return 0;\n            }\n\n            startIndex = this._slotIndex(\"start\", date);\n\n            slot = slots[startIndex];\n\n            if (slot.end < date) {\n                slotOffset = slot.offsetWidth;\n            } else if (slot.start <= date) {\n                startOffset = date - slot.start;\n                slotDuration = slot.end - slot.start;\n                slotOffset = (startOffset / slotDuration) * slot.offsetWidth;\n            }\n\n            if (isRtl) {\n                slotOffset = (slot.offsetWidth + 1) - slotOffset; // Add one pixel for border\n            }\n\n            return slot.offsetLeft + slotOffset;\n        },\n\n        _slotIndex: function(field, value, reverse) {\n            var slots = this._timeSlots();\n            var startIdx = 0;\n            var endIdx = slots.length - 1;\n            var middle;\n\n            if (reverse) {\n                slots = [].slice.call(slots).reverse();\n            }\n\n            do {\n                middle = Math.ceil((endIdx + startIdx) / 2);\n\n                if (slots[middle][field] < value) {\n                    startIdx = middle;\n                } else {\n                    if (middle === endIdx) {\n                        middle--;\n                    }\n\n                    endIdx = middle;\n                }\n            } while (startIdx !== endIdx);\n\n            if (reverse) {\n                startIdx = (slots.length - 1) - startIdx;\n            }\n\n            return startIdx;\n        },\n\n        _timeByPosition: function(x, snap, snapToEnd) {\n            var slot = this._slotByPosition(x);\n\n            if (snap) {\n                return snapToEnd ? slot.end : slot.start;\n            }\n\n            var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n            var duration = slot.end - slot.start;\n            var slotOffset = offsetLeft - slot.offsetLeft;\n\n            if (isRtl) {\n                slotOffset = slot.offsetWidth - slotOffset;\n            }\n\n            return new Date(slot.start.getTime() + (duration * (slotOffset / slot.offsetWidth)));\n        },\n\n        _slotByPosition: function(x) {\n            var offsetLeft = x - this.element.find(DOT + GanttView.styles.tasksTable).offset().left;\n            var slotIndex = this._slotIndex(\"offsetLeft\", offsetLeft, isRtl);\n\n            return this._timeSlots()[slotIndex];\n        },\n\n        _renderDependencies: function(dependencies) {\n            var elements = [];\n            var tree = this._dependencyTree;\n\n            for (var i = 0, l = dependencies.length; i < l; i++) {\n                elements.push.apply(elements, this._renderDependency(dependencies[i]));\n            }\n\n            tree.render(elements);\n        },\n\n        _renderDependency: function(dependency) {\n            var predecessor = this._taskCoordinates[dependency.predecessorId];\n            var successor = this._taskCoordinates[dependency.successorId];\n            var elements;\n            var method;\n\n            if (!predecessor || !successor) {\n                return [];\n            }\n\n            method = \"_render\" + [\"FF\", \"FS\", \"SF\", \"SS\"][isRtl ? 3 - dependency.type : dependency.type];\n\n            elements = this[method](predecessor, successor);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].attr[\"data-uid\"] = dependency.uid;\n            }\n\n            return elements;\n        },\n\n        _renderFF: function(from, to) {\n            var lines = this._dependencyFF(from, to, false);\n\n            lines[lines.length - 1].children[0] = this._arrow(true);\n\n            return lines;\n        },\n\n        _renderSS: function(from, to) {\n            var lines = this._dependencyFF(to, from, true);\n\n            lines[0].children[0] = this._arrow(false);\n\n            return lines.reverse();\n        },\n\n        _renderFS: function(from, to) {\n            var lines = this._dependencyFS(from, to, false);\n\n            lines[lines.length - 1].children[0] = this._arrow(false);\n\n            return lines;\n        },\n\n        _renderSF: function(from, to) {\n            var lines = this._dependencyFS(to, from, true);\n\n            lines[0].children[0] = this._arrow(true);\n\n            return lines.reverse();\n        },\n\n        _dependencyFF: function(from, to, reverse) {\n            var that = this;\n            var lines = [];\n            var left = 0;\n            var top = 0;\n            var width = 0;\n            var height = 0;\n            var dir = reverse ? \"start\" : \"end\";\n            var delta;\n            var overlap = 2;\n            var arrowOverlap = 1;\n            var rowHeight = this._rowHeight;\n            var minLineWidth = 10;\n            var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var styles = GanttView.styles;\n\n            var addHorizontal = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n            };\n            var addVertical = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n            };\n\n            left = from[dir];\n            top = fromTop;\n            width = minLineWidth;\n\n            delta = to[dir] - from[dir];\n\n            if ((delta) > 0 !== reverse) {\n                width = Math.abs(delta) + minLineWidth;\n            }\n\n            if (reverse) {\n                left -= width;\n                width -= arrowOverlap;\n                addHorizontal();\n            } else {\n                addHorizontal();\n                left += width - overlap;\n            }\n\n            if (toTop < top) {\n                height = top - toTop;\n                height += overlap;\n                top = toTop;\n                addVertical();\n            } else {\n                height = toTop - top;\n                height += overlap;\n                addVertical();\n                top += (height - overlap);\n            }\n\n            width = Math.abs(left - to[dir]);\n\n            if (!reverse) {\n                width -= arrowOverlap;\n                left -= width;\n            }\n\n            addHorizontal();\n\n            return lines;\n        },\n\n        _dependencyFS: function(from, to, reverse) {\n            var that = this;\n            var lines = [];\n            var left = 0;\n            var top = 0;\n            var width = 0;\n            var height = 0;\n            var rowHeight = this._rowHeight;\n            var minLineHeight = Math.floor(rowHeight / 2);\n            var minLineWidth = 10;\n            var minDistance = 2 * minLineWidth;\n            var delta = to.start - from.end;\n            var overlap = 2;\n            var arrowOverlap = 1;\n            var fromTop = from.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var toTop = to.rowIndex * rowHeight + Math.floor(rowHeight / 2) - 1;\n            var styles = GanttView.styles;\n\n            var addHorizontal = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineHorizontal, { left: left + \"px\", top: top + \"px\", width: width + \"px\" }));\n            };\n            var addVertical = function() {\n                lines.push(that._line(styles.line + \" \" + styles.lineVertical, { left: left + \"px\", top: top + \"px\", height: height + \"px\" }));\n            };\n\n            left = from.end;\n            top = fromTop;\n            width = minLineWidth;\n\n            if (reverse) {\n                left += arrowOverlap;\n\n                if (delta > minDistance) {\n                    width = delta - (minLineWidth - overlap);\n                }\n\n                width -= arrowOverlap;\n            }\n\n            addHorizontal();\n            left += width - overlap;\n\n            if ((delta) <= minDistance) {\n                height = reverse ? Math.abs(toTop - fromTop) - minLineHeight : minLineHeight;\n\n                if (toTop < fromTop) {\n                    top -= height;\n\n                    height += overlap;\n\n                    addVertical();\n                } else {\n                    addVertical();\n                    top += height;\n                }\n\n                width = (from.end - to.start) + minDistance;\n\n                if (width < minLineWidth) {\n                    width = minLineWidth;\n                }\n\n                left -= width - overlap;\n\n                addHorizontal();\n            }\n\n            if (toTop < fromTop) {\n                height = top - toTop;\n                top = toTop;\n\n                height += overlap;\n\n                addVertical();\n            } else {\n                height = toTop - top;\n                addVertical();\n                top += height;\n            }\n\n            width = to.start - left;\n\n            if (!reverse) {\n                width -= arrowOverlap;\n            }\n\n            addHorizontal();\n\n            return lines;\n        },\n\n        _line: function(className, styles) {\n            return kendoDomElement(\"div\", { className: className, style: styles });\n        },\n\n        _arrow: function(direction) {\n            return kendoDomElement(\"span\", { className: direction ? GanttView.styles.arrowWest : GanttView.styles.arrowEast });\n        },\n\n        _colgroup: function() {\n            var slots = this._timeSlots();\n            var count = slots.length;\n            var cols = [];\n\n            for (var i = 0; i < count; i++) {\n                for (var j = 0, length = slots[i].span; j < length; j++) {\n                    cols.push(kendoDomElement(\"col\"));\n                }\n            }\n\n            return kendoDomElement(\"colgroup\", null, cols);\n        },\n\n        _createDragHint: function(element) {\n            var styles = GanttView.styles;\n            var plannedElement;\n\n            this._dragHint = element\n                .clone()\n                .addClass(styles.dragHint)\n                .css({\n                    \"cursor\": \"move\"\n                });\n\n            plannedElement = this._dragHint.find(DOT + styles.taskPlanned);\n\n            plannedElement.css({\n                \"visibility\": \"hidden\"\n            });\n\n            if (isRtl && element.find(DOT + styles.taskAdvanced).length > 0) {\n                plannedElement.css({\n                    \"margin-right\": \"auto\",\n                    \"width\": 0\n                });\n\n                this._dragHint.find(DOT + styles.taskDotEnd).css({\n                    \"left\": 0\n                });\n            }\n\n            element\n                .closest(\"td\")\n                .append(this._dragHint);\n        },\n\n        _updateDragHint: function(start) {\n            var left = this._offset(start);\n            this._dragHint\n                .css({\n                    \"left\": left\n                });\n        },\n\n        _removeDragHint: function() {\n            this._dragHint.remove();\n            this._dragHint = null;\n        },\n\n        _createResizeHint: function(task) {\n            var styles = GanttView.styles;\n            var taskTop = this._taskCoordinates[task.id].rowIndex * this._rowHeight;\n            var tooltipHeight;\n            var tooltipTop;\n            var options = this.options;\n            var messages = options.messages;\n\n            this._resizeHint = $(RESIZE_HINT({ styles: styles })).css({\n                \"top\": 0,\n                \"height\": this._contentHeight\n            });\n\n            this.content.append(this._resizeHint);\n\n            this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                styles: styles,\n                start: task.start,\n                end: task.end,\n                messages: messages.views,\n                format: options.resizeTooltipFormat\n            }))\n            .css({\n                \"top\": 0,\n                \"left\": 0\n            });\n\n            this.content.append(this._resizeTooltip);\n\n            this._resizeTooltipWidth = outerWidth(this._resizeTooltip);\n            tooltipHeight = outerHeight(this._resizeTooltip);\n\n            tooltipTop = taskTop - tooltipHeight;\n\n            if (tooltipTop < 0) {\n                tooltipTop = taskTop + this._rowHeight;\n            }\n\n            this._resizeTooltipTop = tooltipTop;\n        },\n\n        _updateResizeHint: function(start, end, resizeStart) {\n            var left = this._offset(isRtl ? end : start);\n            var right = this._offset(isRtl ? start : end);\n            var width = right - left;\n            var tooltipLeft = (resizeStart !== isRtl) ? left : right;\n            var tablesWidth = this._tableWidth - kendo.support.scrollbar();\n            var tooltipWidth = this._resizeTooltipWidth;\n            var options = this.options;\n            var messages = options.messages;\n            var tableOffset = this.element.find(DOT + GanttView.styles.tasksTable).offset().left - this.element.find(DOT + GanttView.styles.tasksWrapper).offset().left;\n\n            if (isRtl) {\n                left += tableOffset;\n            }\n\n            this._resizeHint\n                .css({\n                    \"left\": left,\n                    \"width\": width\n                });\n\n            if (this._resizeTooltip) {\n                this._resizeTooltip.remove();\n            }\n\n            tooltipLeft -= Math.round(tooltipWidth / 2);\n\n            if (tooltipLeft < 0) {\n                tooltipLeft = 0;\n            } else if (tooltipLeft + tooltipWidth > tablesWidth) {\n                tooltipLeft = tablesWidth - tooltipWidth;\n            }\n\n            if (isRtl) {\n                tooltipLeft += tableOffset;\n            }\n\n            this._resizeTooltip = $(RESIZE_TOOLTIP_TEMPLATE({\n                styles: GanttView.styles,\n                start: start,\n                end: end,\n                messages: messages.views,\n                format: options.resizeTooltipFormat\n            }))\n            .css({\n                \"top\": this._resizeTooltipTop,\n                \"left\": tooltipLeft,\n                \"min-width\": tooltipWidth\n            })\n            .appendTo(this.content);\n        },\n\n        _removeResizeHint: function() {\n            this._resizeHint.remove();\n            this._resizeHint = null;\n\n            this._resizeTooltip.remove();\n            this._resizeTooltip = null;\n        },\n\n        _updatePercentCompleteTooltip: function(top, left, text) {\n            this._removePercentCompleteTooltip();\n\n            var tooltip = this._percentCompleteResizeTooltip = $(PERCENT_RESIZE_TOOLTIP_TEMPLATE({ styles: GanttView.styles, text: text }))\n                .appendTo(this.element);\n\n            var tooltipMiddle = Math.round(outerWidth(tooltip) / 2);\n            var arrow = tooltip.find(DOT + GanttView.styles.callout);\n            var arrowHeight = Math.round(outerWidth(arrow) / 2);\n\n            tooltip.css({\n                \"top\": top - (outerHeight(tooltip) + arrowHeight),\n                \"left\": left - tooltipMiddle\n            });\n\n            arrow.css(\"left\", tooltipMiddle - arrowHeight);\n        },\n\n        _removePercentCompleteTooltip: function() {\n            if (this._percentCompleteResizeTooltip) {\n                this._percentCompleteResizeTooltip.remove();\n            }\n\n            this._percentCompleteResizeTooltip = null;\n        },\n\n        _updateDependencyDragHint: function(from, to) {\n            this._removeDependencyDragHint();\n\n            this._creteDependencyDragHint(from, to);\n        },\n\n        _creteDependencyDragHint: function(from, to) {\n            var styles = GanttView.styles;\n\n            var deltaX = to.x - from.x;\n            var deltaY = to.y - from.y;\n\n            var width = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n            var angle = Math.atan(deltaY / deltaX);\n\n            if (deltaX < 0) {\n                angle += Math.PI;\n            }\n\n            $(\"<div class='\" + styles.line + \" \" + styles.lineHorizontal + \" \" + styles.dependencyHint + \"'></div>\")\n                .css({\n                    \"top\": from.y,\n                    \"left\": from.x,\n                    \"width\": width,\n                    \"transform-origin\": \"0% 0\",\n                    \"-ms-transform-origin\": \"0% 0\",\n                    \"-webkit-transform-origin\": \"0% 0\",\n                    \"transform\": \"rotate(\" + angle + \"rad)\",\n                    \"-ms-transform\": \"rotate(\" + angle + \"rad)\",\n                    \"-webkit-transform\": \"rotate(\" + angle + \"rad)\"\n                })\n                .appendTo(this.content);\n        },\n\n        _removeDependencyDragHint: function() {\n            this.content.find(DOT + GanttView.styles.dependencyHint).remove();\n        },\n\n        _createTaskTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var options = this.options;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = $(element).parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var template = (options.tooltip && options.tooltip.template) ? kendo.template(options.tooltip.template) : TASK_TOOLTIP_TEMPLATE;\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._taskTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" >' +\n                                   '<div class=\"' + styles.taskContent + '\"></div></div>');\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .appendTo(content)\n                .find(DOT + styles.taskContent)\n                .append(template({\n                    styles: styles,\n                    task: task,\n                    messages: options.messages.views\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removeTaskTooltip: function() {\n            if (this._taskTooltip) {\n                this._taskTooltip.remove();\n            }\n\n            this._taskTooltip = null;\n        },\n\n        _createOffsetTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = element.parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._offsetTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + '\" ></div>');\n            var offsetValue = Math.round((task.end.getTime() - task.plannedEnd.getTime()) / 60000);\n            var plannedTasksMessages = this.options.messages.plannedTasks;\n            var minutes = offsetValue % 60;\n            var offsetText = minutes + \" \" + plannedTasksMessages.minutes;\n            var hours, days;\n\n            if (offsetValue >= 60) {\n                hours = offsetValue = Math.floor(offsetValue / 60);\n\n                offsetText = hours + \" \" + plannedTasksMessages.hours;\n\n                if (minutes !== 0) {\n                    offsetText += (\" \" + minutes + \" \" + plannedTasksMessages.minutes);\n                }\n\n                if (offsetValue >= 24) {\n                    hours = offsetValue % 24;\n                    days = offsetValue = Math.floor(offsetValue / 24);\n\n                    offsetText = days + \" \" + plannedTasksMessages.days;\n\n                    if (hours !== 0) {\n                        offsetText += (\" \" + hours + \" \" + plannedTasksMessages.hours);\n                    }\n                }\n            }\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .addClass(styles.offsetTooltipDelay)\n                .appendTo(content)\n                .append(OFFSET_TOOLTIP_TEMPLATE({\n                    offsetPrefix: plannedTasksMessages.offsetTooltipDelay,\n                    offsetText: offsetText\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removeOffsetTooltip: function() {\n            if (this._offsetTooltip) {\n                this._offsetTooltip.remove();\n            }\n\n            this._offsetTooltip = null;\n        },\n\n        _createPlannedTooltip: function(task, element, mouseLeft) {\n            var styles = GanttView.styles;\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentScrollLeft = kendo.scrollLeft(content);\n            var row = element.parents(\"tr\").first();\n            var rowOffset = row.offset();\n            var left = isRtl ? mouseLeft - (contentOffset.left + contentScrollLeft + kendo.support.scrollbar())\n                : mouseLeft - (contentOffset.left - contentScrollLeft);\n            var top = (rowOffset.top + outerHeight(row) - contentOffset.top) + content.scrollTop();\n            var tooltip = this._plannedTooltip = $('<div style=\"z-index: 100002;\" class=\"' + styles.tooltipWrapper + ' ' + styles.plannedTooltip + '\" ></div>');\n            var editorMessages = this.options.messages.editor;\n\n            tooltip\n                .css({\n                    \"left\": left,\n                    \"top\": top\n                })\n                .appendTo(content)\n                .append(PLANNED_TOOLTIP_TEMPLATE({\n                    plannedStart: editorMessages.plannedStart,\n                    startDate: kendo.toString(task.plannedStart, \"H:mm tt ddd, MMM dd\"),\n                    plannedEnd: editorMessages.plannedEnd,\n                    endDate: kendo.toString(task.plannedEnd, \"H:mm tt ddd, MMM dd\")\n                }));\n\n            this._adjustTooltipDimensions(tooltip, rowOffset, contentOffset, left, contentScrollLeft);\n        },\n\n        _removePlannedTooltip: function() {\n            if (this._plannedTooltip) {\n                this._plannedTooltip.remove();\n            }\n\n            this._plannedTooltip = null;\n        },\n\n        _adjustTooltipDimensions: function(tooltip, rowOffset, contentOffset, left, contentScrollLeft) {\n            var content = this.content;\n            var contentWidth = content.width();\n            var tooltipWidth;\n\n            if (outerHeight(tooltip) < rowOffset.top - contentOffset.top) {\n                tooltip.css(\"top\", ((rowOffset.top - contentOffset.top) - outerHeight(tooltip)) + content.scrollTop());\n            }\n\n            tooltipWidth = outerWidth(tooltip);\n\n            if ((tooltipWidth + left) - contentScrollLeft > contentWidth) {\n                left -= tooltipWidth;\n\n                if (left < contentScrollLeft) {\n                    left = (contentScrollLeft + contentWidth) - (tooltipWidth + 17);\n                }\n\n                tooltip.css(\"left\", left);\n            }\n        },\n\n        _scrollTo: function(element) {\n            var elementLeft = element.offset().left;\n            var elementWidth = element.width();\n            var elementRight = elementLeft + elementWidth;\n\n            var row = element.closest(\"tr\");\n            var rowTop = row.offset().top;\n            var rowHeight = row.height();\n            var rowBottom = rowTop + rowHeight;\n\n            var content = this.content;\n            var contentOffset = content.offset();\n            var contentTop = contentOffset.top;\n            var contentHeight = content.height();\n            var contentBottom = contentTop + contentHeight;\n            var contentLeft = contentOffset.left;\n            var contentWidth = content.width();\n            var contentRight = contentLeft + contentWidth;\n\n            var scrollbarWidth = kendo.support.scrollbar();\n\n            if (rowTop < contentTop) {\n                content.scrollTop(content.scrollTop() + (rowTop - contentTop));\n            } else if (rowBottom > contentBottom) {\n                content.scrollTop(content.scrollTop() + (rowBottom + scrollbarWidth - contentBottom));\n            }\n\n            if (elementLeft < contentLeft && elementWidth > contentWidth && elementRight < contentRight ||\n                elementRight > contentRight && elementWidth < contentWidth) {\n                    kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementRight + scrollbarWidth - contentRight));\n            } else if (elementRight > contentRight && elementWidth > contentWidth && elementLeft > contentLeft ||\n                elementLeft < contentLeft && elementWidth < contentWidth) {\n            kendo.scrollLeft(content, kendo.scrollLeft(content) + (elementLeft - contentLeft));\n            }\n        },\n\n        _scrollToDate: function(date) {\n            var viewStart = this.start;\n            var viewEnd = this.end;\n            var offset;\n\n            if (date >= viewStart && date < viewEnd) {\n                offset = this._offset(date);\n\n                if (kendo.support.isRtl(this.element)) {\n                    offset = this._tableWidth - offset;\n                }\n\n                kendo.scrollLeft(this.content, offset);\n            }\n        },\n\n        _timeSlots: function() {\n            if (!this._slots || !this._slots.length) {\n                return [];\n            }\n\n            return this._slots[this._slots.length - 1];\n        },\n\n        _headers: function(columnLevels) {\n            var rows = [];\n            var level;\n            var headers;\n            var column;\n            var headerText;\n            var styles = GanttView.styles;\n\n            for (var levelIndex = 0, levelCount = columnLevels.length; levelIndex < levelCount; levelIndex++) {\n                level = columnLevels[levelIndex];\n                headers = [];\n\n                for (var columnIndex = 0, columnCount = level.length; columnIndex < columnCount; columnIndex++) {\n                    column = level[columnIndex];\n\n                    headerText = kendoHtmlElement(column.text);\n                    headers.push(kendoDomElement(\"td\", { colspan: column.span, className: styles.header + (column.isNonWorking ? (\" \" + styles.nonWorking) : \"\") }, [headerText]));\n                }\n\n                rows.push(kendoDomElement(\"tr\", null, headers));\n            }\n\n            return rows;\n        },\n\n        _hours: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var options = this.options;\n            var workDayStart = options.workDayStart.getHours();\n            var workDayEnd = options.workDayEnd.getHours();\n            var isWorkHour;\n            var hours;\n            var hourSpan = options.hourSpan;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            if (options.showWorkHours) {\n                start.setHours(workDayStart);\n            }\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                hours = slotEnd.getHours();\n\n                isWorkHour = hours >= workDayStart && hours < workDayEnd;\n\n                slotEnd.setHours(slotEnd.getHours() + hourSpan);\n\n                if (hours == slotEnd.getHours()) {\n                    // Chrome DTS Fix\n                    slotEnd.setHours(slotEnd.getHours() + 2 * hourSpan);\n                }\n\n                if (!options.showWorkHours || isWorkHour) {\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        isNonWorking: !isWorkHour,\n                        span: 1\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _days: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var isWorkDay;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = end < kendo.date.nextDay(start) ? end : kendo.date.nextDay(start);\n\n                isWorkDay = this._isWorkDay(start);\n\n                if (!this.options.showWorkDays || isWorkDay) {\n                    slots.push({\n                        start: start,\n                        end: slotEnd,\n                        isNonWorking: !isWorkDay,\n                        span: 1\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _weeks: function(start, end) {\n            var slotEnd;\n            var slots = [];\n            var firstDay = this.calendarInfo().firstDay;\n            var daySlots;\n            var span;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = kendo.date.dayOfWeek(kendo.date.addDays(start, 1), firstDay, 1);\n\n                if (slotEnd > end) {\n                    slotEnd = end;\n                }\n\n                daySlots = this._days(start, slotEnd);\n                span = daySlots.length;\n\n                if (span > 0) {\n                    slots.push({\n                        start: daySlots[0].start,\n                        end: daySlots[span - 1].end,\n                        span: span\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _months: function(start, end) {\n            var slotEnd;\n            var endMonth;\n            var slots = [];\n            var daySlots;\n            var span;\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                endMonth = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(slotEnd.getMonth() + 1)));\n                slotEnd = end < endMonth ? end : endMonth;\n\n                daySlots = this._days(start, slotEnd);\n                span = daySlots.length;\n\n                if (span > 0) {\n                    slots.push({\n                        start: daySlots[0].start,\n                        end: daySlots[span - 1].end,\n                        span: span\n                    });\n                }\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _years: function(start, end) {\n            var slotEnd;\n            var monthSpan;\n            var endMonth;\n            var slots = [];\n\n            start = new Date(start);\n            end = new Date(end);\n\n            while (start < end) {\n                slotEnd = new Date(start);\n                slotEnd = kendo.date.firstDayOfMonth(new Date(slotEnd.setMonth(12)));\n\n                if (slotEnd >= end) {\n                    slotEnd = end;\n                }\n\n                endMonth = slotEnd.getMonth() || 12;\n                monthSpan = endMonth - start.getMonth();\n\n                slots.push({\n                    start: start,\n                    end: slotEnd,\n                    span: monthSpan\n                });\n\n                start = slotEnd;\n            }\n\n            return slots;\n        },\n\n        _slotHeaders: function(slots, template) {\n            var columns = [];\n            var slot;\n\n            for (var i = 0, l = slots.length; i < l; i++) {\n                slot = slots[i];\n\n                columns.push({\n                    text: template(slot),\n                    isNonWorking: !!slot.isNonWorking,\n                    span: slot.span\n                });\n            }\n\n            return columns;\n        },\n\n        _isWorkDay: function(date) {\n            var day = date.getDay();\n            var workDays = this._workDays;\n\n            for (var i = 0, l = workDays.length; i < l; i++) {\n                if (workDays[i] === day) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        calendarInfo: function() {\n            return kendo.getCulture().calendars.standard;\n        },\n\n        _renderCurrentTime: function() {\n            var currentTime = this._getCurrentTime();\n            var timeOffset = this._offset(currentTime);\n            var element = $(\"<div class='k-current-time'></div>\");\n            var viewStyles = GanttView.styles;\n            var tablesWrap = this.element.find(DOT + viewStyles.tasksWrapper);\n            var tasksTable = this.element.find(DOT + viewStyles.tasksTable);\n            var slot;\n\n            if (!this.content || !this._timeSlots().length) {\n                return;\n            }\n\n            this.content.find(\".k-current-time\").remove();\n\n            slot = this._timeSlots()[this._slotIndex(\"start\", currentTime)];\n\n            if (currentTime < slot.start || currentTime > slot.end) {\n                return;\n            }\n\n            if (tablesWrap.length && tasksTable.length) {\n                timeOffset += tasksTable.offset().left - tablesWrap.offset().left;\n            }\n\n            element.css({\n                left: timeOffset + \"px\",\n                top: \"0px\",\n                width: \"1px\",\n                height: this._contentHeight + \"px\"\n            })\n            .appendTo(this.content);\n        },\n\n        _getCurrentTime: function() {\n            // Introduced for testing purposes\n            return new Date();\n        },\n\n        _currentTime: function() {\n            var markerOptions = this.options.currentTimeMarker;\n\n            if (markerOptions !== false && markerOptions.updateInterval !== undefined) {\n                this._renderCurrentTime();\n                this._currentTimeUpdateTimer = setInterval(this._renderCurrentTime.bind(this), markerOptions.updateInterval);\n            }\n        }\n    });\n\n    extend(true, GanttView, { styles: viewStyles });\n\n    kendo.ui.GanttDayView = GanttView.extend({\n        name: \"day\",\n\n        options: {\n            timeHeaderTemplate: TIME_HEADER_TEMPLATE,\n            dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            this.start = kendo.date.getDate(range.start);\n            this.end = kendo.date.getDate(range.end);\n\n            if (kendo.date.getMilliseconds(range.end) > 0 || this.end.getTime() === this.start.getTime()) {\n                this.end = kendo.date.addDays(this.end, 1);\n            }\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n                this.start.setHours(optionsRange.start.getHours());\n            }\n\n            if (optionsRange && optionsRange.end) {\n                this.end = kendo.date.getDate(optionsRange.end);\n                this.end.setHours(optionsRange.end.getHours());\n            }\n        },\n\n        _createSlots: function() {\n            var daySlots;\n            var daySlot;\n            var hourSlots;\n            var hours;\n            var slots = [];\n\n            daySlots = this._days(this.start, this.end);\n            hourSlots = [];\n\n            for (var i = 0, l = daySlots.length; i < l; i++) {\n                daySlot = daySlots[i];\n                hours = this._hours(daySlot.start, daySlot.end);\n\n                daySlot.span = hours.length;\n\n                hourSlots.push.apply(hourSlots, hours);\n            }\n\n            slots.push(daySlots);\n            slots.push(hourSlots);\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.dayHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.timeHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttWeekView = GanttView.extend({\n        name: \"week\",\n\n        options: {\n            dayHeaderTemplate: DAY_HEADER_TEMPLATE,\n            weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"h:mm tt ddd, MMM d\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var calendarInfo = this.calendarInfo();\n            var firstDay = calendarInfo.firstDay;\n            var rangeEnd = range.end;\n            var endDay;\n\n            if (firstDay === rangeEnd.getDay()) {\n                rangeEnd.setDate(rangeEnd.getDate() + 7);\n            }\n\n            this.start = kendo.date.getDate(kendo.date.dayOfWeek(range.start, firstDay, -1));\n            this.end = kendo.date.getDate(kendo.date.dayOfWeek(rangeEnd, firstDay, 1));\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                endDay = new Date(optionsRange.end);\n\n                if (kendo.date.getDate(endDay) < optionsRange.end) {\n                    this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                } else {\n                    this.end = kendo.date.getDate(endDay);\n                }\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n\n            slots.push(this._weeks(this.start, this.end));\n            slots.push(this._days(this.start, this.end));\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.weekHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.dayHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttMonthView = GanttView.extend({\n        name: \"month\",\n\n        options: {\n            weekHeaderTemplate: WEEK_HEADER_TEMPLATE,\n            monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var endDay;\n            this.start = kendo.date.firstDayOfMonth(range.start);\n            this.end = kendo.date.addDays(kendo.date.getDate(kendo.date.lastDayOfMonth(range.end)), 1);\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.getDate(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                endDay = new Date(optionsRange.end);\n\n                if (kendo.date.getDate(endDay) < optionsRange.end) {\n                    this.end = kendo.date.getDate(new Date(endDay.setDate(endDay.getDate() + 1)));\n                } else {\n                    this.end = kendo.date.getDate(endDay);\n                }\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n\n            slots.push(this._months(this.start, this.end));\n            slots.push(this._weeks(this.start, this.end));\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.monthHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.weekHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    kendo.ui.GanttYearView = GanttView.extend({\n        name: \"year\",\n\n        options: {\n            yearHeaderTemplate: YEAR_HEADER_TEMPLATE,\n            monthHeaderTemplate: MONTH_HEADER_TEMPLATE,\n            resizeTooltipFormat: \"dddd, MMM d, yyyy\"\n        },\n\n        range: function(range) {\n            var optionsRange = this.options.range;\n            var firstDayOfMonth;\n            this.start = kendo.date.firstDayOfMonth(new Date(range.start.setMonth(0)));\n            this.end = kendo.date.firstDayOfMonth(new Date(range.end.setMonth(12))); //set month to first month of next year\n\n            if (optionsRange && optionsRange.start) {\n                this.start = kendo.date.firstDayOfMonth(optionsRange.start);\n            }\n\n            if (optionsRange && optionsRange.end) {\n                firstDayOfMonth = kendo.date.firstDayOfMonth(optionsRange.end);\n\n                this.end = kendo.date.getDate(new Date(firstDayOfMonth.setMonth(firstDayOfMonth.getMonth() + 1)));\n            }\n        },\n\n        _createSlots: function() {\n            var slots = [];\n            var monthSlots = this._months(this.start, this.end);\n\n            $(monthSlots).each(function(index, slot) {\n                slot.span = 1;\n            });\n\n            slots.push(this._years(this.start, this.end));\n            slots.push(monthSlots);\n\n            return slots;\n        },\n\n        _layout: function() {\n            var rows = [];\n            var options = this.options;\n\n            rows.push(this._slotHeaders(this._slots[0], kendo.template(options.yearHeaderTemplate)));\n            rows.push(this._slotHeaders(this._slots[1], kendo.template(options.monthHeaderTemplate)));\n\n            return rows;\n        }\n    });\n\n    var timelineStyles = {\n        wrapper: \"k-timeline k-grid k-widget\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        gridContentWrap: \"k-grid-content\",\n        tasksWrapper: \"k-gantt-tables\",\n        dependenciesWrapper: \"k-gantt-dependencies\",\n        task: \"k-task\",\n        taskOffset: \"k-task-offset\",\n        taskOffsetWrap: \"k-task-offset-wrap\",\n        taskPlanned: \"k-task-planned\",\n        line: \"k-gantt-line\",\n        taskResizeHandle: \"k-resize-handle\",\n        taskResizeHandleWest: \"k-resize-w\",\n        taskDragHandle: \"k-task-draghandle\",\n        taskComplete: \"k-task-complete\",\n        taskDelete: \"k-task-delete\",\n        taskWrapActive: \"k-task-wrap-active\",\n        taskWrap: \"k-task-wrap\",\n        taskDot: \"k-task-dot\",\n        taskDotStart: \"k-task-start\",\n        taskDotEnd: \"k-task-end\",\n        hovered: \"k-hover\",\n        selected: \"k-selected\",\n        origin: \"k-origin\"\n    };\n\n    var GanttTimeline = kendo.ui.GanttTimeline = Widget.extend({\n        init: function(element, options) {\n\n            Widget.fn.init.call(this, element, options);\n\n            if (!this.options.views || !this.options.views.length) {\n                this.options.views = [\"day\", \"week\", \"month\"];\n            }\n\n            isRtl = kendo.support.isRtl(element);\n\n            this._wrapper();\n\n            this._domTrees();\n\n            this._views();\n\n            this._selectable();\n\n            this._draggable();\n\n            this._resizable();\n\n            this._percentResizeDraggable();\n\n            this._createDependencyDraggable();\n\n            this._attachEvents();\n\n            this._tooltip();\n        },\n\n        options: {\n            name: \"GanttTimeline\",\n            messages: {\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    month: \"Month\",\n                    year: \"Year\",\n                    start: \"Start\",\n                    end: \"End\"\n                }\n            },\n            snap: true,\n            selectable: true,\n            editable: true\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._tooltipTimeout);\n\n            if (this._currentTimeUpdateTimer) {\n                clearInterval(this._currentTimeUpdateTimer);\n            }\n\n            this._unbindView(this._selectedView);\n\n            if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            if (this._percentDraggable) {\n                this._percentDraggable.destroy();\n            }\n\n            if (this._dependencyDraggable) {\n                this._dependencyDraggable.destroy();\n            }\n\n            if (this.touch) {\n                this.touch.destroy();\n            }\n\n            this._headerTree = null;\n            this._taskTree = null;\n            this._dependencyTree = null;\n\n            this.wrapper.off(NS);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _wrapper: function() {\n            var styles = GanttTimeline.styles;\n            var that = this;\n            var options = this.options;\n            var calculateSize = function() {\n                var rowHeight = typeof options.rowHeight === STRING ? options.rowHeight :\n                    options.rowHeight + \"px\";\n                var table = $(kendo.format(SIZE_CALCULATION_TEMPLATE, rowHeight));\n                var calculatedRowHeight;\n                var calculatedCellHeight;\n                var content = that.wrapper.find(DOT + styles.tasksWrapper);\n\n                content.append(table);\n\n                calculatedRowHeight = outerHeight(table.find(\"tr\"));\n                calculatedCellHeight = table.find(\"td\").height();\n\n                table.remove();\n\n                return {\n                    \"row\": calculatedRowHeight,\n                    \"cell\": calculatedCellHeight\n                };\n            };\n\n            this.wrapper = this.element\n                .addClass(styles.wrapper)\n                .append(\"<div class='\" + styles.gridHeader + \"'><div class='\" + styles.gridHeaderWrap + \"'></div></div>\")\n                .append(\"<div role='tree' class='\" + styles.gridContentWrap + \"'><div class='\" + styles.tasksWrapper + \"'></div><div class='\" + styles.dependenciesWrapper + \"'></div></div>\");\n\n            if (options.rowHeight) {\n                this._calculatedSize = calculateSize();\n            }\n        },\n\n        _domTrees: function() {\n            var styles = GanttTimeline.styles;\n            var tree = kendo.dom.Tree;\n            var wrapper = this.wrapper;\n\n            this._headerTree = new tree(wrapper.find(DOT + styles.gridHeaderWrap)[0]);\n\n            this._taskTree = new tree(wrapper.find(DOT + styles.tasksWrapper)[0]);\n\n            this._dependencyTree = new tree(wrapper.find(DOT + styles.dependenciesWrapper)[0]);\n        },\n\n        _views: function() {\n            var views = this.options.views;\n            var view;\n            var isSettings;\n            var name;\n            var defaultView;\n            var selected;\n\n            this.views = {};\n\n            for (var i = 0, l = views.length; i < l; i++) {\n                view = views[i];\n\n                isSettings = isPlainObject(view);\n\n                if (isSettings && view.selectable === false) {\n                    continue;\n                }\n\n                name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                defaultView = defaultViews[name];\n\n                if (defaultView) {\n                    if (isSettings) {\n                        view.type = defaultView.type;\n                    }\n\n                    defaultView.title = this.options.messages.views[name];\n                }\n\n                view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                    this.views[name] = view;\n\n                    if (!selected || view.selected) {\n                        selected = name;\n                    }\n                }\n            }\n\n            if (selected) {\n                this._selectedViewName = selected;\n            }\n        },\n\n        view: function(name) {\n            if (name) {\n                this._selectView(name);\n\n                this.trigger(\"navigate\", { view: name, action: \"changeView\" });\n            }\n\n            return this._selectedView;\n        },\n\n        _selectView: function(name) {\n            if (name && this.views[name]) {\n                if (this._selectedView) {\n                    this._unbindView(this._selectedView);\n                }\n\n                this._selectedView = this._initializeView(name);\n                this._selectedViewName = name;\n            }\n        },\n\n        _viewByIndex: function(index) {\n            var view;\n            var views = this.views;\n\n            for (view in views) {\n                if (!index) {\n                    return view;\n                }\n\n                index--;\n            }\n        },\n\n        _initializeView: function(name) {\n            var view = this.views[name];\n\n            if (view) {\n                var type = view.type;\n\n                if (typeof type === \"string\") {\n                    type = kendo.getter(view.type)(window);\n                }\n\n                if (type) {\n                    var newRange = {};\n                    extend(newRange, this.options.range, view.range);\n\n                    var newDate = view.date || this.options.date;\n\n                    view = new type(this.wrapper, trimOptions(extend(true, {\n                        headerTree: this._headerTree,\n                        taskTree: this._taskTree,\n                        dependencyTree: this._dependencyTree,\n                        calculatedSize: this._calculatedSize\n                    }, view, this.options, {\n                        date: newDate,\n                        range: newRange\n                    })));\n                } else {\n                    throw new Error(\"There is no such view\");\n                }\n            }\n\n            return view;\n        },\n\n        _unbindView: function(view) {\n            if (view) {\n                view.destroy();\n            }\n        },\n\n        _range: function(tasks) {\n            var startOrder = {\n                field: \"start\",\n                dir: \"asc\"\n            };\n            var endOrder = {\n                field: \"end\",\n                dir: \"desc\"\n            };\n\n            if (!tasks || !tasks.length) {\n                return { start: new Date(), end: new Date() };\n            }\n\n            var start = new Query(tasks).sort(startOrder).toArray()[0].start || new Date();\n            var end = new Query(tasks).sort(endOrder).toArray()[0].end || new Date();\n\n            return {\n                start: new Date(start),\n                end: new Date(end)\n            };\n        },\n\n        _render: function(tasks) {\n            var view = this.view();\n            var range = this._range(tasks);\n            var date = view.options.date;\n\n            this._tasks = tasks;\n\n            view.range(range);\n\n            view.renderLayout();\n\n            view.render(tasks);\n\n            if (date) {\n                view._scrollToDate(date);\n            }\n        },\n\n        _renderDependencies: function(dependencies) {\n            this.view()._renderDependencies(dependencies);\n        },\n\n        _taskByUid: function(uid) {\n            var tasks = this._tasks;\n            var length = tasks.length;\n            var task;\n\n            for (var i = 0; i < length; i++) {\n                task = tasks[i];\n\n                if (task.uid === uid) {\n                    return task;\n                }\n            }\n        },\n\n        _draggable: function() {\n            var that = this;\n            var element;\n            var task;\n            var currentStart;\n            var startOffset;\n            var snap = this.options.snap;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removeDragHint();\n\n                if (element) {\n                    element.css(\"opacity\", 1);\n                }\n\n                element = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            if (!editable || editable.move === false || editable.update === false) {\n                return;\n            }\n\n            this._moveDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                holdToDrag: kendo.support.mobileOS,\n                ignore: DOT + styles.taskResizeHandle\n            });\n\n            this._moveDraggable\n                .bind(\"dragstart\", function(e) {\n                    var view = that.view();\n                    element = e.currentTarget.closest(DOT + styles.taskWrap);\n                    task = that._taskByUid(e.currentTarget.parent().find(DOT + styles.task).attr(\"data-uid\"));\n\n                    if (that.trigger(\"moveStart\", { task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    currentStart = task.start;\n                    startOffset = view._timeByPosition(e.x.location, snap) - currentStart;\n\n                    view._createDragHint(element);\n\n                    element.css(\"opacity\", 0.5);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    var view = that.view();\n                    var date = new Date(view._timeByPosition(e.x.location, snap) - startOffset);\n                    var updateHintDate = date;\n\n                    if (!that.trigger(\"move\", { task: task, start: date })) {\n                        currentStart = date;\n\n                        if (isRtl) {\n                            updateHintDate = new Date(currentStart.getTime() + task.duration());\n                        }\n\n                        view._updateDragHint(updateHintDate);\n                    }\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"moveEnd\", { task: task, start: currentStart });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _resizable: function() {\n            var that = this;\n            var element;\n            var task;\n            var currentStart;\n            var currentEnd;\n            var resizeStart;\n            var snap = this.options.snap;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removeResizeHint();\n                element = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            if (!editable || editable.resize === false || editable.update === false) {\n                return;\n            }\n\n            this._resizeDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskResizeHandle,\n                holdToDrag: false\n            });\n\n            this._resizeDraggable\n                .bind(\"dragstart\", function(e) {\n                    resizeStart = e.currentTarget.hasClass(styles.taskResizeHandleWest);\n\n                    if (isRtl) {\n                        resizeStart = !resizeStart;\n                    }\n\n                    element = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n\n                    task = that._taskByUid(element.attr(\"data-uid\"));\n\n                    if (that.trigger(\"resizeStart\", { task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    currentStart = task.start;\n                    currentEnd = task.end;\n\n                    that.view()._createResizeHint(task);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    var view = that.view();\n                    var date = view._timeByPosition(e.x.location, snap, !resizeStart);\n\n                    if (resizeStart) {\n                        if (date < currentEnd) {\n                            currentStart = date;\n                        } else {\n                            currentStart = currentEnd;\n                        }\n                    } else {\n                        if (date > currentStart) {\n                            currentEnd = date;\n                        } else {\n                            currentEnd = currentStart;\n                        }\n                    }\n\n                    if (!that.trigger(\"resize\", { task: task, start: currentStart, end: currentEnd })) {\n                        view._updateResizeHint(currentStart, currentEnd, resizeStart);\n                    }\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"resizeEnd\", { task: task, resizeStart: resizeStart, start: currentStart, end: currentEnd });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _percentResizeDraggable: function() {\n            var that = this;\n            var task;\n            var taskElement;\n            var taskElementOffset;\n            var timelineOffset;\n            var originalPercentWidth;\n            var maxPercentWidth;\n            var currentPercentComplete;\n            var tooltipTop;\n            var tooltipLeft;\n            var styles = GanttTimeline.styles;\n            var delta;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                that.view()._removePercentCompleteTooltip();\n                taskElement = null;\n                task = null;\n                that.dragInProgress = false;\n            };\n\n            var updateElement = function(width) {\n                var taskDragHandle = taskElement.siblings(DOT + styles.taskDragHandle);\n\n                if (!taskDragHandle.length) {\n                    taskDragHandle = taskElement.closest(DOT + styles.taskWrap).find(DOT + styles.taskDragHandle);\n                }\n\n                taskDragHandle.css(isRtl ? \"right\" : \"left\", width);\n\n                taskElement\n                    .find(DOT + styles.taskComplete)\n                    .width(width);\n            };\n\n            if (!editable || editable.dragPercentComplete === false || editable.update === false) {\n                return;\n            }\n\n            this._percentDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskDragHandle,\n                holdToDrag: false\n            });\n\n            this._percentDraggable\n                .bind(\"dragstart\", function(e) {\n                    if (that.trigger(\"percentResizeStart\")) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    taskElement = e.currentTarget.siblings(DOT + styles.task);\n\n                    if (!taskElement.length) {\n                        taskElement = e.currentTarget.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                    }\n\n                    task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                    currentPercentComplete = task.percentComplete;\n\n                    taskElementOffset = taskElement.offset();\n                    timelineOffset = this.element.offset();\n\n                    originalPercentWidth = taskElement.find(DOT + styles.taskComplete).width();\n                    maxPercentWidth = outerWidth(taskElement);\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    delta = isRtl ? -e.x.initialDelta : e.x.initialDelta;\n\n                    var currentWidth = Math.max(0, Math.min(maxPercentWidth, originalPercentWidth + delta));\n\n                    currentPercentComplete = Math.round((currentWidth / maxPercentWidth) * 100);\n\n                    updateElement(currentWidth);\n\n                    tooltipTop = taskElementOffset.top - timelineOffset.top;\n                    tooltipLeft = taskElementOffset.left + currentWidth - timelineOffset.left;\n\n                    if (isRtl) {\n                        tooltipLeft += (maxPercentWidth - 2 * currentWidth);\n                    }\n\n                    that.view()._updatePercentCompleteTooltip(tooltipTop, tooltipLeft, currentPercentComplete);\n                }, 15))\n                .bind(\"dragend\", function() {\n                    that.trigger(\"percentResizeEnd\", { task: task, percentComplete: currentPercentComplete / 100 });\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    updateElement(originalPercentWidth);\n\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _createDependencyDraggable: function() {\n            var that = this;\n            var originalHandle;\n            var hoveredHandle = $();\n            var hoveredTask = $();\n            var startX;\n            var startY;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            var cleanUp = function() {\n                originalHandle\n                    .css(\"display\", \"\")\n                    .removeClass(styles.hovered);\n\n                originalHandle.parent().removeClass(styles.origin);\n                originalHandle = null;\n\n                toggleHandles(false);\n\n                hoveredTask = $();\n                hoveredHandle = $();\n\n                that.view()._removeDependencyDragHint();\n\n                that.dragInProgress = false;\n            };\n\n            var toggleHandles = function(value) {\n                if (!hoveredTask.hasClass(styles.origin)) {\n                    hoveredTask.find(DOT + styles.taskDot).css(\"display\", value ? \"block\" : \"\");\n                    hoveredHandle.toggleClass(styles.hovered, value);\n                }\n            };\n\n            if (!editable || editable.dependencyCreate === false) {\n                return;\n            }\n\n            this._dependencyDraggable = new kendo.ui.Draggable(this.wrapper, {\n                distance: 0,\n                filter: DOT + styles.taskDot,\n                holdToDrag: false\n            });\n\n            this._dependencyDraggable\n                .bind(\"dragstart\", function(e) {\n                    if (that.trigger(\"dependencyDragStart\")) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    originalHandle = e.currentTarget\n                        .css(\"display\", \"block\")\n                        .addClass(styles.hovered);\n\n                    originalHandle.parent().addClass(styles.origin);\n\n                    var elementOffset = originalHandle.offset();\n                    var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n\n                    startX = Math.round(elementOffset.left - tablesOffset.left + (outerHeight(originalHandle) / 2));\n                    startY = Math.round(elementOffset.top - tablesOffset.top + (outerWidth(originalHandle) / 2));\n\n                    clearTimeout(that._tooltipTimeout);\n                    that.dragInProgress = true;\n                })\n                .bind(\"drag\", kendo.throttle(function(e) {\n                    if (!that.dragInProgress) {\n                        return;\n                    }\n\n                    that.view()._removeDependencyDragHint();\n\n                    var target = $(kendo.elementUnderCursor(e));\n                    var tablesOffset = that.wrapper.find(DOT + styles.tasksWrapper).offset();\n                    var currentX = e.x.location - tablesOffset.left;\n                    var currentY = e.y.location - tablesOffset.top;\n\n                    that.view()._updateDependencyDragHint({ x: startX, y: startY }, { x: currentX, y: currentY });\n\n                    toggleHandles(false);\n\n                    hoveredHandle = (target.hasClass(styles.taskDot)) ? target : $();\n                    hoveredTask = target.closest(DOT + styles.taskWrap);\n\n                    toggleHandles(true);\n                }, 15))\n                .bind(\"dragend\", function() {\n                    if (hoveredHandle.length) {\n                        var fromStart = originalHandle.hasClass(styles.taskDotStart);\n                        var toStart = hoveredHandle.hasClass(styles.taskDotStart);\n\n                        var type = fromStart ? (toStart ? 3 : 2) : (toStart ? 1 : 0);\n\n                        var predecessorElement = originalHandle.siblings(DOT + styles.task);\n                        if (!predecessorElement.length) {\n                            predecessorElement = originalHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n                        var predecessor = that._taskByUid(predecessorElement.attr(\"data-uid\"));\n\n                        var successorElement = hoveredHandle.siblings(DOT + styles.task);\n                        if (!successorElement.length) {\n                            successorElement = hoveredHandle.closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                        }\n                        var successor = that._taskByUid(successorElement.attr(\"data-uid\"));\n\n                        if (predecessor !== successor) {\n                            that.trigger(\"dependencyDragEnd\", { type: type, predecessor: predecessor, successor: successor });\n                        }\n                    }\n\n                    cleanUp();\n                })\n                .bind(\"dragcancel\", function() {\n                    cleanUp();\n                })\n                .userEvents.bind(\"select\", function() {\n                    blurActiveElement();\n                });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var styles = GanttTimeline.styles;\n\n            if (this.options.selectable) {\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                        e.stopPropagation();\n\n                        var uid = $(this).attr(\"data-uid\");\n\n                        if (!uid) {\n                            uid = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).data(\"uid\");\n                        }\n\n                        if (!e.ctrlKey) {\n                            that.trigger(\"select\", { uid: uid });\n                        } else {\n                            that.trigger(\"clear\");\n                        }\n                    })\n                    .on(CLICK + NS, DOT + styles.taskWrap, function(e) {\n                        e.stopPropagation();\n\n                        // Decrease z-index of wrap so the we can get to the\n                        // dependency line underneath, if there is any\n                        $(this).css(\"z-index\", \"0\");\n\n                        var target = $(document.elementFromPoint(e.clientX, e.clientY));\n\n                        if (target.hasClass(styles.line)) {\n                            target.click();\n                        }\n\n                        $(this).css(\"z-index\", \"\");\n                    })\n                    .on(CLICK + NS, DOT + styles.tasksWrapper, function() {\n                        if (that.selectDependency().length > 0) {\n                            that.clearSelection();\n                        } else {\n                            that.trigger(\"clear\");\n                        }\n                    })\n                    .on(CLICK + NS, DOT + styles.line, function(e) {\n                        e.stopPropagation();\n\n                        that.selectDependency(this);\n                    });\n            }\n        },\n\n        select: function(value) {\n            var element = this.wrapper.find(value);\n            var styles = GanttTimeline.styles;\n\n            if (element.length) {\n                this.clearSelection();\n\n                element.addClass(styles.selected);\n\n                if (kendo.support.mobileOS) {\n                    element.parent().addClass(styles.taskWrapActive);\n                }\n\n                return;\n            }\n\n            return this.wrapper.find(DOT + styles.task + DOT + styles.selected);\n        },\n\n        selectDependency: function(value) {\n            var element = this.wrapper.find(value);\n            var uid;\n            var styles = GanttTimeline.styles;\n\n            if (element.length) {\n                this.clearSelection();\n                this.trigger(\"clear\");\n\n                uid = $(element).attr(\"data-uid\");\n\n                this.wrapper.find(DOT + styles.line + \"[data-uid='\" + uid + \"']\").addClass(styles.selected);\n\n                return;\n            }\n\n            return this.wrapper.find(DOT + styles.line + DOT + styles.selected);\n        },\n\n        clearSelection: function() {\n            var styles = GanttTimeline.styles;\n\n            this.wrapper\n                .find(DOT + styles.selected)\n                .removeClass(styles.selected);\n\n            if (kendo.support.mobileOS) {\n                this.wrapper\n                    .find(DOT + styles.taskWrapActive)\n                    .removeClass(styles.taskWrapActive);\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this;\n            var styles = GanttTimeline.styles;\n            var editable = this.options.editable;\n\n            if (editable) {\n                this._tabindex();\n\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                        that.trigger(\"removeTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                        e.stopPropagation();\n                        e.preventDefault();\n                    })\n                    .on(KEYDOWN + NS, function(e) {\n                        var selectedDependency;\n                        var editable = that.options.editable;\n\n                        if (e.keyCode === keys.DELETE && editable && editable.dependencyDestroy !== false) {\n                            selectedDependency = that.selectDependency();\n\n                            if (selectedDependency.length) {\n                                that.trigger(\"removeDependency\", { uid: selectedDependency.attr(\"data-uid\") });\n                                that.clearSelection();\n                            }\n                        }\n                    });\n\n                if (!kendo.support.mobileOS) {\n                    this.wrapper\n                        .on(DBLCLICK + NS, DOT + styles.task + \",\" + DOT + styles.taskOffset, function(e) {\n                            if (that.options.editable.update !== false) {\n                                that.trigger(\"editTask\", { uid: $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n\n                                e.stopPropagation();\n                                e.preventDefault();\n                            }\n                        });\n                } else {\n                    this.touch = this.wrapper\n                        .kendoTouch({\n                            filter: DOT + styles.task + \",\" + DOT + styles.taskOffset,\n                            doubletap: function(e) {\n                                if (that.options.editable.update !== false) {\n                                    that.trigger(\"editTask\", { uid: $(e.touch.currentTarget).closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\") });\n                                }\n                            }\n                        }).data(\"kendoTouch\");\n                }\n            }\n        },\n\n        _tooltip: function() {\n            var that = this;\n            var tooltipOptions = this.options.tooltip;\n            var styles = GanttTimeline.styles;\n            var currentMousePosition;\n            var mouseMoveHandler = function(e) {\n                currentMousePosition = e.clientX;\n            };\n\n            if (tooltipOptions && tooltipOptions.visible === false) {\n                return;\n            }\n\n            if (!kendo.support.mobileOS) {\n                this.wrapper\n                        .on(MOUSEENTER + NS, DOT + styles.task, function() {\n                            var element = this;\n                            var task = that._taskByUid($(this).attr(\"data-uid\"));\n\n                            if (that.dragInProgress) {\n                                return;\n                            }\n\n                            that._tooltipTimeout = setTimeout(function() {\n                                that.view()._createTaskTooltip(task, element, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.task, function() {\n                            clearTimeout(that._tooltipTimeout);\n\n                            that.view()._removeTaskTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSEENTER + NS, DOT + styles.taskOffset, function() {\n                            var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                            if (that.dragInProgress) {\n                                return;\n                            }\n\n                            that._offsetTooltipTimeout = setTimeout(function() {\n                                that.view()._createOffsetTooltip(task, taskElement, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function() {\n                            clearTimeout(that._offsetTooltipTimeout);\n\n                            that.view()._removeOffsetTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSEENTER + NS, DOT + styles.taskPlanned, function() {\n                            var taskElement = $(this).closest(DOT + styles.taskWrap).find(DOT + styles.task);\n                            var task = that._taskByUid(taskElement.attr(\"data-uid\"));\n\n                            that._plannedTooltipTimeout = setTimeout(function() {\n                                that.view()._createPlannedTooltip(task, taskElement, currentMousePosition);\n                            }, 800);\n\n                            $(this).on(MOUSEMOVE, mouseMoveHandler);\n                        })\n                        .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function() {\n                            clearTimeout(that._plannedTooltipTimeout);\n\n                            that.view()._removePlannedTooltip();\n\n                            $(this).off(MOUSEMOVE, mouseMoveHandler);\n                        });\n            } else {\n                this.wrapper\n                    .on(CLICK + NS, DOT + styles.taskDelete, function(e) {\n                        e.stopPropagation();\n                        that.view()._removeTaskTooltip();\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.task, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removeTaskTooltip();\n                        }\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.taskOffset, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removeOffsetTooltip();\n                        }\n                    })\n                    .on(MOUSELEAVE + NS, DOT + styles.taskPlanned, function(e) {\n                        var parents = $(e.relatedTarget).parents(DOT + styles.taskWrap, DOT + styles.task);\n\n                        if (parents.length === 0) {\n                            that.view()._removePlannedTooltip();\n                        }\n                    });\n\n                if (this.touch) {\n                    this.touch\n                        .bind(\"tap\", function(e) {\n                            var element = $(e.touch.target);\n                            var currentPosition = e.touch.x.client;\n                            var task;\n\n                            if (!element.hasClass(styles.task)) {\n                                task = that._taskByUid(element.closest(DOT + styles.taskWrap).find(DOT + styles.task).attr(\"data-uid\"));\n                                if (that.view()._offsetTooltip) {\n                                    that.view()._removeOffsetTooltip();\n                                }\n\n                                that.view()._createOffsetTooltip(task, element, currentPosition);\n                            } else {\n                                task = that._taskByUid(element.attr(\"data-uid\"));\n                                if (that.view()._taskTooltip) {\n                                    that.view()._removeTaskTooltip();\n                                }\n\n                                that.view()._createTaskTooltip(task, element, currentPosition);\n                            }\n                        })\n                        .bind(\"doubletap\", function() {\n                            that.view()._removeTaskTooltip();\n                            that.view()._removeOffsetTooltip();\n                        });\n                }\n            }\n        },\n        _setPlanned: function(value) {\n            this.options.showPlannedTasks = value;\n            this.view().options.showPlannedTasks = value;\n        }\n    });\n\n    extend(true, GanttTimeline, { styles: timelineStyles });\n\n})(window.kendo.jQuery);\n"]}