{"version":3,"file":"kendo.gantt.js","names":["__meta__","id","name","category","description","depends","$","undefined$1","defaultCommands","kendo","window","keys","extend","F10","supportsMedia","mobileOS","support","Widget","ui","ObservableObject","data","ObservableArray","Query","isArray","Array","inArray","isFunction","isPlainObject","outerWidth","_outerWidth","outerHeight","_outerHeight","NS","TABINDEX","CLICK","STRING","ARIA_DESCENDANT","ACTIVE_CELL","DOT","BUTTON_TEMPLATE","text","styles","className","action","iconClass","button","buttonDefaults","COMMAND_BUTTON_TEMPLATE","attr","ganttStyles","wrapper","plannedTasks","rowHeight","content","listWrapper","list","timelineWrapper","timeline","splitBarWrapper","splitBar","splitBarHover","popupWrapper","popupList","resizeHandle","icon","item","line","buttonDelete","buttonCancel","buttonSave","buttonToggle","primary","hovered","selected","focused","focusedCell","gridHeader","gridHeaderWrap","gridContent","tasks","popup","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","editField","editLabel","resourcesField","toolbar","headerWrapper","footerWrapper","views","viewsWrapper","viewsDropdown","iconPlus","iconPdf","iconToggle","viewButton","link","pdfButton","appendButton","selector","uid","focusTable","table","direct","parents","scrollPositions","parentsUntil","filter","index","element","getComputedStyles","overflow","add","each","parent","scrollTop","setActive","e","focus","Gantt","init","options","events","dataSource","append","pdf","fn","call","this","_events","_wrapper","_resources","length","_timeline","_toolbar","_footer","_adjustDimensions","_preventRefresh","view","_selectedViewName","_dataSource","_assignments","_dropDowns","_list","_dependencies","_resizable","_scrollable","_dataBind","_attachEvents","_createEditor","notify","autoBind","navigatable","selectable","editable","resizable","columnResizeHandleWidth","columns","dependencies","resources","assignments","taskTemplate","messages","save","cancel","destroy","deleteTaskConfirmation","deleteDependencyConfirmation","deleteTaskWindowTitle","deleteDependencyWindowTitle","selectView","day","week","month","year","start","end","actions","addChild","insertBefore","insertAfter","editor","editorTitle","resourcesEditorTitle","title","plannedStart","plannedEnd","percentComplete","assignButton","resourcesHeader","unitsHeader","switchText","offsetTooltipAdvanced","offsetTooltipDelay","seconds","minutes","hours","days","showWorkHours","showWorkDays","workDayStart","Date","workDayEnd","workWeekStart","workWeekEnd","hourSpan","snap","height","listWidth","showPlannedTasks","select","value","find","_selectionUpdate","trigger","clearSelection","unbind","_refreshHandler","_progressHandler","_errorHandler","_dependencyRefreshHandler","_dependencyErrorHandler","footerDropDown","headerDropDown","_editor","_resizeDraggable","off","_mediaQuery","removeListener","_mediaQueryHandler","_resizeHandler","footer","setOptions","newOptions","deepExtend","selectedView","map","isSettings","type","empty","_setEvents","resize","bind","on","matches","splitBarHandleClassName","join","width","addClass","layout","appendTo","css","treelistWrapper","splitbar","toggleButton","that","viewsSelector","viewsDropdownSelector","pdfSelector","toggleSelector","contentSelector","treelist","_actions","template","TOGGLE_BUTTON_TEMPLATE","ns","Object","toLowerCase","HEADER_VIEWS_TEMPLATE","prepend","label","VIEWS_DROPDOWN_TEMPLATE","toggeSwitchWrap","removeClass","refresh","_resize","matchMedia","addListener","val","preventDefault","children","focusedViewIndex","_focusedView","closest","keyCode","RIGHT","LEFT","ENTER","SPACEBAR","_viewByIndex","saveAsPDF","is","relatedTarget","expanded","html","create","i","_createButton","_createPlannedTasksSwitch","command","commandName","replace","indexOf","Error","split","toolbarHeight","footerHeight","totalHeight","totalWidth","splitBarWidth","treeListWidth","timelineWidth","_scrollTo","scrollTarget","get","scrollIntoView","actionsSelector","actionMessages","handler","orderId","task","_createNewModel","dataItem","taskParent","firstSlot","_timeSlots","target","set","_createTask","gantt","TaskDropDown","eq","direction","animation","open","effects","_getListEditable","update","reorder","mode","move","reorderable","_getListOptions","filterable","columnMenu","field","_attachResourceEditor","column","_createResourceEditor","_attachListEvents","restoreFocus","_cachedCurrent","rowIndex","columnIndex","_current","oldIndex","newIndex","oldWidth","newWidth","_navigatable","container","model","cell","_preventItemChange","closeCell","key","updatedValues","values","previousTask","updateDuration","duration","updatePlannedDuration","plannedDuration","hasOwnProperty","getTime","updateInfo","hasChanges","cancelChanges","_updateAssignments","_requestStart","sync","then","row","position","parentId","source","sort","dir","_updateTask","selection","toggleButtons","removeAttr","listElement","listOptions","GanttList","prefix","remove","edit","navigate","trimOptions","GanttTimeline","viewName","getByUid","resizeStart","dependency","predecessorId","predecessor","successorId","successor","_createDependency","currentUid","current","editTask","removeTask","removeDependency","_error","GanttDataSource","refreshDependencies","GanttDependencyDataSource","dataTextField","dataColorField","dataFormatField","DataSource","_assignmentsRefreshHandler","dataTaskIdField","dataResourceIdField","dataValueField","PopupEditor","createButton","_createPopupButton","cancelTask","saveTask","_onDialogClose","unitsValidation","step","assignmentsModel","schema","fields","Units","validation","_resourceEditor","ResourceEditor","_wrapResourceData","buttons","range","_render","taskTree","_renderDependencies","date","_scrollToDate","_modelFromElement","setDataSource","fetch","setDependenciesDataSource","items","assignment","resource","taskId","resourceId","hasMatch","operator","toArray","_updateAssignment","splice","_removeAssignment","shift","j","newLength","_createAssignment","close","taskCopy","toJSON","_editTask","dirty","_syncDataSource","resourceValueField","_taskConfirm","_removeTask","insert","_scrollToUid","_preventDependencyRefresh","resourceValue","_dependencyConfirm","_removeDependency","_removeTaskDependencies","_removeTaskAssignments","callback","_confirm","confirmation","click","showDialog","_progress","cachedUid","scrollToUid","cachedIndex","_selected","_assignResources","_renderTree","group","assigments","applyTaskResource","setter","wrapTask","resourcedId","valueFormat","formatedValue","toString","push","color","result","taskAssignments","valuePerResource","format","toggle","progress","timelineScroll","treeListWrapper","hover","kendoResizable","orientation","handle","scrollLeft","delta","x","initialDelta","isRtl","_renderCurrentTime","headerSelector","timelineHeader","timelineContent","treeListHeader","treeListContent","wheelDeltaY","currentTarget","one","cellIndex","headerTable","contentTable","tables","expandState","scroll","reverse","offsetWidth","scrollVertical","_rowHeight","moveVertical","method","sibling","first","last","moveHorizontal","subling","toggleExpandedState","summary","deleteAction","selectedTask","isInput","ctrlKey","_focusTimeout","setTimeout","focusableItems","_getToolbarItems","idx","itemToFocus","shiftKey","TAB","isCell","altKey","UP","DOWN","_startEditHandler","stopPropagation","DELETE","tagName","concat","activeElement","_activeElement","promises","when","apply","done","_adjustHeight","switchLabel","plannedToggle","Switch","checked","change","_togglePlannedTasks","unchecked","toggleSwitch","toggleClass","_setPlanned","PDFMixin","_drawPDF","listTableWidth","clone","_drawPDFShadow","avoidLinks","plugin","jQuery"],"sources":["kendo.gantt.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.resizable.js';\nimport './kendo.switch.js';\nimport './kendo.gantt.data.js';\nimport './kendo.gantt.editors.js';\nimport './kendo.gantt.list.js';\nimport './kendo.gantt.timeline.js';\nimport './kendo.pdf.js';\n\nvar __meta__ = {\n    id: \"gantt\",\n    name: \"Gantt\",\n    category: \"web\",\n    description: \"The Gantt component.\",\n    depends: [ \"data\", \"resizable\", \"switch\", \"gantt.data\", \"gantt.editors\", \"gantt.list\", \"gantt.timeline\", \"pdf\" ]\n};\n\n(function($, undefined$1) {\n\n    var kendo = window.kendo,\n        keys = $.extend({ F10: 121 }, kendo.keys),\n        supportsMedia = \"matchMedia\" in window,\n        mobileOS = kendo.support.mobileOS,\n        Widget = kendo.ui.Widget,\n        ObservableObject = kendo.data.ObservableObject,\n        ObservableArray = kendo.data.ObservableArray,\n        Query = kendo.data.Query,\n        isArray = Array.isArray,\n        inArray = $.inArray,\n        isFunction = kendo.isFunction,\n        extend = $.extend,\n        isPlainObject = $.isPlainObject,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        defaultIndicatorWidth = 3,\n\n        NS = \".kendoGantt\",\n        PERCENTAGE_FORMAT = \"p0\",\n        TABINDEX = \"tabIndex\",\n        CLICK = \"click\",\n        STRING = \"string\",\n        ARIA_DESCENDANT = \"aria-activedescendant\",\n        ARIA_LABEL = \"aria-label\",\n        ACTIVE_CELL = \"gantt_active_cell\",\n        DOT = \".\",\n        TASK_DELETE_CONFIRM = \"Are you sure you want to delete this task?\",\n        DEPENDENCY_DELETE_CONFIRM = \"Are you sure you want to delete this dependency?\",\n        TOGGLE_BUTTON_TEMPLATE = ({ styles }) => `<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-gantt-toggle\" type=\"button\" ${ARIA_LABEL}=\"Toggle\"><span class=\"k-button-icon ${styles.iconToggle}\"></span></button>`,\n        BUTTON_TEMPLATE = ({ text, styles, className, action, iconClass }) => `<button aria-label=\"${text}\" class=\"${styles.button} ${styles.buttonDefaults} ${className}\" type=\"button\" ` +\n            `${action ? 'data-action=\"' + action + '\"' : ''}` +\n        '>' +\n            `<span class=\"k-button-icon ${iconClass}\"></span>` +\n            `<span class=\"k-button-text\">${text}</span>` +\n        '</button>',\n        COMMAND_BUTTON_TEMPLATE = ({ className, attr, text }) => `<a class=\"${className}\" ${attr} href=\"#\"><span class=\"k-button-text\">${text}</span></a>`,\n        VIEWS_DROPDOWN_TEMPLATE = ({ label, styles, views }) => `<select aria-label=\"${label}\" class=\"k-dropdown k-picker k-dropdown-list ${styles.viewsDropdown}\">` +\n            `${Object.keys(views).map(view => '<option value=\"' + view + '\">' + views[view].title + '</option>').join(\"\")}` +\n        '</select>',\n        HEADER_VIEWS_TEMPLATE = ({ styles, views, ns }) => `<div class=\"${styles.viewsWrapper}\">` +\n            `<span class=\"k-button-group ${styles.views}\">` +\n                `${Object.keys(views).map(view => '<button type=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-view-' + view.toLowerCase() + '\" data-' + ns + 'name=\"' + view + '\">' +\n                    '<span class=\"k-button-text\">' + views[view].title + '</span>' +\n                '</button>').join(\"\")}` +\n            '</span>' +\n        '</div>';\n\n    var ganttStyles = {\n        wrapper: \"k-widget k-gantt\",\n        plannedTasks: \"k-gantt-planned\",\n        rowHeight: \"k-gantt-rowheight\",\n        content: \"k-gantt-content\",\n        listWrapper: \"k-gantt-treelist\",\n        list: \"k-gantt-treelist\",\n        timelineWrapper: \"k-gantt-timeline\",\n        timeline: \"k-gantt-timeline\",\n        splitBarWrapper: \"k-splitbar k-splitbar-horizontal k-splitbar-draggable-horizontal\",\n        splitBar: \"k-splitbar\",\n        splitBarHover: \"k-splitbar-horizontal-hover\",\n        popupWrapper: \"k-list-container\",\n        popupList: \"k-list k-reset\",\n        resizeHandle: \"k-resize-handle\",\n        icon: \"k-icon\",\n        item: \"k-item\",\n        line: \"k-gantt-line\",\n        buttonDelete: \"k-gantt-delete\",\n        buttonCancel: \"k-gantt-cancel\",\n        buttonSave: \"k-gantt-update\",\n        buttonToggle: \"k-gantt-toggle\",\n        buttonDefaults: \"k-button-md k-rounded-md k-button-solid\",\n        primary: \"k-button-solid-primary\",\n        hovered: \"k-hover\",\n        selected: \"k-selected\",\n        focused: \"k-focus\",\n        focusedCell: \"k-focus\",\n        gridHeader: \"k-grid-header\",\n        gridHeaderWrap: \"k-grid-header-wrap\",\n        gridContent: \"k-grid-content\",\n        tasks: \"k-gantt-tasks\",\n        popup: {\n            form: \"k-popup-edit-form\",\n            editForm: \"k-gantt-edit-form\",\n            formContainer: \"k-edit-form-container\",\n            resourcesFormContainer: \"k-resources-form-container\",\n            message: \"k-popup-message\",\n            buttonsContainer: \"k-edit-buttons\",\n            button: \"k-button\",\n            editField: \"k-edit-field\",\n            editLabel: \"k-edit-label\",\n            resourcesField: \"k-gantt-resources\"\n        },\n        toolbar: {\n            headerWrapper: \"k-gantt-header k-toolbar k-gantt-toolbar\",\n            footerWrapper: \"k-gantt-footer k-toolbar k-gantt-toolbar\",\n            toolbar: \"k-gantt-toolbar\",\n            views: \"k-gantt-views\",\n            viewsWrapper: \"k-gantt-views-wrapper\",\n            viewsDropdown: \"k-views-dropdown\",\n            button: \"k-button\",\n            buttonToggle: \"k-gantt-toggle\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid\",\n            iconPlus: \"k-icon k-i-plus\",\n            iconPdf: \"k-icon k-i-file-pdf\",\n            iconToggle: \"k-icon k-i-layout-1-by-4\",\n            viewButton: \"k-view\",\n            link: \"k-link\",\n            pdfButton: \"k-gantt-pdf\",\n            appendButton: \"k-gantt-create\"\n        }\n    };\n\n    function selector(uid) {\n        return \"[\" + kendo.attr(\"uid\") + (uid ? \"='\" + uid + \"']\" : \"]\");\n    }\n\n    function trimOptions(options) {\n        delete options.name;\n        delete options.prefix;\n\n        delete options.remove;\n        delete options.edit;\n        delete options.add;\n        delete options.navigate;\n\n        return options;\n    }\n\n    function focusTable(table, direct) {\n        var wrapper = table.parents('[' + kendo.attr(\"role\") + '=\"gantt\"]');\n        var scrollPositions = [];\n        var parents = scrollableParents(wrapper);\n\n        table.attr(TABINDEX, 0);\n\n        if (direct) {\n            parents.each(function(index, parent) {\n                scrollPositions[index] = $(parent).scrollTop();\n            });\n        }\n\n        try {\n            //The setActive method does not cause the document to scroll to the active object in the current page\n            table[0].setActive();\n        } catch (e) {\n            table[0].focus();\n        }\n\n        if (direct) {\n            parents.each(function(index, parent) {\n                $(parent).scrollTop(scrollPositions[index]);\n            });\n        }\n    }\n\n    function scrollableParents(element) {\n        return $(element).parentsUntil(\"body\")\n                .filter(function(index, element) {\n                    var computedStyle = kendo.getComputedStyles(element, [\"overflow\"]);\n                    return computedStyle.overflow != \"visible\";\n                })\n                .add(window);\n    }\n\n    var defaultCommands;\n\n    var Gantt = Widget.extend({\n        init: function(element, options, events) {\n            if (isArray(options)) {\n                options = { dataSource: options };\n            }\n\n            defaultCommands = {\n                append: {\n                    text: \"Add Task\",\n                    action: \"add\",\n                    className: Gantt.styles.toolbar.appendButton + \" k-button-solid-base\",\n                    iconClass: Gantt.styles.toolbar.iconPlus\n                },\n                pdf: {\n                    text: \"Export to PDF\",\n                    className: Gantt.styles.toolbar.pdfButton + \" k-button-solid-base\",\n                    iconClass: Gantt.styles.toolbar.iconPdf\n                }\n            };\n\n            Widget.fn.init.call(this, element, options);\n\n            if (events) {\n                this._events = events;\n            }\n\n            this._wrapper();\n\n            this._resources();\n\n            if (!this.options.views || !this.options.views.length) {\n                this.options.views = [\"day\", \"week\", \"month\"];\n            }\n\n            this._timeline();\n\n            this._toolbar();\n\n            this._footer();\n\n            this._adjustDimensions();\n\n            // Prevent extra refresh from setting the view\n            this._preventRefresh = true;\n\n            this.view(this.timeline._selectedViewName);\n\n            this._preventRefresh = false;\n\n            this._dataSource();\n\n            this._assignments();\n\n            this._dropDowns();\n\n            this._list();\n\n            this._dependencies();\n\n            this._resizable();\n\n            this._scrollable();\n\n            this._dataBind();\n\n            this._attachEvents();\n\n            this._createEditor();\n\n            kendo.notify(this);\n        },\n\n        events: [\n            \"dataBinding\",\n            \"dataBound\",\n            \"add\",\n            \"edit\",\n            \"remove\",\n            \"cancel\",\n            \"save\",\n            \"change\",\n            \"navigate\",\n            \"moveStart\",\n            \"move\",\n            \"moveEnd\",\n            \"resizeStart\",\n            \"resize\",\n            \"resizeEnd\",\n            \"columnHide\",\n            \"columnReorder\",\n            \"columnResize\",\n            \"columnShow\",\n            \"togglePlannedTasks\"\n        ],\n\n        options: {\n            name: \"Gantt\",\n            autoBind: true,\n            navigatable: false,\n            selectable: true,\n            editable: true,\n            resizable: false,\n            columnResizeHandleWidth: defaultIndicatorWidth,\n            columns: [],\n            views: [],\n            dataSource: {},\n            dependencies: {},\n            resources: {},\n            assignments: {},\n            taskTemplate: null,\n            messages: {\n                save: \"Save\",\n                cancel: \"Cancel\",\n                destroy: \"Delete\",\n                deleteTaskConfirmation: TASK_DELETE_CONFIRM,\n                deleteDependencyConfirmation: DEPENDENCY_DELETE_CONFIRM,\n                deleteTaskWindowTitle: \"Delete task\",\n                deleteDependencyWindowTitle: \"Delete dependency\",\n                selectView: \"Select view\",\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    month: \"Month\",\n                    year: \"Year\",\n                    start: \"Start\",\n                    end: \"End\"\n                },\n                actions: {\n                    append: \"Add Task\",\n                    addChild: \"Add Child\",\n                    insertBefore: \"Add Above\",\n                    insertAfter: \"Add Below\",\n                    pdf: \"Export to PDF\"\n                },\n                editor: {\n                    editorTitle: \"Task\",\n                    resourcesEditorTitle: \"Resources\",\n                    title: \"Title\",\n                    start: \"Start\",\n                    end: \"End\",\n                    plannedStart: \"Planned Start\",\n                    plannedEnd: \"Planned End\",\n                    percentComplete: \"Complete\",\n                    resources: \"Resources\",\n                    assignButton: \"Assign\",\n                    resourcesHeader: \"Resources\",\n                    unitsHeader: \"Units\"\n                },\n                plannedTasks: {\n                    switchText: \"Planned Tasks\",\n                    offsetTooltipAdvanced: \"Met deadline earlier\",\n                    offsetTooltipDelay: \"Delay\",\n                    seconds: \"seconds\",\n                    minutes: \"minutes\",\n                    hours: \"hours\",\n                    days: \"days\"\n                }\n            },\n            showWorkHours: true,\n            showWorkDays: true,\n            toolbar: null,\n            workDayStart: new Date(1980, 1, 1, 8, 0, 0),\n            workDayEnd: new Date(1980, 1, 1, 17, 0, 0),\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            hourSpan: 1,\n            snap: true,\n            height: 600,\n            listWidth: \"30%\",\n            rowHeight: null,\n            showPlannedTasks: false\n        },\n\n        select: function(value) {\n            var list = this.list;\n\n            if (!value) {\n                return list.select();\n            }\n\n            if (typeof value === STRING) {\n                value = list.content.find(value);\n            }\n\n            list.select(value);\n            this._selectionUpdate();\n\n            this.list.element.find(\"table[role=treegrid]\").trigger(\"focus\");\n            return;\n        },\n\n        clearSelection: function() {\n            this.list.clearSelection();\n            this._selectionUpdate();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            if (this.dataSource) {\n                this.dataSource.unbind(\"change\", this._refreshHandler);\n                this.dataSource.unbind(\"progress\", this._progressHandler);\n                this.dataSource.unbind(\"error\", this._errorHandler);\n            }\n\n            if (this.dependencies) {\n                this.dependencies.unbind(\"change\", this._dependencyRefreshHandler);\n                this.dependencies.unbind(\"error\", this._dependencyErrorHandler);\n            }\n\n            if (this.timeline) {\n                this.timeline.unbind();\n                this.timeline.destroy();\n            }\n\n            if (this.list) {\n                this.list.unbind();\n                this.list.destroy();\n            }\n\n            if (this.footerDropDown) {\n                this.footerDropDown.destroy();\n            }\n\n            if (this.headerDropDown) {\n                this.headerDropDown.destroy();\n            }\n\n            if (this._editor) {\n                this._editor.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            this.toolbar.off(NS);\n\n            if (supportsMedia) {\n                this._mediaQuery.removeListener(this._mediaQueryHandler);\n                this._mediaQuery = null;\n            }\n\n            $(window).off(\"resize\" + NS, this._resizeHandler);\n            $(this.wrapper).off(NS);\n\n            this.toolbar = null;\n            this.footer = null;\n\n            kendo.destroy(this.element);\n        },\n\n        setOptions: function(options) {\n            var newOptions = kendo.deepExtend({}, this.options, options);\n\n            var events = this._events;\n\n            if (!options.views) {\n                var selectedView = this.view().name;\n\n                newOptions.views = $.map(this.options.views, function(view) {\n                    var isSettings = isPlainObject(view);\n                    var name = isSettings ? ((typeof view.type !== \"string\") ? view.title : view.type) : view;\n\n                    if (selectedView === name) {\n                        if (isSettings) {\n                            view.selected = true;\n                        } else {\n                            view = { type: name, selected: true };\n                        }\n                    } else if (isSettings) {\n                        view.selected = false;\n                    }\n\n                    return view;\n                });\n            }\n\n            if (!options.dataSource) { newOptions.dataSource = this.dataSource; }\n            if (!options.dependencies) { newOptions.dependencies = this.dependencies; }\n            if (!options.resources) { newOptions.resources = this.resources; }\n            if (!options.assignments) { newOptions.assignments = this.assignments; }\n\n            this.destroy();\n            this.element.empty();\n            this.options = null;\n\n            this.init(this.element, newOptions, events);\n\n            Widget.fn._setEvents.call(this, newOptions);\n        },\n\n        _attachEvents: function() {\n            this._resizeHandler = this.resize.bind(this, false);\n            $(window).on(\"resize\" + NS, this._resizeHandler);\n\n            if (supportsMedia && this._mediaQuery.matches === true) {\n                this._mediaQueryHandler({ matches: true });\n            }\n        },\n\n        _wrapper: function() {\n            var ganttStyles = Gantt.styles;\n            var splitBarHandleClassName = [ganttStyles.icon, ganttStyles.resizeHandle].join(\" \");\n            var options = this.options;\n            var height = options.height;\n            var width = options.width;\n\n            this.wrapper = this.element.addClass(ganttStyles.wrapper).attr(\"role\", \"application\");\n            this.layout = $(\"<div class='\" + ganttStyles.content + \"' />\").appendTo(this.wrapper)\n                .append(\"<div class='\" + ganttStyles.listWrapper + \"'><div></div></div>\")\n                .append(\"<div class='\" + ganttStyles.splitBarWrapper + \"'><div class='\" + splitBarHandleClassName + \"'></div></div>\")\n                .append(\"<div class='\" + ganttStyles.timelineWrapper + \"'><div></div></div>\");\n\n            if (options.showPlannedTasks) {\n                this.wrapper.addClass(ganttStyles.plannedTasks);\n            }\n\n            if (height) {\n                this.wrapper.css(\"height\", height);\n            }\n\n            if (width) {\n                this.wrapper.css(\"width\", width);\n            }\n\n            if (options.rowHeight) {\n                this.wrapper.addClass(ganttStyles.rowHeight);\n            }\n\n            this.treelistWrapper = this.wrapper.find(DOT + ganttStyles.list);\n            this.splitbar = this.wrapper.find(DOT + ganttStyles.splitBar);\n            this.timelineWrapper = this.wrapper.find(DOT + ganttStyles.timeline);\n\n            this.treelistWrapper.css(\"width\", options.listWidth);\n            this.timelineWrapper.css(\"width\", this.wrapper.width() - this.treelistWrapper.outerWidth() - this.splitbar.outerWidth() );\n        },\n\n        _toolbar: function() {\n            var that = this;\n            var ganttStyles = Gantt.styles;\n            var viewsSelector = DOT + ganttStyles.toolbar.views + \" > button\";\n            var viewsDropdownSelector = DOT + ganttStyles.toolbar.viewsDropdown;\n            var pdfSelector = DOT + ganttStyles.toolbar.pdfButton;\n            var toggleSelector = DOT + ganttStyles.buttonToggle;\n            var contentSelector = DOT + ganttStyles.gridContent;\n            var splitbar = that.splitbar;\n            var treelist = that.treelistWrapper;\n            var timeline = that.timelineWrapper;\n            var actions = this.options.toolbar;\n            var toolbar;\n            var views;\n            var toggleButton;\n            var mediaQueryHandler = function(e) {\n\n                if (e.matches) {\n                    treelist.addClass(\"k-hidden\");\n                    splitbar.addClass(\"k-hidden\");\n\n                    treelist.width(\"100%\");\n                } else {\n                    treelist.removeClass(\"k-hidden\");\n                    splitbar.removeClass(\"k-hidden\");\n                    timeline.removeClass(\"k-hidden\");\n\n                    treelist.width(treelist.outerWidth());\n\n                    that.refresh();\n\n                    timeline\n                        .find(contentSelector)\n                        .scrollTop(that.scrollTop);\n                }\n\n                that._resize();\n            };\n\n            if (!isFunction(actions)) {\n                actions = (typeof actions === STRING ? actions : this._actions(actions));\n                actions = kendo.template(actions).bind(this);\n            }\n\n            toggleButton = $(TOGGLE_BUTTON_TEMPLATE({ styles: ganttStyles.toolbar }));\n\n            views = $(HEADER_VIEWS_TEMPLATE({\n                ns: kendo.ns,\n                views: this.timeline.views,\n                styles: ganttStyles.toolbar\n            }));\n\n            toolbar = $(\"<div role='toolbar' class='\" + ganttStyles.toolbar.headerWrapper + \"'>\")\n                .append(toggleButton)\n                .append(actions({}))\n                .append(\"<span class='k-spacer k-toolbar-spacer' />\")\n                .append(views);\n\n            if (views.find(\"button\").length > 1) {\n                views.prepend(VIEWS_DROPDOWN_TEMPLATE({\n                    ns: kendo.ns,\n                    views: this.timeline.views,\n                    styles: ganttStyles.toolbar,\n                    label: this.options.messages.selectView\n                }));\n            }\n\n            if (this.toggeSwitchWrap) {\n                this.toggeSwitchWrap.insertBefore(views);\n            }\n\n            this.wrapper.prepend(toolbar);\n            this.toolbar = toolbar;\n\n            if (supportsMedia) {\n                this._mediaQueryHandler = mediaQueryHandler.bind(this);\n                this._mediaQuery = window.matchMedia(\"(max-width: 480px)\");\n                this._mediaQuery.addListener(this._mediaQueryHandler);\n            }\n\n            toolbar\n                .on(\"change\" + NS, viewsDropdownSelector, function() {\n                    var list = that.list;\n                    var name = $(this).val();\n\n                    if (list.editable && list.editable.trigger(\"validate\")) {\n                        return;\n                    }\n\n                    if (!that.trigger(\"navigate\", { view: name })) {\n                        that.view(name);\n                    }\n\n                    that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                })\n                .on(CLICK + NS, viewsSelector, function(e) {\n                    e.preventDefault();\n\n                    var list = that.list;\n                    var name = $(this).attr(kendo.attr(\"name\"));\n\n                    if (list.editor && !list.editor.end()) {\n                        return;\n                    }\n\n                    if (!that.trigger(\"navigate\", { view: name })) {\n                        that.view(name);\n                    }\n\n                    that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                })\n                .on(\"keydown\" + NS, viewsSelector, function(e) {\n                    var views = $(DOT + ganttStyles.toolbar.views).children(\":not(.k-current-view)\");\n                    var focusedViewIndex = views.index((that._focusedView && that._focusedView[0]) || views.closest(DOT + ganttStyles.selected)[0]);\n\n                    if (e.keyCode === keys.RIGHT) {\n                        $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                        that._focusedView = focusedViewIndex + 1 === views.length ? $(views[0]) : $(views[focusedViewIndex + 1]);\n                        that._focusedView.trigger(\"focus\").addClass(ganttStyles.focused);\n                        e.preventDefault();\n                    } else if (e.keyCode === keys.LEFT) {\n                        $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                        that._focusedView = focusedViewIndex === 0 ? $(views[views.length - 1]) : $(views[focusedViewIndex - 1]);\n                        that._focusedView.trigger(\"focus\").addClass(ganttStyles.focused);\n                        e.preventDefault();\n                    } else if ((e.keyCode === keys.ENTER || e.keyCode === keys.SPACEBAR) && that._focusedView) {\n                        that.view(that._focusedView.text().toLowerCase());\n                        e.preventDefault();\n                    } else if (e.keyCode >= 49 && e.keyCode <= 57) {\n                        that.view(that.timeline._viewByIndex(e.keyCode - 49));\n                    }\n                })\n                .on(CLICK + NS, pdfSelector, function(e) {\n                    e.preventDefault();\n\n                    that.saveAsPDF();\n                })\n                .on(CLICK + NS, toggleSelector, function(e) {\n                    e.preventDefault();\n\n                    if (treelist.is(\":visible\")) {\n                        treelist.addClass(\"k-hidden\");\n                        timeline.removeClass(\"k-hidden\");\n\n                        that.refresh();\n\n                        timeline\n                            .find(contentSelector)\n                            .scrollTop(that.scrollTop);\n                    } else {\n                        treelist.removeClass(\"k-hidden\");\n                        timeline.addClass(\"k-hidden\");\n\n                        treelist\n                            .find(contentSelector)\n                            .scrollTop(that.scrollTop);\n                    }\n\n                    that._resize();\n                });\n\n            this.wrapper\n                .on(\"focusout\" + NS, function(e) {\n                    if (!$(e.relatedTarget).closest(DOT + ganttStyles.toolbar.toolbar).length) {\n                        that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused);\n                    }\n                    if (!$(e.relatedTarget).closest(DOT + ganttStyles.toolbar.views).length) {\n                        that.toolbar.find(DOT + ganttStyles.toolbar.views).removeClass(ganttStyles.toolbar.expanded);\n                    }\n                });\n\n        },\n\n        _actions: function() {\n            var options = this.options;\n            var editable = options.editable;\n            var actions = options.toolbar;\n            var html = \"\";\n            var action;\n\n            if (!isArray(actions)) {\n                if (editable && editable.create !== false) {\n                    actions = [\"append\"];\n                } else {\n                    return () => html;\n                }\n            }\n\n            for (var i = 0, length = actions.length; i < length; i++) {\n                action = actions[i];\n\n                if (action === \"plannedTasks\" || action.name === \"plannedTasks\") {\n                    this._createPlannedTasksSwitch();\n                    continue;\n                }\n\n                html += this._createButton(action);\n            }\n\n            return () => html;\n        },\n\n        _footer: function() {\n            var editable = this.options.editable;\n\n            if (!editable || editable.create === false) {\n                return;\n            }\n\n            var ganttStyles = Gantt.styles.toolbar;\n            var messages = this.options.messages.actions;\n            var button = $(kendo.template(BUTTON_TEMPLATE)(extend(true, { styles: ganttStyles }, defaultCommands.append, { text: messages.append })));\n            var footer = $(\"<div role='toolbar' class='\" + ganttStyles.footerWrapper + \"'>\").append(button);\n\n            this.wrapper.append(footer);\n            this.footer = footer;\n        },\n\n        _createButton: function(command) {\n            var template = command.template || BUTTON_TEMPLATE;\n            var messages = this.options.messages.actions;\n            var commandName = typeof command === STRING ? command : command.name || command.text;\n            var className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-gantt-\" + (commandName || \"\").replace(/\\s/g, \"\");\n            var options = {\n                iconClass: \"\",\n                action: \"\",\n                text: commandName,\n                className: className,\n                styles: Gantt.styles.toolbar\n            };\n\n            if (!options.className) {\n                options.className = \"k-button-solid-base\";\n            } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                options.className += \" k-button-solid-base\";\n            }\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n\n            if (isPlainObject(command)) {\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                    command.className += \" \" + options.className;\n                }\n\n                options = extend(true, options, command);\n            }\n\n            return kendo.template(template)(options);\n        },\n\n        _adjustDimensions: function() {\n            var element = this.element;\n            var toolbarHeight = outerHeight(this.toolbar);\n            var footerHeight = this.footer ? outerHeight(this.footer) : 0;\n            var totalHeight = element.height();\n            var totalWidth = element.width();\n            var splitBarWidth = this.splitbar.is(\":visible\") ? outerWidth(this.splitbar) : 0;\n            var treeListWidth = this.treelistWrapper.is(\":visible\") ? outerWidth(this.treelistWrapper) : 0;\n            var timelineWidth = totalWidth - ( treeListWidth + splitBarWidth );\n\n            this.layout.children().height(totalHeight - (toolbarHeight + footerHeight));\n            this.timelineWrapper.width(timelineWidth);\n\n            if (totalWidth < (treeListWidth + splitBarWidth)) {\n                this.treelistWrapper.width(totalWidth - splitBarWidth);\n            }\n        },\n\n        _scrollTo: function(value) {\n            var view = this.timeline.view();\n            var list = this.list;\n            var attr = kendo.attr(\"uid\");\n            var id = typeof value === \"string\" ? value :\n                value.closest(\"tr\" + selector()).attr(attr);\n            var action;\n            var scrollTarget;\n            var scrollIntoView = function() {\n                if (scrollTarget.length !== 0) {\n                    action();\n                }\n            };\n\n            if (view.content.is(\":visible\")) {\n                scrollTarget = view.content.find(selector(id));\n                action = function() {\n                    view._scrollTo(scrollTarget);\n                };\n            } else {\n                scrollTarget = list.element.find(selector(id));\n                action = function() {\n                    scrollTarget.get(0).scrollIntoView();\n                };\n            }\n\n            scrollIntoView();\n        },\n\n        _dropDowns: function() {\n            var that = this;\n            var actionsSelector = DOT + Gantt.styles.toolbar.appendButton;\n            var actionMessages = this.options.messages.actions;\n            var timeline = this.timeline;\n            var editable = this.options.editable;\n\n            var handler = function(e) {\n                var type = e.type;\n                var orderId;\n                var dataSource = that.dataSource;\n                var task = dataSource._createNewModel({});\n                var selected = that.dataItem(that.select());\n                var parent = dataSource.taskParent(selected);\n                var firstSlot = timeline.view()._timeSlots()[0];\n                var target = type === \"add\" ? selected : parent;\n                var editable = that.list.editor;\n\n                if (editable && editable.trigger(\"validate\")) {\n                    return;\n                }\n\n                task.set(\"title\", \"New task\");\n\n                if (target) {\n                    task.set(\"parentId\", target.get(\"id\"));\n                    task.set(\"start\", target.get(\"start\"));\n                    task.set(\"end\", target.get(\"end\"));\n                    task.set(\"plannedStart\", target.get(\"plannedStart\"));\n                    task.set(\"plannedEnd\", target.get(\"plannedEnd\"));\n                } else {\n                    task.set(\"start\", firstSlot.start);\n                    task.set(\"end\", firstSlot.end);\n                }\n\n                if (type !== \"add\") {\n                    orderId = selected.get(\"orderId\");\n                    orderId = type === \"insert-before\" ? orderId : orderId + 1;\n                }\n\n                that._createTask(task, orderId);\n            };\n\n            if (!editable || editable.create === false) {\n                return;\n            }\n\n            this.footerDropDown = new kendo.gantt.TaskDropDown(this.footer.children(actionsSelector).eq(0), {\n                messages: {\n                    actions: actionMessages\n                },\n                direction: \"up\",\n                animation: {\n                    open: {\n                        effects: \"slideIn:up\"\n                    }\n                }\n            });\n\n            this.headerDropDown = new kendo.gantt.TaskDropDown(this.toolbar.children(actionsSelector).eq(0), {\n                messages: {\n                    actions: actionMessages\n                }\n            });\n\n            this.footerDropDown.bind(\"command\", handler);\n            this.headerDropDown.bind(\"command\", handler);\n        },\n\n        _getListEditable: function() {\n            var editable = false,\n                options = this.options;\n\n            if (options.editable !== false) {\n                editable = \"incell\";\n\n                if (options.editable && options.editable.update === false) {\n                    editable = false;\n                } else {\n                    if (!options.editable || options.editable.reorder !== false) {\n                        editable = {\n                            mode: \"incell\",\n                            move: {\n                                reorderable: true\n                            }\n                        };\n                    }\n                }\n            }\n\n            return editable;\n        },\n\n        _getListOptions: function() {\n            var options = this.options,\n                editable = this._getListEditable(),\n                listWrapper = this.wrapper.find(DOT + ganttStyles.list),\n                ganttListOptions = {\n                    columns: options.columns || [],\n                    dataSource: this.dataSource,\n                    selectable: options.selectable,\n                    reorderable: options.reorderable,\n                    editable: editable,\n                    resizable: options.resizable,\n                    filterable: options.filterable,\n                    columnMenu: options.columnMenu,\n                    columnResizeHandleWidth: this.options.columnResizeHandleWidth,\n                    listWidth: outerWidth(listWrapper),\n                    resourcesField: this.resources.field,\n                    rowHeight: this.options.rowHeight\n                };\n\n            return ganttListOptions;\n        },\n\n        _attachResourceEditor: function(columns) {\n            var column;\n\n            for (var i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.field === this.resources.field && typeof column.editor !== \"function\") {\n                    column.editor = this._createResourceEditor.bind(this);\n                }\n            }\n        },\n\n        _attachListEvents: function() {\n            var that = this,\n                navigatable = that.options.navigatable,\n                restoreFocus = function() {\n                    var element;\n\n                    if (navigatable && that._cachedCurrent) {\n                        element = that.list.content.find(\"tr\").eq(that._cachedCurrent.rowIndex).find(\"td\").eq(that._cachedCurrent.columnIndex);\n\n                        that._current(element);\n\n                        focusTable(that.list.content.find(\"table\"), true);\n                    }\n\n                    delete that._cachedCurrent;\n                };\n\n            that.list\n                .bind(\"columnShow\", function(e) {\n                    that.trigger(\"columnShow\", { column: e.column });\n                })\n                .bind(\"columnHide\", function(e) {\n                    that.trigger(\"columnHide\", { column: e.column });\n                })\n                .bind(\"columnReorder\", function(e) {\n                    that.trigger(\"columnReorder\", { column: e.column, oldIndex: e.oldIndex, newIndex: e.newIndex });\n                })\n                .bind(\"columnResize\", function(e) {\n                    that.trigger(\"columnResize\", { column: e.column, oldWidth: e.oldWidth, newWidth: e.newWidth });\n                })\n                .bind(\"render\", function() {\n                    that._navigatable();\n                 }, true)\n                .bind(\"beforeEdit\", function(e) {\n                    that._cachedCurrent = {\n                        rowIndex: e.container.closest(\"tr\").index(),\n                        columnIndex: e.container.index()\n                    };\n\n                    if (that.trigger(\"edit\", { task: e.model, container: e.container })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"cancel\", function(e) {\n                    if (that.trigger(\"cancel\", { task: e.model, container: e.cell })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    that._preventItemChange = true;\n                    that.list.closeCell(true);\n                    restoreFocus();\n                })\n                .bind(\"save\", function(e) {\n                    var updatedValues = e.values,\n                        key;\n\n                    that.previousTask = {};\n                    that._preventRefresh = true;\n\n                    if (that.updateDuration === null || that.updateDuration === undefined$1) {\n                        that.updateDuration = e.model.duration();\n                    }\n\n                    if (that.updatePlannedDuration === null || that.updatePlannedDuration === undefined$1) {\n                        that.updatePlannedDuration = e.model.plannedDuration();\n                    }\n\n                    if (updatedValues.hasOwnProperty(\"start\")) {\n                        updatedValues.end = new Date(updatedValues.start.getTime() + that.updateDuration);\n                    }\n\n                    if (updatedValues.hasOwnProperty(\"plannedStart\") && updatedValues.plannedStart) {\n                        updatedValues.plannedEnd = new Date(updatedValues.plannedStart.getTime() + that.updatePlannedDuration);\n                    }\n\n                    for (key in updatedValues) {\n                        if (updatedValues.hasOwnProperty(key)) {\n                            that.previousTask[key] = e.model.get(key);\n                        }\n                    }\n\n                    that.updatedValues = updatedValues;\n                })\n                .bind(\"itemChange\", function(e) {\n                    var updateInfo = that.updatedValues,\n                        task = e.data,\n                        resourcesField = that.resources.field,\n                        previousTask = that.previousTask,\n                        key;\n\n                    if (that._preventItemChange) {\n                        that._preventItemChange = false;\n                        return;\n                    }\n\n                    for (key in previousTask) {\n                        if (previousTask.hasOwnProperty(key)) {\n                            task.set(key, previousTask[key]);\n                        }\n                    }\n\n                    that.previousTask = {};\n\n                    if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                        if (updateInfo) {\n                            that._preventRefresh = true;\n                            that.dataSource.update(task, updateInfo);\n\n                            if (updateInfo[resourcesField]) {\n                                that._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                            }\n                        }\n\n                        that._preventRefresh = false;\n                        that._requestStart();\n                        that.dataSource.sync().then(function() {\n                            restoreFocus();\n                        });\n                    } else if (that.dataSource.hasChanges()) {\n                        that.dataSource.cancelChanges(task);\n                        that._preventRefresh = false;\n                        that.refresh();\n                    }\n\n                    that.updatedValues = null;\n                    that.updateDuration = null;\n                })\n                .bind(\"change\", function() {\n                    that.trigger(\"change\");\n\n                    that._selectionUpdate();\n\n                })\n                .bind(\"collapse\", function(e) {\n                    e.preventDefault();\n\n                    var row = that.list.element.find(\"tr[data-uid='\" + e.model.uid + \"']\");\n                    e.model.set(\"expanded\", false);\n\n                    that._cachedCurrent = {\n                        rowIndex: row.index(),\n                        columnIndex: row.find(\".k-focus\").index()\n                    };\n\n                    restoreFocus();\n                })\n                .bind(\"expand\", function(e) {\n                    e.preventDefault();\n\n                    var row = that.list.element.find(\"tr[data-uid='\" + e.model.uid + \"']\");\n                    e.model.set(\"expanded\", true);\n\n                    that._cachedCurrent = {\n                        rowIndex: row.index(),\n                        columnIndex: row.find(\".k-focus\").index()\n                    };\n\n                    restoreFocus();\n                })\n                .bind(\"dragend\", function(e) {\n                    var dataSource = that.dataSource,\n                        task, updateInfo;\n\n                    if (e.position === \"over\") {\n                        dataSource.cancelChanges();\n\n                        updateInfo = {\n                            parentId: e.source.parentId\n                        };\n\n                        task = dataSource.get(e.source.id);\n\n                        if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                            dataSource.update(task, updateInfo);\n                        }\n\n                        dataSource.sync();\n                    }\n                })\n                .bind(\"dataBound\", function() {\n                    if (that.dataSource.sort().length === 0) {\n                        that.dataSource.sort([{ field: \"orderId\", dir: \"asc\" }]);\n                    }\n                })\n                .bind(\"reorder\", function(e) {\n                    that._updateTask(e.task, e.updateInfo);\n                    restoreFocus();\n                });\n        },\n\n        _selectionUpdate: function() {\n            var that = this,\n                selection = that.list.select(),\n                toggleButtons = this.wrapper.find(DOT + ganttStyles.toolbar.toolbar + \" \" + DOT + ganttStyles.toolbar.appendButton);\n\n            if (selection.length) {\n                toggleButtons.removeAttr(\"data-action\", \"add\");\n                that.timeline.select(\"[data-uid='\" + selection.attr(\"data-uid\") + \"']\");\n            } else {\n                toggleButtons.attr(\"data-action\", \"add\");\n                that.timeline.clearSelection();\n            }\n        },\n\n        _list: function() {\n            var ganttStyles = Gantt.styles,\n                listWrapper = this.wrapper.find(DOT + ganttStyles.list),\n                listElement = listWrapper.find(\"> div\"),\n                listOptions = this._getListOptions();\n\n            this._attachResourceEditor(listOptions.columns);\n\n            this.list = new kendo.ui.GanttList(listElement, listOptions);\n\n            this._attachListEvents();\n        },\n\n        _timeline: function() {\n            var that = this;\n            var ganttStyles = Gantt.styles;\n            var options = trimOptions(extend(true, { resourcesField: this.resources.field }, this.options));\n            var element = this.wrapper.find(DOT + ganttStyles.timeline + \" > div\");\n\n            this.timeline = new kendo.ui.GanttTimeline(element, options);\n\n            this.timeline\n                .bind(\"navigate\", function(e) {\n                    var viewName = e.view.replace(/\\./g, \"\\\\.\").toLowerCase();\n\n                    that.toolbar\n                        .find(DOT + ganttStyles.toolbar.views + \" > button\")\n                        .removeClass(ganttStyles.selected)\n                        .end()\n                        .find(DOT + ganttStyles.toolbar.viewButton + \"-\" + viewName)\n                        .addClass(ganttStyles.selected);\n\n                    that.toolbar\n                        .find(DOT + ganttStyles.toolbar.viewsDropdown)\n                        .val(e.view);\n\n                    that.refresh();\n                })\n                .bind(\"moveStart\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (that.trigger(\"moveStart\", { task: e.task })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"move\", function(e) {\n                    var task = e.task;\n                    var start = e.start;\n                    var end = new Date(start.getTime() + task.duration());\n\n                    if (that.trigger(\"move\", { task: task, start: start, end: end })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"moveEnd\", function(e) {\n                    var task = e.task;\n                    var start = e.start;\n                    var end = new Date(start.getTime() + task.duration());\n\n                    if (!that.trigger(\"moveEnd\", { task: task, start: start, end: end })) {\n                        that._updateTask(that.dataSource.getByUid(task.uid), {\n                            start: start,\n                            end: end\n                        });\n                    }\n                })\n                .bind(\"resizeStart\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (that.trigger(\"resizeStart\", { task: e.task })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"resize\", function(e) {\n                    if (that.trigger(\"resize\", { task: e.task, start: e.start, end: e.end })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"resizeEnd\", function(e) {\n                    var task = e.task;\n                    var updateInfo = {};\n\n                    if (e.resizeStart) {\n                        updateInfo.start = e.start;\n                    } else {\n                        updateInfo.end = e.end;\n                    }\n\n                    if (!that.trigger(\"resizeEnd\", { task: task, start: e.start, end: e.end })) {\n                        that._updateTask(that.dataSource.getByUid(task.uid), updateInfo);\n                    }\n                })\n                .bind(\"percentResizeStart\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"percentResizeEnd\", function(e) {\n                    that._updateTask(that.dataSource.getByUid(e.task.uid), { percentComplete: e.percentComplete });\n                })\n                .bind(\"dependencyDragStart\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"dependencyDragEnd\", function(e) {\n                    var dependency = that.dependencies._createNewModel({\n                        type: e.type,\n                        predecessorId: e.predecessor.id,\n                        successorId: e.successor.id\n                    });\n\n                    that._createDependency(dependency);\n                })\n                .bind(\"select\", function(e) {\n                    var editable = that.list.editor,\n                        current = that.select(),\n                        currentUid;\n\n                    if (editable) {\n                        editable.end();\n                    }\n\n                    if (current && current.length) {\n                        currentUid = current.data(\"uid\");\n                    }\n\n                    if (currentUid !== e.uid) {\n                        that.select(\"[data-uid='\" + e.uid + \"']\");\n                        that.trigger(\"change\");\n                    }\n                })\n                .bind(\"editTask\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n\n                    that.editTask(e.uid);\n                })\n                .bind(\"clear\", function() {\n                    that.clearSelection();\n                    that.trigger(\"change\");\n                })\n                .bind(\"removeTask\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n\n                    that.removeTask(that.dataSource.getByUid(e.uid));\n                })\n                .bind(\"removeDependency\", function(e) {\n                    var editable = that.list.editor;\n\n                    if (editable && !editable.end()) {\n                        return;\n                    }\n\n                    that.removeDependency(that.dependencies.getByUid(e.uid));\n                });\n        },\n\n        _dataSource: function() {\n            var options = this.options;\n            var dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (this.dataSource && this._refreshHandler) {\n                this.dataSource\n                    .unbind(\"change\", this._refreshHandler)\n                    .unbind(\"progress\", this._progressHandler)\n                    .unbind(\"error\", this._errorHandler);\n            } else {\n                this._refreshHandler = this.refresh.bind(this);\n                this._progressHandler = this._requestStart.bind(this);\n                this._errorHandler = this._error.bind(this);\n            }\n\n            this.dataSource = kendo.data.GanttDataSource.create(dataSource)\n                .bind(\"change\", this._refreshHandler)\n                .bind(\"progress\", this._progressHandler)\n                .bind(\"error\", this._errorHandler);\n        },\n\n        _dependencies: function() {\n            var dependencies = this.options.dependencies || {};\n            var dataSource = isArray(dependencies) ? { data: dependencies } : dependencies;\n\n            if (this.dependencies && this._dependencyRefreshHandler) {\n                this.dependencies\n                    .unbind(\"change\", this._dependencyRefreshHandler)\n                    .unbind(\"error\", this._dependencyErrorHandler);\n            } else {\n                this._dependencyRefreshHandler = this.refreshDependencies.bind(this);\n                this._dependencyErrorHandler = this._error.bind(this);\n            }\n\n            this.dependencies = kendo.data.GanttDependencyDataSource.create(dataSource)\n                .bind(\"change\", this._dependencyRefreshHandler)\n                .bind(\"error\", this._dependencyErrorHandler);\n        },\n\n        _resources: function() {\n            var resources = this.options.resources;\n            var dataSource = resources.dataSource || {};\n\n            this.resources = {\n                field: \"resources\",\n                dataTextField: \"name\",\n                dataColorField: \"color\",\n                dataFormatField: \"format\"\n            };\n\n            extend(this.resources, resources);\n\n            this.resources.dataSource = kendo.data.DataSource.create(dataSource);\n        },\n\n        _assignments: function() {\n            var assignments = this.options.assignments;\n            var dataSource = assignments.dataSource || { };\n\n            if (this.assignments) {\n                this.assignments.dataSource\n                    .unbind(\"change\", this._assignmentsRefreshHandler);\n            } else {\n                this._assignmentsRefreshHandler = this.refresh.bind(this);\n            }\n\n            this.assignments = {\n                dataTaskIdField: \"taskId\",\n                dataResourceIdField: \"resourceId\",\n                dataValueField: \"value\"\n            };\n\n            extend(this.assignments, assignments);\n\n            this.assignments.dataSource = kendo.data.DataSource.create(dataSource);\n\n            this.assignments.dataSource\n                .bind(\"change\", this._assignmentsRefreshHandler);\n        },\n\n        _createEditor: function() {\n            var that = this;\n\n            var editor = this._editor = new kendo.gantt.PopupEditor(this.wrapper, extend({}, this.options, {\n                target: this,\n                resources: {\n                    field: this.resources.field,\n                    editor: this._createResourceEditor.bind(this)\n                },\n                createButton: this._createPopupButton.bind(this)\n            }));\n\n            editor\n                .bind(\"cancel\", function(e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n\n                    if (that.trigger(\"cancel\", { container: e.container, task: task })) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    that.cancelTask();\n                })\n                .bind(\"edit\", function(e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n\n                    if (that.trigger(\"edit\", { container: e.container, task: task })) {\n                        e.preventDefault();\n                    }\n                })\n                .bind(\"save\", function(e) {\n                    var task = that.dataSource.getByUid(e.model.uid);\n\n                    that.saveTask(task, e.updateInfo);\n                })\n                .bind(\"remove\", function(e) {\n                    that.removeTask(e.model.uid);\n                })\n                .bind(\"close\", that._onDialogClose);\n        },\n\n        _onDialogClose: function() {},\n\n        _createResourceEditor: function(container, options) {\n            var that = this;\n            var model = options instanceof ObservableObject ? options : options.model;\n            var id = model.get(\"id\");\n            var messages = this.options.messages;\n            var resourcesField = this.resources.field;\n            var unitsValidation = { step: 0.01 };\n            var assignmentsModel = this.assignments.dataSource.options.schema.model;\n\n            if (assignmentsModel && assignmentsModel.fields.Units && assignmentsModel.fields.Units.validation) {\n                extend(true, unitsValidation, assignmentsModel.fields.Units.validation);\n            }\n\n            var editor = this._resourceEditor = new kendo.gantt.ResourceEditor(container, {\n                resourcesField: resourcesField,\n                unitsValidation: unitsValidation,\n                data: this._wrapResourceData(id),\n                model: model,\n                messages: extend({}, messages.editor),\n                buttons: [\n                    { name: \"update\", text: messages.save, className: Gantt.styles.primary },\n                    { name: \"cancel\", text: messages.cancel }\n                ],\n                createButton: this._createPopupButton.bind(this),\n                save: function(e) {\n                    that._updateAssignments(e.model.get(\"id\"), e.model.get(resourcesField));\n                }\n            });\n\n            editor.open();\n        },\n\n        _createPopupButton: function(command) {\n            var commandName = command.name || command.text;\n            var options = {\n                className: Gantt.styles.popup.button + \" \" + Gantt.styles.buttonDefaults + \" k-gantt-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                text: commandName,\n                attr: \"\"\n            };\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                if (command.className) {\n                    command.className += \" \" + options.className;\n                }\n\n                options = extend(true, options, command);\n            }\n\n            if (!options.className) {\n                options.className = \"k-button-solid-base\";\n            } else if (options.className.indexOf(\"k-button-solid-primary\") === -1) {\n                options.className += \" k-button-solid-base\";\n            }\n\n            return kendo.template(COMMAND_BUTTON_TEMPLATE)(options);\n        },\n\n        view: function(type) {\n            return this.timeline.view(type);\n        },\n\n        range: function(range) {\n            var dataSource = this.dataSource;\n            var view = this.view();\n            var timeline = this.timeline;\n\n            if (range) {\n                view.options.range = {\n                    start: range.start,\n                    end: range.end\n                };\n\n                timeline._render(dataSource.taskTree());\n                timeline._renderDependencies(this.dependencies.view());\n            }\n\n            return {\n                start: view.start,\n                end: view.end\n            };\n        },\n\n        date: function(date) {\n            var view = this.view();\n\n            if (date) {\n                view.options.date = date;\n                view._scrollToDate(date);\n            }\n\n            return view.options.date;\n        },\n\n        dataItem: function(value) {\n            if (!value) {\n                return null;\n            }\n\n            var list = this.list;\n            var element = list.element.find(value);\n\n            return list._modelFromElement(element);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            this.list.setDataSource(this.dataSource);\n\n            if (this.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        setDependenciesDataSource: function(dependencies) {\n            this.options.dependencies = dependencies;\n\n            this._dependencies();\n\n            if (this.options.autoBind) {\n                dependencies.fetch();\n            }\n        },\n\n        items: function() {\n            return this.wrapper.children(\".k-task\");\n        },\n\n        _updateAssignments: function(id, resources) {\n            var dataSource = this.assignments.dataSource;\n            var taskId = this.assignments.dataTaskIdField;\n            var resourceId = this.assignments.dataResourceIdField;\n            var hasMatch = false;\n            var assignments = new Query(dataSource.view())\n                .filter({\n                    field: taskId,\n                    operator: \"eq\",\n                    value: id\n                }).toArray();\n            var assignment;\n            var resource;\n            var value;\n\n            while (assignments.length) {\n                assignment = assignments[0];\n\n                for (var i = 0, length = resources.length; i < length; i++) {\n                    resource = resources[i];\n\n                    if (assignment.get(resourceId) === resource.get(\"id\")) {\n                        value = resources[i].get(\"value\");\n                        this._updateAssignment(assignment, value);\n                        resources.splice(i, 1);\n                        hasMatch = true;\n                        break;\n                    }\n                }\n\n                if (!hasMatch) {\n                    this._removeAssignment(assignment);\n                }\n\n                hasMatch = false;\n\n                assignments.shift();\n            }\n\n            for (var j = 0, newLength = resources.length; j < newLength; j++) {\n                resource = resources[j];\n                this._createAssignment(resource, id);\n            }\n\n            dataSource.sync();\n        },\n\n        cancelTask: function() {\n            var editor = this._editor;\n            var container = editor.container;\n\n            if (container) {\n                editor.close();\n            }\n        },\n\n        editTask: function(uid) {\n            var task = typeof uid === \"string\" ? this.dataSource.getByUid(uid) : uid;\n\n            if (!task) {\n                return;\n            }\n\n            var taskCopy = this.dataSource._createNewModel(task.toJSON());\n            taskCopy.uid = task.uid;\n\n            this.cancelTask();\n\n            this._editTask(taskCopy);\n        },\n\n        _editTask: function(task) {\n            this._editor.editTask(task, this.options.editable.plannedTasks);\n        },\n\n        saveTask: function(task, updateInfo) {\n            var editor = this._editor;\n            var container = editor.container;\n            var editable = editor.editable;\n\n            if (container && editable && editable.end()) {\n                this._updateTask(task, updateInfo);\n            }\n        },\n\n        _updateTask: function(task, updateInfo) {\n            var that = this;\n            var resourcesField = that.resources.field;\n\n            if (!that.trigger(\"save\", { task: task, values: updateInfo })) {\n                if (updateInfo) {\n                    that._preventRefresh = true;\n\n                    that.dataSource.update(task, updateInfo);\n\n                    if (updateInfo[resourcesField]) {\n                        that._updateAssignments(task.get(\"id\"), updateInfo[resourcesField]);\n                    }\n                }\n\n                that._syncDataSource();\n            } else if (task && task.dirty) {\n                that.dataSource.cancelChanges(task);\n                that._preventRefresh = false;\n                that.refresh();\n            }\n        },\n\n        _updateAssignment: function(assignment, value) {\n            var resourceValueField = this.assignments.dataValueField;\n\n            assignment.set(resourceValueField, value);\n        },\n\n        removeTask: function(uid) {\n            var that = this;\n            var task = typeof uid === \"string\" ? this.dataSource.getByUid(uid) : uid;\n\n            if (!task) {\n                return;\n            }\n\n            this._taskConfirm(function(cancel) {\n                if (!cancel) {\n                    that._removeTask(task);\n                }\n            }, task);\n        },\n\n        _createTask: function(task, index) {\n            if (!this.trigger(\"add\", {\n                task: task,\n                dependency: null\n            })) {\n                var dataSource = this.dataSource;\n\n                this._preventRefresh = true;\n\n                if (index === undefined$1) {\n                    dataSource.add(task);\n                } else {\n                    dataSource.insert(index, task);\n                }\n\n                this._scrollToUid = task.uid;\n                this._syncDataSource();\n            }\n        },\n\n        _createDependency: function(dependency) {\n            if (!this.trigger(\"add\", {\n                task: null,\n                dependency: dependency\n            })) {\n                this._preventDependencyRefresh = true;\n\n                this.dependencies.add(dependency);\n\n                this._preventDependencyRefresh = false;\n\n                this.dependencies.sync();\n            }\n        },\n\n        _createAssignment: function(resource, id) {\n            var assignments = this.assignments;\n            var dataSource = assignments.dataSource;\n            var taskId = assignments.dataTaskIdField;\n            var resourceId = assignments.dataResourceIdField;\n            var resourceValue = assignments.dataValueField;\n            var assignment = dataSource._createNewModel();\n\n            assignment[taskId] = id;\n            assignment[resourceId] = resource.get(\"id\");\n            assignment[resourceValue] = resource.get(\"value\");\n\n            dataSource.add(assignment);\n        },\n\n        removeDependency: function(uid) {\n            var that = this;\n            var dependency = typeof uid === \"string\" ? this.dependencies.getByUid(uid) : uid;\n\n            if (!dependency) {\n                return;\n            }\n\n            this._dependencyConfirm(function(cancel) {\n                if (!cancel) {\n                    that._removeDependency(dependency);\n                }\n            }, dependency);\n        },\n\n        _removeTaskDependencies: function(task, dependencies) {\n            this._preventDependencyRefresh = true;\n\n            for (var i = 0, length = dependencies.length; i < length; i++) {\n                this.dependencies.remove(dependencies[i]);\n            }\n\n            this._preventDependencyRefresh = false;\n\n            this.dependencies.sync();\n        },\n\n        _removeTaskAssignments: function(task) {\n            var dataSource = this.assignments.dataSource;\n            var assignments = dataSource.view();\n            var filter = {\n                field: this.assignments.dataTaskIdField,\n                operator: \"eq\",\n                value: task.get(\"id\")\n            };\n\n            assignments = new Query(assignments).filter(filter).toArray();\n\n            this._preventRefresh = true;\n\n            for (var i = 0, length = assignments.length; i < length; i++) {\n                dataSource.remove(assignments[i]);\n            }\n\n            this._preventRefresh = false;\n\n            dataSource.sync();\n        },\n\n        _removeTask: function(task) {\n            var dependencies = this.dependencies.dependencies(task.id);\n\n            if (!this.trigger(\"remove\", {\n                task: task,\n                dependencies: dependencies\n            })) {\n                this._removeTaskDependencies(task, dependencies);\n                this._removeTaskAssignments(task);\n\n                this._preventRefresh = true;\n\n                if (this.dataSource.remove(task)) {\n                    this._syncDataSource();\n                }\n\n                this._preventRefresh = false;\n            }\n        },\n\n        _removeDependency: function(dependency) {\n            if (!this.trigger(\"remove\", {\n                task: null,\n                dependencies: [dependency]\n            })) {\n                if (this.dependencies.remove(dependency)) {\n                    this.dependencies.sync();\n                }\n            }\n        },\n\n        _removeAssignment: function(assignment) {\n            this.assignments.dataSource.remove(assignment);\n        },\n\n        _taskConfirm: function(callback, task) {\n            var messages = this.options.messages;\n\n            this._confirm(callback, {\n                model: task,\n                text: messages.deleteTaskConfirmation,\n                title: messages.deleteTaskWindowTitle\n            });\n        },\n\n        _dependencyConfirm: function(callback, dependency) {\n            var messages = this.options.messages;\n\n            this._confirm(callback, {\n                model: dependency,\n                text: messages.deleteDependencyConfirmation,\n                title: messages.deleteDependencyWindowTitle\n            });\n        },\n\n        _confirm: function(callback, options) {\n            var editable = this.options.editable;\n            var messages;\n            var buttons;\n\n            if (editable === true || editable.confirmation !== false) {\n                messages = this.options.messages;\n                buttons = [\n                    { name: \"delete\", text: messages.destroy, className: Gantt.styles.primary, click: function() { callback(); } },\n                    { name: \"cancel\", text: messages.cancel, click: function() { callback(true); } }\n                ];\n\n                this.showDialog(extend(true, {}, options, { buttons: buttons }));\n            } else {\n                callback();\n            }\n        },\n\n        showDialog: function(options) {\n            this._editor.showDialog(options);\n        },\n\n        refresh: function() {\n            if (this._preventRefresh || !this.list || this.list.editor) {\n                return;\n            }\n\n            this._progress(false);\n\n            var dataSource = this.dataSource;\n            var taskTree = dataSource.taskTree();\n            var scrollToUid = this._scrollToUid;\n            var current;\n            var cachedUid;\n            var cachedIndex = -1;\n            var selected = this.select()[0] ? this.select().data(\"uid\") : this._selected;\n\n            if (this.current) {\n                cachedUid = this.current.closest(\"tr\").attr(kendo.attr(\"uid\"));\n                cachedIndex = this.current.index();\n            }\n\n            if (this.trigger(\"dataBinding\")) {\n                return;\n            }\n\n            if (this.resources.dataSource.data().length !== 0) {\n                this._assignResources(taskTree);\n            }\n\n            if (this._editor) {\n                this._editor.close();\n            }\n\n            this.clearSelection();\n            this.list._renderTree(taskTree);\n            this.timeline._render(taskTree);\n            this.timeline._renderDependencies(this.dependencies.view());\n\n            if (scrollToUid) {\n                this._scrollTo(scrollToUid);\n                this.select(selector(scrollToUid));\n            }\n\n            if ((scrollToUid || cachedUid) && cachedIndex >= 0) {\n                current = this.list.element\n                    .find(\"tr\" + selector((scrollToUid || cachedUid)) + \" > td\").eq(cachedIndex);\n\n                this._current(current);\n            }\n\n            this._scrollToUid = null;\n\n            if (selected) {\n                this._selected = selected;\n                this.select(\"[data-uid=\" + selected + \"]\");\n            }\n\n            this.trigger(\"dataBound\");\n        },\n\n        refreshDependencies: function() {\n            if (this._preventDependencyRefresh) {\n                return;\n            }\n\n            if (this.trigger(\"dataBinding\")) {\n                return;\n            }\n\n            this.timeline._renderDependencies(this.dependencies.view());\n\n            this.trigger(\"dataBound\");\n        },\n\n        _assignResources: function(taskTree) {\n            var resources = this.resources;\n            var assignments = this.assignments;\n            var groupAssigments = function() {\n                var data = assignments.dataSource.view();\n                var group = {\n                    field: assignments.dataTaskIdField\n                };\n\n                data = new Query(data).group(group).toArray();\n\n                return data;\n            };\n            var assigments = groupAssigments();\n            var applyTaskResource = function(task, action) {\n                var taskId = task.get(\"id\");\n\n                kendo.setter(resources.field)(task, new ObservableArray([]));\n\n                for (var i = 0, length = assigments.length; i < length; i++) {\n                    if (assigments[i].value === taskId) {\n                        action(task, assigments[i].items);\n                    }\n                }\n            };\n            var wrapTask = function(task, items) {\n                for (var j = 0, length = items.length; j < length; j++) {\n                    var item = items[j];\n                    var resource = resources.dataSource.get(item.get(assignments.dataResourceIdField));\n                    var resourceValue = item.get(assignments.dataValueField);\n                    var resourcedId = item.get(assignments.dataResourceIdField);\n                    var valueFormat = resource.get(resources.dataFormatField) || PERCENTAGE_FORMAT;\n                    var formatedValue = kendo.toString(resourceValue, valueFormat);\n\n                    task[resources.field].push(new ObservableObject({\n                        id: resourcedId,\n                        name: resource.get(resources.dataTextField),\n                        color: resource.get(resources.dataColorField),\n                        value: resourceValue,\n                        formatedValue: formatedValue\n                    }));\n                }\n            };\n\n            for (var i = 0, length = taskTree.length; i < length; i++) {\n                applyTaskResource(taskTree[i], wrapTask);\n            }\n        },\n\n        _wrapResourceData: function(id) {\n            var that = this;\n            var result = [];\n            var resource;\n            var resources = this.resources.dataSource.view();\n            var assignments = this.assignments.dataSource.view();\n            var taskAssignments = new Query(assignments).filter({\n                field: that.assignments.dataTaskIdField,\n                operator: \"eq\",\n                value: id\n            }).toArray();\n            var valuePerResource = function(id) {\n                var resourceValue = null;\n\n                new Query(taskAssignments).filter({\n                    field: that.assignments.dataResourceIdField,\n                    operator: \"eq\",\n                    value: id\n                }).select(function(assignment) {\n                    resourceValue += assignment.get(that.assignments.dataValueField);\n                });\n\n                return resourceValue;\n            };\n\n            for (var i = 0, length = resources.length; i < length; i++) {\n                resource = resources[i];\n                result.push({\n                    id: resource.get(\"id\"),\n                    name: resource.get(that.resources.dataTextField),\n                    format: resource.get(that.resources.dataFormatField) || PERCENTAGE_FORMAT,\n                    value: valuePerResource(resource.id)\n                });\n            }\n\n            return result;\n        },\n\n        _syncDataSource: function() {\n            this._preventRefresh = false;\n            this._requestStart();\n            this.dataSource.sync();\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _progress: function(toggle) {\n            kendo.ui.progress(this.element, toggle);\n        },\n\n        _resizable: function() {\n            var that = this;\n            var wrapper = this.wrapper;\n            var ganttStyles = Gantt.styles;\n            var contentSelector = DOT + ganttStyles.gridContent;\n            var treeListWrapper = wrapper.find(DOT + ganttStyles.list);\n            var timelineWrapper = wrapper.find(DOT + ganttStyles.timeline);\n            var treeListWidth;\n            var timelineWidth;\n            var timelineScroll;\n\n            this._resizeDraggable = wrapper\n                .find(DOT + ganttStyles.splitBar)\n                .height(treeListWrapper.height())\n                .hover(function() {\n                    $(this).addClass(ganttStyles.splitBarHover);\n                }, function() {\n                    $(this).removeClass(ganttStyles.splitBarHover);\n                })\n                .end()\n                .kendoResizable({\n                    orientation: \"horizontal\",\n                    handle: DOT + ganttStyles.splitBar,\n                    \"start\": function() {\n                        treeListWidth = treeListWrapper.width();\n                        timelineWidth = timelineWrapper.width();\n                        timelineScroll = kendo.scrollLeft(timelineWrapper.find(contentSelector));\n                    },\n                    \"resize\": function(e) {\n                        var delta = e.x.initialDelta;\n\n                        if (kendo.support.isRtl(wrapper)) {\n                            delta *= -1;\n                        }\n\n                        if (treeListWidth + delta < 0 || timelineWidth - delta < 0) {\n                            return;\n                        }\n\n                        treeListWrapper.width(treeListWidth + delta);\n                        timelineWrapper.width(timelineWidth - delta);\n                        kendo.scrollLeft(timelineWrapper.find(contentSelector), (timelineScroll + delta));\n\n                        that.timeline.view()._renderCurrentTime();\n                    }\n                }).data(\"kendoResizable\");\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var ganttStyles = Gantt.styles;\n            var contentSelector = DOT + ganttStyles.gridContent;\n            var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n            var timelineHeader = this.timeline.element.find(headerSelector);\n            var timelineContent = this.timeline.element.find(contentSelector);\n            var treeListHeader = this.list.element.find(headerSelector);\n            var treeListContent = this.list.element.find(contentSelector);\n\n            if (mobileOS) {\n                treeListContent.css(\"overflow-y\", \"auto\");\n            }\n\n            timelineContent.on(\"scroll\", function() {\n                that.scrollTop = this.scrollTop;\n                kendo.scrollLeft(timelineHeader, this.scrollLeft);\n                treeListContent.scrollTop(this.scrollTop);\n            });\n\n            treeListContent\n                .on(\"scroll\", function() {\n                    kendo.scrollLeft(treeListHeader, this.scrollLeft);\n                })\n                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, function(e) {\n                    var scrollTop = timelineContent.scrollTop();\n                    var delta = kendo.wheelDeltaY(e);\n\n                    if (delta) {\n                        e.preventDefault();\n                        //In Firefox DOMMouseScroll event cannot be canceled\n                        $(e.currentTarget).one(\"wheel\" + NS, false);\n\n                        timelineContent.scrollTop(scrollTop + (-delta));\n                    }\n                });\n        },\n\n        _navigatable: function() {\n            var that = this;\n            var navigatable = this.options.navigatable;\n            var editable = this.options.editable;\n            var ganttStyles = Gantt.styles;\n            var contentSelector = DOT + ganttStyles.gridContent;\n            var headerSelector = DOT + ganttStyles.gridHeaderWrap;\n            var headerTable = this.list.element.find(headerSelector).find(\"table\");\n            var contentTable = this.list.element.find(contentSelector).find(\"table\");\n            var isRtl = kendo.support.isRtl(this.wrapper);\n            var timelineContent = this.timeline.element.find(DOT + ganttStyles.gridContent);\n            var tables = headerTable.add(contentTable);\n            var attr = selector();\n            var cellIndex;\n            var expandState = {\n                collapse: false,\n                expand: true\n            };\n\n            var scroll = function(reverse) {\n                var width = that.timeline.view()._timeSlots()[0].offsetWidth;\n                kendo.scrollLeft(timelineContent, kendo.scrollLeft(timelineContent) + (reverse ? -width : width));\n            };\n\n            var scrollVertical = function(reverse) {\n                var height = that.timeline.view()._rowHeight;\n                timelineContent.scrollTop(timelineContent.scrollTop() + (reverse ? -height : height));\n            };\n\n            var moveVertical = function(method) {\n                var parent = that.current.parent(\"tr\" + selector());\n                var index = that.current.index();\n                var sibling = parent[method]('tr:visible').first();\n\n                if (sibling.length !== 0) {\n                    that._current(sibling.children(\"td\").eq(index));\n                    that._scrollTo(that.current);\n                } else {\n                    if (that.current.is(\"td\") && method == \"prevAll\") {\n                        focusTable(headerTable);\n                        that._current(headerTable.find(\"tr\").last().children(\"th\").eq(index));\n                        that._scrollTo(that.current);\n                    } else if (that.current.is(\"th\") && method == \"nextAll\") {\n                        focusTable(contentTable);\n                        that._current(contentTable.find(\"tr\").first().children(\"td\").eq(index));\n                        that._scrollTo(that.current);\n                    }\n                }\n            };\n            var moveHorizontal = function(method) {\n                var subling = that.current[method]();\n\n                if (subling.length !== 0) {\n                    that._current(subling);\n                    cellIndex = that.current.index();\n                }\n            };\n            var toggleExpandedState = function(value) {\n                var model = that.dataItem(that.current);\n\n                if (model.summary && model.expanded !== value) {\n                    model.set(\"expanded\", value);\n                }\n            };\n            var deleteAction = function() {\n                var editable = that.options.editable;\n\n                if (!editable || editable.destroy === false || that.list.editor) {\n                    return;\n                }\n\n                var selectedTask = that.select();\n                var uid = kendo.attr(\"uid\");\n\n                if (selectedTask.length) {\n                    that.removeTask(selectedTask.attr(uid));\n                }\n            };\n\n            $(this.wrapper)\n                .on(\"mousedown\" + NS, \"tr\" + attr + \", div\" + attr + \":not(\" + DOT + ganttStyles.line + \")\", function(e) {\n                    var currentTarget = $(e.currentTarget);\n                    var isInput = $(e.target).is(\":button,a,:input,a>.k-icon,textarea,span.k-icon:not(.k-i-none),span.k-link,.k-input,.k-multiselect-wrap,.k-input-value-text,.k-input-inner\");\n                    var current;\n\n                    if (e.ctrlKey) {\n                        return;\n                    }\n\n                    if (navigatable) {\n                        if (currentTarget.is(\"tr\")) {\n                            current = $(e.target).closest(\"td\");\n                        } else {\n                            current = that.list\n                                .content.find(\"tr\" + selector(currentTarget.attr(kendo.attr(\"uid\"))) + \" > td\").first();\n                        }\n\n                        that._current(current);\n                    }\n\n                    if ((navigatable || editable) && !isInput) {\n                        that._focusTimeout = setTimeout(function() {\n                            focusTable(that.list.content.find(\"table\"), true);\n                        }, 2);\n                    }\n                })\n\n                .on(\"keydown\" + NS, function(e) {\n                    var key = e.keyCode;\n                    var that = this;\n                    var focusableItems = $(that._getToolbarItems());\n                    var idx = focusableItems.index(that.toolbar.find(DOT + ganttStyles.focused)[0]);\n                    if (idx === -1 && $(e.target).closest(DOT + ganttStyles.toolbar.views).length) {\n                        idx = focusableItems.index(that.toolbar.find(\".k-gantt-views > .k-selected:visible, .k-views-dropdown:visible\")[0]);\n                    }\n                    var itemToFocus = e.shiftKey ? focusableItems[idx - 1] : focusableItems[idx + 1];\n\n                    if (key === keys.F10) {\n                        that.toolbar.find(\".k-button:visible\").first().addClass(ganttStyles.focused).trigger(\"focus\");\n                        e.preventDefault();\n                    } else if (key == keys.TAB && $(e.target).closest(DOT + ganttStyles.toolbar.toolbar).length) {\n                        that.toolbar.find(DOT + ganttStyles.focused).removeClass(ganttStyles.focused).trigger(\"blur\");\n                        if (itemToFocus) {\n                            $(itemToFocus).addClass(ganttStyles.focused).trigger(\"focus\");\n                            e.preventDefault();\n                            return;\n                        }\n                        if (this.list.element.is(\":visible\")) {\n                            this.list.element.find(\"table[role=treegrid]\").trigger(\"focus\");\n                        } else {\n                            this.element.find(DOT + ganttStyles.tasks)[0].focus();\n                        }\n                        e.preventDefault();\n                    }\n\n                }.bind(this));\n\n            if (navigatable !== true) {\n                contentTable\n                    .on(\"keydown\" + NS, function(e) {\n                        if (e.keyCode == keys.DELETE) {\n                            deleteAction();\n                        }\n                    });\n\n                return;\n            }\n\n            tables\n                .on(\"focus\" + NS, function() {\n                    var selector = this === contentTable.get(0) ? \"td\" : \"th\";\n                    var selection = that.select();\n                    var current = that.current || $((selection.length ? selection : this))\n                        .find(selector).eq((cellIndex || 0));\n\n                    that._current(current);\n                    $(that.toolbar.find(DOT + ganttStyles.focused)).removeClass(ganttStyles.focused);\n                })\n                .on(\"blur\" + NS, function() {\n                    that._current();\n\n                    if (this == headerTable) {\n                        $(this).attr(TABINDEX, -1);\n                    }\n                })\n                .on(\"keydown\" + NS, function(e) {\n                    var key = e.keyCode;\n                    var isCell;\n\n                    if (!that.current) {\n                        return;\n                    }\n\n                    isCell = that.current.is(\"td\");\n\n                    switch (key) {\n                        case keys.RIGHT:\n                            e.preventDefault();\n                            if (e.altKey) {\n                                scroll();\n                            } else if (e.ctrlKey) {\n                                toggleExpandedState(isRtl ? expandState.collapse : expandState.expand);\n                            } else {\n                                moveHorizontal(isRtl ? \"prev\" : \"next\");\n                            }\n                            break;\n                        case keys.LEFT:\n                            e.preventDefault();\n                            if (e.altKey) {\n                                scroll(true);\n                            } else if (e.ctrlKey) {\n                                toggleExpandedState(isRtl ? expandState.expand : expandState.collapse);\n                            } else {\n                                moveHorizontal(isRtl ? \"next\" : \"prev\");\n                            }\n                            break;\n                        case keys.UP:\n                            e.preventDefault();\n                            if (e.altKey) {\n                                scrollVertical(true);\n                            } else {\n                                moveVertical(\"prevAll\");\n                            }\n                            break;\n                        case keys.DOWN:\n                            e.preventDefault();\n                            if (e.altKey) {\n                                scrollVertical();\n                            } else {\n                                moveVertical(\"nextAll\");\n                            }\n                            break;\n                        case keys.SPACEBAR:\n                            e.preventDefault();\n                            if (isCell) {\n                                if (!that.select() || that.current.closest(\"tr\")[0] !== that.select()[0]) {\n                                    that.select(that.current.closest(\"tr\"));\n                                    that.trigger(\"change\");\n                                }\n                            }\n                            break;\n                        case keys.ENTER:\n                            e.preventDefault();\n                            if (isCell) {\n                                if (that.options.editable && that.options.editable.update !== false) {\n                                    that.list._startEditHandler(that.current);\n                                    $(this).one(\"keyup\", function(e) {\n                                        /* Stop the event propagation so that the list widget won't close its editor immediately */\n                                        e.stopPropagation();\n                                    });\n                                }\n                            } else {\n                                /* Sort */\n                                that.current\n                                    .children(\"a.k-link\")\n                                    .click();\n                            }\n                            break;\n                        case keys.DELETE:\n                            if (isCell) {\n                                deleteAction();\n                            }\n                            break;\n                        default:\n                            if (key >= 49 && key <= 57 && e.target.tagName.toLowerCase() !== \"input\") {\n                               that.view(that.timeline._viewByIndex(key - 49));\n                            }\n                            break;\n                    }\n                });\n        },\n\n        _getToolbarItems: function() {\n            return this.toolbar.find(\"> .k-button:visible\").toArray().concat(\n                this.toolbar.find(\".k-views-dropdown:visible\").toArray(),\n                this.toolbar.find(\".k-gantt-views > .k-selected:visible\").toArray()\n            );\n        },\n\n        _current: function(element) {\n            var ganttStyles = Gantt.styles;\n            var activeElement;\n\n            if (this.current && this.current.length) {\n                this.current\n                    .removeClass(ganttStyles.focusedCell)\n                    .removeAttr(\"id\");\n            }\n\n            if (element && element.length) {\n                this.current = element\n                    .addClass(ganttStyles.focusedCell)\n                    .attr(\"id\", ACTIVE_CELL);\n\n                activeElement = $(kendo._activeElement());\n\n                if (activeElement.is(\"table\") && this.wrapper.find(activeElement).length > 0) {\n                    activeElement\n                        .removeAttr(ARIA_DESCENDANT)\n                        .attr(ARIA_DESCENDANT, ACTIVE_CELL);\n                }\n            } else {\n                this.current = null;\n            }\n        },\n\n        _dataBind: function() {\n            var that = this;\n\n            if (that.options.autoBind) {\n                this._preventRefresh = true;\n                this._preventDependencyRefresh = true;\n\n                var promises = $.map([\n                    this.dataSource,\n                    this.dependencies,\n                    this.resources.dataSource,\n                    this.assignments.dataSource\n                ],\n                function(dataSource) {\n                    return dataSource.fetch();\n                });\n\n                $.when.apply(null, promises)\n                    .done(function() {\n                        that._preventRefresh = false;\n                        that._preventDependencyRefresh = false;\n                        that.refresh();\n                    });\n            }\n        },\n\n        _resize: function() {\n            this._adjustDimensions();\n            this.timeline.view()._adjustHeight();\n            this.timeline.view()._renderCurrentTime();\n            this.list._adjustHeight();\n        },\n\n        _createPlannedTasksSwitch: function() {\n            var that = this;\n            var switchLabel = that.options.messages.plannedTasks.switchText;\n            var toggeSwitchWrap = $(\"<span class='k-gantt-planned-wrap'><label>\" + switchLabel + \"</label></span>\");\n            var plannedToggle = new kendo.ui.Switch($(\"<input id='planned-switch' class='k-gantt-planned-switch'>\"), {\n                checked: that.options.showPlannedTasks,\n                change: that._togglePlannedTasks.bind(that),\n                messages: {\n                    checked: \"\",\n                    unchecked: \"\"\n                }\n            });\n\n            toggeSwitchWrap.append(plannedToggle.wrapper);\n\n            that.toggeSwitchWrap = toggeSwitchWrap;\n            that.toggleSwitch = plannedToggle;\n        },\n\n        _togglePlannedTasks: function(e) {\n            var timeline = this.timeline;\n\n            if (!this.trigger(\"togglePlannedTasks\", { showPlannedTasks: !timeline.options.showPlannedTasks })) {\n                this.wrapper.toggleClass(ganttStyles.plannedTasks);\n                timeline._setPlanned(!timeline.options.showPlannedTasks);\n                timeline._render(this.dataSource.taskTree());\n                timeline._renderDependencies(this.dependencies.view());\n            } else {\n                e.preventDefault();\n            }\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Gantt.fn);\n\n        Gantt.fn._drawPDF = function() {\n            var ganttStyles = Gantt.styles;\n            var listTableWidth = this.wrapper.find(DOT + ganttStyles.list + \" \" + DOT + ganttStyles.gridContent + \">table\").width();\n            var content = this.wrapper.clone();\n\n            content.find(DOT + ganttStyles.list).css(\"width\", listTableWidth);\n\n            return this._drawPDFShadow({\n                content: content\n            }, {\n                avoidLinks: this.options.pdf.avoidLinks\n            });\n        };\n    }\n\n    kendo.ui.plugin(Gantt);\n\n    extend(true, Gantt, { styles: ganttStyles });\n\n})(window.kendo.jQuery);\n"]}