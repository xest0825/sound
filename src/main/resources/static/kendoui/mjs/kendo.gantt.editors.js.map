{"version":3,"file":"kendo.gantt.editors.js","names":["__meta__","id","name","category","description","depends","hidden","$","undefined$1","kendo","window","ui","browser","support","Observable","Widget","outerWidth","_outerWidth","keys","extend","F10","isPlainObject","NS","CLICK","WIDTH","DOT","DIRECTIONS","down","origin","position","up","ganttStyles","buttonDelete","buttonCancel","buttonSave","focused","gridContent","hovered","item","popupWrapper","popupList","popup","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","button","buttonDefaults","editField","editLabel","resourcesField","primary","toolbar","appendButton","TaskDropDown","init","element","options","fn","call","this","_popup","direction","destroy","clearTimeout","_focusTimeout","off","list","unbind","_adjustListWidth","computedStyle","computedWidth","width","style","wrapper","listOuterWidth","data","getComputedStyle","parseFloat","mozilla","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","css","fontFamily","_current","method","current","find","sibling","length","removeClass","removeAttr","addClass","trigger","that","itemSelector","actions","messages","styles","map","action","text","TASK_DROPDOWN_TEMPLATE","addChild","insertBefore","insertAfter","append","Popup","anchor","open","animation","on","e","attr","preventDefault","type","hover","end","close","bind","parents","first","keyCode","UP","DOWN","ENTER","click","ESC","editors","desktop","dateRange","container","field","title","validationRules","model","fields","validation","appendTo","hide","resources","assignButton","readonly","value","get","Editor","createButton","plannedEditors","editor","editable","template","key","start","percentComplete","format","splice","apply","concat","plannedStart","plannedEnd","push","label","_buildEditTemplate","settings","Template","templateSettings","html","unescape","renderForm","PopupEditor","is","editTask","task","_createPopupEditor","showDialog","buttons","popupStyles","i","eq","buttonIndex","currentTarget","index","kendoWindow","modal","autoFocus","resizable","draggable","visible","deactivate","getKendoWindow","center","editableWidget","uid","save","className","cancel","editorTitle","userTriggered","kendoForm","items","formData","buttonsTemplate","validatable","validateOnBlur","kendoEditable","clearContainer","target","cycleForm","stopPropagation","updateInfo","ResourceEditor","_initContainer","_attachHandlers","events","_dettachHandlers","grid","closeHandler","_cancelProxy","_cancel","_saveProxy","_save","row","closest","dataSource","getByUid","set","_createButtons","dom","resourcesEditorTitle","resize","_resourceGrid","Grid","columns","resourcesHeader","unitsHeader","dataItem","valueFormat","toString","height","sortable","filterable","schema","from","unitsValidation","values","parent","prop","_updateModel","gantt","jQuery"],"sources":["kendo.gantt.editors.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.popup.js';\nimport './kendo.window.js';\nimport './kendo.gantt.data.js';\nimport './kendo.grid.js';\nimport './kendo.datetimepicker.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\n\nvar __meta__ = {\n    id: \"gantt.editors\",\n    name: \"GanttEditors\",\n    category: \"web\",\n    description: \"The Gantt component editors.\",\n    depends: [ \"data\", \"popup\", \"window\", \"gantt.data\", \"grid\", \"datetimepicker\", \"numerictextbox\", \"textbox\", \"form\"],\n    hidden: true\n};\n\n(function($, undefined$1) {\n\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        browser = kendo.support.browser,\n        Observable = kendo.Observable,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n\n        keys = $.extend({ F10: 121 }, kendo.keys),\n\n        extend = $.extend,\n        isPlainObject = $.isPlainObject,\n\n        NS = \".kendoGantt\",\n        PERCENTAGE_FORMAT = \"p0\",\n        CLICK = \"click\",\n        WIDTH = \"width\",\n        STRING = \"string\",\n        DOT = \".\",\n\n        DIRECTIONS = {\n            \"down\": {\n                origin: \"bottom left\",\n                position: \"top left\"\n            },\n            \"up\": {\n                origin: \"top left\",\n                position: \"bottom left\"\n            }\n        },\n\n        TASK_DROPDOWN_TEMPLATE = ({ styles, actions }) => `<div class=\"${styles.popupWrapper}\">` +\n            `<ul class=\"${styles.popupList}\" role=\"listbox\" aria-label=\"Add dropdown\">` +\n                `${actions.map(action => '<li tabindex=\"0\" class=\"' + styles.item + '\" data-action=\"' + action.data + '\" role=\"option\">' +\n                                            '<span class=\"k-link k-menu-link\">' +\n                                                '<span class=\"k-menu-link-text\">' + action.text + '</span>' +\n                                            '</span>' +\n                                        '</li>'\n                )}` +\n            '</ul>' +\n        '</div>';\n\n    var ganttStyles = {\n        buttonDelete: \"k-gantt-delete\",\n        buttonCancel: \"k-gantt-cancel\",\n        buttonSave: \"k-gantt-update\",\n        focused: \"k-focus\",\n        gridContent: \"k-grid-content\",\n        hovered: \"k-hover\",\n        item: \"k-item k-menu-item\",\n        popupWrapper: \"k-popup k-menu-popup\",\n        popupList: \"k-menu-group k-menu-group-md k-reset\",\n        popup: {\n            form: \"k-popup-edit-form\",\n            editForm: \"k-gantt-edit-form\",\n            formContainer: \"k-edit-form-container\",\n            resourcesFormContainer: \"k-resources-form-container\",\n            message: \"k-popup-message\",\n            buttonsContainer: \"k-edit-buttons\",\n            button: \"k-button\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid k-button-solid-base\",\n            editField: \"k-edit-field\",\n            editLabel: \"k-edit-label\",\n            resourcesField: \"k-gantt-resources\"\n        },\n        primary: \"k-button-solid-primary\",\n        toolbar: {\n            appendButton: \"k-gantt-create\"\n        }\n    };\n\n    var DATERANGEEDITOR = function(container, options) {\n        var attr = { name: options.field, title: options.title };\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules && isPlainObject(validationRules) && validationRules.message) {\n            attr[kendo.attr(\"dateCompare-msg\")] = validationRules.message;\n        }\n\n        $('<input type=\"text\" required ' +\n                'id=\"' + options.field + '\"' +\n                kendo.attr(\"type\") + '=\"date\" ' +\n                kendo.attr(\"role\") + '=\"datetimepicker\" ' +\n                kendo.attr(\"bind\") + '=\"value:' +\n                options.field + '\" ' +\n                kendo.attr(\"validate\") + \"='true' />\")\n            .attr(attr)\n            .appendTo(container);\n\n        $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>')\n            .hide()\n            .appendTo(container);\n    };\n\n    var RESOURCESEDITOR = function(container, options) {\n        $('<div class=\"' + ganttStyles.popup.resourcesField + '\" style=\"display:none\"></div><a href=\"#\" class=\"' + options.styles.button + ' ' + options.styles.buttonDefaults + '\"><span class=\"k-button-text\">' + options.messages.assignButton + '</span></a>').on(\"click\", options.click).appendTo(container);\n    };\n\n    var READONLYEDITOR = function(container, options) {\n        var field = options.field;\n        var value = '';\n\n        if (options.model.get(field) !== null) {\n            value = options.model.get(field);\n        }\n\n        container.append(\"<span>\" + value + \"</span>\");\n    };\n\n    var TaskDropDown = Observable.extend({\n        init: function(element, options) {\n\n            Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n\n            this._popup();\n        },\n\n        options: {\n            direction: \"down\"\n        },\n\n        destroy: function() {\n            clearTimeout(this._focusTimeout);\n            this.popup.destroy();\n            this.element.off(NS);\n            this.list.off(NS);\n            this.unbind();\n        },\n\n        _adjustListWidth: function() {\n            var list = this.list;\n            var width = list[0].style.width;\n            var wrapper = this.element;\n            var listOuterWidth = outerWidth(list);\n            var computedStyle;\n            var computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = computedStyle ? parseFloat(computedStyle.width) : outerWidth(wrapper);\n\n            if (computedStyle && (browser.mozilla || browser.msie)) { // getComputedStyle returns different box in FF and IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            if (listOuterWidth > width) {\n                width = listOuterWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: width\n            })\n            .data(WIDTH, width);\n        },\n\n        _current: function(method) {\n            var current = this.list\n                .find(DOT + ganttStyles.focused);\n            var sibling = current[method]();\n\n            if (sibling.length) {\n                current\n                    .removeClass(ganttStyles.focused)\n                    .removeAttr(\"id\");\n                sibling\n                    .addClass(ganttStyles.focused)\n                    .trigger(\"focus\");\n            }\n        },\n\n        _popup: function() {\n            var that = this;\n            var itemSelector = \"li\" + DOT + \"k-item\";\n            var actions = this.options.messages.actions;\n\n            this.list = $(TASK_DROPDOWN_TEMPLATE({\n                styles: ganttStyles,\n                actions: [\n                    {\n                        data: \"add\",\n                        text: actions.addChild\n                    },\n                    {\n                        data: \"insert-before\",\n                        text: actions.insertBefore\n                    },\n                    {\n                        data: \"insert-after\",\n                        text: actions.insertAfter\n                    }\n                ]\n            }));\n\n            this.element.append(this.list);\n\n            this.popup = new kendo.ui.Popup(this.list,\n                extend({\n                    anchor: this.element,\n                    open: function() {\n                        that._adjustListWidth();\n                    },\n                    animation: this.options.animation\n                }, DIRECTIONS[this.options.direction])\n            );\n\n            this.element\n                .on(CLICK + NS, function(e) {\n                    var target = $(this);\n                    var action = target.attr(kendo.attr(\"action\"));\n\n                    e.preventDefault();\n\n                    if (action) {\n                        that.trigger(\"command\", { type: action });\n                    } else {\n                        that.popup.open();\n\n                        that.list\n                            .find(\"li:first\")\n                            .addClass(ganttStyles.focused)\n                            .trigger(\"focus\");\n                    }\n                });\n\n            this.list\n                .find(itemSelector)\n                .hover(function() {\n                    $(this).addClass(ganttStyles.hovered);\n                }, function() {\n                    $(this).removeClass(ganttStyles.hovered);\n                })\n                .end()\n                .on(CLICK + NS, itemSelector, function() {\n                    that.trigger(\"command\", { type: $(this).attr(kendo.attr(\"action\")) });\n                    that.popup.close();\n                });\n\n            this.popup\n                .bind(\"close\", function() {\n                    that.list\n                        .find(itemSelector)\n                        .removeClass(ganttStyles.focused);\n\n                    that.element\n                        .parents('[' + kendo.attr(\"role\") + '=\"gantt\"]')\n                        .find(DOT + ganttStyles.gridContent + \" > table\").first()\n                        .trigger(\"focus\");\n                });\n\n            this.list\n                .find(\"ul\")\n                .on(\"keydown\" + NS, function(e) {\n                    var key = e.keyCode;\n\n                    switch (key) {\n                        case keys.UP:\n                            e.preventDefault();\n                            that._current(\"prev\");\n                            break;\n                        case keys.DOWN:\n                            e.preventDefault();\n                            that._current(\"next\");\n                            break;\n                        case keys.ENTER:\n                            that.list\n                                .find(DOT + ganttStyles.focused)\n                                .click();\n                            break;\n                        case keys.ESC:\n                            e.preventDefault();\n                            that.popup.close();\n                            break;\n                    }\n                });\n        }\n    });\n\n    var editors = {\n        desktop: {\n            dateRange: DATERANGEEDITOR,\n            resources: RESOURCESEDITOR,\n            readonly: READONLYEDITOR\n        }\n    };\n\n    var Editor = kendo.Observable.extend({\n        init: function(element, options) {\n            kendo.Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n            this.createButton = this.options.createButton;\n        },\n\n        fields: function(editors, model, plannedEditors) {\n            var that = this;\n            var options = this.options;\n            var messages = options.messages.editor;\n            var resources = options.resources;\n            var fields;\n\n            var click = function(e) {\n                e.preventDefault();\n                resources.editor(that.container.find(DOT + ganttStyles.popup.resourcesField), model);\n            };\n\n            if (options.editable.template) {\n                fields = $.map(model.fields, function(value, key) {\n                            return { field: key };\n                        });\n            } else {\n                fields = [\n                    { field: \"title\", title: messages.title },\n                    { field: \"start\", title: messages.start, editor: editors.dateRange },\n                    { field: \"end\", title: messages.end, editor: editors.dateRange },\n                    { field: \"percentComplete\", title: messages.percentComplete, format: PERCENTAGE_FORMAT }\n                ];\n\n                if (plannedEditors) {\n                    fields.splice.apply(fields, [1, 0].concat([\n                        { field: \"plannedStart\", title: messages.plannedStart, editor: editors.dateRange },\n                        { field: \"plannedEnd\", title: messages.plannedEnd, editor: editors.dateRange }\n                    ]));\n                }\n\n                if (model.get(resources.field)) {\n                    fields.push({ field: resources.field, title: messages.resources, messages: messages, editor: editors.resources, click: click, styles: ganttStyles.popup });\n                }\n\n\n                fields = fields.map(function(item) {\n                    if (!model.editable || model.editable(item.field)) {\n                        return item;\n                    } else {\n                        return extend(true, item, {\n                            editor: editors.readonly\n                        });\n                    }\n                });\n\n            }\n\n            return fields.map(function(item) {\n                return extend(true, item, {\n                    label: item.title\n                });\n            });\n        },\n\n        _buildEditTemplate: function(model) {\n            var template = this.options.editable.template;\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var html = \"\";\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n            } else {\n                this.renderForm = true;\n                html += '<div class=\"k-gantt-form\"></div>';\n            }\n\n            return html;\n        }\n    });\n\n    var PopupEditor = Editor.extend({\n        destroy: function() {\n            this.close();\n            this.unbind();\n        },\n\n        close: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n                    that.container.data(\"kendoWindow\").destroy();\n                    that.editable = null;\n                    that.container = null;\n                }\n\n                if (that.popup) {\n                    that.popup.destroy();\n                    that.popup = null;\n                }\n            };\n\n            if (that.editable && that.container.is(\":visible\")) {\n                that.trigger(\"close\", { window: that.container });\n                that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n            } else {\n                destroy();\n            }\n        },\n\n        editTask: function(task, plannedEditors) {\n            this.editable = this._createPopupEditor(task, plannedEditors);\n        },\n\n        showDialog: function(options) {\n            var buttons = options.buttons;\n            var popupStyles = ganttStyles.popup;\n\n            var html = kendo.format('<div class=\"{0}\"><div class=\"{1}\"><p class=\"{2}\">{3}</p><div class=\"{4}\">',\n                popupStyles.form, popupStyles.formContainer, popupStyles.message, options.text, popupStyles.buttonsContainer);\n\n            for (var i = 0, length = buttons.length; i < length; i++) {\n                html += this.createButton(buttons[i]);\n            }\n\n            html += '</div></div></div>';\n\n            var wrapper = this.element;\n\n            if (this.popup) {\n                this.popup.destroy();\n            }\n\n            var popup = this.popup = $(html).appendTo(wrapper)\n                .eq(0)\n                .on(\"click\", DOT + popupStyles.button, function(e) {\n                    e.preventDefault();\n\n                    popup.close();\n\n                    var buttonIndex = $(e.currentTarget).index();\n\n                    buttons[buttonIndex].click();\n                })\n                .kendoWindow({\n                    modal: true,\n                    autoFocus: false,\n                    resizable: false,\n                    draggable: false,\n                    title: options.title,\n                    visible: false,\n                    deactivate: function() {\n                        this.destroy();\n                        wrapper.trigger(\"focus\");\n                    }\n                })\n                .getKendoWindow();\n\n            popup.center().open();\n\n            popup.element.find(\".k-button-solid-primary\").trigger(\"focus\");\n        },\n\n        _createPopupEditor: function(task, plannedEditors) {\n            var that = this;\n            var options = {};\n            var messages = this.options.messages;\n            var popupStyles = ganttStyles.popup;\n            var editableWidget;\n\n            var html = kendo.format('<div {0}=\"{1}\" class=\"{2} {3}\"><div class=\"{4}\">',\n                kendo.attr(\"uid\"), task.uid, popupStyles.form, popupStyles.editForm, popupStyles.formContainer);\n\n            var fields = this.fields(editors.desktop, task, plannedEditors);\n\n            html += this._buildEditTemplate(task);\n\n            html += '<div class=\"' + popupStyles.buttonsContainer + '\">';\n            html += this.createButton({ name: \"update\", text: messages.save, className: ganttStyles.primary });\n            html += this.createButton({ name: \"cancel\", text: messages.cancel });\n            if (that.options.editable.destroy !== false) {\n                html += this.createButton({ name: \"delete\", text: messages.destroy });\n            }\n\n            html += '</div></div></div>';\n\n            var container = this.container = $(html).appendTo(this.element)\n                .eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(\"cancel\", { container: container, model: task })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n\n            if (this.renderForm) {\n                this.form = container.find(\".k-gantt-form\").kendoForm({\n                    items: fields,\n                    formData: task,\n                    buttonsTemplate: () => \"\",\n                    validatable: {\n                        validateOnBlur: true\n                    }\n                }).data(\"kendoForm\");\n\n                editableWidget = this.form.editable;\n            } else {\n                editableWidget = container\n                .kendoEditable({\n                    model: task,\n                    clearContainer: false,\n                    validateOnBlur: true,\n                    target: that.options.target\n                })\n                .data(\"kendoEditable\");\n            }\n\n            kendo.cycleForm(container);\n\n            if (!this.trigger(\"edit\", { container: container, model: task })) {\n                container.data(\"kendoWindow\").center().open();\n\n                container.on(CLICK + NS, DOT + ganttStyles.buttonCancel, function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(\"cancel\", { container: container, model: task });\n                });\n\n                container.on(CLICK + NS, DOT + ganttStyles.buttonSave, function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    var fields = that.fields(editors.desktop, task, plannedEditors);\n                    var updateInfo = {};\n                    var field;\n\n                    for (var i = 0, length = fields.length; i < length; i++) {\n                        field = fields[i].field;\n                        updateInfo[field] = task.get(field);\n                    }\n\n                    that.trigger(\"save\", { container: container, model: task, updateInfo: updateInfo });\n                });\n\n                container.on(CLICK + NS, DOT + ganttStyles.buttonDelete, function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(\"remove\", { container: container, model: task });\n                });\n            } else {\n                that.trigger(\"cancel\", { container: container, model: task });\n            }\n\n            return editableWidget;\n        }\n    });\n\n    var ResourceEditor = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.wrapper = this.element;\n            this.model = this.options.model;\n            this.resourcesField = this.options.resourcesField;\n            this.createButton = this.options.createButton;\n\n            this._initContainer();\n            this._attachHandlers();\n        },\n\n        events: [\n            \"save\"\n        ],\n\n        close: function() {\n            this.window.bind(\"deactivate\", this.destroy.bind(this)).close();\n        },\n\n        destroy: function() {\n            this._dettachHandlers();\n\n            this.grid.destroy();\n            this.grid = null;\n\n            this.window.destroy();\n            this.window = null;\n\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n\n            this.element = this.wrapper = null;\n        },\n\n        open: function() {\n            this.window.center().open();\n        },\n\n        _attachHandlers: function() {\n            var grid = this.grid;\n\n            var closeHandler = this._cancelProxy = this._cancel.bind(this);\n            this.container.on(CLICK + NS, DOT + ganttStyles.buttonCancel, this._cancelProxy);\n\n            this._saveProxy = this._save.bind(this);\n            this.container.on(CLICK + NS, DOT + ganttStyles.buttonSave, this._saveProxy);\n\n            this.window.bind(\"close\", function(e) {\n                if (e.userTriggered) {\n                    closeHandler(e);\n                }\n            });\n\n            grid.wrapper.on(CLICK + NS, \"input[type='checkbox']\", function() {\n                var element = $(this);\n                var row = $(element).closest(\"tr\");\n                var model = grid.dataSource.getByUid(row.attr(kendo.attr(\"uid\")));\n                var value = $(element).is(\":checked\") ? 1 : \"\";\n\n                model.set(\"value\", value);\n            });\n        },\n\n        _cancel: function(e) {\n            e.preventDefault();\n            this.close();\n        },\n\n        _createButtons: function() {\n            var buttons = this.options.buttons;\n            var html = '<div class=\"' + ganttStyles.popup.buttonsContainer + '\">';\n\n            for (var i = 0, length = buttons.length; i < length; i++) {\n                html += this.createButton(buttons[i]);\n            }\n\n            html += \"</div>\";\n\n            this.container.append(html);\n        },\n\n        _dettachHandlers: function() {\n            this._cancelProxy = null;\n            this._saveProxy = null;\n            this.container.off(NS);\n            this.grid.wrapper.off();\n        },\n\n        _initContainer: function() {\n            var that = this;\n            var popupStyles = ganttStyles.popup;\n            var dom = kendo.format('<div class=\"{0} {1}\"><div class=\"{2} {3}\"></div></div>\"',\n                popupStyles.form, popupStyles.editForm, popupStyles.formContainer, popupStyles.resourcesFormContainer);\n\n            dom = $(dom);\n\n            this.container = dom.find(DOT + popupStyles.resourcesFormContainer);\n\n            this.window = dom.kendoWindow({\n                modal: true,\n                resizable: false,\n                draggable: true,\n                visible: false,\n                title: this.options.messages.resourcesEditorTitle,\n                open: function() {\n                      that.grid.resize(true);\n                }\n            }).data(\"kendoWindow\");\n\n            this._resourceGrid();\n            this._createButtons();\n        },\n\n        _resourceGrid: function() {\n            var that = this;\n            var messages = this.options.messages;\n            var element = $('<div id=\"resources-grid\"/>').appendTo(this.container);\n\n            this.grid = new kendo.ui.Grid(element, {\n                columns: [\n                    {\n                        field: \"name\",\n                        title: messages.resourcesHeader,\n                        template: ({ name, value }) =>\n                            `<label><input type='checkbox' value='${name}'` +\n                                `${value > 0 && value !== null ? 'checked=\"checked\"' : ''}` +\n                            `/>${name}</labe>`\n                    },\n                    {\n                        field: \"value\",\n                        title: messages.unitsHeader,\n                        template: function(dataItem) {\n                            var valueFormat = dataItem.format;\n                            var value = dataItem.value !== null ? dataItem.value : \"\";\n\n                            return valueFormat ? kendo.toString(value, valueFormat) : value;\n                        }\n                    }\n                ],\n                height: 280,\n                sortable: true,\n                editable: true,\n                filterable: true,\n                dataSource: {\n                    data: that.options.data,\n                    schema: {\n                        model: {\n                            id: \"id\",\n                            fields: {\n                                id: { from: \"id\" },\n                                name: { from: \"name\", type: \"string\", editable: false },\n                                value: { from: \"value\", type: \"number\", validation: this.options.unitsValidation },\n                                format: { from: \"format\", type: \"string\" }\n                            }\n                        }\n                    }\n                },\n                save: function(e) {\n                    var value = !!e.values.value;\n                    e.container.parent().find(\"input[type='checkbox']\").prop(\"checked\", value);\n                }\n            });\n        },\n\n        _save: function(e) {\n            e.preventDefault();\n\n            this._updateModel();\n\n            if (!this.wrapper.is(DOT + ganttStyles.popup.resourcesField)) {\n                this.trigger(\"save\", { container: this.wrapper, model: this.model });\n            }\n\n            this.close();\n        },\n\n        _updateModel: function() {\n            var resources = [];\n            var value;\n            var data = this.grid.dataSource.data();\n\n            for (var i = 0, length = data.length; i < length; i++) {\n                value = data[i].get(\"value\");\n                if (value !== null && value > 0) {\n                    resources.push(data[i]);\n                }\n            }\n\n            this.model[this.resourcesField] = resources;\n        }\n    });\n\n    kendo.gantt = {\n        TaskDropDown: TaskDropDown,\n        Editor: Editor,\n        PopupEditor: PopupEditor,\n        ResourceEditor: ResourceEditor\n    };\n})(window.kendo.jQuery);\n"]}