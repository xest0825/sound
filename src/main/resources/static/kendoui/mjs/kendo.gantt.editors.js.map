{"version":3,"file":"kendo.gantt.editors.js","names":["__meta__","id","name","category","description","depends","hidden","$","undefined$1","kendo","window","ui","browser","support","Observable","Widget","outerWidth","_outerWidth","keys","extend","F10","isPlainObject","NS","CLICK","WIDTH","DOT","DIRECTIONS","down","origin","position","up","TASK_DROPDOWN_TEMPLATE","template","ganttStyles","buttonDelete","buttonCancel","buttonSave","focused","gridContent","hovered","item","popupWrapper","popupList","popup","form","editForm","formContainer","resourcesFormContainer","message","buttonsContainer","button","buttonDefaults","editField","editLabel","resourcesField","primary","toolbar","appendButton","TaskDropDown","init","element","options","fn","call","this","_popup","direction","destroy","clearTimeout","_focusTimeout","off","list","unbind","_adjustListWidth","computedStyle","computedWidth","width","style","wrapper","listOuterWidth","data","getComputedStyle","parseFloat","mozilla","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","css","fontFamily","_current","method","current","find","sibling","length","removeClass","removeAttr","addClass","trigger","that","itemSelector","actions","messages","styles","text","addChild","insertBefore","insertAfter","append","Popup","anchor","open","animation","on","e","action","attr","preventDefault","type","hover","end","close","bind","parents","first","keyCode","UP","DOWN","ENTER","click","ESC","editors","desktop","dateRange","container","field","title","validationRules","model","fields","validation","appendTo","hide","resources","assignButton","readonly","value","get","Editor","createButton","plannedEditors","editor","editable","map","key","start","percentComplete","format","splice","apply","concat","plannedStart","plannedEnd","push","label","_buildEditTemplate","settings","Template","templateSettings","html","unescape","renderForm","PopupEditor","is","editTask","task","_createPopupEditor","showDialog","buttons","popupStyles","i","eq","buttonIndex","currentTarget","index","kendoWindow","modal","autoFocus","resizable","draggable","visible","deactivate","getKendoWindow","center","editableWidget","uid","save","className","cancel","editorTitle","userTriggered","kendoForm","items","formData","buttonsTemplate","validatable","validateOnBlur","kendoEditable","clearContainer","target","cycleForm","stopPropagation","updateInfo","ResourceEditor","_initContainer","_attachHandlers","events","_dettachHandlers","grid","closeHandler","_cancelProxy","_cancel","_saveProxy","_save","row","closest","dataSource","getByUid","set","_createButtons","dom","resourcesEditorTitle","resize","_resourceGrid","Grid","columns","resourcesHeader","unitsHeader","dataItem","valueFormat","toString","height","sortable","filterable","schema","from","unitsValidation","values","parent","prop","_updateModel","gantt","jQuery"],"sources":["kendo.gantt.editors.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.popup.js';\nimport './kendo.window.js';\nimport './kendo.gantt.data.js';\nimport './kendo.grid.js';\nimport './kendo.datetimepicker.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\n\nvar __meta__ = {\n    id: \"gantt.editors\",\n    name: \"GanttEditors\",\n    category: \"web\",\n    description: \"The Gantt component editors.\",\n    depends: [ \"data\", \"popup\", \"window\", \"gantt.data\", \"grid\", \"datetimepicker\", \"numerictextbox\", \"textbox\", \"form\"],\n    hidden: true\n};\n\n(function($, undefined$1) {\n\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        browser = kendo.support.browser,\n        Observable = kendo.Observable,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n\n        keys = $.extend({ F10: 121 }, kendo.keys),\n\n        extend = $.extend,\n        isPlainObject = $.isPlainObject,\n\n        NS = \".kendoGantt\",\n        PERCENTAGE_FORMAT = \"p0\",\n        CLICK = \"click\",\n        WIDTH = \"width\",\n        STRING = \"string\",\n        DOT = \".\",\n\n        DIRECTIONS = {\n            \"down\": {\n                origin: \"bottom left\",\n                position: \"top left\"\n            },\n            \"up\": {\n                origin: \"top left\",\n                position: \"bottom left\"\n            }\n        },\n\n        TASK_DROPDOWN_TEMPLATE = kendo.template('<div class=\"#=styles.popupWrapper#\">' +\n            '<ul class=\"#=styles.popupList#\" role=\"listbox\" aria-label=\"Add dropdown\">' +\n                '#for(var i = 0, l = actions.length; i < l; i++){#' +\n                    '<li tabindex=\"0\" class=\"#=styles.item#\" data-action=\"#=actions[i].data#\" role=\"option\">' +\n                        '<span class=\"k-link k-menu-link\">' +\n                            '<span class=\"k-menu-link-text\">#=actions[i].text#</span>' +\n                        '</span>' +\n                    '</li>' +\n                '#}#' +\n            '</ul>' +\n        '</div>');\n\n    var ganttStyles = {\n        buttonDelete: \"k-gantt-delete\",\n        buttonCancel: \"k-gantt-cancel\",\n        buttonSave: \"k-gantt-update\",\n        focused: \"k-focus\",\n        gridContent: \"k-grid-content\",\n        hovered: \"k-hover\",\n        item: \"k-item k-menu-item\",\n        popupWrapper: \"k-popup k-menu-popup\",\n        popupList: \"k-menu-group k-menu-group-md k-reset\",\n        popup: {\n            form: \"k-popup-edit-form\",\n            editForm: \"k-gantt-edit-form\",\n            formContainer: \"k-edit-form-container\",\n            resourcesFormContainer: \"k-resources-form-container\",\n            message: \"k-popup-message\",\n            buttonsContainer: \"k-edit-buttons\",\n            button: \"k-button\",\n            buttonDefaults: \"k-button-md k-rounded-md k-button-solid k-button-solid-base\",\n            editField: \"k-edit-field\",\n            editLabel: \"k-edit-label\",\n            resourcesField: \"k-gantt-resources\"\n        },\n        primary: \"k-button-solid-primary\",\n        toolbar: {\n            appendButton: \"k-gantt-create\"\n        }\n    };\n\n    var DATERANGEEDITOR = function(container, options) {\n        var attr = { name: options.field, title: options.title };\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules && isPlainObject(validationRules) && validationRules.message) {\n            attr[kendo.attr(\"dateCompare-msg\")] = validationRules.message;\n        }\n\n        $('<input type=\"text\" required ' +\n                'id=\"' + options.field + '\"' +\n                kendo.attr(\"type\") + '=\"date\" ' +\n                kendo.attr(\"role\") + '=\"datetimepicker\" ' +\n                kendo.attr(\"bind\") + '=\"value:' +\n                options.field + '\" ' +\n                kendo.attr(\"validate\") + \"='true' />\")\n            .attr(attr)\n            .appendTo(container);\n\n        $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>')\n            .hide()\n            .appendTo(container);\n    };\n\n    var RESOURCESEDITOR = function(container, options) {\n        $('<div class=\"' + ganttStyles.popup.resourcesField + '\" style=\"display:none\"></div><a href=\"#\" class=\"' + options.styles.button + ' ' + options.styles.buttonDefaults + '\"><span class=\"k-button-text\">' + options.messages.assignButton + '</span></a>').on(\"click\", options.click).appendTo(container);\n    };\n\n    var READONLYEDITOR = function(container, options) {\n        var field = options.field;\n        var value = '';\n\n        if (options.model.get(field) !== null) {\n            value = options.model.get(field);\n        }\n\n        container.append(\"<span>\" + value + \"</span>\");\n    };\n\n    var TaskDropDown = Observable.extend({\n        init: function(element, options) {\n\n            Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n\n            this._popup();\n        },\n\n        options: {\n            direction: \"down\"\n        },\n\n        destroy: function() {\n            clearTimeout(this._focusTimeout);\n            this.popup.destroy();\n            this.element.off(NS);\n            this.list.off(NS);\n            this.unbind();\n        },\n\n        _adjustListWidth: function() {\n            var list = this.list;\n            var width = list[0].style.width;\n            var wrapper = this.element;\n            var listOuterWidth = outerWidth(list);\n            var computedStyle;\n            var computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = computedStyle ? parseFloat(computedStyle.width) : outerWidth(wrapper);\n\n            if (computedStyle && (browser.mozilla || browser.msie)) { // getComputedStyle returns different box in FF and IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            if (listOuterWidth > width) {\n                width = listOuterWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: width\n            })\n            .data(WIDTH, width);\n        },\n\n        _current: function(method) {\n            var current = this.list\n                .find(DOT + ganttStyles.focused);\n            var sibling = current[method]();\n\n            if (sibling.length) {\n                current\n                    .removeClass(ganttStyles.focused)\n                    .removeAttr(\"id\");\n                sibling\n                    .addClass(ganttStyles.focused)\n                    .trigger(\"focus\");\n            }\n        },\n\n        _popup: function() {\n            var that = this;\n            var itemSelector = \"li\" + DOT + \"k-item\";\n            var actions = this.options.messages.actions;\n\n            this.list = $(TASK_DROPDOWN_TEMPLATE({\n                styles: ganttStyles,\n                actions: [\n                    {\n                        data: \"add\",\n                        text: actions.addChild\n                    },\n                    {\n                        data: \"insert-before\",\n                        text: actions.insertBefore\n                    },\n                    {\n                        data: \"insert-after\",\n                        text: actions.insertAfter\n                    }\n                ]\n            }));\n\n            this.element.append(this.list);\n\n            this.popup = new kendo.ui.Popup(this.list,\n                extend({\n                    anchor: this.element,\n                    open: function() {\n                        that._adjustListWidth();\n                    },\n                    animation: this.options.animation\n                }, DIRECTIONS[this.options.direction])\n            );\n\n            this.element\n                .on(CLICK + NS, function(e) {\n                    var target = $(this);\n                    var action = target.attr(kendo.attr(\"action\"));\n\n                    e.preventDefault();\n\n                    if (action) {\n                        that.trigger(\"command\", { type: action });\n                    } else {\n                        that.popup.open();\n\n                        that.list\n                            .find(\"li:first\")\n                            .addClass(ganttStyles.focused)\n                            .trigger(\"focus\");\n                    }\n                });\n\n            this.list\n                .find(itemSelector)\n                .hover(function() {\n                    $(this).addClass(ganttStyles.hovered);\n                }, function() {\n                    $(this).removeClass(ganttStyles.hovered);\n                })\n                .end()\n                .on(CLICK + NS, itemSelector, function() {\n                    that.trigger(\"command\", { type: $(this).attr(kendo.attr(\"action\")) });\n                    that.popup.close();\n                });\n\n            this.popup\n                .bind(\"close\", function() {\n                    that.list\n                        .find(itemSelector)\n                        .removeClass(ganttStyles.focused);\n\n                    that.element\n                        .parents('[' + kendo.attr(\"role\") + '=\"gantt\"]')\n                        .find(DOT + ganttStyles.gridContent + \" > table\").first()\n                        .trigger(\"focus\");\n                });\n\n            this.list\n                .find(\"ul\")\n                .on(\"keydown\" + NS, function(e) {\n                    var key = e.keyCode;\n\n                    switch (key) {\n                        case keys.UP:\n                            e.preventDefault();\n                            that._current(\"prev\");\n                            break;\n                        case keys.DOWN:\n                            e.preventDefault();\n                            that._current(\"next\");\n                            break;\n                        case keys.ENTER:\n                            that.list\n                                .find(DOT + ganttStyles.focused)\n                                .click();\n                            break;\n                        case keys.ESC:\n                            e.preventDefault();\n                            that.popup.close();\n                            break;\n                    }\n                });\n        }\n    });\n\n    var editors = {\n        desktop: {\n            dateRange: DATERANGEEDITOR,\n            resources: RESOURCESEDITOR,\n            readonly: READONLYEDITOR\n        }\n    };\n\n    var Editor = kendo.Observable.extend({\n        init: function(element, options) {\n            kendo.Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n            this.createButton = this.options.createButton;\n        },\n\n        fields: function(editors, model, plannedEditors) {\n            var that = this;\n            var options = this.options;\n            var messages = options.messages.editor;\n            var resources = options.resources;\n            var fields;\n\n            var click = function(e) {\n                e.preventDefault();\n                resources.editor(that.container.find(DOT + ganttStyles.popup.resourcesField), model);\n            };\n\n            if (options.editable.template) {\n                fields = $.map(model.fields, function(value, key) {\n                            return { field: key };\n                        });\n            } else {\n                fields = [\n                    { field: \"title\", title: messages.title },\n                    { field: \"start\", title: messages.start, editor: editors.dateRange },\n                    { field: \"end\", title: messages.end, editor: editors.dateRange },\n                    { field: \"percentComplete\", title: messages.percentComplete, format: PERCENTAGE_FORMAT }\n                ];\n\n                if (plannedEditors) {\n                    fields.splice.apply(fields, [1, 0].concat([\n                        { field: \"plannedStart\", title: messages.plannedStart, editor: editors.dateRange },\n                        { field: \"plannedEnd\", title: messages.plannedEnd, editor: editors.dateRange }\n                    ]));\n                }\n\n                if (model.get(resources.field)) {\n                    fields.push({ field: resources.field, title: messages.resources, messages: messages, editor: editors.resources, click: click, styles: ganttStyles.popup });\n                }\n\n\n                fields = fields.map(function(item) {\n                    if (!model.editable || model.editable(item.field)) {\n                        return item;\n                    } else {\n                        return extend(true, item, {\n                            editor: editors.readonly\n                        });\n                    }\n                });\n\n            }\n\n            return fields.map(function(item) {\n                return extend(true, item, {\n                    label: item.title\n                });\n            });\n        },\n\n        _buildEditTemplate: function(model) {\n            var template = this.options.editable.template;\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var html = \"\";\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n            } else {\n                this.renderForm = true;\n                html += '<div class=\"k-gantt-form\"></div>';\n            }\n\n            return html;\n        }\n    });\n\n    var PopupEditor = Editor.extend({\n        destroy: function() {\n            this.close();\n            this.unbind();\n        },\n\n        close: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n                    that.container.data(\"kendoWindow\").destroy();\n                    that.editable = null;\n                    that.container = null;\n                }\n\n                if (that.popup) {\n                    that.popup.destroy();\n                    that.popup = null;\n                }\n            };\n\n            if (that.editable && that.container.is(\":visible\")) {\n                that.trigger(\"close\", { window: that.container });\n                that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n            } else {\n                destroy();\n            }\n        },\n\n        editTask: function(task, plannedEditors) {\n            this.editable = this._createPopupEditor(task, plannedEditors);\n        },\n\n        showDialog: function(options) {\n            var buttons = options.buttons;\n            var popupStyles = ganttStyles.popup;\n\n            var html = kendo.format('<div class=\"{0}\"><div class=\"{1}\"><p class=\"{2}\">{3}</p><div class=\"{4}\">',\n                popupStyles.form, popupStyles.formContainer, popupStyles.message, options.text, popupStyles.buttonsContainer);\n\n            for (var i = 0, length = buttons.length; i < length; i++) {\n                html += this.createButton(buttons[i]);\n            }\n\n            html += '</div></div></div>';\n\n            var wrapper = this.element;\n\n            if (this.popup) {\n                this.popup.destroy();\n            }\n\n            var popup = this.popup = $(html).appendTo(wrapper)\n                .eq(0)\n                .on(\"click\", DOT + popupStyles.button, function(e) {\n                    e.preventDefault();\n\n                    popup.close();\n\n                    var buttonIndex = $(e.currentTarget).index();\n\n                    buttons[buttonIndex].click();\n                })\n                .kendoWindow({\n                    modal: true,\n                    autoFocus: false,\n                    resizable: false,\n                    draggable: false,\n                    title: options.title,\n                    visible: false,\n                    deactivate: function() {\n                        this.destroy();\n                        wrapper.trigger(\"focus\");\n                    }\n                })\n                .getKendoWindow();\n\n            popup.center().open();\n\n            popup.element.find(\".k-button-solid-primary\").trigger(\"focus\");\n        },\n\n        _createPopupEditor: function(task, plannedEditors) {\n            var that = this;\n            var options = {};\n            var messages = this.options.messages;\n            var popupStyles = ganttStyles.popup;\n            var editableWidget;\n\n            var html = kendo.format('<div {0}=\"{1}\" class=\"{2} {3}\"><div class=\"{4}\">',\n                kendo.attr(\"uid\"), task.uid, popupStyles.form, popupStyles.editForm, popupStyles.formContainer);\n\n            var fields = this.fields(editors.desktop, task, plannedEditors);\n\n            html += this._buildEditTemplate(task);\n\n            html += '<div class=\"' + popupStyles.buttonsContainer + '\">';\n            html += this.createButton({ name: \"update\", text: messages.save, className: ganttStyles.primary });\n            html += this.createButton({ name: \"cancel\", text: messages.cancel });\n            if (that.options.editable.destroy !== false) {\n                html += this.createButton({ name: \"delete\", text: messages.destroy });\n            }\n\n            html += '</div></div></div>';\n\n            var container = this.container = $(html).appendTo(this.element)\n                .eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(\"cancel\", { container: container, model: task })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n\n            if (this.renderForm) {\n                this.form = container.find(\".k-gantt-form\").kendoForm({\n                    items: fields,\n                    formData: task,\n                    buttonsTemplate: \"\",\n                    validatable: {\n                        validateOnBlur: true\n                    }\n                }).data(\"kendoForm\");\n\n                editableWidget = this.form.editable;\n            } else {\n                editableWidget = container\n                .kendoEditable({\n                    model: task,\n                    clearContainer: false,\n                    validateOnBlur: true,\n                    target: that.options.target\n                })\n                .data(\"kendoEditable\");\n            }\n\n            kendo.cycleForm(container);\n\n            if (!this.trigger(\"edit\", { container: container, model: task })) {\n                container.data(\"kendoWindow\").center().open();\n\n                container.on(CLICK + NS, DOT + ganttStyles.buttonCancel, function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(\"cancel\", { container: container, model: task });\n                });\n\n                container.on(CLICK + NS, DOT + ganttStyles.buttonSave, function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    var fields = that.fields(editors.desktop, task, plannedEditors);\n                    var updateInfo = {};\n                    var field;\n\n                    for (var i = 0, length = fields.length; i < length; i++) {\n                        field = fields[i].field;\n                        updateInfo[field] = task.get(field);\n                    }\n\n                    that.trigger(\"save\", { container: container, model: task, updateInfo: updateInfo });\n                });\n\n                container.on(CLICK + NS, DOT + ganttStyles.buttonDelete, function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(\"remove\", { container: container, model: task });\n                });\n            } else {\n                that.trigger(\"cancel\", { container: container, model: task });\n            }\n\n            return editableWidget;\n        }\n    });\n\n    var ResourceEditor = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.wrapper = this.element;\n            this.model = this.options.model;\n            this.resourcesField = this.options.resourcesField;\n            this.createButton = this.options.createButton;\n\n            this._initContainer();\n            this._attachHandlers();\n        },\n\n        events: [\n            \"save\"\n        ],\n\n        close: function() {\n            this.window.bind(\"deactivate\", this.destroy.bind(this)).close();\n        },\n\n        destroy: function() {\n            this._dettachHandlers();\n\n            this.grid.destroy();\n            this.grid = null;\n\n            this.window.destroy();\n            this.window = null;\n\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n\n            this.element = this.wrapper = null;\n        },\n\n        open: function() {\n            this.window.center().open();\n        },\n\n        _attachHandlers: function() {\n            var grid = this.grid;\n\n            var closeHandler = this._cancelProxy = this._cancel.bind(this);\n            this.container.on(CLICK + NS, DOT + ganttStyles.buttonCancel, this._cancelProxy);\n\n            this._saveProxy = this._save.bind(this);\n            this.container.on(CLICK + NS, DOT + ganttStyles.buttonSave, this._saveProxy);\n\n            this.window.bind(\"close\", function(e) {\n                if (e.userTriggered) {\n                    closeHandler(e);\n                }\n            });\n\n            grid.wrapper.on(CLICK + NS, \"input[type='checkbox']\", function() {\n                var element = $(this);\n                var row = $(element).closest(\"tr\");\n                var model = grid.dataSource.getByUid(row.attr(kendo.attr(\"uid\")));\n                var value = $(element).is(\":checked\") ? 1 : \"\";\n\n                model.set(\"value\", value);\n            });\n        },\n\n        _cancel: function(e) {\n            e.preventDefault();\n            this.close();\n        },\n\n        _createButtons: function() {\n            var buttons = this.options.buttons;\n            var html = '<div class=\"' + ganttStyles.popup.buttonsContainer + '\">';\n\n            for (var i = 0, length = buttons.length; i < length; i++) {\n                html += this.createButton(buttons[i]);\n            }\n\n            html += \"</div>\";\n\n            this.container.append(html);\n        },\n\n        _dettachHandlers: function() {\n            this._cancelProxy = null;\n            this._saveProxy = null;\n            this.container.off(NS);\n            this.grid.wrapper.off();\n        },\n\n        _initContainer: function() {\n            var that = this;\n            var popupStyles = ganttStyles.popup;\n            var dom = kendo.format('<div class=\"{0} {1}\"><div class=\"{2} {3}\"></div></div>\"',\n                popupStyles.form, popupStyles.editForm, popupStyles.formContainer, popupStyles.resourcesFormContainer);\n\n            dom = $(dom);\n\n            this.container = dom.find(DOT + popupStyles.resourcesFormContainer);\n\n            this.window = dom.kendoWindow({\n                modal: true,\n                resizable: false,\n                draggable: true,\n                visible: false,\n                title: this.options.messages.resourcesEditorTitle,\n                open: function() {\n                      that.grid.resize(true);\n                }\n            }).data(\"kendoWindow\");\n\n            this._resourceGrid();\n            this._createButtons();\n        },\n\n        _resourceGrid: function() {\n            var that = this;\n            var messages = this.options.messages;\n            var element = $('<div id=\"resources-grid\"/>').appendTo(this.container);\n\n            this.grid = new kendo.ui.Grid(element, {\n                columns: [\n                    {\n                        field: \"name\",\n                        title: messages.resourcesHeader,\n                        template:\n                            \"<label><input type='checkbox' value='#=name#'\" +\n                                \"# if (value > 0 && value !== null) {#\" +\n                                       \"checked='checked'\" +\n                                \"# } #\" +\n                            \"/>#=name#</labe>\"\n                    },\n                    {\n                        field: \"value\",\n                        title: messages.unitsHeader,\n                        template: function(dataItem) {\n                            var valueFormat = dataItem.format;\n                            var value = dataItem.value !== null ? dataItem.value : \"\";\n\n                            return valueFormat ? kendo.toString(value, valueFormat) : value;\n                        }\n                    }\n                ],\n                height: 280,\n                sortable: true,\n                editable: true,\n                filterable: true,\n                dataSource: {\n                    data: that.options.data,\n                    schema: {\n                        model: {\n                            id: \"id\",\n                            fields: {\n                                id: { from: \"id\" },\n                                name: { from: \"name\", type: \"string\", editable: false },\n                                value: { from: \"value\", type: \"number\", validation: this.options.unitsValidation },\n                                format: { from: \"format\", type: \"string\" }\n                            }\n                        }\n                    }\n                },\n                save: function(e) {\n                    var value = !!e.values.value;\n                    e.container.parent().find(\"input[type='checkbox']\").prop(\"checked\", value);\n                }\n            });\n        },\n\n        _save: function(e) {\n            e.preventDefault();\n\n            this._updateModel();\n\n            if (!this.wrapper.is(DOT + ganttStyles.popup.resourcesField)) {\n                this.trigger(\"save\", { container: this.wrapper, model: this.model });\n            }\n\n            this.close();\n        },\n\n        _updateModel: function() {\n            var resources = [];\n            var value;\n            var data = this.grid.dataSource.data();\n\n            for (var i = 0, length = data.length; i < length; i++) {\n                value = data[i].get(\"value\");\n                if (value !== null && value > 0) {\n                    resources.push(data[i]);\n                }\n            }\n\n            this.model[this.resourcesField] = resources;\n        }\n    });\n\n    kendo.gantt = {\n        TaskDropDown: TaskDropDown,\n        Editor: Editor,\n        PopupEditor: PopupEditor,\n        ResourceEditor: ResourceEditor\n    };\n})(window.kendo.jQuery);\n"]}