{"version":3,"file":"kendo.timeselector.js","names":["__meta__","id","name","category","description","depends","$","undefined$1","kendo","window","ui","encode","htmlEncode","Widget","html","extend","FOCUSED","keys","NS","listItemTemplate","value","TimeSelector","init","element","options","that","this","fn","call","_wrappers","_buttons","_attchHandlers","_shortCuts","_columns","_popup","columns","shortcuts","size","fillMode","rounded","messages","set","cancel","days","hours","minutes","milliseconds","seconds","events","addTranslate","list","itemHeight","listHeight","translate","bottomOffset","lists","_listsContainer","find","length","i","getItemHeight","eq","outerHeight","css","transform","height","off","on","_itemClickHandler","bind","_listScrollHandler","applyValue","values","rest","Math","floor","getTimeParts","each","index","column","columnVal","min","max","_scrollListToPosition","format","selectorFormat","toggle","popup","destroy","_listContainer","_timeSelectorWrapper","_scrollerKeyDownHandler","_applyShortCut","_cancelClickHandler","_setClickHandler","_mouseOverHandler","e","preventDefault","_value","parseInt","currentTarget","attr","change","close","focus","key","keyCode","isRtl","support","wrapper","container","UP","DOWN","altKey","RIGHT","LEFT","_focusList","scrollTop","ENTER","ESC","setTimeout","visible","removeClass","addClass","trigger","_scrollTop","_activeElement","_currentValues","originalEvent","_internalScroll","_scrollingTimeout","clearTimeout","_updateCurrentlySelected","_findSelectedValue","firstOccurence","round","is","item","_renderList","title","listTemplate","elements","step","appendTo","shortcut","_shortcuts","renderButton","text","Popup","anchor","open","activate","getBoundingClientRect","plugin","jQuery"],"sources":["kendo.timeselector.js"],"mappings":"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","sourcesContent":["import './kendo.popup.js';\nimport './kendo.html.button.js';\n\nvar __meta__ = {\n    id: \"timeselector\",\n    name: \"TimeSelector\",\n    category: \"web\",\n    description: \"The TimeSelector widget allows the end user to select a time range from a popup\",\n    depends: [ \"popup\", \"html.button\" ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        encode = kendo.htmlEncode,\n        Widget = ui.Widget,\n        html = kendo.html,\n        extend = $.extend,\n        CHANGE = \"change\",\n        CLICK = \"click\",\n        SCROLL = \"scroll\",\n        FOCUSED = \"k-focus\",\n        keys = kendo.keys,\n        NS = \".kendoTimeSelector\",\n        html = kendo.html;\n\n    var listItemTemplate = ({ value }) => `<li class='k-item' data-value='${encode(value)}'><span>${encode(value)}</span></li>`;\n    var listTemplate = ({ title, name }) => '<div class=\"k-time-list-wrapper\">' +\n                                          `<span class=\"k-title\">${encode(title)}</span>` +\n                                          '<div class=\"k-time-list\">' +\n                                              `<div class=\"k-content k-scrollable k-time-container\" data-name=\"${encode(name)}\">` +\n                                                  '<ul class=\"k-reset\"></ul>' +\n                                                  '<div class=\"k-scrollable-placeholder\"></div>' +\n                                              '</div>' +\n                                          '</div>' +\n                                       '</div>';\n\n    var TimeSelector = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            that._wrappers();\n            that._buttons();\n            that._attchHandlers();\n            that._shortCuts();\n            that._columns();\n            that._popup();\n        },\n        options: {\n            name: \"TimeSelector\",\n            columns: [],\n            shortcuts: [],\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\",\n            messages: {\n                set: \"Set\",\n                cancel: \"Cancel\",\n                days: \"Days\",\n                hours: \"Hours\",\n                minutes: \"Minutes\",\n                milliseconds: \"Milliseconds\",\n                seconds: \"Seconds\"\n            }\n        },\n\n        events: [CHANGE],\n\n        addTranslate: function() {\n            var lists = this._listsContainer.find(\".k-time-container.k-content.k-scrollable\");\n            var length = lists.length;\n            var list;\n            var itemHeight;\n            var listHeight;\n            var topOffset;\n            var translate;\n            var bottomOffset;\n\n            for (var i = 0; i < length; i++) {\n                list = lists.eq(i);\n                itemHeight = getItemHeight(list.find(\".k-item:visible\").eq(0));\n                listHeight = list.outerHeight();\n                topOffset = (listHeight - itemHeight) / 2;\n                translate = \"translateY(\" + topOffset + \"px)\";\n                bottomOffset = listHeight - itemHeight;\n                list.find(\"ul\").css({\n                    transform: translate,\n                    \"-ms-transform\": translate\n                });\n                list.find(\".k-scrollable-placeholder\").css({\n                    height: list.find(\"ul\").height() + bottomOffset\n                });\n                list.off(NS)\n                    .on(CLICK + NS, \".k-item\", this._itemClickHandler.bind(this))\n                    .on(SCROLL + NS, this._listScrollHandler.bind(this));\n            }\n        },\n\n        applyValue: function(value) {\n            if (!value) {\n                return;\n            }\n            var that = this;\n            var lists = this._listsContainer.find('.k-time-container.k-content.k-scrollable');\n            var values = getTimeParts(value);\n\n            lists.each(function(index, list) {\n                var column = that.options.columns[index];\n                var columnVal = values[column.name];\n\n                if (columnVal >= column.min && columnVal <= column.max) {\n                    that._scrollListToPosition($(list), kendo.format(column.selectorFormat, columnVal));\n                }\n            });\n        },\n\n        toggle: function() {\n            this.popup.toggle();\n        },\n\n        destroy: function() {\n            this._listContainer.off(NS);\n            this._timeSelectorWrapper.off(NS);\n\n            if (this.popup) {\n                this.popup.destroy();\n                this.popup = null;\n            }\n        },\n\n        _attchHandlers: function() {\n            var that = this;\n\n            that._listContainer.on(\"keydown\" + NS, this._scrollerKeyDownHandler.bind(this));\n            that._timeSelectorWrapper.on(\"click\" + NS, \".k-time-fast-selection button\", this._applyShortCut.bind(this));\n            that._timeSelectorWrapper.on(\"click\" + NS, \".k-timeduration-footer button.k-time-cancel\", this._cancelClickHandler.bind(this));\n            that._timeSelectorWrapper.on(\"click\" + NS, \".k-timeduration-footer button.k-time-accept\", this._setClickHandler.bind(this));\n            that._listContainer.on(\"mouseover\" + NS, \".k-time-list-wrapper\", this._mouseOverHandler.bind(this));\n        },\n\n        _applyShortCut: function(e) {\n            e.preventDefault();\n            this._value = parseInt($(e.currentTarget).attr(kendo.attr(\"value\")));\n            this.options.change(this._value);\n            this.popup.close();\n            this.options.focus();\n        },\n\n        _scrollerKeyDownHandler: function(e) {\n            var that = this,\n                key = e.keyCode,\n                list = $(e.currentTarget).find(\".k-time-list-wrapper.k-focus\"),\n                lists = that._listContainer.find(\".k-time-list-wrapper\"),\n                length = lists.length,\n                index = lists.index(list),\n                isRtl = kendo.support.isRtl(that.wrapper),\n                itemHeight = getItemHeight(list.find(\".k-item:visible\").eq(0)),\n                container = list.find(\".k-time-container.k-content.k-scrollable\");\n\n            if (!list.length) {\n                return;\n            }\n\n            if ((key == keys.UP || key == keys.DOWN) && e.altKey) {\n                e.preventDefault();\n                that.toggle();\n                setTimeout(function() {\n                    if (!that.popup.visible()) {\n                        that.options.focus();\n                    }\n                }, 100);\n                return;\n            }\n\n            if (key == keys.RIGHT && !isRtl || key == keys.LEFT && isRtl) {\n                if (index + 1 < length) {\n                    that._focusList(lists.eq(index + 1));\n                }\n\n            } else if (key == keys.LEFT && !isRtl || key == keys.RIGHT && isRtl) {\n                if (index - 1 >= 0) {\n                    that._focusList(lists.eq(index - 1));\n                }\n            } else if (key == keys.UP) {\n                container.scrollTop(container.scrollTop() - itemHeight);\n                e.preventDefault();\n            } else if (key == keys.DOWN) {\n                container.scrollTop(container.scrollTop() + itemHeight);\n                e.preventDefault();\n            } else if (key === keys.ENTER) {\n                that._setClickHandler(e);\n            } else if (key === keys.ESC) {\n                that._cancelClickHandler(e);\n            }\n        },\n\n        _mouseOverHandler: function(e) {\n            this._focusList($(e.currentTarget));\n        },\n\n        _focusList: function(list) {\n            this._listContainer.find(\".k-time-list-wrapper\").removeClass(FOCUSED);\n            list.addClass(FOCUSED);\n            this._listContainer.trigger(\"focus\");\n            this._scrollTop = list.find('.k-scrollable').scrollTop();\n        },\n\n        _setClickHandler: function(e) {\n            if ($(kendo._activeElement()).attr(kendo.attr(\"value\"))) {\n                return;\n            }\n\n            e.preventDefault();\n            this._value = convertToMsec(this._currentValues);\n            this.options.change(this._value);\n            this.popup.close();\n            this.options.focus();\n        },\n\n        _cancelClickHandler: function(e) {\n            if ($(kendo._activeElement()).attr(kendo.attr(\"value\"))) {\n                return;\n            }\n            e.preventDefault();\n            this.popup.close();\n            this.options.focus();\n        },\n\n        _itemClickHandler: function(e) {\n            var list = $(e.originalEvent.currentTarget);\n            var index = list.find(\".k-item:visible\").index($(e.currentTarget));\n            var itemHeight = getItemHeight(list.find(\".k-item:visible\").eq(0));\n\n            list.scrollTop(index * itemHeight);\n        },\n\n        _listScrollHandler: function(e) {\n            var that = this;\n            var itemHeight = getItemHeight($(e.currentTarget).find(\".k-item:visible\").eq(0));\n\n            if (that._internalScroll) {\n                return;\n            }\n\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            that._scrollingTimeout = setTimeout(function() {\n                if (e.currentTarget.scrollTop % itemHeight > 1) {\n                    e.currentTarget.scrollTop += itemHeight - e.currentTarget.scrollTop % itemHeight;\n                }\n                that._scrollTop = e.currentTarget.scrollTop;\n                that._updateCurrentlySelected();\n            }, 100);\n        },\n\n        _findSelectedValue: function(list) {\n            var firstOccurence = firstItemIndex(list.scrollTop(), getItemHeight(list.find(\".k-item:visible\").eq(0)));\n            return list.find(\".k-item:visible\").eq(firstOccurence).attr(\"data-value\");\n         },\n\n        _updateCurrentlySelected: function() {\n            var that = this;\n            var lists = this._listsContainer.find('.k-content.k-scrollable');\n\n            if (!this._listsContainer.is(\":visible\")) {\n                return;\n            }\n\n            that._currentValues = {};\n\n            lists.each(function() {\n                var list = $(this);\n                that._currentValues[list.attr(\"data-name\")] = parseInt(that._findSelectedValue(list));\n            });\n        },\n\n        _scrollListToPosition: function(list, value) {\n            var item = list.find('.k-item[data-value=\"' + value + '\"]');\n            var itemHeight = getItemHeight(item);\n\n            list.scrollTop(list.find(\".k-item:visible\").index(item) * itemHeight);\n        },\n\n        _renderList: function(wrapper, options) {\n            if (!options) {\n                return;\n            }\n            var that = this;\n            var list = $(listTemplate({ name: options.name, title: that.options.messages[options.name] }));\n            var elements = \"\";\n\n            for (var i = options.min; i <= options.max; i += options.step) {\n                elements += listItemTemplate({ value: kendo.format(options.selectorFormat, i) });\n            }\n            list.find(\"ul\").html(elements);\n            list.appendTo(wrapper);\n        },\n\n        _columns: function() {\n            var that = this;\n            var column;\n            var options = that.options;\n\n            if (that._listsContainer) {\n                for (var i = 0; i < options.columns.length; i++) {\n                    column = options.columns[i];\n                    that._renderList(that._listsContainer, column);\n                }\n            }\n        },\n\n        _shortCuts: function() {\n            var that = this;\n            var options = that.options;\n            var shortcut;\n\n            if (that._shortcuts) {\n                for (var i = 0; i < options.shortcuts.length; i++) {\n                    shortcut = options.shortcuts[i];\n\n                    $(html.renderButton('<button class=\"k-button k-button-md k-button-solid k-button-solid-base k-rounded-md\">' + shortcut.text + '</button>', {\n                        rounded: options.rounded\n                    }))\n                    .attr(kendo.attr(\"value\"), shortcut.value)\n                    .appendTo(that._shortcuts);\n                }\n            }\n        },\n\n        _buttons: function() {\n            var that = this;\n            var options = that.options;\n\n            $(\"<div class='k-actions k-actions-stretched k-actions-horizontal k-timeduration-footer'>\"\n                +\n                html.renderButton('<button class=\"k-time-cancel k-button k-button-md\">' + options.messages.cancel + '</button>', {\n                 rounded: options.rounded\n                })\n                +\n                html.renderButton('<button class=\"k-time-accept k-button k-button-md k-button-solid k-button-solid-primary\">' + options.messages.set + '</button>', {\n                 rounded: options.rounded\n                })\n                +\n            \"</div>\").appendTo(that._timeSelectorWrapper);\n        },\n\n        _wrappers: function() {\n            var that = this;\n            var options = that.options;\n\n            that._timeSelectorWrapper = $(\"<div></div>\");\n\n            that._listContainer = $(\"<div tabindex='0' class='k-timeselector k-timeselector-md'></div>\");\n            that._listContainer.appendTo(that._timeSelectorWrapper);\n\n            if (options.shortcuts) {\n                that._shortcuts = $(\"<div class='k-actions k-actions-start k-actions-horizontal k-time-fast-selection'></div>\").appendTo(that._listContainer);\n            }\n\n            if (options.columns.length) {\n                that._listsContainer = $(\"<div class='k-time-list-container'><span class='k-time-highlight'></span></div>\").appendTo(that._listContainer);\n                that._listsContainer.attr(\"id\", options.id);\n            }\n        },\n\n        _popup: function() {\n            var that = this,\n                options = that.options;\n\n            that.popup = new ui.Popup(that._timeSelectorWrapper, extend(true, {}, options.popup, {\n                anchor: options.anchor,\n                open: options.open,\n                close: options.close,\n                isRtl: kendo.support.isRtl(options.anchor),\n                activate: function() {\n                    that.addTranslate();\n                    if (that._value) {\n                        that.applyValue(that._value);\n                    } else {\n                        that._updateCurrentlySelected();\n                    }\n                    that._focusList(that._listContainer.find(\".k-time-list-wrapper\").eq(0));\n                }\n            }));\n        }\n    });\n\n    function convertToMsec(value) {\n        return ((value.days || 0) * 86400000) + ((value.hours || 0) * 3600000) + ((value.minutes || 0) * 60000) + ((value.seconds || 0) * 1000) + (value.milliseconds || 0);\n    }\n\n    function getTimeParts(value) {\n        var rest;\n        var days = Math.floor(value / 86400000);\n        rest = value % 86400000;\n        var hours = Math.floor(rest / 3600000);\n        rest = value % 3600000;\n        var minutes = Math.floor(rest / 60000);\n        rest = value % 60000;\n        var seconds = Math.floor(rest / 1000);\n        rest = value % 1000;\n\n        return {\n            days: days,\n            hours: hours,\n            minutes: minutes,\n            seconds: seconds,\n            milliseconds: rest\n        };\n    }\n\n    function firstItemIndex(scrollTop, itemHeight) {\n        return Math.max(Math.round(scrollTop / itemHeight), 0);\n    }\n\n    function getItemHeight(item) {\n        return item.length && item[0].getBoundingClientRect().height;\n    }\n\n    ui.plugin(TimeSelector);\n\n})(window.kendo.jQuery);\n"]}