{"version":3,"file":"kendo.editor.js","names":["kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","$","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","iconTextButtonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","replace","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","bind","_wrapTextarea","wrapper","find","id","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","style","height","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","defaultValue","trim","deserializedRoot","Serializer","htmlToDom","deserialization","getAllComments","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizable","isPlainObject","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","last","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","ios","getKendoResizable","draggable","ignore","_initializeElementResizing","ElementResizingFactory","current","create","_showElementResizeHandlesProxy","_showElementResizeHandles","_destroyElementResizing","elementResizing","destroy","unbind","parentNode","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","width","h","editorWrap","editArea","css","appendTo","_createContentElement","stylesheets","iframe","wnd","doc","lang","specifiedDomain","domain","domainScript","src","hide","title","messages","editAreaTitle","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","edge","chrome","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","NS","_handlers","t","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","parentElement","target","nodeName","_cachedHeight","restoreHeight","range","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","left","container","offset","next","nextChar","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","createRange","selectNode","focusin","hasAttribute","focusout","active","toolbarContainerElement","get","contains","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","is","tagName","toolsFromShortcut","o","changesContent","refresh","_destroyResizings","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","emptyFolder","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","units","cellSpacing","cellPadding","cellMargin","alignment","background","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","custom","serialization","entities","semantic","scripts","optimizeTags","keepEOL","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","domToXhtml","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","Error","toolById","async","change","managesUndoRedo","plugin","Tool","initialize","unselectable","commandArguments","noop","UndoTool","nodes","key","ctrl","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","items","len","obj","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","parent","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","el","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","filter","invert","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tag","tagMap","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","hasClass","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","fillMode","rounded","selectBox","view","dataSource","select","decorate","registerPrefix","registerValues","values","roundedValues","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","editableTextNodes","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","immutablesContext","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","toolsToBeUpdated","serialized","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","GenericCommand","endRestorePoint","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","basic","links","lists","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","advanced","fonts","colors","formatPainter","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","isResizable","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","_toolName","description","tooltip","inheritText","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","toolElement","groupName","newGroupName","group","toolConfig","groupPosition","endGroup","startGroup","not","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","editorTools","focusableItems","focusElement","currentContainer","move","constrain","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","uiElement","trackImmutables","display","uiData","groupUi","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","groupWidth","ViewHtmlCommand","cmd","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","widget","newRange","ColorTool","palette","_widget","ColorPicker","closeOnSelect","views","preview","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","_initialText","img","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","autoWidth","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","isIE","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","InsertHtmlTool","_selectBox","selectbox","initialValue","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","displayName","unshift","valueTemplate","_exec","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","popupTemplate","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","twTool","InsertTableTool","cols","cellWidth","cellHeight","firstCell","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_setTableSize","_valid","status","initiallyVisible","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","after","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","applicable","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","global","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","WIDTH","HEIGHT","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","tableProperties","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","_getAlignment","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","tableData","closeHandler","collectDialogValues","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","headerColumnsNumeric","currentNumberOfColumnsHeaders","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initBorderStyleDropDown","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","valuePrimitive","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","optionLabel","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents","__meta__","category","depends","features"],"sources":["kendo.editor.js"],"mappings":"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","sourcesContent":["import './kendo.combobox.js';\nimport './kendo.dropdownlist.js';\nimport './kendo.resizable.js';\nimport './kendo.window.js';\nimport './kendo.colorpicker.js';\nimport './kendo.imagebrowser.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.core.js';\nimport './kendo.filebrowser.js';\nimport './kendo.draganddrop.js';\nimport './kendo.tabstrip.js';\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n\n(function($,undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys;\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS = \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    // options can be: template (as string), cssClass, title, defaultValue\n    var ToolTemplate = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        getHtml: function() {\n            var options = this.options;\n            return kendo.template(options.template, { useWithBlock: false })(options);\n        }\n    });\n\n    var EditorUtils = {\n        editorWrapperTemplate:\n            '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' +\n                '<tbody>' +\n                    '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' +\n                    '<tr><td class=\"k-editable-area k-editor-content\"></td></tr>' +\n                '</tbody>' +\n            '</table>',\n\n        buttonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-tool\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"#= iconCssClass #\"></span>' +\n                '<span class=\"k-tool-text k-button-text\">#= data.title #</span>' +\n            '</button>',\n\n        iconTextButtonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-i-import k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"k-button-icon #= iconCssClass #\"></span>' +\n                '<span class=\"k-button-text\">#= data.title #</span>' +\n            '</button>',\n\n        tableWizardButtonTemplate:\n            '# var iconCssClass = \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' +\n            '# var dataPopup = data.popup ? \"data-popup\" : \"\";#' +\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-tool k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" #= dataPopup # title=\"#= data.title #\" aria-label=\"#= data.title #\">' +\n                '<span class=\"#= iconCssClass #\"></span>' +\n                '<span class=\"k-tool-text\">#= data.title #</span>' +\n            '</button>',\n\n        colorPickerTemplate:\n            '<input class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n\n        comboBoxTemplate:\n            '<select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select>',\n\n        dropDownListTemplate:\n            '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" aria-label=\"#= data.title #\" class=\"#= data.cssClass #\"></select></span>',\n\n        separatorTemplate:\n            '<span class=\"k-separator\"></span>',\n\n        overflowAnchorTemplate:\n            '<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-tool k-overflow-anchor\" data-popup' +\n                ' title=\"#= data.title #\" aria-label=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' +\n                '<span class=\"k-icon k-i-more-vertical k-button-icon\"></span>' +\n            '</button>',\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function(name) {\n            var toolCssClassNames = {\n\n                superscript: \"sup-script\",\n                subscript: \"sub-script\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent-increase\",\n                outdent: \"indent-decrease\",\n                createLink: \"link-horizontal\",\n                unlink: \"unlink-horizontal\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"html\",\n                foreColor: \"foreground-color\",\n                backColor: \"paint\",\n                createTable: \"table-insert\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableWizard: \"table-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-left\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-right\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n            if (cssClass) {\n                return cssClass;\n            }\n            return name;\n        },\n\n        registerTool: function(toolName, tool) {\n            var toolOptions = tool.options;\n            if (toolOptions && toolOptions.template) {\n                toolOptions.template.options.cssClass = \"k-\" + EditorUtils.getToolCssClass(toolName);\n            }\n\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete \"{0}\"?',\n        overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Ok\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableTab: \"Table\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Accessibility\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        background: \"Background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Select All Cells\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n    var toolGroups = {\n        basic: [ \"bold\", \"italic\", \"underline\" ],\n        alignment: [ \"justifyLeft\", \"justifyCenter\", \"justifyRight\" ],\n        lists: [ \"insertUnorderedList\", \"insertOrderedList\" ],\n        indenting: [ \"indent\", \"outdent\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ],\n        links: [ \"createLink\", \"unlink\" ],\n        tables: [ \"tableWizard\", \"createTable\", \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\", \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\", \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ]\n    };\n\n    var Editor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                value,\n                editorNS = kendo.ui.editor,\n                toolbarContainer,\n                toolbarOptions,\n                type, comments;\n            var domElement;\n            var dom = editorNS.Dom;\n\n            /* suppress initialization in devices w/o proper contenteditable support */\n            if (!supportedContentEditable) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n            that.options.tools = that.options.tools.slice();\n\n            element = that.element;\n            domElement = element[0];\n\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n            );\n\n            toolbarOptions = extend({}, that.options);\n            toolbarOptions.editor = that;\n\n            if (type == \"textarea\") {\n                that._wrapTextarea();\n\n                toolbarContainer = that.wrapper.find(\".k-editor-toolbar\");\n\n                if (domElement.id) {\n                    toolbarContainer.attr(\"aria-controls\", domElement.id);\n                }\n            } else {\n                that.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n\n                toolbarOptions.popup = true;\n\n                toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n            }\n\n            that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n\n            that.toolbar.bindTo(that);\n\n            if (type == \"textarea\") {\n                setTimeout(function() {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n\n            that._resizable();\n            that._initializeContentElement(that);\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n\n            that.clipboard = new editorNS.Clipboard(this);\n\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if (!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n\n            // using $.proxy here will break #5337\n            this._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._initializeImmutables();\n\n            if (type == \"textarea\") {\n                that._ariaLabel(that.wrapper.find(\"iframe\"));\n            }\n\n            that.toolbar.resize();\n\n            kendo.notify(that);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n            if (options.tools) {\n                editor.toolbar.bindTo(editor);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _resizable: function() {\n            var resizable = this.options.resizable;\n            var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n\n            if (isResizable && this.textarea) {\n                var draggableElement = $(\"<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right'></span></div>\")\n                    .insertAfter(this.textarea);\n\n                this.wrapper.addClass('k-resizable');\n\n                this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                    draggableElement: draggableElement,\n                    start: function(e) {\n                        var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                        this.initialSize = editor.height();\n                        editor.find(\"td\").last().append(\"<div class='k-overlay' />\");\n                    },\n                    resize: function(e) {\n                        var delta = e.y.initialDelta;\n                        var newSize = this.initialSize + delta;\n                        var min = this.options.min || 0;\n                        var max = this.options.max || Infinity;\n\n                        newSize = Math.min(max, Math.max(min, newSize));\n\n                        this.editor.height(newSize);\n                    },\n                    resizeend: function() {\n                        this.editor.find(\".k-overlay\").remove();\n                        this.editor = null;\n                    }\n                }));\n\n                if (kendo.support.mobileOS.ios) {\n                    var resizableWidget = this.wrapper.getKendoResizable();\n                    resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                }\n            }\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate,\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang = \"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = \"<script>document.domain=\\\"\" + domain + \"\\\"</script>\";\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if (!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            $(iframe).one(\"load\", function() {\n                editor.toolbar.decorateFrom(doc.body);\n            });\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                \"<style>\" +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href) {\n                    return \"<link rel='stylesheet' href='\" + href + \"'>\";\n                }).join(\"\") +\n                \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if (textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function() {\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                editor.toolbar.decorateFrom(editor.body);\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n            editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch (e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e) {\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e) {\n                    var restoreHeight = function() {\n                        if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function() {\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function(e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        // Handling with timeout to avoid the default IE menu\n                        setTimeout(editor.toolbar.focus.bind(editor.toolbar), 100);\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.toolbar.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function() {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function(e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function() {\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function(e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                },\n                \"focusin\": function() {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-active\");\n                        editor.toolbar.show();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = toolbar.window.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !toolbar.focused() && !toolbar.preventPopupHide) {\n                            $(body).removeClass(\"k-active\");\n                            toolbar.hide();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = \"<style id='\" + PLACEHOLDER_TAG_ID + \"'>.\" +\n                        PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initializeImmutables: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables) {\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _mousedown: function(e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function() {\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _runPostContentKeyCommands: function(e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({ range: range });\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            formats: {},\n            encoded: true,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false,\n                optimizeTags: false,\n                keepEOL: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\", value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [].concat.call(\n                [\"formatting\"],\n                toolGroups.basic,\n                [\"undo\", \"redo\"],\n                toolGroups.alignment,\n                toolGroups.formatPainter,\n                toolGroups.lists,\n                toolGroups.indenting,\n                toolGroups.links,\n                [\"insertImage\"],\n                toolGroups.tables\n            )\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            editor._destroyUploadWidget();\n\n            editor._destroyResizings();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _focusOutside: function() {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />\").appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _destroyUploadWidget: function() {\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        state: function(toolName) {\n            var tool = Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        value: function(html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined$1) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n\n            this.toolbar.refreshTools();\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if (!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if (activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        focus: function() {\n            this.restoreSelection();\n        },\n\n        update: function(value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        encodedValue: function() {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        createRange: function(document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        getSelection: function() {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        getRange: function() {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        _containsRange: function(range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _deleteSavedRange: function() {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        paste: function(html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        exec: function(name, params) {\n            var that = this;\n            var command = null;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            name = name.toLowerCase();\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.toolbar.toolById(name);\n\n            if (!tool) {\n                // execute non-toolbar tool\n                for (var id in Editor.defaultTools) {\n                    if (id.toLowerCase() == name) {\n                        tool = Editor.defaultTools[id];\n                        break;\n                    }\n                }\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = that._selectionChange.bind(that);\n                        return;\n                    }\n                }\n\n                that._selectionChange();\n            }\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        initialize: function(ui, options) {\n            ui.attr({ unselectable: \"on\", title: options.title, \"aria-label\": options.title });\n        },\n\n        command: function(commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function(editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command: $.noop,\n        update: function(ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name;\n\n            switch (name) {\n                case \"undo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Undo\" }) }));\n    EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Redo\" }) }));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if (browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            ToolTemplate: ToolTemplate,\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n    nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\nvar normalize = function(node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>\\&]/g,\n    entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function(rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function() {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function(color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function(x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function(value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&' + entity + ';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if (Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br') {\n                return false;\n            } else if (Dom.insignificant(child)) {\n                return false;\n            } else if (Dom.emptyTextNode(child)) {\n                return false;\n            } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                return false;\n            }\n\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function(node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function(node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allowsTextContent: function(node) {\n        var result = true;\n\n        nonEmptyNonTextContentElements.every(function(name) {\n            if (Dom.is(node, name)) {\n                result = false;\n                return false;\n            } else {\n                return true;\n            }\n        });\n\n        return result;\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while (child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function(node) {\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function(node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function(target, offsetParent) {\n        var result = { top: target.offsetTop, left: target.offsetLeft };\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function(parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function(newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function(newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function(node) {\n        if (node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function(parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if (typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)) {\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function(node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function(node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function(referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function(node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function(node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function(el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    create: function(document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function(document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function(element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function(origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function() {\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function(node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function(node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n            }\n\n            node.style[key] = \"\";\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function() {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if (closest && editable && $.contains(closest, editable)) {\n            closest = editable;\n        } else if (!closest && editable) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function(node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function(table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function(table, colAttr) {\n        $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function(table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                var cell = cells[cellIndex];\n\n                if (cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if (cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n            }\n        }\n    },\n\n    _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if (!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if (table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for (i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if (currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for (i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if (number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while (row && length && this.is(row.cells[0], \"th\")) {\n                for (j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if (!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if (row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if (dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root) {\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if (isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function(node) { mapStart(node, \"iframe\"); },\n                end: function() { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function(node) { mapStart(node, \"script\"); },\n                end: function() { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                canOptimize: true,\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    // Apply the rest of the inline styles back\n                    var inlineStyles = [];\n                    var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                    for (let i = 0; i < style.length; i++) {\n                        var inlineStyle = style[i];\n\n                        if (ignoredStylePrefixes.filter(prop => inlineStyle.startsWith(prop)).length <= 0) {\n                            inlineStyles.push(`${inlineStyle}: ${style[inlineStyle]}`);\n                        }\n                    }\n\n                    if (inlineStyles.length) {\n                        font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"b\"); },\n                end: function() { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"i\"); },\n                end: function() { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"strong\"); },\n                end: function() { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"em\"); },\n                end: function() { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function(node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                    if (style) {\n                        styleObj.value = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function() { result.push('</span>'); }\n            },\n            font: {\n                canOptimize: true,\n                semantic: false,\n                start: function(node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function() {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined$1 });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined$1 });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while (!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (mapper.canOptimize &&\n                        options.optimizeTags &&\n                        shouldOptimize(node)) {\n                            children(node, false, mapper.skipEncoding);\n                        return;\n                    }\n\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if (isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        if (options.keepEOL) {\n                            value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                        } else {\n                            value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                        }\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function shouldOptimize(node) {\n            return node.attributes.length === 0;\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    DropDownList = kendo.ui.DropDownList,\n    dom = kendo.ui.editor.Dom;\n\nvar SelectBox = DropDownList.extend({\n    init: function(element, options) {\n        var that = this;\n\n        DropDownList.fn.init.call(that, element, options);\n\n        // overlay drop-down with popout for snappier interaction\n        if (kendo.support.mobileOS.ios) {\n            this._initSelectOverlay();\n            this.bind(\"dataBound\", this._initSelectOverlay.bind(this));\n        }\n\n        that.text(that.options.title);\n\n        that.element.attr(\"title\", that.options.title);\n        that.wrapper.attr(\"title\", that.options.title);\n\n        that.bind(\"open\", function() {\n            if (that.options.autoSize) {\n                var list = that.list,\n                    listWidth;\n\n                list.css({\n                        whiteSpace: \"nowrap\",\n                        width: \"auto\"\n                    });\n\n                listWidth = list.width();\n\n                if (listWidth > 0) {\n                    listWidth += 20;\n                } else {\n                    listWidth = that._listWidth;\n                }\n\n                list.css(\"width\", listWidth + kendo.support.scrollbar());\n\n                that._listWidth = listWidth;\n            }\n        });\n    },\n    options: {\n        name: \"SelectBox\",\n        index: -1,\n        size: \"medium\",\n        fillMode: \"solid\",\n        rounded: \"medium\"\n    },\n\n    _initSelectOverlay: function() {\n        var selectBox = this;\n        var value = selectBox.value();\n        var view = this.dataSource.view();\n        var item;\n        var html = \"\";\n        var encode = kendo.htmlEncode;\n\n        for (var i = 0; i < view.length; i++) {\n            item = view[i];\n\n            html += \"<option value='\" + encode(item.value) + \"'\";\n\n            if (item.value == value) {\n                html += \" selected\";\n            }\n\n            html += \">\" + encode(item.text) + \"</option>\";\n        }\n\n        var select = $(\"<select class='k-select-overlay'>\" + html + \"</select>\");\n        var wrapper = $(this.element).closest(\".k-dropdownlist\");\n\n        wrapper.next(\".k-select-overlay\").remove();\n\n        select.insertAfter(wrapper);\n\n        select.on(\"change\", function() {\n            selectBox.value(this.value);\n            selectBox.trigger(\"change\");\n        });\n    },\n\n    value: function(value) {\n        var that = this,\n            result = DropDownList.fn.value.call(that, value);\n\n        if (value === undefined$1) {\n            return result;\n        }\n\n        if (!DropDownList.fn.value.call(that)) {\n           that.text(that.options.title);\n        }\n    },\n\n    decorate: function(body) {\n        var that = this,\n            dataSource = that.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            that.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        for (i = 0; i < items.length; i++) {\n            tag = items[i].tag || \"span\";\n            className = items[i].className;\n\n            style = dom.inlineStyle(body, tag, { className: className });\n\n            style = style.replace(/\"/g, \"'\");\n\n            items[i].style = style + \";display:inline-block\";\n        }\n\n        dataSource.trigger(\"change\");\n    }\n});\n\n\nkendo.ui.plugin(SelectBox);\nkendo.ui.editor.SelectBox = SelectBox;\n\nkendo.cssProperties.registerPrefix(\"SelectBox\", \"k-picker-\");\n\nkendo.cssProperties.registerValues(\"SelectBox\", [{\n    prop: \"rounded\",\n    values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n}]);\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if (!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function(node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function(node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function(node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function(node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function(toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function() {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function(node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function() {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function() {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function() {\n        return !!this._next;\n    },\n\n    next: function() {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function(callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function(originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function() {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function() {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function() {\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function(range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function() {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function() {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function() {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function() {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function() {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function(range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function(range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function(range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function(range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        var allNodes = new RangeEnumerator(range).enumerate(),\n            result = allNodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n\n        return result;\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n            result = [];\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n            result = nodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n        }\n\n        return result;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function(node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function(range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function(range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function(range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        template = kendo.template,\n        RangeUtils = Editor.RangeUtils,\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n        toolsToBeUpdated = [\n            \"bold\",\n            \"italic\",\n            \"underline\",\n            \"strikethrough\",\n            \"superscript\",\n            \"subscript\",\n            \"forecolor\",\n            \"backcolor\",\n            \"fontname\",\n            \"fontsize\",\n            \"createlink\",\n            \"unlink\",\n            \"autolink\",\n            \"addcolumnleft\",\n            \"addcolumnright\",\n            \"addrowabove\",\n            \"addrowbelow\",\n            \"deleterow\",\n            \"deletecolumn\",\n            \"mergecells\",\n            \"formatting\",\n            \"cleanformatting\" ],\n        IMMUTABALE = \"k-immutable\",\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n    var rootCondition = function(node) {\n        return $(node).is(\"body,.k-editor\");\n    };\n\n    var immutable = function(node) {\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n    };\n\n    var immutableParent = function(node) {\n        return dom.closestBy(node, immutable, rootCondition);\n    };\n\n    var expandImmutablesIn = function(range) {\n        var startImmutableParent = immutableParent(range.startContainer);\n        var endImmutableParent = immutableParent(range.endContainer);\n\n        if (startImmutableParent || endImmutableParent) {\n            if (startImmutableParent) {\n                range.setStartBefore(startImmutableParent);\n            }\n            if (endImmutableParent) {\n                range.setEndAfter(endImmutableParent);\n            }\n        }\n    };\n\n    var immutablesContext = function(range) {\n        if (immutableParent(range.commonAncestorContainer)) {\n            return true;\n        } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n            var editableNodes = RangeUtils.editableTextNodes(range);\n            if (editableNodes.length === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var randomId = function(length) {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = length || 10; i > 0; --i) {\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n        }\n        return result;\n    };\n\n    var removeImmutables = function(root) {\n        var serializedImmutables = { empty: true }, nodeName, id, serialized;\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n            nodeName = dom.name(node);\n            id = randomId();\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n            serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n            serializedImmutables.empty = false;\n            $(node).replaceWith(serialized);\n        });\n\n        return serializedImmutables;\n    };\n\n    var restoreImmutables = function(root, serializedImmutables) {\n        var id, immutable;\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n            id = node.getAttribute(IMMUTABALE);\n            immutable = serializedImmutables[id];\n            $(node).replaceWith(immutable.node);\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n            }\n        });\n    };\n\n    var deletingKey = function(keyCode) {\n        var keys = kendo.keys;\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n    };\n    var updateToolOptions = function(tool) {\n        var options = tool ? tool.options : undefined$1;\n        if (options && options.finder) {\n            options.finder._initOptions({ immutables: true });\n        }\n    };\n\n    var Immutables = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.serializedImmutables = {};\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n            var tools = editor.toolbar.tools;\n            updateToolOptions(tools.justifyLeft);\n            updateToolOptions(tools.justifyCenter);\n            updateToolOptions(tools.justifyRight);\n            updateToolOptions(tools.justifyFull);\n        },\n\n        serialize: function(node) {\n            var result = this._toHtml(node),\n                id;\n\n            if (result.indexOf(IMMUTABALE) === -1) {\n                id = this.randomId();\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n            } else {\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n            }\n\n            this.serializedImmutables[id] = node;\n            return result;\n        },\n\n        _toHtml: function(node) {\n            var serialization = this.options.serialization;\n            var serializationType = typeof serialization;\n            var nodeName;\n\n            switch (serializationType) {\n                case \"string\":\n                    return template(serialization)(node);\n                case \"function\":\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\n            }\n        },\n\n        deserialize: function(node) {\n            var that = this;\n            var deserialization = this.options.deserialization;\n\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                var id = this.getAttribute(IMMUTABALE);\n                var immutable = that.serializedImmutables[id];\n                if (kendo.isFunction(deserialization)) {\n                    deserialization(this, immutable);\n                }\n                $(this).replaceWith(immutable);\n            });\n\n            that.serializedImmutables = {};\n        },\n\n        randomId: function(length) {\n            return randomId(length);\n        },\n\n        keydown: function(e, range) {\n            var isDeleting = deletingKey(e.keyCode);\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                (!isDeleting && this._cancelTyping(e, range));\n\n            if (shouldCancelEvent) {\n                e.preventDefault();\n                return true;\n            }\n        },\n\n        _cancelTyping: function(e, range) {\n            var editor = this.editor;\n            var keyboard = editor.keyboard;\n\n            return range.collapsed && !keyboard.typingInProgress &&\n                keyboard.isTypingKey(e) && immutablesContext(range);\n        },\n\n        _cancelDeleting: function(e, range) {\n            var keys = kendo.keys;\n            var backspace = e.keyCode === keys.BACKSPACE;\n            var del = e.keyCode == keys.DELETE;\n\n            if (!backspace && !del) {\n                return false;\n            }\n            var cancelDeleting = false;\n            if (range.collapsed) {\n                if (immutablesContext(range)) {\n                    return true;\n                }\n                var immutable = this.nextImmutable(range, del);\n                if (immutable && backspace) {\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                    if (closestSelectionLi) {\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                            return cancelDeleting;\n                        }\n                    }\n                }\n                if (immutable && !dom.tableCell(immutable)) {\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\n                            immutable = immutable.parentNode;\n                        }\n                        if (dom.tableCell(immutable)) {\n                            return cancelDeleting;\n                        }\n                        this._removeImmutable(immutable, range);\n                    }\n                    cancelDeleting = true;\n                }\n            }\n            return cancelDeleting;\n        },\n\n        nextImmutable: function(range, forwards) {\n            var commonContainer = range.commonAncestorContainer;\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                var next = this._nextNode(commonContainer, forwards);\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                        next = next.children[forwards ? 0 : next.children.length - 1];\n                    }\n                }\n                return immutableParent(next);\n            }\n        },\n\n        _removeImmutable: function(immutable, range) {\n            var editor = this.editor;\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n            dom.remove(immutable);\n            Editor._finishUpdate(editor, startRestorePoint);\n        },\n\n        _nextNode: function(node, forwards) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n            var current = node, next;\n            while (current && !next) {\n                next = current[sibling];\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                    current = next;\n                    next = current[sibling];\n                }\n                if (!next) {\n                    current = current.parentNode;\n                }\n            }\n            return next;\n        }\n    });\n\n    Immutables.immutable = immutable;\n    Immutables.immutableParent = immutableParent;\n    Immutables.expandImmutablesIn = expandImmutablesIn;\n    Immutables.immutablesContext = immutablesContext;\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\n    Immutables.removeImmutables = removeImmutables;\n    Immutables.restoreImmutables = restoreImmutables;\n\n    Editor.Immutables = Immutables;\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor.toolbar.refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function() {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function(expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function(range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function() {\n        this.exec();\n    },\n\n    createDialog: function(content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\").toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n(function($,undefined$1) {\n    var kendo = window.kendo;\n    var ui = kendo.ui;\n    var editorNS = ui.editor;\n    var Widget = ui.Widget;\n    var extend = $.extend;\n    var keys = kendo.keys;\n    var NS = \".kendoEditor\";\n    var EditorUtils = editorNS.EditorUtils;\n    var ToolTemplate = editorNS.ToolTemplate;\n    var Tool = editorNS.Tool;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var OVERFLOWANCHOR = \"overflowAnchor\";\n\n    var focusable = \".k-tool-group:visible .k-tool:not(.k-disabled):not([disabled]),\" +\n                    \".k-tool.k-overflow-anchor:visible,\" +\n                    \".k-tool-group:visible .k-colorpicker:not(input),\" +\n                    \".k-tool-group:visible .k-selectbox,\" +\n                    \".k-tool-group:visible .k-dropdownlist,\" +\n                    \".k-tool-group:visible .k-combobox .k-input-inner\";\n\n    var toolNamesByCssClass = {\n        \"k-i-sup-script\": \"superscript\",\n        \"k-i-sub-script\": \"subscript\",\n        \"k-i-align-left\": \"justifyLeft\",\n        \"k-i-align-center\": \"justifyCenter\",\n        \"k-i-align-right\": \"justifyRight\",\n        \"k-i-align-justify\": \"justifyFull\",\n        \"k-i-list-unordered\": \"insertUnorderedList\",\n        \"k-i-list-ordered\": \"insertOrderedList\",\n        \"k-i-list-roman-upper\": \"insertUpperRomanList\",\n        \"k-i-list-roman-lower\": \"insertLowerRomanList\",\n        \"k-i-import\": \"import\",\n        \"k-i-indent-increase\": \"indent\",\n        \"k-i-indent-decrease\": \"outdent\",\n        \"k-i-link-horizontal\": \"createLink\",\n        \"k-i-unlink-horizontal\": \"unlink\",\n        \"k-i-image\": \"insertImage\",\n        \"k-i-file-add\": \"insertFile\",\n        \"k-i-html\": \"viewHtml\",\n        \"k-i-foreground-color\": \"foreColor\",\n        \"k-i-paint\": \"backColor\",\n        \"k-i-table-insert\": \"createTable\",\n        \"k-i-table-column-insert-left\": \"addColumnLeft\",\n        \"k-i-table-column-insert-right\": \"addColumnRight\",\n        \"k-i-table-row-insert-above\": \"addRowAbove\",\n        \"k-i-table-row-insert-below\": \"addRowBelow\",\n        \"k-i-table-row-delete\": \"deleteRow\",\n        \"k-i-table-column-delete\": \"deleteColumn\",\n        \"k-i-table-properties\": \"tableWizard\",\n        \"k-i-table-wizard\": \"tableWizardInsert\",\n        \"k-i-table-position-left\": \"tableAlignLeft\",\n        \"k-i-table-position-center\": \"tableAlignCenter\",\n        \"k-i-table-position-right\": \"tableAlignRight\",\n        \"k-i-clear-css\": \"cleanFormatting\",\n        \"k-i-cells-merge-horizontally\": \"mergeCellsHorizontally\",\n        \"k-i-cells-merge-vertically\": \"mergeCellsVertically\",\n        \"k-i-cell-split-horizontally\": \"splitCellHorizontally\",\n        \"k-i-cell-split-vertically\": \"splitCellVertically\",\n        \"k-i-copy-format\": \"copyFormat\",\n        \"k-i-apply-format\": \"applyFormat\",\n        \".k-i-undo\": \"undo\",\n        \"k-i-redo\": \"redo\",\n\n    };\n\n    var OverflowAnchorTool = Tool.extend({\n        initialize: function(ui, options) {\n            var toolbar = options.editor.toolbar;\n\n            ui.attr(\"aria-controls\", options.editor.element.attr(\"id\"))\n                .on(\"click\", (function() {\n                    this.overflowPopup.toggle();\n                }).bind(toolbar));\n        },\n\n        options: {\n            name: OVERFLOWANCHOR\n        },\n\n        command: $.noop,\n        update: $.noop,\n        destroy: $.noop\n\n    });\n\n    EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n        key: \"\",\n        ctrl: true,\n        template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n    }));\n\n    var Toolbar = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = extend({}, options, { name: \"EditorToolbar\" });\n\n            Widget.fn.init.call(that, element, options);\n\n            if (options.popup) {\n                that._initPopup();\n            }\n\n            if (options.resizable && options.resizable.toolbar) {\n                that._resizeHandler = kendo.onResize(function() {\n                    that.resize(true);\n                });\n\n                that.element.addClass(\"k-toolbar-resizable\");\n            }\n        },\n\n        events: [\n            \"execute\"\n        ],\n\n        groups: {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\", \"indent\", \"outdent\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            advanced: [ \"viewHtml\", \"cleanFormatting\", \"print\", \"pdf\", \"exportAs\", \"import\"],\n            fonts: [ \"fontName\", \"fontSize\" ],\n            colors: [ \"foreColor\", \"backColor\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        },\n\n        overflowFlaseTools: [ \"formatting\", \"fontName\", \"fontSize\", \"foreColor\", \"backColor\", \"insertHtml\" ],\n\n        _initPopup: function() {\n            var that = this;\n            this.window = $(this.element)\n                .wrap(\"<div class='editorToolbarWindow' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag'></span></span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e) {\n                    if (!$(e.target).is(\".k-icon\")) {\n                        that.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function() {\n                    that.options.editor.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _toggleOverflowStyles: function(element, show) {\n            element\n                .find(\"> li\").toggleClass(\"k-item\", show)\n                .find(\".k-tool:not(.k-disabled), .k-overflow-button\").toggleClass(\"k-overflow-button\", show);\n        },\n\n        _initOverflowPopup: function(ui) {\n            var that = this;\n            var popupTemplate = \"<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>\";\n\n            that.overflowPopup = $(popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                origin: kendo.support.isRtl(that.element) ? \"bottom left\" : \"bottom right\",\n                position: kendo.support.isRtl(that.element) ? \"top left\" : \"top right\",\n                copyAnchorStyles: false,\n                open: function(e) {\n                    if (this.element.is(\":empty\")) {\n                        e.preventDefault();\n                    }\n\n                    that._toggleOverflowStyles(this.element, true);\n                    ui.attr(\"aria-expanded\", true);\n                },\n                close: function() {\n                    ui.attr(\"aria-expanded\", false);\n                },\n                activate: that.focusOverflowPopup.bind(that)\n            }).data(\"kendoPopup\");\n        },\n\n        items: function() {\n            var isResizable = this.options.resizable && this.options.resizable.toolbar,\n                popup, result;\n\n            result = this.element.children().find(\"> *, select\");\n\n            if (isResizable) {\n                popup = this.overflowPopup;\n                result = result.add(popup.element.children().find(\"> *\"));\n            }\n\n            return result;\n        },\n\n        focused: function() {\n            var active = kendo._activeElement(),\n                popup = this.window,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        toolById: function(name) {\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (id.toLowerCase() == name) {\n                    return tools[id];\n                }\n            }\n        },\n\n        toolGroupFor: function(toolName) {\n            var i, groups = this.groups;\n\n            if (this.isCustomTool(toolName)) {\n                return \"custom\";\n            }\n\n            for (i in groups) {\n                if ($.inArray(toolName, groups[i]) >= 0) {\n                    return i;\n                }\n            }\n        },\n\n        bindTo: function(editor) {\n            var that = this,\n                window = that.window;\n\n            // detach from editor that was previously listened to\n            if (that._editor) {\n                that._editor.unbind(\"select\", that.resize.bind(that));\n            }\n\n            that._editor = editor;\n\n            if (that.options.resizable && that.options.resizable.toolbar) {\n                editor.options.tools.push(OVERFLOWANCHOR);\n            }\n\n            // re-initialize the tools\n            that.tools = that.expandTools(editor.options.tools);\n            that.render();\n\n            that.element.find(\".k-combobox .k-input-inner\").on(\"keydown\", function(e) {\n                var combobox = $(this).closest(\".k-combobox\").data(\"kendoComboBox\"),\n                    key = e.keyCode;\n\n                if (key == keys.RIGHT || key == keys.LEFT) {\n                    combobox.close();\n                } else if (key == keys.DOWN) {\n                    if (!combobox.dropDown.isOpened()) {\n                        e.stopImmediatePropagation();\n                        combobox.open();\n                    }\n                }\n            });\n\n            that._attachEvents();\n\n            that.items().each(function initializeTool() {\n\n                var toolName = that._toolName(this),\n                    tool = toolName !== \"moreVertical\" ? that.tools[toolName] : that.tools.overflowAnchor,\n                    options = tool && tool.options,\n                    messages = editor.options.messages,\n                    description = options && options.tooltip || messages[toolName],\n                    ui = $(this);\n\n                if (!tool || !tool.initialize) {\n                    return;\n                }\n\n                if (toolName == \"fontSize\" || toolName == \"fontName\") {\n                    var inheritText = messages[toolName + \"Inherit\"];\n\n                    ui.find(\"input\").val(inheritText).end()\n                      .find(\"span.k-input-inner\").text(inheritText).end();\n                }\n\n                tool.initialize(ui, {\n                    title: that._appendShortcutSequence(description, tool),\n                    editor: that._editor\n                });\n\n                ui.closest(\".k-dropdownlist\", that.element).addClass(\"k-editor-widget\");\n                ui.closest(\".k-combobox\", that.element).addClass(\"k-editor-widget\");\n\n                ui.closest(\".k-colorpicker\", that.element).next(\".k-colorpicker\").addClass(\"k-editor-widget\");\n            });\n\n            editor.bind(\"select\", that.resize.bind(that));\n\n            that.update();\n\n            if (window) {\n                window.wrapper.css({ top: \"\", left: \"\", width: \"\" });\n            }\n        },\n\n        show: function() {\n            var that = this,\n                window = that.window,\n                editorOptions = that.options.editor,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (window) {\n                wrapper = window.wrapper;\n                editorElement = editorOptions.element;\n\n                if (!wrapper.is(\":visible\") || !that.window.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!window._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                        setTimeout(function() {\n                            window.open();\n                        }, 0);\n                    } else {\n                        window.open();\n                    }\n                }\n            }\n        },\n\n        _getWindowWidth: function() {\n            var that = this,\n                wrapper = that.window.wrapper,\n                editorElement = that.options.editor.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _overlaps: function(box) {\n            var toolbarWrapper = this.window.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        hide: function() {\n            if (this.window) {\n                this.window.close();\n            }\n        },\n\n        focus: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            // Chrome can't focus something which has already been focused\n            element.attr(TABINDEX, tabIndex || 0).trigger(\"focus\")\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        focusOverflowPopup: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.overflowPopup.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            element.closest(\".k-animation-container\").addClass(\"k-overflow-wrapper\");\n\n            element.attr(TABINDEX, tabIndex || 0)\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        _appendShortcutSequence: function(localizedText, tool) {\n            if (!tool.key) {\n                return localizedText;\n            }\n\n            var res = localizedText + \" (\";\n\n            if (tool.ctrl) {\n                res += \"Ctrl + \";\n            }\n\n            if (tool.shift) {\n                res += \"Shift + \";\n            }\n\n            if (tool.alt) {\n                res += \"Alt + \";\n            }\n\n            res += tool.key + \")\";\n\n            return res;\n        },\n\n        _nativeTools: [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ],\n\n        tools: {}, // tools collection is copied from defaultTools during initialization\n\n        isCustomTool: function(toolName) {\n            return !(toolName in kendo.ui.Editor.defaultTools);\n        },\n\n        // expand the tools parameter to contain tool options objects\n        expandTools: function(tools) {\n            var currentTool,\n                i,\n                nativeTools = this._nativeTools,\n                options,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                result = {},\n                name;\n\n            for (i = 0; i < tools.length; i++) {\n                currentTool = tools[i];\n                name = currentTool.name;\n\n                if ($.isPlainObject(currentTool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result[name] = extend({}, defaultTools[name]);\n                        extend(result[name].options, currentTool);\n                    } else {\n                        // custom tool\n                        options = extend({ cssClass: \"k-i-gear\", type: \"button\", title: \"\" }, currentTool);\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        if (!options.template && options.type == \"button\") {\n                            options.template = editorNS.EditorUtils.buttonTemplate;\n                            options.title = options.title || options.tooltip;\n                        }\n\n                        result[name] = {\n                            options: options\n                        };\n                    }\n                } else if (defaultTools[currentTool]) {\n                    // tool by name\n                    result[currentTool] = defaultTools[currentTool];\n                }\n            }\n\n            for (i = 0; i < nativeTools.length; i++) {\n                if (!result[nativeTools[i]]) {\n                    result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                }\n            }\n\n            return result;\n        },\n\n        render: function() {\n            var that = this,\n                tools = that.tools,\n                options, template, toolElement,\n                toolName,\n                editorElement = that._editor.element,\n                element = that.element.empty(),\n                groupName, newGroupName,\n                toolConfig = that._editor.options.tools,\n                group, i, groupPosition = 0,\n                resizable = that.options.resizable && that.options.resizable.toolbar,\n                overflowFlaseTools = this.overflowFlaseTools;\n\n            function stringify(template) {\n                var result = \"\";\n\n                if (template.getHtml) {\n                    result = template.getHtml();\n                } else {\n                    if (!kendo.isFunction(template)) {\n                        template = kendo.template(template);\n                    }\n\n                    result = template(options);\n                }\n\n                return kendo.trim(result);\n            }\n\n            function endGroup() {\n                if (group.children().length) {\n                    if (resizable) {\n                        group.data(\"position\", groupPosition);\n                        groupPosition++;\n                    }\n\n                    group.appendTo(element);\n                }\n            }\n\n            function startGroup(toolName) {\n                if (toolName !== OVERFLOWANCHOR) {\n                    group = $(\"<li class='k-tool-group' role='presentation' />\");\n                    group.data(\"overflow\", $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                } else {\n                    group = $(\"<li class='k-overflow-tools' />\");\n                }\n            }\n\n            element.empty();\n\n            if (toolConfig.length) {\n                toolName = toolConfig[0].name || toolConfig[0];\n            }\n            startGroup(toolName, overflowFlaseTools);\n\n            for (i = 0; i < toolConfig.length; i++) {\n                toolName = toolConfig[i].name || toolConfig[i];\n                options = tools[toolName] && tools[toolName].options;\n\n                if (!options && $.isPlainObject(toolName)) {\n                    options = toolName;\n                }\n\n                template = options && options.template;\n\n                if (toolName == \"break\") {\n                    endGroup();\n                    $(\"<li class='k-row-break' role='presentation' />\").appendTo(that.element);\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (!template) {\n                    continue;\n                }\n\n                newGroupName = that.toolGroupFor(toolName);\n\n                if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                    groupName = newGroupName;\n                }\n\n                if (toolName == OVERFLOWANCHOR) {\n                    template.options.title = that.options.messages.overflowAnchor;\n                }\n\n                template = stringify(template);\n\n                toolElement = $(template).appendTo(group);\n\n                if (newGroupName == \"custom\") {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (options.exec && toolElement.hasClass(\"k-tool\")) {\n                    toolElement.on(\"click\", options.exec.bind(editorElement[0]));\n                }\n            }\n\n            endGroup();\n\n            $(that.element).children(\":has(> .k-tool)\").not(\".k-overflow-tools\").addClass(\"k-button-group\");\n\n            that.updateGroups();\n\n            if (resizable) {\n                that._initOverflowPopup(that.element.find(\".k-overflow-anchor\"));\n            }\n\n            that.angular(\"compile\", function() {\n                return { elements: that.element };\n            });\n        },\n\n        updateGroups: function() {\n            $(this.element).children().not(\".k-overflow-tools\").each(function() {\n                $(this).children()\n                    .removeClass(\"k-group-start k-group-end\")\n                    .first().addClass(\"k-group-start\").end()\n                    .last().addClass(\"k-group-end\").end();\n            });\n        },\n\n        decorateFrom: function(body) {\n            this.items().filter(\".k-decorated\")\n                .each(function() {\n                    var selectBox = $(this).data(\"kendoSelectBox\");\n\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (tools[id].destroy) {\n                    tools[id].destroy();\n                }\n            }\n\n            if (this.window) {\n                this.window.destroy();\n            }\n\n            if (this._resizeHandler) {\n                kendo.unbindResize(this._resizeHandler);\n            }\n\n            if (this.overflowPopup) {\n                this.overflowPopup.destroy();\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this,\n                popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n\n            that.attachToolsEvents(that.element.add(popupElement));\n        },\n\n        attachToolsEvents: function(element) {\n            var that = this,\n                buttons = \"[role=button].k-tool\",\n                enabledButtons = buttons + \":not(.k-disabled)\" + \", [role=button].k-i-import:not(.k-disabled)\",\n                disabledButtons = buttons + \".k-disabled\",\n                dropdown = \".k-dropdownlist\",\n                colorpicker = \".k-colorpicker\",\n                editorTools = [buttons, dropdown, colorpicker].join(\",\");\n\n            element.off(NS)\n                .on(\"mouseenter\" + NS, enabledButtons, function() { $(this).addClass(\"k-hover\"); })\n                .on(\"mouseleave\" + NS, enabledButtons, function() { $(this).removeClass(\"k-hover\"); })\n                .on(\"mousedown\" + NS, editorTools, function(e) {\n                    e.preventDefault();\n                })\n                .on(\"keydown\" + NS, focusable, function(e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement,\n                        currentContainer,\n                        keyCode = e.keyCode;\n\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n\n                        return tools[index];\n                    }\n\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is(\".k-dropdownlist\")) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function() {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass(\"k-overflow-tool-group\") ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n\n                        // skip tabbing to disabled tools, and focus the editing area when running out of tools\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n\n                            if (!focusElement || $(focusElement).closest(\".k-overflow-tools\").css(\"visibility\") === \"hidden\") {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ( $(current).is(\"button\") || $(current).is(\"a\") ) && !$(current).attr(\"href\") ) {\n                        //anchors without href attribute do not respond to Enter key\n                        that._executeToolCommand(current, e);\n                    }\n                })\n                .on(\"click\" + NS, enabledButtons, function(e) {\n                    that._executeToolCommand(this, e);\n                })\n                .on(\"click\" + NS, disabledButtons, function(e) { e.preventDefault(); });\n\n        },\n\n        _executeToolCommand: function(toolElement, e) {\n            var that = this;\n            var button = $(toolElement);\n            e.preventDefault();\n            e.stopPropagation();\n            button.removeClass(\"k-hover\");\n            if (!button.is(\"[data-popup]\")) {\n                that._editor.exec(that._toolName(toolElement));\n            }\n        },\n\n        _toolName: function(element) {\n            if (!element) {\n                return;\n            }\n\n            var className = element.className;\n\n            if (/k-tool\\b/i.test(className)) {\n                className = element.firstChild.className;\n            }\n\n            var tool = $.grep(className.split(\" \"), function(x) {\n                return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n            });\n\n            if (tool[0]) {\n                var toolname = tool[0];\n                if (toolNamesByCssClass[toolname]) {\n                    toolname = toolNamesByCssClass[toolname];\n                }\n                if (toolname.indexOf(\"k-i-\") >= 0) {\n                    return kendo.toCamelCase(toolname.substring(toolname.indexOf(\"k-i-\") + 4));\n                }\n                else {\n                    return toolname.substring(toolname.lastIndexOf(\"-\") + 1);\n                }\n            }\n            return \"custom\";\n        },\n\n        refreshTools: function() {\n            var that = this,\n                editor = that._editor,\n                range = editor.getRange(),\n                nodes = editorNS.RangeUtils.textNodes(range),\n                immutables = editor.options.immutables,\n                immutablesContext = that._immutablesContext(range);\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.items().each(function() {\n                var tool = that.tools[that._toolName(this)];\n                if (tool) {\n                    var ui = $(this);\n                    if (tool.update) {\n                        tool.update(ui, nodes, editor.undoRedoStack);\n                    }\n\n                    if (immutables) {\n                        that._updateImmutablesState(tool, ui, immutablesContext);\n                    }\n                }\n            });\n            this.update();\n        },\n\n        _immutablesContext: function(range) {\n            if (this._editor.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var name = tool.name;\n            var uiElement = ui;\n\n            var trackImmutables = tool.options.trackImmutables;\n            if (trackImmutables === undefined$1) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                var display = immutablesContext ? \"none\" : \"\";\n                if (!ui.is(\".k-tool\")) {\n                    var uiData = ui.data();\n                    for (var key in uiData) {\n                        if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                            var widget = uiData[key];\n                            uiElement = widget.wrapper;\n                            break;\n                        }\n                    }\n                }\n                uiElement.css(\"display\", display);\n                var groupUi = uiElement.closest(\"li\");\n                if (groupUi.children(\":visible\").length === 0) {\n                    groupUi.css(\"display\", display);\n                }\n            }\n        },\n\n        update: function() {\n            this.updateGroups();\n        },\n\n        _resize: function(e) {\n            var containerWidth = e.width;\n            var resizable = this.options.resizable && this.options.resizable.toolbar;\n            var popup = this.overflowPopup;\n            var editorElement = this.options.editor.element;\n            var toolbarWindow = this.window;\n\n            this.refreshTools();\n\n            if (!resizable) {\n                return;\n            }\n\n            if (toolbarWindow) {\n                toolbarWindow.wrapper.width(this._getWindowWidth());\n\n                if (!toolbarWindow._moved) {\n                    toolbarWindow.wrapper.css({\n                        left: Math.max(0, parseInt(editorElement.offset().left, 10))\n                    });\n                }\n            }\n\n            if (popup.visible()) {\n                popup.close(true);\n            }\n\n            this._refreshWidths();\n\n            this._shrink(containerWidth);\n            this._stretch(containerWidth);\n\n            this._toggleOverflowStyles(this.element, false);\n            this._toggleOverflowStyles(this.overflowPopup.element, true);\n\n            this.element\n                .children(\"li.k-overflow-tools\")\n                .css(\"visibility\", popup.element.is(\":empty\") ? \"hidden\" : \"visible\");\n        },\n\n        _refreshWidths: function() {\n            this.element.children(\"li\").each(function(idx, element) {\n                var group = $(element);\n                group.data(\"outerWidth\", outerWidth(group, true));\n            });\n        },\n\n        _shrink: function(width) {\n            var group, visibleGroups;\n\n            if (width < this._groupsWidth()) {\n                visibleGroups = this._visibleGroups().filter(\":not(.k-overflow-tools)\");\n\n                for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                    group = visibleGroups.eq(i);\n                    if (width > this._groupsWidth()) {\n                        break;\n                    } else {\n                        this._hideGroup(group);\n                    }\n                }\n            }\n        },\n\n        _stretch: function(width) {\n            var group, hiddenGroups;\n\n            if (width > this._groupsWidth()) {\n                hiddenGroups = this._hiddenGroups();\n\n                for (var i = 0; i < hiddenGroups.length; i++) {\n                    group = hiddenGroups.eq(i);\n                    if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                        break;\n                    }\n                }\n            }\n        },\n\n        _hiddenGroups: function() {\n            var popup = this.overflowPopup;\n\n            var hiddenGroups = this.element.children(\"li.k-tool-group\").filter(\":hidden\");\n\n            hiddenGroups = hiddenGroups.add(popup.element.children(\"li\"));\n\n            hiddenGroups.sort(function(a, b) {\n                return ($(a).data(\"position\") > $(b).data(\"position\")) ? 1 : -1;\n            });\n\n            return hiddenGroups;\n        },\n\n        _visibleGroups: function() {\n            return this.element.children(\"li.k-tool-group, li.k-overflow-tools\").filter(\":visible\");\n        },\n\n        _groupsWidth: function() {\n            var width = 0;\n\n            this._visibleGroups().each(function() {\n                width += $(this).data(\"outerWidth\");\n            });\n\n            return Math.ceil(width);\n        },\n\n        _hideGroup: function(group) {\n            if (group.data(\"overflow\")) {\n                var popup = this.overflowPopup;\n                group.detach().prependTo(popup.element).addClass(\"k-overflow-tool-group\");\n            } else {\n                group.addClass(\"k-hidden\");\n            }\n        },\n\n        _showGroup: function(group, width) {\n            var position, previous, groupWidth;\n\n            if (group.hasClass('k-disabled')) {\n                return true;\n            }\n\n            if (group.hasClass(\"k-overflow-tool-group\")) {\n                groupWidth = group.data(\"outerWidth\");\n            } else {\n                group.removeClass(\"k-hidden\");\n                groupWidth = outerWidth(group, true);\n                group.addClass(\"k-hidden\");\n            }\n\n            if (group.length && width > this._groupsWidth() + groupWidth) {\n                if (group.hasClass(\"k-overflow-tool-group\")) {\n                    position = group.data(\"position\");\n\n                    if (position === 0) {\n                        group.detach().prependTo(this.element);\n                    } else {\n                        previous = this.element.children().filter(function(idx, element) {\n                            return $(element).data(\"position\") === position - 1;\n                        });\n\n                        group.detach().insertAfter(previous);\n                    }\n\n                    group.removeClass(\"k-overflow-tool-group\");\n\n                } else {\n                    group.removeClass(\"k-hidden\");\n                }\n\n                return true;\n            }\n\n            return false;\n        }\n\n    });\n\n$.extend(editorNS, {\n    Toolbar: Toolbar\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined$1;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined$1;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        this.createDialog(dialog, {\n            title: messages.viewHtml,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .find(\".k-dialog-update\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .data(\"kendoWindow\").center().open();\n\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: \"\" +\n    \"<div class='k-editor-dialog k-popup-edit-form k-viewhtml-dialog'>\" +\n        \"<span class='k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea'><textarea class='k-input-inner !k-overflow-auto !k-resize-none'></textarea></span>\" +\n        \"<div class='k-edit-buttons'>\" +\n            \"<button class='k-dialog-update k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary'><span class='k-button-text'>#: dialogUpdate #</span></button>\" +\n            \"<button class='k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base'><span class='k-button-text'>#: dialogCancel #</span></button>\" +\n        \"</div>\" +\n    \"</div>\",\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"View HTML\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function(options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({ immutables: options.immutables });\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        var that = this;\n        return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes);\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    EditorUtils = Editor.EditorUtils,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function(sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function(sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function(nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function(nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            formatNode = this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function(node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                node = node.parentNode;\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function(nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function(node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return \"inherit\";\n    },\n\n    getFormat: function(nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function(nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function() { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = (kendo.support.browser.msie || kendo.support.touch) ? \"kendoDropDownList\" : \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            defaultValue = [];\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n\n        ui.attr({ title: initOptions.title });\n        ui[this.type]({\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: dataSource,\n            change: function() {\n                editor._range = range;\n                Tool.exec(editor, toolName, this.value());\n            },\n            close: function() {\n                setTimeout(function() {\n                    editor._deleteSavedRange();\n                },0);\n            },\n            highlightFirst: false\n        });\n\n        ui.closest(\".k-combobox\").removeClass(\"k-\" + toolName).find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        var widget = ui.data(this.type);\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, initOptions) {\n        var that = this,\n            editor = initOptions.editor,\n            toolName = this.name,\n            options = extend({}, ColorTool.fn.options, this.options),\n            palette = options.palette,\n            columns = options.columns;\n\n        ui = this._widget = new kendo.ui.ColorPicker(ui, {\n            closeOnSelect: true,\n            views: [\"palette\"],\n            preview: false,\n            input: false,\n            buttons: false,\n            toolIcon: \"k-icon k-i-\" + EditorUtils.getToolCssClass(options.name),\n            palette: palette,\n            columns: columns,\n            change: function() {\n                var color = ui.value();\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n                editor.focus();\n            },\n            open: function(e) {\n                var picker = e.sender;\n                that.storedRange = editor.getRange();\n\n                picker._popup.element.on(MOUSEDOWN_NS, function(e) {\n                    if (!$(e.target).is(\"input.k-color-value\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!picker._popup.element.is(\"[unselectable='on']\")) {\n                    picker._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function() {\n                            that._inputFocused = true;\n                        });\n                }\n\n                setTimeout(function() {\n                    picker._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n                });\n            },\n            close: function(e) {\n                e.sender._popup.element.off(MOUSEDOWN_NS);\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n            },\n            activate: function(e) {\n                e.preventDefault();\n\n                if (e.sender._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                ui.trigger(\"change\");\n            }\n        });\n        ui.wrapper\n            .attr({ title: initOptions.title, unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        ui.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\nregisterTool(\"bold\", new InlineFormatTool({ key: \"B\", ctrl: true, format: formats.bold, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Bold\" }) }));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\nregisterTool(\"italic\", new InlineFormatTool({ key: \"I\", ctrl: true, format: formats.italic, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Italic\" }) }));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({ key: \"U\", ctrl: true, format: formats.underline, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Underline\" }) }));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({ format: formats.strikethrough, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Strikethrough\" }) }));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({ format: formats.superscript, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Superscript\" }) }));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({ format: formats.subscript, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Subscript\" }) }));\n\nregisterTool(\"foreColor\", new ColorTool({ cssAttr: \"color\", fontAttr: \"color\", domAttr: \"color\", name: \"foreColor\", template: new ToolTemplate({ template: EditorUtils.colorPickerTemplate, title: \"Color\" }) }));\n\nregisterTool(\"backColor\", new ColorTool({ cssAttr: \"background-color\", domAttr: \"backgroundColor\", name: \"backColor\", template: new ToolTemplate({ template: EditorUtils.colorPickerTemplate, title: \"Background Color\" }) }));\n\nregisterTool(\"fontName\", new FontTool({ cssAttr: \"font-family\", fontAttr: \"face\", domAttr: \"fontFamily\", name: \"fontName\", defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }], template: new ToolTemplate({ template: EditorUtils.comboBoxTemplate, title: \"Font Name\" }) }));\n\nregisterTool(\"fontSize\", new FontTool({ cssAttr: \"font-size\", fontAttr: \"size\", domAttr: \"fontSize\", name: \"fontSize\", defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }], template: new ToolTemplate({ template: EditorUtils.comboBoxTemplate, title: \"Font Size\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function(sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function(range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length - 1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    _dialogTemplate: function() {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    \"<div class='k-edit-label'>\" +\n                        \"<label for='k-editor-link-url'>#: messages.linkWebAddress #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-url'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label k-editor-link-text-row'>\" +\n                        \"<label for='k-editor-link-text'>#: messages.linkText #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field k-editor-link-text-row'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-text'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'>\" +\n                        \"<label for='k-editor-link-title'>#: messages.linkToolTip #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-title'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'></div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<input type='checkbox' class='k-checkbox k-checkbox-md k-rounded-md' id='k-editor-link-target'>\" +\n                        \"<label for='k-editor-link-target' class='k-checkbox-label'>#: messages.linkOpenInNewWindow #</label>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-buttons'>\" +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    \"</div>\" +\n                \"</div>\" +\n            \"</div>\"\n        )({\n            messages: this.editor.options.messages\n        });\n    },\n\n    exec: function() {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(this._dialogTemplate(), {\n            title: messages.createLink,\n            close: this._close.bind(this),\n            visible: false\n        });\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog\n            .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n            .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n            .find(\".k-edit-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").attr(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.data(\"kendoWindow\").center().open();\n\n        $(\"#k-editor-link-url\", dialog).trigger(\"focus\").select();\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function(e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function(e) {\n        e.preventDefault();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function(nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function() {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function() {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function() {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function(linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n        Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function(ui, nodes) {\n        ui.toggleClass(\"k-disabled\", !this.finder.isFormatted(nodes))\n          .removeClass(\"k-hover\");\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function(traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function() {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse(this._detectEnd.bind(this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse(this._detectStart.bind(this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset | 0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function(options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function(callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function(callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined$1) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {},\n    next: function(node) {},\n    subText: function(text, offset) {}\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Create Link\" }) }));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Remove Link\" }) }));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes) {\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                node = nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function(sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if (until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function(nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function(nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function(format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function(nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function(nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function(format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function(nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function() {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Left\"\n    })\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Center\"\n    })\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Right\"\n    })\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Full\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function(node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    isFormatted: function(nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function() {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function(candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function(range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while (formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while (formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function(nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if (!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function(section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, (function(node) {\n                    return this.containsAny(node, nodes);\n                }).bind(this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if (dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function(nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while (li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function(nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function(commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert unordered list\" }) }));\nregisterTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert ordered list\" }) }));\nregisterTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert upper roman list\" }) }));\nregisterTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert lower roman list\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoSelectBox\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function(args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function() {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor;\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var selectBox;\n\n        that.editor = editor;\n\n        ui.width(options.width);\n\n        selectBox = ui.kendoSelectBox({\n            autoWidth: true,\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: options.items || editor.options[toolName],\n            title: editor.options.messages[toolName],\n            autoSize: true,\n            change: function() {\n                var dataItem = this.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = this.dataSource.data();\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n            },\n            highlightFirst: false,\n            template: kendo.template(\n                '<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'\n            )\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass(\"k-decorated\")\n            .closest(\".k-dropdownlist, .k-combobox\")\n                .removeClass(\"k-\" + toolName)\n                .find(\"*\").addBack()\n                    .attr(\"unselectable\", \"on\");\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\" + item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for (var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Format\" }) }));\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Clean formatting\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function() {\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        '# if (showBrowser) { #' +\n                            '<div class=\"k-filebrowser k-imagebrowser\"></div>' +\n                        '# } #' +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-url\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-title\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-width\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-height\"></span>' +\n                        \"</div>\" +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert Image\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: cmd._onUploadSuccess.bind(cmd),\n            progress: cmd._onUploadProgress.bind(cmd),\n            select: cmd._onUploadSelect.bind(cmd),\n            error: cmd._onUploadError.bind(cmd),\n            complete: cmd._onUploadComplete.bind(cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl: importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev) {\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev) {\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev) {\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev) {\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev) {\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function() {\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({ position: \"relative\" }).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function() {\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    template: new ToolTemplate({ template: EditorUtils.iconTextButtonTemplate, title: \"Import\" })\n}));\n\n}(window.kendo.jQuery));\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml;\n\n        this._selectBox = new editorNS.SelectBox(ui, {\n            dataSource: dataSource,\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            change: function() {\n                Tool.exec(editor, 'insertHtml', this.value());\n            },\n            title: editor.options.messages.insertHtml,\n            highlightFirst: false\n        });\n\n        ui.attr(\"title\", initOptions.title);\n        this._selectBox.wrapper.attr(\"title\", initOptions.title);\n    },\n\n    command: function(commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var selectbox = ui.data(\"kendoSelectBox\") || ui.find(\"select\").data(\"kendoSelectBox\");\n        selectbox.close();\n        selectbox.value(selectbox.options.title);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Insert HTML\", initialValue: \"Insert HTML\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput(),\n            cmd.antiForgeryInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    },\n\n    antiForgeryInput: function() {\n        var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n        return $(\"input[name^='__RequestVerificationToken']\").clone()\n                    .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoSelectBox';\n    },\n\n    options: {\n        items: defaultExportAsItems,\n        width: 140\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var tool = this;\n        var editor = initOptions.editor;\n        var options = tool.options;\n        var toolName = options.name;\n        var changeHandler = tool.changeHandler.bind(tool);\n        var dataSource = options.items || editor.options[toolName];\n        var displayName = editor.options.messages[toolName];\n        var selectBox;\n\n        dataSource.unshift({\n            text: displayName,\n            value: \"\"\n        });\n        tool.editor = editor;\n        ui.width(options.width);\n        selectBox = ui.kendoSelectBox({\n            dataTextField: 'text',\n            dataValueField: 'value',\n            dataSource: dataSource,\n            autoSize: true,\n            change: changeHandler,\n            open: function(e) {\n                var sender = e.sender;\n                sender.items()[0].style.display = \"none\";\n                sender.unbind(\"open\");\n            },\n            highlightFirst: false,\n            template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>'),\n            valueTemplate: '<span class=\"k-editor-export\"><span class=\"k-icon k-i-export\"></span><span class=\"k-export-tool-text\">' + displayName + '</span></span>'\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass('k-decorated').closest('.k-dropdownlist').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n    },\n\n    changeHandler: function(e) {\n        var sender = e.sender;\n        var dataItem = sender.dataItem();\n        var value = dataItem && dataItem.value;\n\n        this._exec(value);\n        sender.value(\"\");\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    template: new ToolTemplate({\n        template: EditorUtils.dropDownListTemplate,\n        title: 'Export As'\n    })\n}));\n\n}(window.kendo.jQuery));\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined$1) {\n        return node.style[property] || 0;\n    } else {\n        if (value > 0) {\n            node.style[property] = value + \"px\";\n        } else {\n            node.style[property] = \"\";\n\n            if (!node.style.cssText) {\n                node.removeAttribute(\"style\");\n            }\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n    },\n\n    apply: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function(list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes) {\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function(node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        $.extend(this.options, {\n            immutables: options.editor && options.editor.options.immutables\n        });\n\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function(ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                ui.removeClass(\"k-disabled\");\n                return;\n            }\n        }\n\n        ui.addClass(\"k-disabled\").removeClass(\"k-hover\");\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Indent\" }) }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Outdent\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function(node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function() {\n        var range = this.getRange(),\n            doc = RangeUtils.documentFromRange(range),\n            parent, previous, next,\n            emptyParagraphContent = editorNS.emptyElementContent,\n            paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                var br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                var parentNode = li.parentNode;\n                var parentChildrenLength = li.parentNode.children.length;\n                var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function(node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent = $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if (kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", { href: attributes.href });\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        '# if (showBrowser) { #' +\n                            '<div class=\"k-filebrowser\"></div>' +\n                        '# } #' +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-url\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-text\"></span>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-label'>\" +\n                            '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' +\n                        \"</div>\" +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-title\"></span>' +\n                        \"</div>\" +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        '<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">#: messages.dialogInsert #</span></button>' +\n                        '<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">#: messages.dialogCancel #</span></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert File\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-active\",\n    SELECTEDSTATE = \"k-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = \"<td style='width:#=width#%;'>#=content#</td>\";\n\nvar tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: this._open.bind(this),\n            activate: this._activate.bind(this),\n            close: this._close.bind(this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", this._toggle.bind(this))\n          .on(\"keydown\", this._keydown.bind(this));\n\n        var editor = this._editor = options.editor;\n        this._popup = popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            template: new ToolTemplate({ template: EditorUtils.tableWizardButtonTemplate, title: editor.options.messages.tableWizard }),\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        var twTool = $(\"<div>\" + tableWizard.options.template.getHtml() + \"</div>\");\n        twTool.appendTo(popup.element);\n\n        if (editor.toolbar) {\n            editor.toolbar.attachToolsEvents(twTool);\n        }\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var that = this,\n            keys = kendo.keys,\n            key = e.keyCode,\n            shouldContinue = true;\n\n        if ((key == keys.DOWN && e.altKey) || key == keys.ENTER || key == keys.SPACEBAR ) {\n            that._popup.open();\n            shouldContinue = false;\n        } else if (key == keys.ESC) {\n            that._popup.close();\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        this._popup.destroy();\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        var initiallyVisible = this._popup.visible();\n\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false,\n            button;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        } else if (key == keys.TAB) {\n            button = this._popup.element.find(\".k-button\");\n\n            if (button.length > 0) {\n                changed = true;\n                button.trigger(\"focus\");\n            }\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER && initiallyVisible) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el) {\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function(table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function(editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function(row, colIndex) {\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i + \"]\");\n            if (td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while (colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while (colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for (i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if (cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if (td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n            if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell) {\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell) {\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function(row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n            if (cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if (!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if (colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect) {\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if (!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if (rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if (!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function(range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function(table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex + 1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if (adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if (!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function(td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if (rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if (td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnIndex = dom.findNodeIndex(td, true),\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function(row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if (cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function(td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if (colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if (td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if (td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if (td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if (td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if ($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan / 2);\n\n            if (colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if (rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function(td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan / 2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if (rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if (colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if (nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function(options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function() {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if (editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    initialize: function(ui, options) {\n        BlockFormatTool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes);\n        var isFormatted = this.options.finder.isFormatted(nodes, this.isTable);\n\n        if (isTable === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node) {\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\nregisterTool(\"createTable\", new InsertTableTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, popup: true, title: \"Create table\" }) }));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add column on the left\" }) }));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add column on the right\" }) }));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add row above\" }) }));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add row below\" }) }));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Delete row\" }) }));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Delete column\" }) }));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Merge Cell Right\" }) }));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Merge Cell Down\" }) }));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Split Cell\" }) }));\nregisterTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Split Cell\" }) }));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Center\"\n    })\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = deferred.resolve.bind(deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items) {\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done((function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }).bind(this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', this.onpaste.bind(this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e) {\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e) {\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth: \"0px\",\n            width: \"0px\",\n            height: \"0px\",\n            overflow: \"hidden\",\n            margin: \"0\",\n            padding: \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant: \"normal\",\n                fontWeight: \"normal\",\n                lineSpacing: \"normal\",\n                lineHeight: \"normal\",\n                textDecoration: \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\": translate\n        });\n    },\n    _caretOffset: function(range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range) {\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function(html, options) {\n        var editor = this.editor,\n            i, l, childNodes;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if (!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n        var splittable = parent != editor.body && !dom.is(parent, \"td\");\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm) {\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if (focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i + 1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function(html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if (bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function(element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            significantStyles = [],\n            isSignificantCss = function(val) {\n                var significantCss = [\"border\", \"background\", \"padding\"];\n\n                return significantCss.filter(function(cssAttr) {\n                    return val.trim().indexOf(cssAttr) === 0;\n                }).length > 0;\n            },\n            addSignificantStyles = function(val) {\n                if (isSignificantCss(val)) {\n                    significantStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n                    attributeValues.forEach(addSignificantStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (significantStyles.length > 0) {\n            element.setAttribute(\"style\", significantStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for (i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for (j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function(placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', { innerHTML: html });\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator(this.buildText.bind(this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return { text: \" \", line: \" \" };\n        } else {\n            return { text: \" \", line: \"<br/>\" };\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({ all: true });\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function(start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function(node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented()) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function() {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function(e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function() {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if (!dom.emptyNode(node)) {\n            if (node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if (dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset - count, count);\n\n            range.setStart(node, Math.max(0, offset - count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if (block.innerText === '') {\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : block;\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if (range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset - 1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function(marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if (startParent && RangeUtils.isStartOf(range, startParent)) {\n            dom.insertBefore(start, startParent);\n        }\n\n        if (endParent && RangeUtils.isEndOf(range, endParent)) {\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function(range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function() {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function() {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function() {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function(e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function(e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function(e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function(e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function(callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function(force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n        }\n    },\n\n    isTypingInProgress: function() {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function() {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function(e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function(e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Export PDF\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        extend = $.extend;\n\nvar PrintCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n\n        if (kendo.support.browser.msie) {\n            editor.document.execCommand(\"print\", false, null);\n        } else if (editor.window.print) {\n            editor.window.print();\n        }\n    }\n});\n\nextend(editorNS, {\n    PrintCommand: PrintCommand\n});\n\nregisterTool(\"print\", new Tool({ command: PrintCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Print\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if (rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if (dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        for (i = 0; styles && i < styles.length; i++) {\n            styleKey = styles[i];\n            styleValue = styles[styleKey];\n            nodeStyles.attr.style[styleKey] = styleValue;\n        }\n\n        for (i = 0; attributes && i < attributes.length; i++) {\n            attributeKey = attributes[i].nodeName;\n            attributeValue = attributes[i].nodeValue;\n            if (attributeKey === \"style\") {\n                continue;\n            } else if (attributeKey === \"class\") {\n                nodeStyles.attr.className = attributeValue;\n            } else {\n                nodeStyles.attr[attributeKey] = attributeValue;\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if (markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if (markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if (nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if (nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for (i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if (this.immutableParent(node)) {\n                continue;\n            }\n\n            while (parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for (j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if (!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while (previous) {\n                        if (!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if (previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for (j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while (next) {\n                        if (!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if (nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for (j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while (dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for (i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if (topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if (topNode) {\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while (newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Copy format\" }) }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Apply format\" }) }));\n\n})(window.kendo.jQuery);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n    var parseFloat = global.parseFloat;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n\n    var PERCENTAGE = \"%\";\n    var PIXEL = \"px\";\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n    var STRING = \"string\";\n\n    function constrain(options) {\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n    }\n\n    function getScrollBarWidth(element) {\n        if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n            return kendo.support.scrollbar();\n        }\n\n        return 0;\n    }\n\n    function calculatePercentageRatio(value, total) {\n        if (inPercentages(value)) {\n            return parseFloat(value);\n        }\n        else {\n            return ((parseFloat(value) / total) * 100);\n        }\n    }\n\n    function inPercentages(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n    }\n\n    function inPixels(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n    }\n\n    function toPercentages(value) {\n        return (parseFloat(value) + PERCENTAGE);\n    }\n\n    function toPixels(value) {\n        return (parseFloat(value) + PIXEL);\n    }\n\n    var ResizingUtils = {\n        constrain: constrain,\n        getScrollBarWidth: getScrollBarWidth,\n        calculatePercentageRatio: calculatePercentageRatio,\n        inPercentages: inPercentages,\n        inPixels: inPixels,\n        toPercentages: toPercentages,\n        toPixels: toPixels\n    };\n\n    extend(Editor, {\n        ResizingUtils: ResizingUtils\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: that.onResizeStart.bind(that),\n                resize: that.onResize.bind(that),\n                resizeend: that.onResizeEnd.bind(that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if (column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: that._onDragStart.bind(that),\n                drag: that._onDrag.bind(that),\n                dragend: that._onDragEnd.bind(that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable: function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                } else {\n                    handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                }\n\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    var ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            var factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if (node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if (hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if (image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if ($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                } else if ($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: cmd.onDialogClose.bind(cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open();\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function(table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if (lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], { id: cellProp.id || null });\n        }\n        (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n            cmd._updateCellProperties(cell, cellProp);\n        });\n\n        cmd._updateCaption(table, tableProp);\n\n        if (tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header) {\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if (headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if (headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count) {\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var cellPropToAll = cellProp.selectAllCells;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if (headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n                cmd._updateCellProperties(cell, (cellPropToAll || (r === 0 && c === 0)) ? cellProp : {});\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while (rowColumns > columns) {\n                    if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data) {\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            cellPadding: data.cellPadding || null,\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data) {\n        var style = this._getStylesData(data);\n        style.padding = data.cellPadding || null;\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data) {\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while (thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while (thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if (thead) {\n            while (thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while (tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for (i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if (!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return {\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        };\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return { textAlign: textAlign, verticalAlign: verticalAlign };\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if (cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                cellPadding: table.cellPadding,\n                alignment: tableAlignment.textAlign,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = { cells: [] };\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            cellPadding: cStyle.padding,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return { textAlign: hAlign };\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if (hAlign && vAlign) {\n            return { textAlign: hAlign, verticalAlign: vAlign };\n        }\n        if (!hAlign && vAlign) {\n            return { textAlign: \"left\", verticalAlign: vAlign };\n        }\n        if (hAlign && !vAlign) {\n            return { textAlign: hAlign, verticalAlign: \"top\" };\n        }\n        return { textAlign: \"\", verticalAlign: \"\" };\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function(options) {\n        options.insertNewTable = this.options.insertNewTable;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableWizard\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Table Wizard\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: \"<span class='#: className #' title='#: tooltip #'></span>\",\n    valueTemplate: \"<span class='k-align-group #: className #' title='#: tooltip #'></span>\"\n};\n\nvar dialogTemplate =\n    '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' +\n        '<div class=\"k-edit-form-container\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    '<li class=\"k-active\">#= messages.tableTab #</li>' +\n                    '<li>#= messages.cellTab #</li>' +\n                    '<li>#= messages.accessibilityTab #</li>' +\n                '</ul>' +\n                '<div id=\"k-table-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-width\">#= messages.width #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-width\" />' +\n                        '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-height\">#= messages.height #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-height\" />' +\n                        '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-columns\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-rows\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-bg\">#= messages.background #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-id\">#= messages.id #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-border-width\">#= messages.border #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-border-width\" />' +\n                        '<input id=\"k-editor-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-cell-properties\">' +\n\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-width\">#= messages.width #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-width\" />' +\n                        '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-height\">#= messages.height #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-height\" />' +\n                        '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-id\">#= messages.id #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' +\n                        '<input id=\"k-editor-cell-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-accessibility-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-header-rows\">#= messages.headerRows #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-header-columns\">#= messages.headerColumns #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-table-caption\" class=\"k-input-inner\" type=\"text\"/></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"><textarea id=\"k-editor-accessibility-summary\" rows=\"5\" class=\"k-input-inner k-editor-accessibility-summary\" placeholder=\"#= messages.tableSummaryPlaceholder #\"></textarea></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        '<label for=\"k-editor-cells-headers\">#= messages.associateCellsWithHeaders #</label>' +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<select id=\"k-editor-cells-headers\">' +\n                            '<option value=\"none\">#= messages.associateNone #</option>' +\n                            '<option value=\"scope\">#= messages.associateScope #</option>' +\n                            '<option value=\"ids\">#= messages.associateIds #</option>' +\n                        '</select>' +\n                    '</div>' +\n                '</div>' +\n                '</div>' +\n                '<div class=\"k-edit-buttons\">' +\n                '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-dialog-ok\"><span class=\"k-button-text\">#= messages.dialogOk #</span></button>' +\n                '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-dialog-close\"><span class=\"k-button-text\">#= messages.dialogCancel #</span></button>' +\n            '</div>' +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    open: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.title = messages.tableWizard;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._initTabStripComponent(element);\n        that._initTableViewComponents(element, tableData);\n        that._initCellViewComponents(element, tableData);\n        that._initAccessibilityViewComponents(element, tableData);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n\n    _initTabStripComponent: function(element) {\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectCellViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.cellPadding = tableView.cellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.className = tableView.className.value;\n        tableProperties.id = tableView.id.value;\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.checked;\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.checked;\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.cellPadding = cellView.cellPadding.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value;\n        cellData.id = cellView.id.value;\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapText.checked;\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value;\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value;\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value) {\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n    _initTableViewComponents: function(element, table) {\n        var that = this;\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n\n        var onColumnsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        };\n\n        var onRowsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if (numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        };\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n\n        that._initNumericTextbox(element.find(\"#k-editor-table-width\"), \"width\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-height\"), \"height\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-columns\"), \"columns\", tableProperties, tableView, { min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onColumnsNumberChange });\n        that._initNumericTextbox(element.find(\"#k-editor-table-rows\"), \"rows\", tableProperties, tableView, { min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onRowsNumberChange });\n        that._initDropDownList(element.find(\"#k-editor-table-width-type\"), \"widthUnit\", tableProperties, tableView, units);\n        that._initDropDownList(element.find(\"#k-editor-table-height-type\"), \"heightUnit\", tableProperties, tableView, units);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-spacing\"), \"cellSpacing\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-padding\"), \"cellPadding\", tableProperties, tableView);\n        that._initTableAlignmentDropDown(element.find(\"#k-editor-table-alignment\"), tableProperties);\n        that._initColorPicker(element.find(\"#k-editor-table-bg\"), \"bgColor\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-css-class\"), \"className\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-id\"), \"id\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-border-width\"), \"borderWidth\", tableProperties, tableView);\n        that._initColorPicker(element.find(\"#k-editor-border-color\"), \"borderColor\", tableProperties, tableView);\n        that._initBorderStyleDropDown(element.find(\"#k-editor-border-style\"), \"borderStyle\", tableProperties, tableView, borderStyles);\n        that._initCheckbox(element.find(\"#k-editor-collapse-borders\"), \"collapseBorders\", tableProperties, tableView);\n    },\n\n    _initCellViewComponents: function(element, table) {\n        var components = this.components;\n        var cellView = components.cellView = {};\n        table.selectedCells = table.selectedCells = table.selectedCells || [];\n        var cellProperties = table.selectedCells[0] || { borderStyle: \"\", wrapText: true };\n        this._addUnit(units, cellProperties.widthUnit);\n        this._addUnit(units, cellProperties.heightUnit);\n\n        this._initCheckbox(element.find(\"#k-editor-selectAllCells\"), \"selectAllCells\", table.tableProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-width\"), \"width\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-height\"), \"height\", cellProperties, cellView);\n        this._initDropDownList(element.find(\"#k-editor-cell-width-type\"), \"widthUnit\", cellProperties, cellView, units);\n        this._initDropDownList(element.find(\"#k-editor-cell-height-type\"), \"heightUnit\", cellProperties, cellView, units);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cell-margin\"), \"cellMargin\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cells-padding\"), \"cellPadding\", cellProperties, cellView);\n        this._initCellAlignmentDropDown(element.find(\"#k-editor-cell-alignment\"), cellProperties);\n        this._initColorPicker(element.find(\"#k-editor-cell-bg\"), \"bgColor\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-css-class\"), \"className\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-id\"), \"id\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-border-width\"), \"borderWidth\", cellProperties, cellView);\n        this._initColorPicker(element.find(\"#k-editor-cell-border-color\"), \"borderColor\", cellProperties, cellView);\n        this._initBorderStyleDropDown(element.find(\"#k-editor-cell-border-style\"), \"borderStyle\", cellProperties, cellView, borderStyles);\n        this._initCheckbox(element.find(\"#k-editor-wrap-text\"), \"wrapText\", cellProperties, cellView);\n    },\n\n    _initAccessibilityViewComponents: function(element, table) {\n        var components = this.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n\n        this._initInput(element.find(\"#k-editor-table-caption\"), \"captionContent\", tableProperties, accessibilityView);\n        this._initAccessibilityAlignmentDropDown(element.find(\"#k-editor-accessibility-alignment\"), tableProperties);\n        this._initInput(element.find(\"#k-editor-accessibility-summary\"), \"summary\", tableProperties, accessibilityView);\n        this._initAssociationDropDown(element.find(\"#k-editor-cells-headers\"), \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-rows\"), \"headerRows\", tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-columns\"), \"headerColumns\", tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTableAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var cellView = this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var accessibilityView = this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align').css('width', '110px');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property) {\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.value = data[property];\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.checked = data[property];\n        }\n    },\n\n    destroy: function() {\n        this._destroyComponents(this.components.tableView);\n        this._destroyComponents(this.components.cellView);\n        this._destroyComponents(this.components.accessibilityView);\n        this._destroyComponents(this.components);\n\n        delete this.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages) {\n        return kendo.template(dialogTemplate)({ messages: messages });\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\n"]}