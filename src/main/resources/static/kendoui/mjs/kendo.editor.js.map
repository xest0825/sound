{"version":3,"file":"kendo.editor.js","names":["kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","$","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","SELECT","SELECT_OVERLAY_SELECTOR","PLACEHOLDER_CLASS","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","data","popup","title","toHyphens","cssClass","replace","iconTextButtonTemplate","tableWizardButtonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableWizard","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","bind","_wrapTextarea","wrapper","find","id","attr","addClass","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","style","height","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","defaultValue","trim","deserializedRoot","Serializer","htmlToDom","deserialization","getAllComments","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","_ariaLabel","resize","notify","setOptions","_initializePlaceholder","_togglePlaceholder","show","body","$body","placeholder","toggleClass","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizable","isPlainObject","draggableElement","insertAfter","kendoResizable","start","currentTarget","initialSize","last","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","ios","getKendoResizable","draggable","ignore","_initializeElementResizing","ElementResizingFactory","current","create","_showElementResizeHandlesProxy","_showElementResizeHandles","_destroyElementResizing","elementResizing","destroy","unbind","parentNode","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","width","h","editorWrap","editArea","css","appendTo","_createContentElement","stylesheets","iframe","wnd","doc","lang","specifiedDomain","domain","domainScript","src","hide","messages","editAreaTitle","frameBorder","tabIndex","location","hostname","contentWindow","contentDocument","one","decorateFrom","getElementsByTagName","getAttribute","open","write","isRtl","edge","chrome","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","NS","_handlers","t","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","parentElement","target","nodeName","_cachedHeight","restoreHeight","range","keyCode","BACKSPACE","DELETE","F10","preventPopupHide","preventDefault","LEFT","RIGHT","left","container","offset","next","nextChar","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","createRange","selectNode","focusin","hasAttribute","focusout","active","toolbarContainerElement","get","contains","focused","removeClass","$head","head","immutables","Immutables","parents","stopPropagation","gecko","which","is","tagName","toolsFromShortcut","o","changesContent","refresh","_destroyResizings","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","emptyFolder","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","units","cellSpacing","cellPadding","cellMargin","alignment","background","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","custom","serialization","entities","semantic","scripts","optimizeTags","keepEOL","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","msie","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","domToXhtml","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","scrollHeight","clientHeight","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","Error","toolById","async","change","managesUndoRedo","plugin","Tool","initialize","unselectable","commandArguments","noop","UndoTool","nodes","key","ctrl","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","items","len","obj","empty","nonListBlockElements","blockElements","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","parent","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","el","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isBr","list","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","wrap","unwrap","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","each","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","filter","invert","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","removeAttr","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","children","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tag","tagMap","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","hasClass","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","DropDownList","SelectBox","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","fillMode","rounded","selectBox","view","dataSource","select","decorate","registerPrefix","registerValues","values","roundedValues","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","editableTextNodes","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","immutablesContext","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","toolsToBeUpdated","serialized","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","GenericCommand","endRestorePoint","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","basic","links","lists","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","advanced","fonts","colors","formatPainter","overflowFlaseTools","prepend","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","kendoPopup","anchor","copyAnchorStyles","activate","focusOverflowPopup","isResizable","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","_toolName","description","tooltip","inheritText","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_getWindowWidth","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","shift","alt","_nativeTools","currentTool","nativeTools","toolElement","groupName","newGroupName","group","toolConfig","groupPosition","endGroup","startGroup","not","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","editorTools","focusableItems","focusElement","currentContainer","move","constrain","ESC","ENTER","SPACEBAR","_executeToolCommand","button","toolname","toCamelCase","lastIndexOf","_immutablesContext","_updateImmutablesState","uiElement","trackImmutables","display","uiData","groupUi","_resize","containerWidth","toolbarWindow","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","eq","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","a","detach","groupWidth","ViewHtmlCommand","cmd","dialog","center","FormatCommand","FormatTool","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","initOptions","dataTextField","dataValueField","highlightFirst","widget","newRange","ColorTool","palette","_widget","ColorPicker","closeOnSelect","views","preview","toolIcon","storedRange","_inputFocused","picker","sender","_popup","_value","toCssRgba","fontWeight","fontStyle","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","_initialText","img","_close","_apply","_keydown","linkUrl","_dialog","textInput","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","autoWidth","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","showBrowser","applied","isIE","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","InsertHtmlTool","_selectBox","selectbox","initialValue","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","displayName","unshift","valueTemplate","_exec","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","Array","insertedTable","PopupTool","popupTemplate","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","twTool","InsertTableTool","cols","cellWidth","cellHeight","firstCell","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_setTableSize","_valid","status","initiallyVisible","selectedRows","selectedColumns","changed","tableSize","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","after","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","applicable","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","global","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","lowerBound","upperBound","getScrollBarWidth","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","WIDTH","HEIGHT","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","tableProperties","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","cellPropToAll","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","tStyle","captionClone","tableAlignment","_getAlignment","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","tableData","closeHandler","collectDialogValues","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","headerColumnsNumeric","currentNumberOfColumnsHeaders","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initBorderStyleDropDown","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initAssociationDropDown","valuePrimitive","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","optionLabel","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents","__meta__","category","depends","features"],"sources":["kendo.editor.js"],"mappings":"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","sourcesContent":["import './kendo.combobox.js';\nimport './kendo.dropdownlist.js';\nimport './kendo.resizable.js';\nimport './kendo.window.js';\nimport './kendo.colorpicker.js';\nimport './kendo.imagebrowser.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.core.js';\nimport './kendo.filebrowser.js';\nimport './kendo.draganddrop.js';\nimport './kendo.tabstrip.js';\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n\n(function($,undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys;\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS = \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    // options can be: template (as string), cssClass, title, defaultValue\n    var ToolTemplate = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        getHtml: function() {\n            var options = this.options;\n            return kendo.template(options.template, { useWithBlock: false })(options);\n        }\n    });\n\n    var EditorUtils = {\n        editorWrapperTemplate: () =>\n            '<table cellspacing=\"0\" cellpadding=\"0\" class=\"k-widget k-editor\" role=\"presentation\">' +\n                '<tbody>' +\n                    '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\"></ul></td></tr>' +\n                    '<tr><td class=\"k-editable-area k-editor-content\"></td></tr>' +\n                '</tbody>' +\n            '</table>',\n\n        buttonTemplate: (data) =>\n            `<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-tool\" ${ data.popup ? \"data-popup\" : \"\" } title=\"${ data.title }\" aria-label=\"${ data.title }\">` +\n                `<span class=\"${ \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\")) }\"></span>` +\n                `<span class=\"k-tool-text k-button-text\">${ data.title }</span>` +\n            '</button>',\n\n        iconTextButtonTemplate: (data) =>\n            `<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-i-import k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" ${ data.popup ? \"data-popup\" : \"\" } title=\"${ data.title }\" aria-label=\"${ data.title }\">` +\n                `<span class=\"k-button-icon ${ \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\")) }\"></span>` +\n                `<span class=\"k-button-text\">${ data.title }</span>` +\n            `</button>`,\n\n        tableWizardButtonTemplate: (data) =>\n            `<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-tool k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\" ${ data.popup ? \"data-popup\" : \"\" } title=\"${ data.title }\" aria-label=\"${ data.title }\">` +\n                `<span class=\"${ \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\")) }\"></span>` +\n                `<span class=\"k-tool-text\">${ data.title }</span>` +\n            `</button>`,\n\n        colorPickerTemplate: (data) =>\n            `<input class=\"k-colorpicker k-icon k-i-${ data.cssClass.replace(\"k-\", \"\") }\" />`,\n\n        comboBoxTemplate: (data) =>\n            `<select title=\"${ data.title }\" aria-label=\"${ data.title }\" class=\"${ data.cssClass }\"></select>`,\n\n        dropDownListTemplate: (data) =>\n            `<span class=\"k-editor-dropdown\"><select title=\"${ data.title }\" aria-label=\"${ data.title }\" class=\"${ data.cssClass }\"></select></span>`,\n\n        separatorTemplate: () =>\n            '<span class=\"k-separator\"></span>',\n\n        overflowAnchorTemplate: (data) =>\n            `<button type=\"button\" tabindex=\"0\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-tool k-overflow-anchor\" data-popup` +\n                ` title=\"${ data.title }\" aria-label=\"${ data.title }\" aria-haspopup=\"true\" aria-expanded=\"false\">` +\n                `<span class=\"k-icon k-i-more-vertical k-button-icon\"></span>` +\n            `</button>`,\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function(name) {\n            var toolCssClassNames = {\n\n                superscript: \"sup-script\",\n                subscript: \"sub-script\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent-increase\",\n                outdent: \"indent-decrease\",\n                createLink: \"link-horizontal\",\n                unlink: \"unlink-horizontal\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"html\",\n                foreColor: \"foreground-color\",\n                backColor: \"paint\",\n                createTable: \"table-insert\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableWizard: \"table-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-left\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-right\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n            if (cssClass) {\n                return cssClass;\n            }\n            return name;\n        },\n\n        registerTool: function(toolName, tool) {\n            var toolOptions = tool.options;\n            if (toolOptions && toolOptions.template) {\n                toolOptions.template.options.cssClass = \"k-\" + EditorUtils.getToolCssClass(toolName);\n            }\n\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete \"{0}\"?',\n        overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Ok\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableTab: \"Table\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Accessibility\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        background: \"Background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Select All Cells\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n    var toolGroups = {\n        basic: [ \"bold\", \"italic\", \"underline\" ],\n        alignment: [ \"justifyLeft\", \"justifyCenter\", \"justifyRight\" ],\n        lists: [ \"insertUnorderedList\", \"insertOrderedList\" ],\n        indenting: [ \"indent\", \"outdent\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ],\n        links: [ \"createLink\", \"unlink\" ],\n        tables: [ \"tableWizard\", \"createTable\", \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\", \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\", \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ]\n    };\n\n    var Editor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                value,\n                editorNS = kendo.ui.editor,\n                toolbarContainer,\n                toolbarOptions,\n                type, comments;\n            var domElement;\n            var dom = editorNS.Dom;\n\n            /* suppress initialization in devices w/o proper contenteditable support */\n            if (!supportedContentEditable) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n            that.options.tools = that.options.tools.slice();\n\n            element = that.element;\n            domElement = element[0];\n\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n            );\n\n            toolbarOptions = extend({}, that.options);\n            toolbarOptions.editor = that;\n\n            if (type == \"textarea\") {\n                that._wrapTextarea();\n\n                toolbarContainer = that.wrapper.find(\".k-editor-toolbar\");\n\n                if (domElement.id) {\n                    toolbarContainer.attr(\"aria-controls\", domElement.id);\n                }\n            } else {\n                that.element.attr(\"contenteditable\", true).addClass(\"k-widget k-editor k-editor-inline\");\n\n                toolbarOptions.popup = true;\n\n                toolbarContainer = $('<ul class=\"k-toolbar k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n            }\n\n            that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n\n            that.toolbar.bindTo(that);\n\n            if (type == \"textarea\") {\n                setTimeout(function() {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n\n            that._resizable();\n            that._initializeContentElement(that);\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n\n            that.clipboard = new editorNS.Clipboard(this);\n\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if (!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n\n            // using $.proxy here will break #5337\n            this._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._initializeImmutables();\n\n            if (type == \"textarea\") {\n                that._ariaLabel(that.wrapper.find(\"iframe\"));\n            }\n\n            that.toolbar.resize();\n\n            kendo.notify(that);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n            if (options.tools) {\n                editor.toolbar.bindTo(editor);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _resizable: function() {\n            var resizable = this.options.resizable;\n            var isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n\n            if (isResizable && this.textarea) {\n                var draggableElement = $(\"<div class='k-resize-handle'><span class='k-icon k-i-arrow-45-down-right'></span></div>\")\n                    .insertAfter(this.textarea);\n\n                this.wrapper.addClass('k-resizable');\n\n                this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                    draggableElement: draggableElement,\n                    start: function(e) {\n                        var editor = this.editor = $(e.currentTarget).closest(\".k-editor\");\n                        this.initialSize = editor.height();\n                        editor.find(\"td\").last().append(\"<div class='k-overlay' />\");\n                    },\n                    resize: function(e) {\n                        var delta = e.y.initialDelta;\n                        var newSize = this.initialSize + delta;\n                        var min = this.options.min || 0;\n                        var max = this.options.max || Infinity;\n\n                        newSize = Math.min(max, Math.max(min, newSize));\n\n                        this.editor.height(newSize);\n                    },\n                    resizeend: function() {\n                        this.editor.find(\".k-overlay\").remove();\n                        this.editor = null;\n                    }\n                }));\n\n                if (kendo.support.mobileOS.ios) {\n                    var resizableWidget = this.wrapper.getKendoResizable();\n                    resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                }\n            }\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate(),\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang = \"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = \"<script>document.domain=\\\"\" + domain + \"\\\"</script>\";\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if (!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            $(iframe).one(\"load\", function() {\n                editor.toolbar.decorateFrom(doc.body);\n            });\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                \"<style>\" +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href) {\n                    return \"<link rel='stylesheet' href='\" + href + \"'>\";\n                }).join(\"\") +\n                \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if (textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function() {\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                editor.toolbar.decorateFrom(editor.body);\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n            editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch (e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e) {\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e) {\n                    var restoreHeight = function() {\n                        if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function() {\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function(e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        // Handling with timeout to avoid the default IE menu\n                        setTimeout(editor.toolbar.focus.bind(editor.toolbar), 100);\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.toolbar.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function() {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function(e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function() {\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function(e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                },\n                \"focusin\": function() {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-active\");\n                        editor.toolbar.show();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = toolbar.window.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !toolbar.focused() && !toolbar.preventPopupHide) {\n                            $(body).removeClass(\"k-active\");\n                            toolbar.hide();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = \"<style id='\" + PLACEHOLDER_TAG_ID + \"'>.\" +\n                        PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initializeImmutables: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables) {\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _mousedown: function(e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function() {\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _runPostContentKeyCommands: function(e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({ range: range });\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            formats: {},\n            encoded: true,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false,\n                optimizeTags: false,\n                keepEOL: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\", value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [].concat.call(\n                [\"formatting\"],\n                toolGroups.basic,\n                [\"undo\", \"redo\"],\n                toolGroups.alignment,\n                toolGroups.formatPainter,\n                toolGroups.lists,\n                toolGroups.indenting,\n                toolGroups.links,\n                [\"insertImage\"],\n                toolGroups.tables\n            )\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            editor._destroyUploadWidget();\n\n            editor._destroyResizings();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _focusOutside: function() {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input style='position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0' />\").appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _destroyUploadWidget: function() {\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        state: function(toolName) {\n            var tool = Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        value: function(html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined$1) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n\n            this.toolbar.refreshTools();\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if (!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if (activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        focus: function() {\n            this.restoreSelection();\n        },\n\n        update: function(value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        encodedValue: function() {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        createRange: function(document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        getSelection: function() {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        getRange: function() {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        _containsRange: function(range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _deleteSavedRange: function() {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        paste: function(html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        exec: function(name, params) {\n            var that = this;\n            var command = null;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            name = name.toLowerCase();\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.toolbar.toolById(name);\n\n            if (!tool) {\n                // execute non-toolbar tool\n                for (var id in Editor.defaultTools) {\n                    if (id.toLowerCase() == name) {\n                        tool = Editor.defaultTools[id];\n                        break;\n                    }\n                }\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = that._selectionChange.bind(that);\n                        return;\n                    }\n                }\n\n                that._selectionChange();\n            }\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        initialize: function(ui, options) {\n            ui.attr({ unselectable: \"on\", title: options.title, \"aria-label\": options.title });\n        },\n\n        command: function(commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function(editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command: $.noop,\n        update: function(ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name;\n\n            switch (name) {\n                case \"undo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    ui.attr(\"disabled\", !undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Undo\" }) }));\n    EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Redo\" }) }));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if (browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            ToolTemplate: ToolTemplate,\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n    nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\nvar normalize = function(node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>\\&]/g,\n    entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function(rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function() {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function(color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function(x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function(value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&' + entity + ';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if (Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br') {\n                return false;\n            } else if (Dom.insignificant(child)) {\n                return false;\n            } else if (Dom.emptyTextNode(child)) {\n                return false;\n            } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                return false;\n            }\n\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function(node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function(node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allowsTextContent: function(node) {\n        var result = true;\n\n        nonEmptyNonTextContentElements.every(function(name) {\n            if (Dom.is(node, name)) {\n                result = false;\n                return false;\n            } else {\n                return true;\n            }\n        });\n\n        return result;\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while (child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function(node) {\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function(node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function(target, offsetParent) {\n        var result = { top: target.offsetTop, left: target.offsetLeft };\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function(parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function(newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function(newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function(node) {\n        if (node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function(parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if (typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)) {\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function(node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function(node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function(referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function(node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function(node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function(el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    create: function(document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function(document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function(element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function(origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function() {\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function(node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function(node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n            }\n\n            node.style[key] = \"\";\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function() {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if (closest && editable && $.contains(closest, editable)) {\n            closest = editable;\n        } else if (!closest && editable) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function(node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function(table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function(table, colAttr) {\n        $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function(table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                var cell = cells[cellIndex];\n\n                if (cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if (cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n            }\n        }\n    },\n\n    _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if (!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if (table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for (i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if (currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for (i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if (number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while (row && length && this.is(row.cells[0], \"th\")) {\n                for (j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if (!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if (row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if (dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root) {\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if (isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function(node) { mapStart(node, \"iframe\"); },\n                end: function() { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function(node) { mapStart(node, \"script\"); },\n                end: function() { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                canOptimize: true,\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    // Apply the rest of the inline styles back\n                    var inlineStyles = [];\n                    var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                    for (let i = 0; i < style.length; i++) {\n                        var inlineStyle = style[i];\n\n                        if (ignoredStylePrefixes.filter(prop => inlineStyle.startsWith(prop)).length <= 0) {\n                            inlineStyles.push(`${inlineStyle}: ${style[inlineStyle]}`);\n                        }\n                    }\n\n                    if (inlineStyles.length) {\n                        font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"b\"); },\n                end: function() { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"i\"); },\n                end: function() { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"strong\"); },\n                end: function() { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"em\"); },\n                end: function() { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function(node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                    if (style) {\n                        styleObj.value = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function() { result.push('</span>'); }\n            },\n            font: {\n                canOptimize: true,\n                semantic: false,\n                start: function(node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function() {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined$1 });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined$1 });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while (!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (mapper.canOptimize &&\n                        options.optimizeTags &&\n                        shouldOptimize(node)) {\n                            children(node, false, mapper.skipEncoding);\n                        return;\n                    }\n\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if (isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        if (options.keepEOL) {\n                            value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                        } else {\n                            value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                        }\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function shouldOptimize(node) {\n            return node.attributes.length === 0;\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    DropDownList = kendo.ui.DropDownList,\n    dom = kendo.ui.editor.Dom;\n\nvar SelectBox = DropDownList.extend({\n    init: function(element, options) {\n        var that = this;\n\n        DropDownList.fn.init.call(that, element, options);\n\n        // overlay drop-down with popout for snappier interaction\n        if (kendo.support.mobileOS.ios) {\n            this._initSelectOverlay();\n            this.bind(\"dataBound\", this._initSelectOverlay.bind(this));\n        }\n\n        that.text(that.options.title);\n\n        that.element.attr(\"title\", that.options.title);\n        that.wrapper.attr(\"title\", that.options.title);\n\n        that.bind(\"open\", function() {\n            if (that.options.autoSize) {\n                var list = that.list,\n                    listWidth;\n\n                list.css({\n                        whiteSpace: \"nowrap\",\n                        width: \"auto\"\n                    });\n\n                listWidth = list.width();\n\n                if (listWidth > 0) {\n                    listWidth += 20;\n                } else {\n                    listWidth = that._listWidth;\n                }\n\n                list.css(\"width\", listWidth + kendo.support.scrollbar());\n\n                that._listWidth = listWidth;\n            }\n        });\n    },\n    options: {\n        name: \"SelectBox\",\n        index: -1,\n        size: \"medium\",\n        fillMode: \"solid\",\n        rounded: \"medium\"\n    },\n\n    _initSelectOverlay: function() {\n        var selectBox = this;\n        var value = selectBox.value();\n        var view = this.dataSource.view();\n        var item;\n        var html = \"\";\n        var encode = kendo.htmlEncode;\n\n        for (var i = 0; i < view.length; i++) {\n            item = view[i];\n\n            html += \"<option value='\" + encode(item.value) + \"'\";\n\n            if (item.value == value) {\n                html += \" selected\";\n            }\n\n            html += \">\" + encode(item.text) + \"</option>\";\n        }\n\n        var select = $(\"<select class='k-select-overlay'>\" + html + \"</select>\");\n        var wrapper = $(this.element).closest(\".k-dropdownlist\");\n\n        wrapper.next(\".k-select-overlay\").remove();\n\n        select.insertAfter(wrapper);\n\n        select.on(\"change\", function() {\n            selectBox.value(this.value);\n            selectBox.trigger(\"change\");\n        });\n    },\n\n    value: function(value) {\n        var that = this,\n            result = DropDownList.fn.value.call(that, value);\n\n        if (value === undefined$1) {\n            return result;\n        }\n\n        if (!DropDownList.fn.value.call(that)) {\n           that.text(that.options.title);\n        }\n    },\n\n    decorate: function(body) {\n        var that = this,\n            dataSource = that.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            that.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        for (i = 0; i < items.length; i++) {\n            tag = items[i].tag || \"span\";\n            className = items[i].className;\n\n            style = dom.inlineStyle(body, tag, { className: className });\n\n            style = style.replace(/\"/g, \"'\");\n\n            items[i].style = style + \";display:inline-block\";\n        }\n\n        dataSource.trigger(\"change\");\n    }\n});\n\n\nkendo.ui.plugin(SelectBox);\nkendo.ui.editor.SelectBox = SelectBox;\n\nkendo.cssProperties.registerPrefix(\"SelectBox\", \"k-picker-\");\n\nkendo.cssProperties.registerValues(\"SelectBox\", [{\n    prop: \"rounded\",\n    values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n}]);\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if (!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function(node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function(node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function(node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function(node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function(toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function() {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function(node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function() {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function() {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function() {\n        return !!this._next;\n    },\n\n    next: function() {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function(callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function(originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function() {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function() {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function() {\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function(range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function() {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function() {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function() {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function() {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function() {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function(range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function(range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function(range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function(range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        var allNodes = new RangeEnumerator(range).enumerate(),\n            result = allNodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n\n        return result;\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n            result = [];\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n            result = nodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n        }\n\n        return result;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function(node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function(range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function(range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function(range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        template = kendo.template,\n        RangeUtils = Editor.RangeUtils,\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n        toolsToBeUpdated = [\n            \"bold\",\n            \"italic\",\n            \"underline\",\n            \"strikethrough\",\n            \"superscript\",\n            \"subscript\",\n            \"forecolor\",\n            \"backcolor\",\n            \"fontname\",\n            \"fontsize\",\n            \"createlink\",\n            \"unlink\",\n            \"autolink\",\n            \"addcolumnleft\",\n            \"addcolumnright\",\n            \"addrowabove\",\n            \"addrowbelow\",\n            \"deleterow\",\n            \"deletecolumn\",\n            \"mergecells\",\n            \"formatting\",\n            \"cleanformatting\" ],\n        IMMUTABALE = \"k-immutable\",\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n    var rootCondition = function(node) {\n        return $(node).is(\"body,.k-editor\");\n    };\n\n    var immutable = function(node) {\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n    };\n\n    var immutableParent = function(node) {\n        return dom.closestBy(node, immutable, rootCondition);\n    };\n\n    var expandImmutablesIn = function(range) {\n        var startImmutableParent = immutableParent(range.startContainer);\n        var endImmutableParent = immutableParent(range.endContainer);\n\n        if (startImmutableParent || endImmutableParent) {\n            if (startImmutableParent) {\n                range.setStartBefore(startImmutableParent);\n            }\n            if (endImmutableParent) {\n                range.setEndAfter(endImmutableParent);\n            }\n        }\n    };\n\n    var immutablesContext = function(range) {\n        if (immutableParent(range.commonAncestorContainer)) {\n            return true;\n        } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n            var editableNodes = RangeUtils.editableTextNodes(range);\n            if (editableNodes.length === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var randomId = function(length) {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = length || 10; i > 0; --i) {\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n        }\n        return result;\n    };\n\n    var removeImmutables = function(root) {\n        var serializedImmutables = { empty: true }, nodeName, id, serialized;\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n            nodeName = dom.name(node);\n            id = randomId();\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n            serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n            serializedImmutables.empty = false;\n            $(node).replaceWith(serialized);\n        });\n\n        return serializedImmutables;\n    };\n\n    var restoreImmutables = function(root, serializedImmutables) {\n        var id, immutable;\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n            id = node.getAttribute(IMMUTABALE);\n            immutable = serializedImmutables[id];\n            $(node).replaceWith(immutable.node);\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n            }\n        });\n    };\n\n    var deletingKey = function(keyCode) {\n        var keys = kendo.keys;\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n    };\n    var updateToolOptions = function(tool) {\n        var options = tool ? tool.options : undefined$1;\n        if (options && options.finder) {\n            options.finder._initOptions({ immutables: true });\n        }\n    };\n\n    var Immutables = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.serializedImmutables = {};\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n            var tools = editor.toolbar.tools;\n            updateToolOptions(tools.justifyLeft);\n            updateToolOptions(tools.justifyCenter);\n            updateToolOptions(tools.justifyRight);\n            updateToolOptions(tools.justifyFull);\n        },\n\n        serialize: function(node) {\n            var result = this._toHtml(node),\n                id;\n\n            if (result.indexOf(IMMUTABALE) === -1) {\n                id = this.randomId();\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n            } else {\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n            }\n\n            this.serializedImmutables[id] = node;\n            return result;\n        },\n\n        _toHtml: function(node) {\n            var serialization = this.options.serialization;\n            var serializationType = typeof serialization;\n            var nodeName;\n\n            switch (serializationType) {\n                case \"string\":\n                    return template(serialization)(node);\n                case \"function\":\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\n            }\n        },\n\n        deserialize: function(node) {\n            var that = this;\n            var deserialization = this.options.deserialization;\n\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                var id = this.getAttribute(IMMUTABALE);\n                var immutable = that.serializedImmutables[id];\n                if (kendo.isFunction(deserialization)) {\n                    deserialization(this, immutable);\n                }\n                $(this).replaceWith(immutable);\n            });\n\n            that.serializedImmutables = {};\n        },\n\n        randomId: function(length) {\n            return randomId(length);\n        },\n\n        keydown: function(e, range) {\n            var isDeleting = deletingKey(e.keyCode);\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                (!isDeleting && this._cancelTyping(e, range));\n\n            if (shouldCancelEvent) {\n                e.preventDefault();\n                return true;\n            }\n        },\n\n        _cancelTyping: function(e, range) {\n            var editor = this.editor;\n            var keyboard = editor.keyboard;\n\n            return range.collapsed && !keyboard.typingInProgress &&\n                keyboard.isTypingKey(e) && immutablesContext(range);\n        },\n\n        _cancelDeleting: function(e, range) {\n            var keys = kendo.keys;\n            var backspace = e.keyCode === keys.BACKSPACE;\n            var del = e.keyCode == keys.DELETE;\n\n            if (!backspace && !del) {\n                return false;\n            }\n            var cancelDeleting = false;\n            if (range.collapsed) {\n                if (immutablesContext(range)) {\n                    return true;\n                }\n                var immutable = this.nextImmutable(range, del);\n                if (immutable && backspace) {\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                    if (closestSelectionLi) {\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                            return cancelDeleting;\n                        }\n                    }\n                }\n                if (immutable && !dom.tableCell(immutable)) {\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\n                            immutable = immutable.parentNode;\n                        }\n                        if (dom.tableCell(immutable)) {\n                            return cancelDeleting;\n                        }\n                        this._removeImmutable(immutable, range);\n                    }\n                    cancelDeleting = true;\n                }\n            }\n            return cancelDeleting;\n        },\n\n        nextImmutable: function(range, forwards) {\n            var commonContainer = range.commonAncestorContainer;\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                var next = this._nextNode(commonContainer, forwards);\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                        next = next.children[forwards ? 0 : next.children.length - 1];\n                    }\n                }\n                return immutableParent(next);\n            }\n        },\n\n        _removeImmutable: function(immutable, range) {\n            var editor = this.editor;\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n            dom.remove(immutable);\n            Editor._finishUpdate(editor, startRestorePoint);\n        },\n\n        _nextNode: function(node, forwards) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n            var current = node, next;\n            while (current && !next) {\n                next = current[sibling];\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                    current = next;\n                    next = current[sibling];\n                }\n                if (!next) {\n                    current = current.parentNode;\n                }\n            }\n            return next;\n        }\n    });\n\n    Immutables.immutable = immutable;\n    Immutables.immutableParent = immutableParent;\n    Immutables.expandImmutablesIn = expandImmutablesIn;\n    Immutables.immutablesContext = immutablesContext;\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\n    Immutables.removeImmutables = removeImmutables;\n    Immutables.restoreImmutables = restoreImmutables;\n\n    Editor.Immutables = Immutables;\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor.toolbar.refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function() {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function(expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function(range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function() {\n        this.exec();\n    },\n\n    createDialog: function(content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\").toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n(function($,undefined$1) {\n    var kendo = window.kendo;\n    var ui = kendo.ui;\n    var editorNS = ui.editor;\n    var Widget = ui.Widget;\n    var extend = $.extend;\n    var keys = kendo.keys;\n    var NS = \".kendoEditor\";\n    var EditorUtils = editorNS.EditorUtils;\n    var ToolTemplate = editorNS.ToolTemplate;\n    var Tool = editorNS.Tool;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var OVERFLOWANCHOR = \"overflowAnchor\";\n\n    var focusable = \".k-tool-group:visible .k-tool:not(.k-disabled):not([disabled]),\" +\n                    \".k-tool.k-overflow-anchor:visible,\" +\n                    \".k-tool-group:visible .k-colorpicker:not(input),\" +\n                    \".k-tool-group:visible .k-selectbox,\" +\n                    \".k-tool-group:visible .k-dropdownlist,\" +\n                    \".k-tool-group:visible .k-combobox .k-input-inner\";\n\n    var toolNamesByCssClass = {\n        \"k-i-sup-script\": \"superscript\",\n        \"k-i-sub-script\": \"subscript\",\n        \"k-i-align-left\": \"justifyLeft\",\n        \"k-i-align-center\": \"justifyCenter\",\n        \"k-i-align-right\": \"justifyRight\",\n        \"k-i-align-justify\": \"justifyFull\",\n        \"k-i-list-unordered\": \"insertUnorderedList\",\n        \"k-i-list-ordered\": \"insertOrderedList\",\n        \"k-i-list-roman-upper\": \"insertUpperRomanList\",\n        \"k-i-list-roman-lower\": \"insertLowerRomanList\",\n        \"k-i-import\": \"import\",\n        \"k-i-indent-increase\": \"indent\",\n        \"k-i-indent-decrease\": \"outdent\",\n        \"k-i-link-horizontal\": \"createLink\",\n        \"k-i-unlink-horizontal\": \"unlink\",\n        \"k-i-image\": \"insertImage\",\n        \"k-i-file-add\": \"insertFile\",\n        \"k-i-html\": \"viewHtml\",\n        \"k-i-foreground-color\": \"foreColor\",\n        \"k-i-paint\": \"backColor\",\n        \"k-i-table-insert\": \"createTable\",\n        \"k-i-table-column-insert-left\": \"addColumnLeft\",\n        \"k-i-table-column-insert-right\": \"addColumnRight\",\n        \"k-i-table-row-insert-above\": \"addRowAbove\",\n        \"k-i-table-row-insert-below\": \"addRowBelow\",\n        \"k-i-table-row-delete\": \"deleteRow\",\n        \"k-i-table-column-delete\": \"deleteColumn\",\n        \"k-i-table-properties\": \"tableWizard\",\n        \"k-i-table-wizard\": \"tableWizardInsert\",\n        \"k-i-table-position-left\": \"tableAlignLeft\",\n        \"k-i-table-position-center\": \"tableAlignCenter\",\n        \"k-i-table-position-right\": \"tableAlignRight\",\n        \"k-i-clear-css\": \"cleanFormatting\",\n        \"k-i-cells-merge-horizontally\": \"mergeCellsHorizontally\",\n        \"k-i-cells-merge-vertically\": \"mergeCellsVertically\",\n        \"k-i-cell-split-horizontally\": \"splitCellHorizontally\",\n        \"k-i-cell-split-vertically\": \"splitCellVertically\",\n        \"k-i-copy-format\": \"copyFormat\",\n        \"k-i-apply-format\": \"applyFormat\",\n        \".k-i-undo\": \"undo\",\n        \"k-i-redo\": \"redo\",\n\n    };\n\n    var OverflowAnchorTool = Tool.extend({\n        initialize: function(ui, options) {\n            var toolbar = options.editor.toolbar;\n\n            ui.attr(\"aria-controls\", options.editor.element.attr(\"id\"))\n                .on(\"click\", (function() {\n                    this.overflowPopup.toggle();\n                }).bind(toolbar));\n        },\n\n        options: {\n            name: OVERFLOWANCHOR\n        },\n\n        command: $.noop,\n        update: $.noop,\n        destroy: $.noop\n\n    });\n\n    EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n        key: \"\",\n        ctrl: true,\n        template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n    }));\n\n    var Toolbar = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = extend({}, options, { name: \"EditorToolbar\" });\n\n            Widget.fn.init.call(that, element, options);\n\n            if (options.popup) {\n                that._initPopup();\n            }\n\n            if (options.resizable && options.resizable.toolbar) {\n                that._resizeHandler = kendo.onResize(function() {\n                    that.resize(true);\n                });\n\n                that.element.addClass(\"k-toolbar-resizable\");\n            }\n        },\n\n        events: [\n            \"execute\"\n        ],\n\n        groups: {\n            basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n            undo: [\"undo\", \"redo\"],\n            scripts: [\"subscript\", \"superscript\" ],\n            alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n            links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n            lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\", \"indent\", \"outdent\"],\n            tablesInsert: [\"createTable\"],\n            tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n            tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n            tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n            advanced: [ \"viewHtml\", \"cleanFormatting\", \"print\", \"pdf\", \"exportAs\", \"import\"],\n            fonts: [ \"fontName\", \"fontSize\" ],\n            colors: [ \"foreColor\", \"backColor\" ],\n            formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n        },\n\n        overflowFlaseTools: [ \"formatting\", \"fontName\", \"fontSize\", \"foreColor\", \"backColor\", \"insertHtml\" ],\n\n        _initPopup: function() {\n            var that = this;\n            this.window = $(this.element)\n                .wrap(\"<div class='editorToolbarWindow' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'><span class='k-icon k-i-handler-drag'></span></span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e) {\n                    if (!$(e.target).is(\".k-icon\")) {\n                        that.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function() {\n                    that.options.editor.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _toggleOverflowStyles: function(element, show) {\n            element\n                .find(\"> li\").toggleClass(\"k-item\", show)\n                .find(\".k-tool:not(.k-disabled), .k-overflow-button\").toggleClass(\"k-overflow-button\", show);\n        },\n\n        _initOverflowPopup: function(ui) {\n            var that = this;\n            var popupTemplate = \"<ul class='k-editor-overflow-popup k-overflow-container k-list-container'></ul>\";\n\n            that.overflowPopup = $(popupTemplate).appendTo(\"body\").kendoPopup({\n                anchor: ui,\n                origin: kendo.support.isRtl(that.element) ? \"bottom left\" : \"bottom right\",\n                position: kendo.support.isRtl(that.element) ? \"top left\" : \"top right\",\n                copyAnchorStyles: false,\n                open: function(e) {\n                    if (this.element.is(\":empty\")) {\n                        e.preventDefault();\n                    }\n\n                    that._toggleOverflowStyles(this.element, true);\n                    ui.attr(\"aria-expanded\", true);\n                },\n                close: function() {\n                    ui.attr(\"aria-expanded\", false);\n                },\n                activate: that.focusOverflowPopup.bind(that)\n            }).data(\"kendoPopup\");\n        },\n\n        items: function() {\n            var isResizable = this.options.resizable && this.options.resizable.toolbar,\n                popup, result;\n\n            result = this.element.children().find(\"> *, select\");\n\n            if (isResizable) {\n                popup = this.overflowPopup;\n                result = result.add(popup.element.children().find(\"> *\"));\n            }\n\n            return result;\n        },\n\n        focused: function() {\n            var active = kendo._activeElement(),\n                popup = this.window,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        toolById: function(name) {\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (id.toLowerCase() == name) {\n                    return tools[id];\n                }\n            }\n        },\n\n        toolGroupFor: function(toolName) {\n            var i, groups = this.groups;\n\n            if (this.isCustomTool(toolName)) {\n                return \"custom\";\n            }\n\n            for (i in groups) {\n                if ($.inArray(toolName, groups[i]) >= 0) {\n                    return i;\n                }\n            }\n        },\n\n        bindTo: function(editor) {\n            var that = this,\n                window = that.window;\n\n            // detach from editor that was previously listened to\n            if (that._editor) {\n                that._editor.unbind(\"select\", that.resize.bind(that));\n            }\n\n            that._editor = editor;\n\n            if (that.options.resizable && that.options.resizable.toolbar) {\n                editor.options.tools.push(OVERFLOWANCHOR);\n            }\n\n            // re-initialize the tools\n            that.tools = that.expandTools(editor.options.tools);\n            that.render();\n\n            that.element.find(\".k-combobox .k-input-inner\").on(\"keydown\", function(e) {\n                var combobox = $(this).closest(\".k-combobox\").data(\"kendoComboBox\"),\n                    key = e.keyCode;\n\n                if (key == keys.RIGHT || key == keys.LEFT) {\n                    combobox.close();\n                } else if (key == keys.DOWN) {\n                    if (!combobox.dropDown.isOpened()) {\n                        e.stopImmediatePropagation();\n                        combobox.open();\n                    }\n                }\n            });\n\n            that._attachEvents();\n\n            that.items().each(function initializeTool() {\n\n                var toolName = that._toolName(this),\n                    tool = toolName !== \"moreVertical\" ? that.tools[toolName] : that.tools.overflowAnchor,\n                    options = tool && tool.options,\n                    messages = editor.options.messages,\n                    description = options && options.tooltip || messages[toolName],\n                    ui = $(this);\n\n                if (!tool || !tool.initialize) {\n                    return;\n                }\n\n                if (toolName == \"fontSize\" || toolName == \"fontName\") {\n                    var inheritText = messages[toolName + \"Inherit\"];\n\n                    ui.find(\"input\").val(inheritText).end()\n                      .find(\"span.k-input-inner\").text(inheritText).end();\n                }\n\n                tool.initialize(ui, {\n                    title: that._appendShortcutSequence(description, tool),\n                    editor: that._editor\n                });\n\n                ui.closest(\".k-dropdownlist\", that.element).addClass(\"k-editor-widget\");\n                ui.closest(\".k-combobox\", that.element).addClass(\"k-editor-widget\");\n\n                ui.closest(\".k-colorpicker\", that.element).next(\".k-colorpicker\").addClass(\"k-editor-widget\");\n            });\n\n            editor.bind(\"select\", that.resize.bind(that));\n\n            that.update();\n\n            if (window) {\n                window.wrapper.css({ top: \"\", left: \"\", width: \"\" });\n            }\n        },\n\n        show: function() {\n            var that = this,\n                window = that.window,\n                editorOptions = that.options.editor,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (window) {\n                wrapper = window.wrapper;\n                editorElement = editorOptions.element;\n\n                if (!wrapper.is(\":visible\") || !that.window.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!window._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                        setTimeout(function() {\n                            window.open();\n                        }, 0);\n                    } else {\n                        window.open();\n                    }\n                }\n            }\n        },\n\n        _getWindowWidth: function() {\n            var that = this,\n                wrapper = that.window.wrapper,\n                editorElement = that.options.editor.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _overlaps: function(box) {\n            var toolbarWrapper = this.window.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        hide: function() {\n            if (this.window) {\n                this.window.close();\n            }\n        },\n\n        focus: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            // Chrome can't focus something which has already been focused\n            element.attr(TABINDEX, tabIndex || 0).trigger(\"focus\")\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        focusOverflowPopup: function() {\n            var TABINDEX = \"tabIndex\";\n            var element = this.overflowPopup.element;\n            var tabIndex = this._editor.element.attr(TABINDEX);\n\n            element.closest(\".k-animation-container\").addClass(\"k-overflow-wrapper\");\n\n            element.attr(TABINDEX, tabIndex || 0)\n                .find(focusable).first().trigger(\"focus\");\n\n            if (!tabIndex && tabIndex !== 0) {\n                element.removeAttr(TABINDEX);\n            }\n        },\n\n        _appendShortcutSequence: function(localizedText, tool) {\n            if (!tool.key) {\n                return localizedText;\n            }\n\n            var res = localizedText + \" (\";\n\n            if (tool.ctrl) {\n                res += \"Ctrl + \";\n            }\n\n            if (tool.shift) {\n                res += \"Shift + \";\n            }\n\n            if (tool.alt) {\n                res += \"Alt + \";\n            }\n\n            res += tool.key + \")\";\n\n            return res;\n        },\n\n        _nativeTools: [\n            \"insertLineBreak\",\n            \"insertParagraph\",\n            \"redo\",\n            \"undo\",\n            \"autoLink\"\n        ],\n\n        tools: {}, // tools collection is copied from defaultTools during initialization\n\n        isCustomTool: function(toolName) {\n            return !(toolName in kendo.ui.Editor.defaultTools);\n        },\n\n        // expand the tools parameter to contain tool options objects\n        expandTools: function(tools) {\n            var currentTool,\n                i,\n                nativeTools = this._nativeTools,\n                options,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                result = {},\n                name;\n\n            for (i = 0; i < tools.length; i++) {\n                currentTool = tools[i];\n                name = currentTool.name;\n\n                if ($.isPlainObject(currentTool)) {\n                    if (name && defaultTools[name]) {\n                        // configured tool\n                        result[name] = extend({}, defaultTools[name]);\n                        extend(result[name].options, currentTool);\n                    } else {\n                        // custom tool\n                        options = extend({ cssClass: \"k-i-gear\", type: \"button\", title: \"\" }, currentTool);\n                        if (!options.name) {\n                            options.name = \"custom\";\n                        }\n\n                        options.cssClass = \"k-\" + options.name;\n\n                        if (!options.template && options.type == \"button\") {\n                            options.template = editorNS.EditorUtils.buttonTemplate;\n                            options.title = options.title || options.tooltip;\n                        }\n\n                        result[name] = {\n                            options: options\n                        };\n                    }\n                } else if (defaultTools[currentTool]) {\n                    // tool by name\n                    result[currentTool] = defaultTools[currentTool];\n                }\n            }\n\n            for (i = 0; i < nativeTools.length; i++) {\n                if (!result[nativeTools[i]]) {\n                    result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                }\n            }\n\n            return result;\n        },\n\n        render: function() {\n            var that = this,\n                tools = that.tools,\n                options, template, toolElement,\n                toolName,\n                editorElement = that._editor.element,\n                element = that.element.empty(),\n                groupName, newGroupName,\n                toolConfig = that._editor.options.tools,\n                group, i, groupPosition = 0,\n                resizable = that.options.resizable && that.options.resizable.toolbar,\n                overflowFlaseTools = this.overflowFlaseTools;\n\n            function stringify(template) {\n                var result = \"\";\n\n                if (template.getHtml) {\n                    result = template.getHtml();\n                } else {\n                    if (!kendo.isFunction(template)) {\n                        template = kendo.template(template);\n                    }\n\n                    result = template(options);\n                }\n\n                return kendo.trim(result);\n            }\n\n            function endGroup() {\n                if (group.children().length) {\n                    if (resizable) {\n                        group.data(\"position\", groupPosition);\n                        groupPosition++;\n                    }\n\n                    group.appendTo(element);\n                }\n            }\n\n            function startGroup(toolName) {\n                if (toolName !== OVERFLOWANCHOR) {\n                    group = $(\"<li class='k-tool-group' role='presentation' />\");\n                    group.data(\"overflow\", $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                } else {\n                    group = $(\"<li class='k-overflow-tools' />\");\n                }\n            }\n\n            element.empty();\n\n            if (toolConfig.length) {\n                toolName = toolConfig[0].name || toolConfig[0];\n            }\n            startGroup(toolName, overflowFlaseTools);\n\n            for (i = 0; i < toolConfig.length; i++) {\n                toolName = toolConfig[i].name || toolConfig[i];\n                options = tools[toolName] && tools[toolName].options;\n\n                if (!options && $.isPlainObject(toolName)) {\n                    options = toolName;\n                }\n\n                template = options && options.template;\n\n                if (toolName == \"break\") {\n                    endGroup();\n                    $(\"<li class='k-row-break' role='presentation' />\").appendTo(that.element);\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (!template) {\n                    continue;\n                }\n\n                newGroupName = that.toolGroupFor(toolName);\n\n                if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                    groupName = newGroupName;\n                }\n\n                if (toolName == OVERFLOWANCHOR) {\n                    template.options.title = that.options.messages.overflowAnchor;\n                }\n\n                template = stringify(template);\n\n                toolElement = $(template).appendTo(group);\n\n                if (newGroupName == \"custom\") {\n                    endGroup();\n                    startGroup(toolName, overflowFlaseTools);\n                }\n\n                if (options.exec && toolElement.hasClass(\"k-tool\")) {\n                    toolElement.on(\"click\", options.exec.bind(editorElement[0]));\n                }\n            }\n\n            endGroup();\n\n            $(that.element).children(\":has(> .k-tool)\").not(\".k-overflow-tools\").addClass(\"k-button-group\");\n\n            that.updateGroups();\n\n            if (resizable) {\n                that._initOverflowPopup(that.element.find(\".k-overflow-anchor\"));\n            }\n\n            that.angular(\"compile\", function() {\n                return { elements: that.element };\n            });\n        },\n\n        updateGroups: function() {\n            $(this.element).children().not(\".k-overflow-tools\").each(function() {\n                $(this).children()\n                    .removeClass(\"k-group-start k-group-end\")\n                    .first().addClass(\"k-group-start\").end()\n                    .last().addClass(\"k-group-end\").end();\n            });\n        },\n\n        decorateFrom: function(body) {\n            this.items().filter(\".k-decorated\")\n                .each(function() {\n                    var selectBox = $(this).data(\"kendoSelectBox\");\n\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            var id, tools = this.tools;\n\n            for (id in tools) {\n                if (tools[id].destroy) {\n                    tools[id].destroy();\n                }\n            }\n\n            if (this.window) {\n                this.window.destroy();\n            }\n\n            if (this._resizeHandler) {\n                kendo.unbindResize(this._resizeHandler);\n            }\n\n            if (this.overflowPopup) {\n                this.overflowPopup.destroy();\n            }\n        },\n\n        _attachEvents: function() {\n            var that = this,\n                popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n\n            that.attachToolsEvents(that.element.add(popupElement));\n        },\n\n        attachToolsEvents: function(element) {\n            var that = this,\n                buttons = \"[role=button].k-tool\",\n                enabledButtons = buttons + \":not(.k-disabled)\" + \", [role=button].k-i-import:not(.k-disabled)\",\n                disabledButtons = buttons + \".k-disabled\",\n                dropdown = \".k-dropdownlist\",\n                colorpicker = \".k-colorpicker\",\n                editorTools = [buttons, dropdown, colorpicker].join(\",\");\n\n            element.off(NS)\n                .on(\"mouseenter\" + NS, enabledButtons, function() { $(this).addClass(\"k-hover\"); })\n                .on(\"mouseleave\" + NS, enabledButtons, function() { $(this).removeClass(\"k-hover\"); })\n                .on(\"mousedown\" + NS, editorTools, function(e) {\n                    e.preventDefault();\n                })\n                .on(\"keydown\" + NS, focusable, function(e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement,\n                        currentContainer,\n                        keyCode = e.keyCode;\n\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n\n                        return tools[index];\n                    }\n\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is(\".k-dropdownlist\")) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function() {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass(\"k-overflow-tool-group\") ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n\n                        // skip tabbing to disabled tools, and focus the editing area when running out of tools\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n\n                            if (!focusElement || $(focusElement).closest(\".k-overflow-tools\").css(\"visibility\") === \"hidden\") {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && ( $(current).is(\"button\") || $(current).is(\"a\") ) && !$(current).attr(\"href\") ) {\n                        //anchors without href attribute do not respond to Enter key\n                        that._executeToolCommand(current, e);\n                    }\n                })\n                .on(\"click\" + NS, enabledButtons, function(e) {\n                    that._executeToolCommand(this, e);\n                })\n                .on(\"click\" + NS, disabledButtons, function(e) { e.preventDefault(); });\n\n        },\n\n        _executeToolCommand: function(toolElement, e) {\n            var that = this;\n            var button = $(toolElement);\n            e.preventDefault();\n            e.stopPropagation();\n            button.removeClass(\"k-hover\");\n            if (!button.is(\"[data-popup]\")) {\n                that._editor.exec(that._toolName(toolElement));\n            }\n        },\n\n        _toolName: function(element) {\n            if (!element) {\n                return;\n            }\n\n            var className = element.className;\n\n            if (/k-tool\\b/i.test(className)) {\n                className = element.firstChild.className;\n            }\n\n            var tool = $.grep(className.split(\" \"), function(x) {\n                return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n            });\n\n            if (tool[0]) {\n                var toolname = tool[0];\n                if (toolNamesByCssClass[toolname]) {\n                    toolname = toolNamesByCssClass[toolname];\n                }\n                if (toolname.indexOf(\"k-i-\") >= 0) {\n                    return kendo.toCamelCase(toolname.substring(toolname.indexOf(\"k-i-\") + 4));\n                }\n                else {\n                    return toolname.substring(toolname.lastIndexOf(\"-\") + 1);\n                }\n            }\n            return \"custom\";\n        },\n\n        refreshTools: function() {\n            var that = this,\n                editor = that._editor,\n                range = editor.getRange(),\n                nodes = editorNS.RangeUtils.textNodes(range),\n                immutables = editor.options.immutables,\n                immutablesContext = that._immutablesContext(range);\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.items().each(function() {\n                var tool = that.tools[that._toolName(this)];\n                if (tool) {\n                    var ui = $(this);\n                    if (tool.update) {\n                        tool.update(ui, nodes, editor.undoRedoStack);\n                    }\n\n                    if (immutables) {\n                        that._updateImmutablesState(tool, ui, immutablesContext);\n                    }\n                }\n            });\n            this.update();\n        },\n\n        _immutablesContext: function(range) {\n            if (this._editor.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var name = tool.name;\n            var uiElement = ui;\n\n            var trackImmutables = tool.options.trackImmutables;\n            if (trackImmutables === undefined$1) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                var display = immutablesContext ? \"none\" : \"\";\n                if (!ui.is(\".k-tool\")) {\n                    var uiData = ui.data();\n                    for (var key in uiData) {\n                        if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                            var widget = uiData[key];\n                            uiElement = widget.wrapper;\n                            break;\n                        }\n                    }\n                }\n                uiElement.css(\"display\", display);\n                var groupUi = uiElement.closest(\"li\");\n                if (groupUi.children(\":visible\").length === 0) {\n                    groupUi.css(\"display\", display);\n                }\n            }\n        },\n\n        update: function() {\n            this.updateGroups();\n        },\n\n        _resize: function(e) {\n            var containerWidth = e.width;\n            var resizable = this.options.resizable && this.options.resizable.toolbar;\n            var popup = this.overflowPopup;\n            var editorElement = this.options.editor.element;\n            var toolbarWindow = this.window;\n\n            this.refreshTools();\n\n            if (!resizable) {\n                return;\n            }\n\n            if (toolbarWindow) {\n                toolbarWindow.wrapper.width(this._getWindowWidth());\n\n                if (!toolbarWindow._moved) {\n                    toolbarWindow.wrapper.css({\n                        left: Math.max(0, parseInt(editorElement.offset().left, 10))\n                    });\n                }\n            }\n\n            if (popup.visible()) {\n                popup.close(true);\n            }\n\n            this._refreshWidths();\n\n            this._shrink(containerWidth);\n            this._stretch(containerWidth);\n\n            this._toggleOverflowStyles(this.element, false);\n            this._toggleOverflowStyles(this.overflowPopup.element, true);\n\n            this.element\n                .children(\"li.k-overflow-tools\")\n                .css(\"visibility\", popup.element.is(\":empty\") ? \"hidden\" : \"visible\");\n        },\n\n        _refreshWidths: function() {\n            this.element.children(\"li\").each(function(idx, element) {\n                var group = $(element);\n                group.data(\"outerWidth\", outerWidth(group, true));\n            });\n        },\n\n        _shrink: function(width) {\n            var group, visibleGroups;\n\n            if (width < this._groupsWidth()) {\n                visibleGroups = this._visibleGroups().filter(\":not(.k-overflow-tools)\");\n\n                for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                    group = visibleGroups.eq(i);\n                    if (width > this._groupsWidth()) {\n                        break;\n                    } else {\n                        this._hideGroup(group);\n                    }\n                }\n            }\n        },\n\n        _stretch: function(width) {\n            var group, hiddenGroups;\n\n            if (width > this._groupsWidth()) {\n                hiddenGroups = this._hiddenGroups();\n\n                for (var i = 0; i < hiddenGroups.length; i++) {\n                    group = hiddenGroups.eq(i);\n                    if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                        break;\n                    }\n                }\n            }\n        },\n\n        _hiddenGroups: function() {\n            var popup = this.overflowPopup;\n\n            var hiddenGroups = this.element.children(\"li.k-tool-group\").filter(\":hidden\");\n\n            hiddenGroups = hiddenGroups.add(popup.element.children(\"li\"));\n\n            hiddenGroups.sort(function(a, b) {\n                return ($(a).data(\"position\") > $(b).data(\"position\")) ? 1 : -1;\n            });\n\n            return hiddenGroups;\n        },\n\n        _visibleGroups: function() {\n            return this.element.children(\"li.k-tool-group, li.k-overflow-tools\").filter(\":visible\");\n        },\n\n        _groupsWidth: function() {\n            var width = 0;\n\n            this._visibleGroups().each(function() {\n                width += $(this).data(\"outerWidth\");\n            });\n\n            return Math.ceil(width);\n        },\n\n        _hideGroup: function(group) {\n            if (group.data(\"overflow\")) {\n                var popup = this.overflowPopup;\n                group.detach().prependTo(popup.element).addClass(\"k-overflow-tool-group\");\n            } else {\n                group.addClass(\"k-hidden\");\n            }\n        },\n\n        _showGroup: function(group, width) {\n            var position, previous, groupWidth;\n\n            if (group.hasClass('k-disabled')) {\n                return true;\n            }\n\n            if (group.hasClass(\"k-overflow-tool-group\")) {\n                groupWidth = group.data(\"outerWidth\");\n            } else {\n                group.removeClass(\"k-hidden\");\n                groupWidth = outerWidth(group, true);\n                group.addClass(\"k-hidden\");\n            }\n\n            if (group.length && width > this._groupsWidth() + groupWidth) {\n                if (group.hasClass(\"k-overflow-tool-group\")) {\n                    position = group.data(\"position\");\n\n                    if (position === 0) {\n                        group.detach().prependTo(this.element);\n                    } else {\n                        previous = this.element.children().filter(function(idx, element) {\n                            return $(element).data(\"position\") === position - 1;\n                        });\n\n                        group.detach().insertAfter(previous);\n                    }\n\n                    group.removeClass(\"k-overflow-tool-group\");\n\n                } else {\n                    group.removeClass(\"k-hidden\");\n                }\n\n                return true;\n            }\n\n            return false;\n        }\n\n    });\n\n$.extend(editorNS, {\n    Toolbar: Toolbar\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined$1;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined$1;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        this.createDialog(dialog, {\n            title: messages.viewHtml,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .find(\".k-dialog-update\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .data(\"kendoWindow\").center().open();\n\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: ({ dialogUpdate, dialogCancel }) =>\n    '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n        '<div class=\"k-edit-buttons\">' +\n            `<button class=\"k-dialog-update k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">${kendo.htmlEncode(dialogUpdate)}</span></button>` +\n            `<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">${kendo.htmlEncode(dialogCancel)}</span></button>` +\n        '</div>' +\n    '</div>',\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"View HTML\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function(options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({ immutables: options.immutables });\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        var that = this;\n        return new FormatCommand(extend(commandArguments, {\n                formatter: that.options.formatter\n            }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes);\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    EditorUtils = Editor.EditorUtils,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function(sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function(sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function(nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function(nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            formatNode = this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function(node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                node = node.parentNode;\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function(nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function(node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return \"inherit\";\n    },\n\n    getFormat: function(nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function(nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function() { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = (kendo.support.browser.msie || kendo.support.touch) ? \"kendoDropDownList\" : \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            defaultValue = [];\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n\n        ui.attr({ title: initOptions.title });\n        ui[this.type]({\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: dataSource,\n            change: function() {\n                editor._range = range;\n                Tool.exec(editor, toolName, this.value());\n            },\n            close: function() {\n                setTimeout(function() {\n                    editor._deleteSavedRange();\n                },0);\n            },\n            highlightFirst: false\n        });\n\n        ui.closest(\".k-combobox\").removeClass(\"k-\" + toolName).find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        var widget = ui.data(this.type);\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, initOptions) {\n        var that = this,\n            editor = initOptions.editor,\n            toolName = this.name,\n            options = extend({}, ColorTool.fn.options, this.options),\n            palette = options.palette,\n            columns = options.columns,\n            view = palette !== undefined && !palette ? \"gradient\" : \"palette\";\n\n        ui = this._widget = new kendo.ui.ColorPicker(ui, {\n            closeOnSelect: true,\n            views: [view],\n            preview: view === \"gradient\",\n            input: view === \"gradient\",\n            buttons: view === \"gradient\",\n            toolIcon: \"k-icon k-i-\" + EditorUtils.getToolCssClass(options.name),\n            palette: palette,\n            columns: columns,\n            change: function() {\n                var color = ui.value();\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n\n                if (color) {\n                    Tool.exec(editor, toolName, color);\n                }\n\n                delete that.storedRange;\n                delete that._inputFocused;\n                editor.focus();\n            },\n            open: function(e) {\n                var picker = e.sender;\n                that.storedRange = editor.getRange();\n\n                picker._popup.element.on(MOUSEDOWN_NS, function(e) {\n                    if (!$(e.target).is(\"input.k-color-value\")) {\n                        e.preventDefault();\n                    }\n                });\n\n                if (!picker._popup.element.is(\"[unselectable='on']\")) {\n                    picker._popup.element\n                        .attr({ unselectable: \"on\" })\n                        .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                        .end().find(\"input\").on(\"focus\", function() {\n                            that._inputFocused = true;\n                        });\n                }\n\n                setTimeout(function() {\n                    picker._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n                });\n            },\n            close: function(e) {\n                e.sender._popup.element.off(MOUSEDOWN_NS);\n\n                if (kendo.support.browser.msie && that.storedRange && that._inputFocused) {\n                    editor.selectRange(that.storedRange);\n                }\n            },\n            activate: function(e) {\n                e.preventDefault();\n\n                if (e.sender._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                    return;\n                }\n\n                ui.trigger(\"change\");\n            }\n        });\n        ui.wrapper\n            .attr({ title: initOptions.title, unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        ui.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\nregisterTool(\"bold\", new InlineFormatTool({ key: \"B\", ctrl: true, format: formats.bold, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Bold\" }) }));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\nregisterTool(\"italic\", new InlineFormatTool({ key: \"I\", ctrl: true, format: formats.italic, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Italic\" }) }));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({ key: \"U\", ctrl: true, format: formats.underline, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Underline\" }) }));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({ format: formats.strikethrough, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Strikethrough\" }) }));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({ format: formats.superscript, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Superscript\" }) }));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({ format: formats.subscript, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Subscript\" }) }));\n\nregisterTool(\"foreColor\", new ColorTool({ cssAttr: \"color\", fontAttr: \"color\", domAttr: \"color\", name: \"foreColor\", template: new ToolTemplate({ template: EditorUtils.colorPickerTemplate, title: \"Color\" }) }));\n\nregisterTool(\"backColor\", new ColorTool({ cssAttr: \"background-color\", domAttr: \"backgroundColor\", name: \"backColor\", template: new ToolTemplate({ template: EditorUtils.colorPickerTemplate, title: \"Background Color\" }) }));\n\nregisterTool(\"fontName\", new FontTool({ cssAttr: \"font-family\", fontAttr: \"face\", domAttr: \"fontFamily\", name: \"fontName\", defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }], template: new ToolTemplate({ template: EditorUtils.comboBoxTemplate, title: \"Font Name\" }) }));\n\nregisterTool(\"fontSize\", new FontTool({ cssAttr: \"font-size\", fontAttr: \"size\", domAttr: \"fontSize\", name: \"fontSize\", defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }], template: new ToolTemplate({ template: EditorUtils.comboBoxTemplate, title: \"Font Size\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function(sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function(range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length - 1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    _dialogTemplate: function() {\n        return kendo.template( ({ messages }) =>\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    \"<div class='k-edit-label'>\" +\n                        `<label for=\"k-editor-link-url\">${encode( messages.linkWebAddress )}</label>` +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-url'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label k-editor-link-text-row'>\" +\n                        `<label for=\"k-editor-link-text\">${encode( messages.linkText )}</label>` +\n                    \"</div>\" +\n                    \"<div class='k-edit-field k-editor-link-text-row'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-text'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'>\" +\n                        `<label for=\"k-editor-link-title\">${encode( messages.linkToolTip )}</label>` +\n                    \"</div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<span class=\\\"k-textbox k-input k-input-md k-rounded-md k-input-solid\\\"><input type='text' class='k-input-inner' id='k-editor-link-title'></span>\" +\n                    \"</div>\" +\n                    \"<div class='k-edit-label'></div>\" +\n                    \"<div class='k-edit-field'>\" +\n                        \"<input type='checkbox' class='k-checkbox k-checkbox-md k-rounded-md' id='k-editor-link-target'>\" +\n                        `<label for=\"k-editor-link-target\" class=\"k-checkbox-label\">${encode( messages.linkOpenInNewWindow )}</label>` +\n                    \"</div>\" +\n                    \"<div class='k-edit-buttons'>\" +\n                        `<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">${encode(messages.dialogInsert)}</span></button>` +\n                        `<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">${encode(messages.dialogCancel)}</span></button>` +\n                    \"</div>\" +\n                \"</div>\" +\n            \"</div>\"\n        )({\n            messages: this.editor.options.messages\n        });\n    },\n\n    exec: function() {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(this._dialogTemplate(), {\n            title: messages.createLink,\n            close: this._close.bind(this),\n            visible: false\n        });\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog\n            .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n            .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n            .find(\".k-edit-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").attr(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.data(\"kendoWindow\").center().open();\n\n        $(\"#k-editor-link-url\", dialog).trigger(\"focus\").select();\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function(e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function(e) {\n        e.preventDefault();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function(nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function() {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function() {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function() {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function(linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n        Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function(ui, nodes) {\n        ui.toggleClass(\"k-disabled\", !this.finder.isFormatted(nodes))\n          .removeClass(\"k-hover\");\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function(traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function() {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse(this._detectEnd.bind(this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse(this._detectStart.bind(this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset | 0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function(options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function(callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function(callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined$1) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {},\n    next: function(node) {},\n    subText: function(text, offset) {}\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Create Link\" }) }));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Remove Link\" }) }));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes) {\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                node = nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function(sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if (until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function(nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function(nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function(format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function(nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function(nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function(format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function(nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function() {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Left\"\n    })\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Center\"\n    })\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Right\"\n    })\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Justify Full\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function(node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    isFormatted: function(nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function() {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function(candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function(range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while (formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while (formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function(nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if (!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function(section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, (function(node) {\n                    return this.containsAny(node, nodes);\n                }).bind(this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if (dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function(nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while (li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function(nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function(commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert unordered list\" }) }));\nregisterTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert ordered list\" }) }));\nregisterTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert upper roman list\" }) }));\nregisterTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert lower roman list\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoSelectBox\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function(args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function() {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor;\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var selectBox;\n\n        that.editor = editor;\n\n        ui.width(options.width);\n\n        selectBox = ui.kendoSelectBox({\n            autoWidth: true,\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            dataSource: options.items || editor.options[toolName],\n            title: editor.options.messages[toolName],\n            autoSize: true,\n            change: function() {\n                var dataItem = this.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = this.dataSource.data();\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n            },\n            highlightFirst: false,\n            template: kendo.template(\n                (data) => `<span unselectable=\"on\" style=\"display:block;${data.style || \"\"}#\">${kendo.htmlEncode(data.text)}</span>`\n            )\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass(\"k-decorated\")\n            .closest(\".k-dropdownlist, .k-combobox\")\n                .removeClass(\"k-\" + toolName)\n                .find(\"*\").addBack()\n                    .attr(\"unselectable\", \"on\");\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\" + item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for (var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Format\" }) }));\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Clean formatting\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function() {\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(({ messages }) =>\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        `${showBrowser ? '<div class=\"k-filebrowser k-imagebrowser\"></div>' : ''}` +\n                        '<div class=\"k-edit-label\">' +\n                            `<label for=\"k-editor-image-url\">${encode( messages.imageWebAddress )}</label>` +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-url\"></span>' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            `<label for=\"k-editor-image-title\">${encode( messages.imageAltText )}</label>` +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-title\"></span>' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            `<label for=\"k-editor-image-width\">${encode( messages.imageWidth )}</label>` +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-width\"></span>' +\n                        '</div>' +\n                        '<div class=\"k-edit-label\">' +\n                            `<label for=\"k-editor-image-height\">${encode( messages.imageHeight )}</label>` +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-image-height\"></span>' +\n                        '</div>' +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        `<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">${encode(messages.dialogInsert)}</span></button>` +\n                        `<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">${encode(messages.dialogCancel)}</span></button>` +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n            .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n            .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n            .find(KEDITORIMAGEHEIGHT).val(imageHeight).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert Image\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: cmd._onUploadSuccess.bind(cmd),\n            progress: cmd._onUploadProgress.bind(cmd),\n            select: cmd._onUploadSelect.bind(cmd),\n            error: cmd._onUploadError.bind(cmd),\n            complete: cmd._onUploadComplete.bind(cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl: importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev) {\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev) {\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev) {\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev) {\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev) {\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function() {\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({ position: \"relative\" }).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function() {\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    template: new ToolTemplate({ template: EditorUtils.iconTextButtonTemplate, title: \"Import\" })\n}));\n\n}(window.kendo.jQuery));\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, initOptions) {\n        var editor = initOptions.editor,\n            options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml;\n\n        this._selectBox = new editorNS.SelectBox(ui, {\n            dataSource: dataSource,\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            change: function() {\n                Tool.exec(editor, 'insertHtml', this.value());\n            },\n            title: editor.options.messages.insertHtml,\n            highlightFirst: false\n        });\n\n        ui.attr(\"title\", initOptions.title);\n        this._selectBox.wrapper.attr(\"title\", initOptions.title);\n    },\n\n    command: function(commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var selectbox = ui.data(\"kendoSelectBox\") || ui.find(\"select\").data(\"kendoSelectBox\");\n        selectbox.close();\n        selectbox.value(selectbox.options.title);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({ template: new ToolTemplate({ template: EditorUtils.dropDownListTemplate, title: \"Insert HTML\", initialValue: \"Insert HTML\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput(),\n            cmd.antiForgeryInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    },\n\n    antiForgeryInput: function() {\n        var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n        return $(\"input[name^='__RequestVerificationToken']\").clone()\n                    .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoSelectBox';\n    },\n\n    options: {\n        items: defaultExportAsItems,\n        width: 140\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, initOptions) {\n        var tool = this;\n        var editor = initOptions.editor;\n        var options = tool.options;\n        var toolName = options.name;\n        var changeHandler = tool.changeHandler.bind(tool);\n        var dataSource = options.items || editor.options[toolName];\n        var displayName = editor.options.messages[toolName];\n        var selectBox;\n\n        dataSource.unshift({\n            text: displayName,\n            value: \"\"\n        });\n        tool.editor = editor;\n        ui.width(options.width);\n        selectBox = ui.kendoSelectBox({\n            dataTextField: 'text',\n            dataValueField: 'value',\n            dataSource: dataSource,\n            autoSize: true,\n            change: changeHandler,\n            open: function(e) {\n                var sender = e.sender;\n                sender.items()[0].style.display = \"none\";\n                sender.unbind(\"open\");\n            },\n            highlightFirst: false,\n            template: kendo.template((data) => `<span unselectable=\"on\" style=\"display:block;${data.style || '' }\">${kendo.htmlEncode(data.text)}</span>`),\n            valueTemplate: () => `<span class=\"k-editor-export\"><span class=\"k-icon k-i-export\"></span><span class=\"k-export-tool-text\">${displayName}</span></span>`\n        }).data(\"kendoSelectBox\");\n\n        ui.attr(\"title\", initOptions.title);\n        selectBox.wrapper.attr(\"title\", initOptions.title);\n\n        ui.addClass('k-decorated').closest('.k-dropdownlist').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n    },\n\n    changeHandler: function(e) {\n        var sender = e.sender;\n        var dataItem = sender.dataItem();\n        var value = dataItem && dataItem.value;\n\n        this._exec(value);\n        sender.value(\"\");\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    template: new ToolTemplate({\n        template: EditorUtils.dropDownListTemplate,\n        title: 'Export As'\n    })\n}));\n\n}(window.kendo.jQuery));\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined$1) {\n        return node.style[property] || 0;\n    } else {\n        if (value > 0) {\n            node.style[property] = value + \"px\";\n        } else {\n            node.style[property] = \"\";\n\n            if (!node.style.cssText) {\n                node.removeAttribute(\"style\");\n            }\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n    },\n\n    apply: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function(list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes) {\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function(node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n    },\n\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        $.extend(this.options, {\n            immutables: options.editor && options.editor.options.immutables\n        });\n\n        ui.addClass(\"k-disabled\");\n    },\n\n    update: function(ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                ui.removeClass(\"k-disabled\");\n                return;\n            }\n        }\n\n        ui.addClass(\"k-disabled\").removeClass(\"k-hover\");\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Indent\" }) }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Outdent\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function(node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function() {\n        var range = this.getRange(),\n            doc = RangeUtils.documentFromRange(range),\n            parent, previous, next,\n            emptyParagraphContent = editorNS.emptyElementContent,\n            paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                var br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                var parentNode = li.parentNode;\n                var parentChildrenLength = li.parentNode.children.length;\n                var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function(node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent = $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if (kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", { href: attributes.href });\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    _dialogTemplate: function(showBrowser) {\n        return kendo.template(({ messages }) =>\n            '<div class=\"k-editor-dialog k-popup-edit-form\">' +\n                '<div class=\"k-edit-form-container\">' +\n                    '<div class=\"k-edit-form-content\">' +\n                        `${showBrowser ? '<div class=\"k-filebrowser\"></div>' : ''}` +\n                        '<div class=\"k-edit-label\">' +\n                            `<label for=\"k-editor-file-url\">${encode(messages.fileWebAddress)}</label>` +\n                        '</div>' +\n                        '<div class=\"k-edit-field\">' +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-url\"></span>' +\n                        '</div>' +\n                        \"<div class='k-edit-label'>\" +\n                            `<label for=\"k-editor-file-text\">${encode(messages.fileText)}</label>` +\n                        '</div>' +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-text\"></span>' +\n                        '</div>' +\n                        \"<div class='k-edit-label'>\" +\n                            `<label for=\"k-editor-file-title\">${encode(messages.fileTitle)}</label>` +\n                        '</div>' +\n                        \"<div class='k-edit-field'>\" +\n                            '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input type=\"text\" class=\"k-input-inner\" id=\"k-editor-file-title\"></span>' +\n                        '</div>' +\n                    '</div>' +\n                    '<div class=\"k-edit-buttons\">' +\n                        `<button class=\"k-dialog-insert k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary\"><span class=\"k-button-text\">${messages.dialogInsert}</span></button>` +\n                        `<button class=\"k-dialog-close k-button k-button-md k-rounded-md k-button-solid k-button-solid-base\"><span class=\"k-button-text\">${messages.dialogCancel}</span></button>` +\n                    '</div>' +\n                '</div>' +\n            '</div>'\n        )({\n            messages: this.editor.options.messages,\n            showBrowser: showBrowser\n        });\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n\n        dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions)\n            .toggleClass(\"k-filebrowser-dialog\", showBrowser)\n            .find(\".k-dialog-insert\").on(\"click\", apply).end()\n            .find(\".k-dialog-close\").on(\"click\", close).end()\n            .find(\".k-edit-field input\").on(\"keydown\", keyDown).end()\n            // IE < 8 returns absolute url if getAttribute is not used\n            .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n            .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n            .find(KEDITORFILETITLE).val(file ? file.title : \"\").end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Insert File\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-active\",\n    SELECTEDSTATE = \"k-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    ToolTemplate = Editor.ToolTemplate,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = ({ width, content }) => `<td style=\"width:${width}%;\">${content}</td>`;\n\nvar tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: this._open.bind(this),\n            activate: this._activate.bind(this),\n            close: this._close.bind(this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", this._toggle.bind(this))\n          .on(\"keydown\", this._keydown.bind(this));\n\n        var editor = this._editor = options.editor;\n        this._popup = popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            template: new ToolTemplate({ template: EditorUtils.tableWizardButtonTemplate, title: editor.options.messages.tableWizard }),\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        var twTool = $(\"<div>\" + tableWizard.options.template.getHtml() + \"</div>\");\n        twTool.appendTo(popup.element);\n\n        if (editor.toolbar) {\n            editor.toolbar.attachToolsEvents(twTool);\n        }\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var that = this,\n            keys = kendo.keys,\n            key = e.keyCode,\n            shouldContinue = true;\n\n        if ((key == keys.DOWN && e.altKey) || key == keys.ENTER || key == keys.SPACEBAR ) {\n            that._popup.open();\n            shouldContinue = false;\n        } else if (key == keys.ESC) {\n            that._popup.close();\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        this._popup.destroy();\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        var initiallyVisible = this._popup.visible();\n\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false,\n            button;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        } else if (key == keys.TAB) {\n            button = this._popup.element.find(\".k-button\");\n\n            if (button.length > 0) {\n                changed = true;\n                button.trigger(\"focus\");\n            }\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER && initiallyVisible) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el) {\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function(table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function(editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function(row, colIndex) {\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i + \"]\");\n            if (td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while (colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while (colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for (i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if (cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if (td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n            if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell) {\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell) {\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function(row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n            if (cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if (!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if (colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect) {\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if (!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if (rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if (!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function(range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function(table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex + 1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if (adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if (!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function(td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if (rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if (td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnIndex = dom.findNodeIndex(td, true),\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function(row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if (cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function(td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if (colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if (td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if (td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if (td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if (td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if ($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan / 2);\n\n            if (colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if (rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function(td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan / 2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if (rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if (colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if (nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function(options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n    initialize: function(ui, options) {\n        Tool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function() {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if (editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    initialize: function(ui, options) {\n        BlockFormatTool.fn.initialize.call(this, ui, options);\n        ui.addClass(\"k-disabled\");\n        ui.attr(\"disabled\", \"disabled\");\n    },\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes);\n        var isFormatted = this.options.finder.isFormatted(nodes, this.isTable);\n\n        if (isTable === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n\n        ui.toggleClass(\"k-selected\", isFormatted);\n        ui.attr(\"aria-pressed\", isFormatted);\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node) {\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\nregisterTool(\"createTable\", new InsertTableTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, popup: true, title: \"Create table\" }) }));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add column on the left\" }) }));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add column on the right\" }) }));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add row above\" }) }));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Add row below\" }) }));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Delete row\" }) }));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Delete column\" }) }));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Merge Cell Right\" }) }));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Merge Cell Down\" }) }));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Split Cell\" }) }));\nregisterTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\", template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Split Cell\" }) }));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Center\"\n    })\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    template: new ToolTemplate({\n        template: EditorUtils.buttonTemplate,\n        title: \"Table Align Left\"\n    })\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = deferred.resolve.bind(deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items) {\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done((function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }).bind(this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', this.onpaste.bind(this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e) {\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e) {\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth: \"0px\",\n            width: \"0px\",\n            height: \"0px\",\n            overflow: \"hidden\",\n            margin: \"0\",\n            padding: \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant: \"normal\",\n                fontWeight: \"normal\",\n                lineSpacing: \"normal\",\n                lineHeight: \"normal\",\n                textDecoration: \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\": translate\n        });\n    },\n    _caretOffset: function(range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range) {\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function(html, options) {\n        var editor = this.editor,\n            i, l, childNodes;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if (!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n        var splittable = parent != editor.body && !dom.is(parent, \"td\");\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm) {\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if (focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i + 1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function(html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if (bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function(element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            significantStyles = [],\n            isSignificantCss = function(val) {\n                var significantCss = [\"border\", \"background\", \"padding\"];\n\n                return significantCss.filter(function(cssAttr) {\n                    return val.trim().indexOf(cssAttr) === 0;\n                }).length > 0;\n            },\n            addSignificantStyles = function(val) {\n                if (isSignificantCss(val)) {\n                    significantStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n                    attributeValues.forEach(addSignificantStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (significantStyles.length > 0) {\n            element.setAttribute(\"style\", significantStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for (i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for (j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function(placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', { innerHTML: html });\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator(this.buildText.bind(this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return { text: \" \", line: \" \" };\n        } else {\n            return { text: \" \", line: \"<br/>\" };\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({ all: true });\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function(start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function(node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented()) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function() {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function(e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function() {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if (!dom.emptyNode(node)) {\n            if (node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if (dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset - count, count);\n\n            range.setStart(node, Math.max(0, offset - count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if (block.innerText === '') {\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : block;\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if (range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset - 1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function(marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if (startParent && RangeUtils.isStartOf(range, startParent)) {\n            dom.insertBefore(start, startParent);\n        }\n\n        if (endParent && RangeUtils.isEndOf(range, endParent)) {\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function(range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function() {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function() {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function() {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function(e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function(e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function(e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function(e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function(callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function(force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n        }\n    },\n\n    isTypingInProgress: function() {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function() {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function(e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function(e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Export PDF\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        ToolTemplate = editorNS.ToolTemplate,\n        extend = $.extend;\n\nvar PrintCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n\n        if (kendo.support.browser.msie) {\n            editor.document.execCommand(\"print\", false, null);\n        } else if (editor.window.print) {\n            editor.window.print();\n        }\n    }\n});\n\nextend(editorNS, {\n    PrintCommand: PrintCommand\n});\n\nregisterTool(\"print\", new Tool({ command: PrintCommand, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Print\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    ToolTemplate = Editor.ToolTemplate,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if (rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if (dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        for (i = 0; styles && i < styles.length; i++) {\n            styleKey = styles[i];\n            styleValue = styles[styleKey];\n            nodeStyles.attr.style[styleKey] = styleValue;\n        }\n\n        for (i = 0; attributes && i < attributes.length; i++) {\n            attributeKey = attributes[i].nodeName;\n            attributeValue = attributes[i].nodeValue;\n            if (attributeKey === \"style\") {\n                continue;\n            } else if (attributeKey === \"class\") {\n                nodeStyles.attr.className = attributeValue;\n            } else {\n                nodeStyles.attr[attributeKey] = attributeValue;\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if (markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if (markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if (nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if (nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for (i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if (this.immutableParent(node)) {\n                continue;\n            }\n\n            while (parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for (j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if (!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while (previous) {\n                        if (!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if (previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for (j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while (next) {\n                        if (!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if (nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for (j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while (dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for (i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if (topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if (topNode) {\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while (newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Copy format\" }) }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Apply format\" }) }));\n\n})(window.kendo.jQuery);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n    var parseFloat = global.parseFloat;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n\n    var PERCENTAGE = \"%\";\n    var PIXEL = \"px\";\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n    var STRING = \"string\";\n\n    function constrain(options) {\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n    }\n\n    function getScrollBarWidth(element) {\n        if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n            return kendo.support.scrollbar();\n        }\n\n        return 0;\n    }\n\n    function calculatePercentageRatio(value, total) {\n        if (inPercentages(value)) {\n            return parseFloat(value);\n        }\n        else {\n            return ((parseFloat(value) / total) * 100);\n        }\n    }\n\n    function inPercentages(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n    }\n\n    function inPixels(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n    }\n\n    function toPercentages(value) {\n        return (parseFloat(value) + PERCENTAGE);\n    }\n\n    function toPixels(value) {\n        return (parseFloat(value) + PIXEL);\n    }\n\n    var ResizingUtils = {\n        constrain: constrain,\n        getScrollBarWidth: getScrollBarWidth,\n        calculatePercentageRatio: calculatePercentageRatio,\n        inPercentages: inPercentages,\n        inPixels: inPixels,\n        toPercentages: toPercentages,\n        toPixels: toPixels\n    };\n\n    extend(Editor, {\n        ResizingUtils: ResizingUtils\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: that.onResizeStart.bind(that),\n                resize: that.onResize.bind(that),\n                resizeend: that.onResizeEnd.bind(that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if (column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: that._onDragStart.bind(that),\n                drag: that._onDrag.bind(that),\n                dragend: that._onDragEnd.bind(that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable: function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                } else {\n                    handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                }\n\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    var ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            var factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if (node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if (hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if (image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if ($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                } else if ($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    ToolTemplate = Editor.ToolTemplate,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: cmd.onDialogClose.bind(cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open();\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function(table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if (lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], { id: cellProp.id || null });\n        }\n        (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n            cmd._updateCellProperties(cell, cellProp);\n        });\n\n        cmd._updateCaption(table, tableProp);\n\n        if (tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header) {\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if (headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if (headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count) {\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var cellPropToAll = cellProp.selectAllCells;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if (headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n                cmd._updateCellProperties(cell, (cellPropToAll || (r === 0 && c === 0)) ? cellProp : {});\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while (rowColumns > columns) {\n                    if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data) {\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            cellPadding: data.cellPadding || null,\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data) {\n        var style = this._getStylesData(data);\n        style.padding = data.cellPadding || null;\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data) {\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while (thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while (thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if (thead) {\n            while (thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while (tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for (i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if (!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return {\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        };\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return { textAlign: textAlign, verticalAlign: verticalAlign };\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if (cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                cellPadding: table.cellPadding,\n                alignment: tableAlignment.textAlign,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = { cells: [] };\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            cellPadding: cStyle.padding,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return { textAlign: hAlign };\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if (hAlign && vAlign) {\n            return { textAlign: hAlign, verticalAlign: vAlign };\n        }\n        if (!hAlign && vAlign) {\n            return { textAlign: \"left\", verticalAlign: vAlign };\n        }\n        if (hAlign && !vAlign) {\n            return { textAlign: hAlign, verticalAlign: \"top\" };\n        }\n        return { textAlign: \"\", verticalAlign: \"\" };\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function(options) {\n        options.insertNewTable = this.options.insertNewTable;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes);\n\n        if (isFormatted === true) {\n            ui.parent().addClass(\"k-hidden k-disabled\");\n            ui.attr(\"disabled\", \"disabled\");\n            ui.addClass(\"k-disabled\");\n        } else {\n            ui.parent().removeClass(\"k-hidden k-disabled\");\n            ui.prop(\"disabled\", false);\n            ui.removeClass(\"k-disabled\");\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableWizard\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, template: new ToolTemplate({ template: EditorUtils.buttonTemplate, title: \"Table Wizard\" }) }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => `<span class=\"${encode(className)}\" title=\"${encode(tooltip)}\"></span>`,\n    valueTemplate: ({ className, tooltip }) => `<span class=\"k-align-group ${encode( className )}\" title=\"${encode( tooltip )}\"></span>`\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"k-icon k-i-table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => `<span class=\"${encode( className )}' title='${encode( tooltip )}'></span>`,\n    valueTemplate: ({ className, tooltip }) => `<span class='k-align-group ${encode( className )}' title='${encode( tooltip )}'></span>`\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"k-icon k-i-table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"k-icon k-i-table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"k-icon k-i-table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"k-icon k-i-align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => `<span class=\"${encode( className )}\" title=\"${encode( tooltip )}\"></span>`,\n    valueTemplate: ({ className, tooltip }) => `<span class=\"k-align-group ${encode( className )}\" title=\"${encode( tooltip )}\"></span>`\n};\n\nvar dialogTemplate = ({ messages }) =>\n    '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' +\n        '<div class=\"k-edit-form-container\">' +\n            '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n                '<ul>' +\n                    `<li class=\"k-active\">${ messages.tableTab }</li>` +\n                    `<li>${ messages.cellTab }</li>` +\n                    `<li>${ messages.accessibilityTab }</li>` +\n                '</ul>' +\n                '<div id=\"k-table-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-width\">${ messages.width }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-width\" />' +\n                        `<input id=\"k-editor-table-width-type\" aria-label=\"${ messages.units }\" />` +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-height\">${ messages.height }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-height\" />' +\n                        `<input id=\"k-editor-table-height-type\" aria-label=\"${ messages.units }\" />` +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-columns\">${ messages.columns }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-columns\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-rows\">${ messages.rows }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-rows\" />' +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-cell-spacing\">${ messages.cellSpacing }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-cell-padding\">${ messages.cellPadding }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-alignment\">${ messages.alignment }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-bg\">${ messages.background }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-table-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-css-class\">${ messages.cssClass }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-id\">${ messages.id }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-border-width\">${ messages.border }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-border-width\" />' +\n                        '<input id=\"k-editor-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-border-style\">${ messages.borderStyle }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        `<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">${ messages.collapseBorders }</label>` +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-cell-properties\">' +\n\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        `<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">${ messages.selectAllCells }</label>` +\n                    '</div>' +\n\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cell-width\">${ messages.width }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-width\" />' +\n                        `<input id=\"k-editor-cell-width-type\" aria-label=\"${ messages.units }\" />` +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cell-height\">${ messages.height }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-height\" />' +\n                        `<input id=\"k-editor-cell-height-type\" aria-label=\"${ messages.units }\" />` +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-cell-margin\">${ messages.cellMargin }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-cells-padding\">${ messages.cellPadding }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cell-alignment\">${ messages.alignment }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cell-bg\">${ messages.background }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-bg\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cell-css-class\">${ messages.cssClass }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-css-class\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cell-id\">${ messages.id }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-cell-id\" class=\"k-input-inner\" type=\"text\" /></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cell-border-width\">${ messages.border }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' +\n                        '<input id=\"k-editor-cell-border-color\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cell-border-style\">${ messages.borderStyle }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-cell-border-style\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">&nbsp;</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox k-checkbox-md k-rounded-md\" />' +\n                        `<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">${ messages.wrapText }</label>` +\n                    '</div>' +\n                '</div>' +\n\n                '<div id=\"k-accessibility-properties\">' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-header-rows\">${ messages.headerRows }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-rows\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-header-columns\">${ messages.headerColumns }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input type=\"numeric\" id=\"k-editor-table-header-columns\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-table-caption\">${ messages.caption }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\"><input id=\"k-editor-table-caption\" class=\"k-input-inner\" type=\"text\"/></span>' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-accessibility-alignment\">${ messages.alignment }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-accessibility-summary\">${ messages.summary }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        `<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md\"><textarea id=\"k-editor-accessibility-summary\" rows=\"5\" class=\"k-input-inner k-editor-accessibility-summary\" placeholder=\"${ messages.tableSummaryPlaceholder }\"></textarea></span>` +\n                    '</div>' +\n                    '<div class=\"k-edit-label\">' +\n                        `<label for=\"k-editor-cells-headers\">${ messages.associateCellsWithHeaders }</label>` +\n                    '</div>' +\n                    '<div class=\"k-edit-field\">' +\n                        '<select id=\"k-editor-cells-headers\">' +\n                            `<option value=\"none\">${ messages.associateNone }</option>` +\n                            `<option value=\"scope\">${ messages.associateScope }</option>` +\n                            `<option value=\"ids\">${ messages.associateIds }</option>` +\n                        '</select>' +\n                    '</div>' +\n                '</div>' +\n                '</div>' +\n                '<div class=\"k-edit-buttons\">' +\n                `<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-primary k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>` +\n                `<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>` +\n            '</div>' +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    open: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.title = messages.tableWizard;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._initTabStripComponent(element);\n        that._initTableViewComponents(element, tableData);\n        that._initCellViewComponents(element, tableData);\n        that._initAccessibilityViewComponents(element, tableData);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n\n    _initTabStripComponent: function(element) {\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectCellViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.cellPadding = tableView.cellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.className = tableView.className.value;\n        tableProperties.id = tableView.id.value;\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.checked;\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.checked;\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.cellPadding = cellView.cellPadding.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value;\n        cellData.id = cellView.id.value;\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapText.checked;\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value;\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value;\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value) {\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n    _initTableViewComponents: function(element, table) {\n        var that = this;\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n\n        var onColumnsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerColumnsNumeric = accessibilityView.headerColumns;\n            var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n            var numberOfColumns = args.sender.value();\n\n            if (numberOfColumns < currentNumberOfColumnsHeaders) {\n                headerColumnsNumeric.value(numberOfColumns);\n            }\n\n            headerColumnsNumeric.max(numberOfColumns);\n        };\n\n        var onRowsNumberChange = function(args) {\n            var accessibilityView = that.components.accessibilityView;\n            var headerRowsNumeric = accessibilityView.headerRows;\n            var currentNumberOfRowHeaders = headerRowsNumeric.value();\n            var numberOfRows = args.sender.value();\n\n            if (numberOfRows < currentNumberOfRowHeaders) {\n                headerRowsNumeric.value(numberOfRows);\n            }\n\n            headerRowsNumeric.max(numberOfRows);\n        };\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n\n        that._initNumericTextbox(element.find(\"#k-editor-table-width\"), \"width\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-height\"), \"height\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-columns\"), \"columns\", tableProperties, tableView, { min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onColumnsNumberChange });\n        that._initNumericTextbox(element.find(\"#k-editor-table-rows\"), \"rows\", tableProperties, tableView, { min: 1, value: DEFAULT_NUMBER_OF_COLS_AND_ROWS, change: onRowsNumberChange });\n        that._initDropDownList(element.find(\"#k-editor-table-width-type\"), \"widthUnit\", tableProperties, tableView, units);\n        that._initDropDownList(element.find(\"#k-editor-table-height-type\"), \"heightUnit\", tableProperties, tableView, units);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-spacing\"), \"cellSpacing\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-table-cell-padding\"), \"cellPadding\", tableProperties, tableView);\n        that._initTableAlignmentDropDown(element.find(\"#k-editor-table-alignment\"), tableProperties);\n        that._initColorPicker(element.find(\"#k-editor-table-bg\"), \"bgColor\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-css-class\"), \"className\", tableProperties, tableView);\n        that._initInput(element.find(\"#k-editor-id\"), \"id\", tableProperties, tableView);\n        that._initNumericTextbox(element.find(\"#k-editor-border-width\"), \"borderWidth\", tableProperties, tableView);\n        that._initColorPicker(element.find(\"#k-editor-border-color\"), \"borderColor\", tableProperties, tableView);\n        that._initBorderStyleDropDown(element.find(\"#k-editor-border-style\"), \"borderStyle\", tableProperties, tableView, borderStyles);\n        that._initCheckbox(element.find(\"#k-editor-collapse-borders\"), \"collapseBorders\", tableProperties, tableView);\n    },\n\n    _initCellViewComponents: function(element, table) {\n        var components = this.components;\n        var cellView = components.cellView = {};\n        table.selectedCells = table.selectedCells = table.selectedCells || [];\n        var cellProperties = table.selectedCells[0] || { borderStyle: \"\", wrapText: true };\n        this._addUnit(units, cellProperties.widthUnit);\n        this._addUnit(units, cellProperties.heightUnit);\n\n        this._initCheckbox(element.find(\"#k-editor-selectAllCells\"), \"selectAllCells\", table.tableProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-width\"), \"width\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-height\"), \"height\", cellProperties, cellView);\n        this._initDropDownList(element.find(\"#k-editor-cell-width-type\"), \"widthUnit\", cellProperties, cellView, units);\n        this._initDropDownList(element.find(\"#k-editor-cell-height-type\"), \"heightUnit\", cellProperties, cellView, units);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cell-margin\"), \"cellMargin\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-cells-padding\"), \"cellPadding\", cellProperties, cellView);\n        this._initCellAlignmentDropDown(element.find(\"#k-editor-cell-alignment\"), cellProperties);\n        this._initColorPicker(element.find(\"#k-editor-cell-bg\"), \"bgColor\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-css-class\"), \"className\", cellProperties, cellView);\n        this._initInput(element.find(\"#k-editor-cell-id\"), \"id\", cellProperties, cellView);\n        this._initNumericTextbox(element.find(\"#k-editor-cell-border-width\"), \"borderWidth\", cellProperties, cellView);\n        this._initColorPicker(element.find(\"#k-editor-cell-border-color\"), \"borderColor\", cellProperties, cellView);\n        this._initBorderStyleDropDown(element.find(\"#k-editor-cell-border-style\"), \"borderStyle\", cellProperties, cellView, borderStyles);\n        this._initCheckbox(element.find(\"#k-editor-wrap-text\"), \"wrapText\", cellProperties, cellView);\n    },\n\n    _initAccessibilityViewComponents: function(element, table) {\n        var components = this.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n\n        this._initInput(element.find(\"#k-editor-table-caption\"), \"captionContent\", tableProperties, accessibilityView);\n        this._initAccessibilityAlignmentDropDown(element.find(\"#k-editor-accessibility-alignment\"), tableProperties);\n        this._initInput(element.find(\"#k-editor-accessibility-summary\"), \"summary\", tableProperties, accessibilityView);\n        this._initAssociationDropDown(element.find(\"#k-editor-cells-headers\"), \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-rows\"), \"headerRows\", tableProperties, accessibilityView, { max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n        this._initNumericTextbox(element.find(\"#k-editor-table-header-columns\"), \"headerColumns\", tableProperties, accessibilityView, { max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS });\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTableAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var cellView = this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var accessibilityView = this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align').css('width', '110px');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property) {\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.value = data[property];\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage) {\n        var component = storage[property] = element.get(0);\n        if (property in data) {\n            component.checked = data[property];\n        }\n    },\n\n    destroy: function() {\n        this._destroyComponents(this.components.tableView);\n        this._destroyComponents(this.components.cellView);\n        this._destroyComponents(this.components.accessibilityView);\n        this._destroyComponents(this.components);\n\n        delete this.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages) {\n        return kendo.template(dialogTemplate)({ messages: messages });\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\n"]}