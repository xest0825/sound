{"version":3,"file":"kendo.actionsheet.js","names":["__meta__","id","name","category","description","depends","$","undefined$1","kendo","window","Widget","ui","ns","Popup","TabKeyTrap","DOCUMENT_ELEMENT","document","documentElement","HIDDEN","HEADER_ID","extend","template","hexColor","defaultItem","text","iconClass","iconSize","iconColor","click","noop","group","disabled","ActionSheet","init","element","options","that","this","fn","call","_hasItems","items","length","_mapItems","_wrapper","_popup","_header","_items","_footer","_tabKeyTrap","wrapper","downEvent","applyEventMap","guid","_mousedownProxy","_mousedown","bind","on","_keydown","events","title","popup","map","defaultItemsMapper","addClass","ACTION_SHEET","wrap","parent","prepend","attr","role","isRtl","support","anchor","omitOriginOffsets","appendTo","modal","animation","_openHandler","append","_createItems","topGroupFilter","itemsFilter","idx","item","itemTemplate","itemElement","icon","data","result","inlineStyles","filter","container","test","color","fontSize","Object","keys","css","prop","bottomGroupFilter","destroy","off","open","removeClass","_elementHeight","outerHeight","outerWidth","trap","close","e","keyCode","ESC","stopPropagation","find","eq","trigger","target","contains","eventTarget","plugin","jQuery"],"sources":["kendo.actionsheet.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\nimport './kendo.popup.js';\n\nvar __meta__ = {\n    id: \"ActionSheet\",\n    name: \"ActionSheet\",\n    category: \"web\", // suite\n    description: \"The ActionSheet widget displays a set of choices related to a task the user initiates.\",\n    depends: [\"core\", \"popup\"] // dependencies\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo;\n    var Widget = kendo.ui.Widget;\n    var ui = kendo.ui;\n    var ns = \".kendoActionSheet\";\n    var Popup = ui.Popup;\n    var TabKeyTrap = Popup.TabKeyTrap;\n    var DOCUMENT_ELEMENT = $(document.documentElement);\n    var MOUSEDOWN = \"down\";\n    var OPEN = \"open\";\n    var CLOSE = \"close\";\n    var ACTIVATE = \"activate\";\n    var ACTION_SHEET_CONTAINER = \"k-actionsheet-container\";\n    var OVERLAY = \"k-overlay\";\n    var ACTION_SHEET = \"k-actionsheet k-actionsheet-jq\";\n    var ACTION_SHEET_BOTTOM = \"k-actionsheet-bottom\";\n    var STATEDISABLED = \"k-disabled\";\n    var HIDDEN = \"k-hidden\";\n    var HEADER_ID = \"actionsheet-header\";\n    var extend = $.extend;\n    var template = kendo.template;\n    var CLICK = \"click\";\n    var KEYDOWN = \"keydown\";\n    var hexColor = /^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/;\n    var HEADER_TEMPLATE = '<div id=\"' + HEADER_ID + '\" class=\"k-actionsheet-header\">' +\n                                \"#=title#\" +\n                            '</div>';\n    var ITEM_TEMPLATE = '<li role=\"none\" class=\"k-actionsheet-item #= disabled ? \"' + STATEDISABLED + '\" : \"\" #\">' +\n                            '<a href=\"\\\\#\" role=\"button\" class=\"k-actionsheet-action\">' +\n                                '#if(icon){# #=icon# #}#' +\n                                '<span class=\"k-actionsheet-item-text\">' +\n                                    '<span class=\"k-actionsheet-item-title\">#:text#</span>' +\n                                    '#if(description){#<span class=\"k-actionsheet-item-description\">#:description#</span>#}#' +\n                                '</span>' +\n                            '</a>' +\n                        '</li>';\n    var SEPARATOR = '<hr class=\"k-hr\" />';\n    var defaultItem = {\n        text: \"\",\n        description: \"\",\n        iconClass: \"\",\n        iconSize: 0,\n        iconColor: \"\",\n        click: $.noop,\n        group: \"top\",\n        disabled: false\n    };\n\n    function contains(container, target) {\n        if (!container || !target) {\n            return false;\n        }\n        return container === target || $.contains(container, target);\n    }\n\n    function createIcon(data) {\n        var result = $('<span></span>');\n        var inlineStyles = {};\n\n        if (!data.iconClass) {\n            return '';\n        }\n\n        result.addClass(data.iconClass + \" k-actionsheet-item-icon\");\n\n        if (data.iconColor && hexColor.test(data.iconColor)) {\n            inlineStyles.color = data.iconColor;\n        } else if (data.iconColor) {\n            result.addClass(\"k-text-\" + data.iconColor);\n        }\n\n        if (data.iconSize) {\n            inlineStyles.fontSize = data.iconSize;\n        }\n\n        if (Object.keys(inlineStyles).length) {\n            result.css(inlineStyles);\n        }\n\n        return result;\n    }\n\n    var ActionSheet = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._hasItems = options.items && options.items.length;\n            that._mapItems();\n            that._wrapper();\n            that._popup();\n            that._header();\n            that._items();\n            that._footer();\n\n            that._tabKeyTrap = new TabKeyTrap(that.wrapper);\n\n            that.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n            that._mousedownProxy = that._mousedown.bind(that);\n            that.wrapper.on(KEYDOWN + ns, that, that._keydown.bind(that));\n        },\n\n        events: [\n            OPEN,\n            CLOSE\n        ],\n\n        options: {\n            name: \"ActionSheet\",\n            title: \"\",\n            items: [],\n            popup: null\n        },\n\n        _mapItems: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n\n            that.options.items = that.options.items.map(defaultItemsMapper);\n        },\n\n        _wrapper: function() {\n            var that = this;\n            var element = that.element;\n            var wrapper;\n\n            element.addClass(ACTION_SHEET + \" \" + ACTION_SHEET_BOTTOM + \" k-popup\");\n            that.wrapper = wrapper = element.wrap(\"<div class='\" + ACTION_SHEET_CONTAINER + \" \" + HIDDEN + \"'></div>\").parent();\n            wrapper.prepend($('<div></div>').addClass(OVERLAY));\n\n            element.attr({\n                role: \"dialog\",\n                \"aria-modal\": true,\n                \"aria-labelledby\": HEADER_ID\n            });\n        },\n\n        _popup: function() {\n            var that = this;\n            var options = that.options;\n\n            that.popup = new Popup(that.element, extend(options.popup,\n                options,\n                {\n                    name: \"Popup\",\n                    isRtl: kendo.support.isRtl(options.anchor),\n                    omitOriginOffsets: true,\n                    appendTo: that.wrapper,\n                    modal: true,\n                    animation: false,\n                    anchor: that.wrapper\n                }));\n\n            that.popup.bind(ACTIVATE, that._openHandler.bind(that));\n        },\n\n        _header: function() {\n            var that = this;\n            var options = that.options;\n\n            if (!options.title) {\n                return;\n            }\n\n            that.element.append(template(HEADER_TEMPLATE)(options));\n        },\n\n        _items: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n\n            that._createItems(topGroupFilter);\n        },\n\n        _createItems: function(itemsFilter) {\n            var that = this;\n            var items = that.options.items.filter(itemsFilter);\n            var idx;\n            var item;\n            var itemTemplate;\n            var itemElement;\n            var container = $(\"<ul class='k-actionsheet-items' role='group'></ul>\");\n            var icon;\n\n            if (!items.length) {\n                return;\n            }\n\n            that.element.append(container);\n            itemTemplate = template(ITEM_TEMPLATE);\n\n            for (idx = 0; idx < items.length; idx++) {\n                item = items[idx];\n                icon = createIcon(item);\n                itemElement = $(itemTemplate(extend({}, item, { icon: icon && icon.prop('outerHTML') })));\n                container.append(itemElement);\n\n                if (item.click) {\n                    itemElement.on(CLICK + ns, item.click.bind(that));\n                }\n            }\n        },\n\n        _footer: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n            that.element.append(SEPARATOR);\n            that._createItems(bottomGroupFilter);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n            that.element.off(ns);\n            that.wrapper.off(ns);\n            that.popup.destroy();\n        },\n\n        open: function() {\n            var that = this;\n\n            that.wrapper.removeClass(HIDDEN);\n            that._elementHeight = that._elementHeight || that.element.outerHeight();\n            that.popup.open((that.wrapper.outerWidth() - that.element.outerWidth()) / 2, that.wrapper.outerHeight() - that._elementHeight);\n            DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy)\n                .on(that.downEvent, that._mousedownProxy);\n\n            that._tabKeyTrap.trap();\n        },\n\n        close: function() {\n            var that = this;\n\n            that.popup.close();\n            that.wrapper.addClass(HIDDEN);\n            DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy);\n        },\n\n        _keydown: function(e) {\n            var that = this;\n            var keys = kendo.keys;\n            var keyCode = e.keyCode;\n\n            if (keyCode == keys.ESC) {\n                e.stopPropagation();\n                that.close();\n            }\n        },\n\n        _openHandler: function() {\n            var that = this;\n\n            that.element.find('li.k-actionsheet-item').eq(0).find(\"a\").trigger(\"focus\");\n        },\n\n        _mousedown: function(e) {\n            var that = this;\n            var container = that.element[0];\n            var target = kendo.eventTarget(e);\n\n            if (!contains(container, target)) {\n                that.close();\n            }\n        }\n    });\n\n    function topGroupFilter(item) {\n        return item.group === \"top\";\n    }\n\n    function bottomGroupFilter(item) {\n        return item.group !== \"top\";\n    }\n\n    function defaultItemsMapper(item) {\n        return extend({}, defaultItem, item);\n    }\n\n    ui.plugin(ActionSheet);\n\n})(window.kendo.jQuery);\n"]}