{"version":3,"file":"kendo.actionsheet.js","names":["__meta__","id","name","category","description","depends","$","undefined$1","kendo","window","encode","htmlEncode","Widget","ui","ns","Popup","TabKeyTrap","DOCUMENT_ELEMENT","document","documentElement","HIDDEN","HEADER_ID","extend","template","CLICK","hexColor","HEADER_TEMPLATE","title","ITEM_TEMPLATE","disabled","icon","text","defaultItem","iconClass","iconSize","iconColor","click","noop","group","ActionSheet","init","element","options","that","this","fn","call","_hasItems","items","length","_mapItems","_wrapper","_popup","_header","_items","_footer","_tabKeyTrap","wrapper","downEvent","applyEventMap","guid","_mousedownProxy","_mousedown","bind","on","_keydown","events","popup","map","defaultItemsMapper","addClass","ACTION_SHEET","wrap","parent","prepend","attr","role","isRtl","support","anchor","omitOriginOffsets","appendTo","modal","animation","_openHandler","append","_createItems","topGroupFilter","itemsFilter","idx","item","itemTemplate","itemElement","data","result","inlineStyles","filter","container","test","color","fontSize","Object","keys","css","prop","bottomGroupFilter","destroy","off","open","removeClass","_elementHeight","outerHeight","outerWidth","trap","close","e","keyCode","target","ESC","stopPropagation","hasClass","ENTER","trigger","find","eq","contains","eventTarget","plugin","jQuery"],"sources":["kendo.actionsheet.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\nimport './kendo.popup.js';\n\nvar __meta__ = {\n    id: \"ActionSheet\",\n    name: \"ActionSheet\",\n    category: \"web\", // suite\n    description: \"The ActionSheet widget displays a set of choices related to a task the user initiates.\",\n    depends: [\"core\", \"popup\"] // dependencies\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo;\n    var encode = kendo.htmlEncode;\n    var Widget = kendo.ui.Widget;\n    var ui = kendo.ui;\n    var ns = \".kendoActionSheet\";\n    var Popup = ui.Popup;\n    var TabKeyTrap = Popup.TabKeyTrap;\n    var DOCUMENT_ELEMENT = $(document.documentElement);\n    var MOUSEDOWN = \"down\";\n    var OPEN = \"open\";\n    var CLOSE = \"close\";\n    var ACTIVATE = \"activate\";\n    var ACTION_SHEET_CONTAINER = \"k-actionsheet-container\";\n    var OVERLAY = \"k-overlay\";\n    var ACTION_SHEET = \"k-actionsheet k-actionsheet-jq\";\n    var ACTION_SHEET_BOTTOM = \"k-actionsheet-bottom\";\n    var STATEDISABLED = \"k-disabled\";\n    var HIDDEN = \"k-hidden\";\n    var HEADER_ID = \"actionsheet-header\";\n    var extend = $.extend;\n    var template = kendo.template;\n    var CLICK = \"click\";\n    var KEYDOWN = \"keydown\";\n    var hexColor = /^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/;\n    var HEADER_TEMPLATE = ({ title }) => `<span id=\"${HEADER_ID}\" class=\"k-actionsheet-header\">${title}</span>`;\n    var ITEM_TEMPLATE = ({ disabled, icon, text, description }) => `<span role=\"button\" tabindex=\"0\" class=\"k-actionsheet-item ${disabled ? STATEDISABLED : \"\"}\"><span class=\"k-actionsheet-action\">${icon ? icon : \"\"}<span class=\"k-actionsheet-item-text\"><span class=\"k-actionsheet-item-title\">${encode(text)}</span>${description ? '<span class=\"k-actionsheet-item-description\">' + encode(description) + '</span>' : ''}</span></span></span>`;\n    var SEPARATOR = '<hr class=\"k-hr\" />';\n    var defaultItem = {\n        text: \"\",\n        description: \"\",\n        iconClass: \"\",\n        iconSize: 0,\n        iconColor: \"\",\n        click: $.noop,\n        group: \"top\",\n        disabled: false\n    };\n\n    function contains(container, target) {\n        if (!container || !target) {\n            return false;\n        }\n        return container === target || $.contains(container, target);\n    }\n\n    function createIcon(data) {\n        var result = $('<span></span>');\n        var inlineStyles = {};\n\n        if (!data.iconClass) {\n            return '';\n        }\n\n        result.addClass(data.iconClass + \" k-actionsheet-item-icon\");\n\n        if (data.iconColor && hexColor.test(data.iconColor)) {\n            inlineStyles.color = data.iconColor;\n        } else if (data.iconColor) {\n            result.addClass(\"k-text-\" + data.iconColor);\n        }\n\n        if (data.iconSize) {\n            inlineStyles.fontSize = data.iconSize;\n        }\n\n        if (Object.keys(inlineStyles).length) {\n            result.css(inlineStyles);\n        }\n\n        return result;\n    }\n\n    var ActionSheet = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._hasItems = options.items && options.items.length;\n            that._mapItems();\n            that._wrapper();\n            that._popup();\n            that._header();\n            that._items();\n            that._footer();\n\n            that._tabKeyTrap = new TabKeyTrap(that.wrapper);\n\n            that.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n            that._mousedownProxy = that._mousedown.bind(that);\n            that.wrapper.on(KEYDOWN + ns, that, that._keydown.bind(that));\n        },\n\n        events: [\n            OPEN,\n            CLOSE\n        ],\n\n        options: {\n            name: \"ActionSheet\",\n            title: \"\",\n            items: [],\n            popup: null\n        },\n\n        _mapItems: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n\n            that.options.items = that.options.items.map(defaultItemsMapper);\n        },\n\n        _wrapper: function() {\n            var that = this;\n            var element = that.element;\n            var wrapper;\n\n            element.addClass(ACTION_SHEET + \" \" + ACTION_SHEET_BOTTOM + \" k-popup\");\n            that.wrapper = wrapper = element.wrap(\"<div class='\" + ACTION_SHEET_CONTAINER + \" \" + HIDDEN + \"'></div>\").parent();\n            wrapper.prepend($('<div></div>').addClass(OVERLAY));\n\n            element.attr({\n                role: \"dialog\",\n                \"aria-modal\": true,\n                \"aria-labelledby\": HEADER_ID\n            });\n        },\n\n        _popup: function() {\n            var that = this;\n            var options = that.options;\n\n            that.popup = new Popup(that.element, extend(options.popup,\n                options,\n                {\n                    name: \"Popup\",\n                    isRtl: kendo.support.isRtl(options.anchor),\n                    omitOriginOffsets: true,\n                    appendTo: that.wrapper,\n                    modal: true,\n                    animation: false,\n                    anchor: that.wrapper\n                }));\n\n            that.popup.bind(ACTIVATE, that._openHandler.bind(that));\n        },\n\n        _header: function() {\n            var that = this;\n            var options = that.options;\n\n            if (!options.title) {\n                return;\n            }\n\n            that.element.append(template(HEADER_TEMPLATE)(options));\n        },\n\n        _items: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n\n            that._createItems(topGroupFilter);\n        },\n\n        _createItems: function(itemsFilter) {\n            var that = this;\n            var items = that.options.items.filter(itemsFilter);\n            var idx;\n            var item;\n            var itemTemplate;\n            var itemElement;\n            var container = $(\"<div class='k-actionsheet-items' role='group'></div>\");\n            var icon;\n\n            if (!items.length) {\n                return;\n            }\n\n            that.element.append(container);\n            itemTemplate = template(ITEM_TEMPLATE);\n\n            for (idx = 0; idx < items.length; idx++) {\n                item = items[idx];\n                icon = createIcon(item);\n                itemElement = $(itemTemplate(extend({}, item, { icon: icon && icon.prop('outerHTML') })));\n                container.append(itemElement);\n\n                if (item.click) {\n                    itemElement.on(CLICK + ns, item.click.bind(that));\n                }\n            }\n        },\n\n        _footer: function() {\n            var that = this;\n\n            if (!that._hasItems) {\n                return;\n            }\n            that.element.append(SEPARATOR);\n            that._createItems(bottomGroupFilter);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n            that.element.off(ns);\n            that.wrapper.off(ns);\n            that.popup.destroy();\n        },\n\n        open: function() {\n            var that = this;\n\n            that.wrapper.removeClass(HIDDEN);\n            that._elementHeight = that._elementHeight || that.element.outerHeight();\n            that.popup.open((that.wrapper.outerWidth() - that.element.outerWidth()) / 2, that.wrapper.outerHeight() - that._elementHeight);\n            DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy)\n                .on(that.downEvent, that._mousedownProxy);\n\n            that._tabKeyTrap.trap();\n        },\n\n        close: function() {\n            var that = this;\n\n            that.popup.close();\n            that.wrapper.addClass(HIDDEN);\n            DOCUMENT_ELEMENT.off(that.downEvent, that._mousedownProxy);\n        },\n\n        _keydown: function(e) {\n            var that = this;\n            var keys = kendo.keys;\n            var keyCode = e.keyCode;\n            var target = $(e.target);\n\n            if (keyCode == keys.ESC) {\n                e.stopPropagation();\n                that.close();\n            } else if (target.hasClass(\"k-actionsheet-item \") && keyCode === keys.ENTER) {\n                target.trigger(CLICK);\n            }\n        },\n\n        _openHandler: function() {\n            var that = this;\n\n            that.element.find('.k-actionsheet-item').eq(0).trigger(\"focus\");\n        },\n\n        _mousedown: function(e) {\n            var that = this;\n            var container = that.element[0];\n            var target = kendo.eventTarget(e);\n\n            if (!contains(container, target)) {\n                that.close();\n            }\n        }\n    });\n\n    function topGroupFilter(item) {\n        return item.group === \"top\";\n    }\n\n    function bottomGroupFilter(item) {\n        return item.group !== \"top\";\n    }\n\n    function defaultItemsMapper(item) {\n        return extend({}, defaultItem, item);\n    }\n\n    ui.plugin(ActionSheet);\n\n})(window.kendo.jQuery);\n"]}