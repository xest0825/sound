{"version":3,"file":"kendo.grid.js","names":["__meta__","id","name","category","description","depends","features","$","undefined$1","GroupsPager","kendo","window","ui","DataSource","data","ObservableObject","tbodySupportsInnerHtml","support","tbodyInnerHtml","activeElement","_activeElement","Widget","outerWidth","_outerWidth","outerHeight","_outerHeight","keys","isPlainObject","extend","map","grep","isArray","Array","inArray","push","prototype","isFunction","isEmptyObject","contains","math","Math","DOT","PROGRESS","ERROR","DATA_CELL","attr","NAVROW","NAVCELL","ITEMROW","COLGROUP","HEADERCELLS","NS","EDIT","BEFOREEDIT","SAVE","REMOVE","DETAILINIT","FILTERMENUINIT","COLUMNMENUINIT","FILTERMENUOPEN","COLUMNMENUOPEN","CELLCLOSE","CHANGE","COLUMNHIDE","COLUMNSHOW","SAVECHANGES","DATABOUND","DETAILEXPAND","DETAILCOLLAPSE","ITEM_CHANGE","PAGE","PAGING","SCROLL","SYNC","LOAD_START","LOAD_END","FOCUSED","FOCUSABLE","SELECTED","CHECKBOX","CHECKBOXINPUT","NORECORDSCLASS","SORTED_CLASS","STICKY_CELL_CLASS","STICKY_HEADER_CLASS","STICKY_FOOTER_CLASS","STICKY_HEADER_NO_BORDER_CLASS","RESIZE","COLUMNRESIZE","COLUMNREORDER","COLUMNLOCK","COLUMNUNLOCK","COLUMNSTICK","COLUMNUNSTICK","ROWREORDER","NAVIGATE","CLICK","HEIGHT","TABINDEX","FUNCTION","STRING","BOTTOM","CONTAINER_FOR","FIELD","INPUT","INCELL","INLINE","OVERFLOW","SORT","GROUP_SORT","COLLAPSE","EXPAND","ID","ARIA_LABEL","ARIA_OWNS","ARIA_ROWCOUNT","ARIA_COLCOUNT","ARIA_COLINDEX","ARIA_ROWINDEX","ARIA_EXPANDED","ARIA_CHECKED","ARIA_ACTIVEDESCENDANT","ROLE","NONE","ROW","ROWGROUP","COLUMNHEADER","GRIDCELL","formatRegExp","templateHashRegExp","leftRegExp","RegExp","rightRegExp","nonDataCellsRegExp","filterRowRegExp","isRtl","browser","isIE11","msie","version","isMac","test","navigator","userAgent","classNames","Pager","init","element","options","fn","call","this","dataSource","useRanges","_omitPrefetch","totalPages","ceil","_collapsedTotal","pageSize","groupsTotal","VirtualScrollable","that","_refreshHandler","refresh","bind","setDataSource","wrap","unbind","virtual","itemHeight","noop","prefetch","maxScrollHeight","events","destroy","wrapper","add","verticalScrollbar","off","clearTimeout","_timeout","_scrollingTimeout","drag","scrollbar","css","width","overflow","content","children","first","parent","on","_wheelScroll","_wrapper","kineticScrollNeeded","touch","UserEvents","global","allowSelection","start","e","sender","capture","move","scrollTop","y","delta","scrollLeft","x","preventDefault","appendTo","_scroll","ctrlKey","wheelDeltaY","clientHeight","scrollHeight","delayLoading","currentTarget","rowHeight","skip","_rangeStart","height","innerHeight","isScrollingUp","_scrollbarTop","firstItemIndex","max","floor","lastItemOffset","lastItemIndex","_preventScroll","_prevScrollTop","_scrollTop","_scrolling","_fetch","trigger","setTimeout","_page","take","scrollToTop","_scrollTo","scrollToBottom","_scrollWrapperToTop","_scrollWrapperToBottom","_scrollWrapperOnColumnResize","initialScrollTop","scrollWidth","clientWidth","_wrapperScrolled","_isScrolledToBottom","_isWrapperScrolledToBottom","_isScrolledToTop","parseInt","itemIndex","rowIndex","position","index","result","rangeStart","scrollIntoView","row","container","containerHeight","containerScroll","elementOffset","offsetTop","elementHeight","offsetHeight","scrollingUp","currentSkip","fetching","webkitCorrection","webkit","total","_isGroupPaged","min","_fetching","callback","isGroupPaged","_groupRangeExists","inRange","range","repaintScrollbar","shouldScrollWrapper","totalHeight","idx","html","maxHeight","wrapperElement","wasScrolledToBottom","addScrollBarHeight","offsetWidth","action","cancel","page","attrEquals","attrName","attrValue","groupCells","count","join","stringifyAttributes","attributes","defaultCommands","create","text","className","iconClass","save","edit","update","themeColor","canceledit","excel","pdf","search","cursor","context","value","document","body","reorder","selector","source","dest","before","sourceIndex","eq","elements","lockedContent","filter","find","attachCustomCommandEvent","commands","length","command","commandName","click","replace","normalizeColumns","columns","encoded","hide","locked","parentIds","column","hidden","field","isVisible","addHiddenStyle","footerAttributes","headerAttributes","uid","guid","headers","columnParent","parents","columnParents","inserted","splice","setColumnVisibility","visible","setVisibility","show","method","removeHiddenStyle","setColumnMediaVisibility","setColumnMatchesMedia","_hideByMedia","matchesMedia","columnMatchesMedia","isUndefined","media","isCellVisible","style","display","visibleColumns","columnsWithMedia","i","minScreenWidth","Error","concat","toJQuery","toArray","findColumnByField","moveCellsBetweenContainers","sources","target","leafs","destination","groups","sourcesDepth","depth","targetDepth","rows","insertAfter","last","cells","rowSpan","addRowSpanValue","moveCells","updateCellIndex","thead","offset","allColumns","leafColumns","el","hasClass","columnPosition","cell","temp","sourcePosition","columnVisiblePosition","ths","t","cellCounts","findReorderTarget","masterColumns","parentColumns","rtl","targetLocked","findParentColumnWithChildren","targetIndex","flatColumnsInDomOrder","flatColumns","lockedColumns","nonLockedColumns","targetParentContainerIndex","hiddenLeafColumnsCount","counter","sumWidths","cols","columnsWidth","colWidth","indexOf","removeEmptyRows","emptyRowsCount","remove","mapColumnToCellRows","setLeftAndRightStyles","left","right","createColumnAttribute","attribute","property","addColumnAttribute","removeColumnAttribute","stickyColumns","sticky","visibleNonLockedColumns","visibleLockedColumns","visibleLeafColumns","visibleLeafExportColumns","values","childColumns","visibleChildColumns","editField","title","format","editor","editorOptions","label","leafDataCells","indexAttr","sort","a","b","indexA","indexB","parentColumnsCells","closest","headerRows","level","parentCellsWithChildren","prevCells","prevAll","colSpan","parentCell","getAttribute","childColumnsCells","colSpanAttr","child","next","appendContent","tbody","table","empty","placeholder","tmp","innerHTML","createElement","firstChild","replaceChild","match","normalizeCols","hasDetails","colgroup","is","append","prepend","convertToObject","array","item","formatGroupValue","columnValues","groupValue","htmlEncode","setCellVisibility","pad","hideColumnCells","columnIndex","groupRows","hasSubgroups","items","groupFooters","aggregates","showColumnCells","updateColspan","toAdd","toRemove","num","tableWidth","Grid","DataBoundWidget","_events","_element","_ariaId","_columns","_foreignKeyPromises","when","apply","then","_continueInit","_dataSource","_stickyColumns","_tbody","_thead","_groupable","_toolbar","_pageable","_setContentHeight","_templates","_navigatable","_selectable","_clipboard","_details","_editable","_attachCustomCommandsEvent","_adaptiveColumns","_minScreenSupport","autoBind","fetch","_group","_groups","_footer","addClass","_resizeHandler","resize","notify","scrollableContent","scrollable","leftMostPosition","groupable","virtualScrollable","navigatable","selectable","toolbar","filterable","sortable","allowCopy","pageable","persistSelection","editable","encodeTitles","rowTemplate","altRowTemplate","noRecords","resizable","reorderable","columnMenu","detailTemplate","columnResizeHandleWidth","mobile","loaderType","messages","cancelDelete","confirmation","confirmDelete","expandCollapseColumnHeader","groupHeader","ungroupHeader","itemsSelected","dragHandleLabel","toolbarLabel","groupingHeaderLabel","filterCellTitle","reorderableInstance","_angularItems","_destroyColumnAttachments","_navigatableTables","_headertables","pager","timer","_progressTimeOut","_collapseGroupsTimeOut","_endlessFetchTimeOut","_destroyGroupable","clearArea","_selectedIds","copyHandler","updateClipBoardState","clearAreaHandler","_resizeUserEvents","_resizeHandleDocumentClickHandler","_destroyVirtualScrollable","editableUserEvents","_lockedContentUserEvents","_destroyEditable","_progressHandler","_errorHandler","_clearSortClasses","_sortHandler","lockedHeader","_removeLockedContainers","pane","_isMobile","minScreenResizeHandler","_detachColumnMediaResizeHandler","_draggableInstance","_draggableRowsInstance","lockedRowTemplate","lockedAltRowTemplate","footerTemplate","groupFooterTemplate","lockedGroupFooterTemplate","noRecordsTemplate","scrollables","footer","lockedTable","lockedFooter","_groupableClickHandler","_groupRows","_setContentWidthHandler","getOptions","deepExtend","initialData","_data","group","aggregate","transport","$angular","setOptions","currentOptions","mobileWrapper","roleSelector","after","removeClass","_setEvents","_items","includeGroupRows","tr","dataItems","n","resizeHandle","angular","get","each","th","filterMenu","_aria","tbodyId","headerGroupId","footerGroupId","tableOwned","rowsCount","gridRole","_hasDetails","groupingHeader","gridId","tableTabindex","numberOfFixedRows","trailingColumns","_trailingColumns","virtualScroll","_ariaRowIndex","_ariaColumnIndex","role","_ariaHeaderFooter","_ariaLockedContent","_ariaGroupTitles","previousIndex","dataIndex","cellsIndex","dataVirtual","not","lockedHeaderRows","firstIndex","Number","MAX_VALUE","lastIndex","lockedLastIndex","previousVirtual","nextVirtual","eachHeaderCell","j","current","currentIndex","lockedParent","setAttribute","prev","forEach","type","rowGroup","groupId","_ariaLocked","_cellId","lockedRows","ownedCells","_cellsIds","tableRows","_ariaAddHiddenColIndex","leafColsCount","_ariaRemoveHiddenColIndex","removeAttr","currentRow","numberOfHeaderRows","bodyRows","footerRows","totalNumberOfItems","previousItems","previousMaster","prefix","_createResizeHandle","headerWrap","ieCorrection","leftMargin","leftBorderWidth","top","indicatorWidth","halfResizeHandle","rtlCorrection","mozilla","parseFloat","_autoFitLeafColumn","_positionColumnResizeHandle","lockedHead","button","buttons","which","hasAttribute","_resizeHandleDocumentClick","_resetResizeHandleHeader","_hideResizeHandle","_positionColumnResizeHandleTouch","threshold","minHold","hold","resizeColumn","columnWidth","col","isLocked","isHidden","mobileOS","contentTable","header","columnMinWidth","minResizableWidth","gridWidth","constrain","totalWidth","_footerWidth","_scrollVirtualWrapperOnColumnResize","_applyLockedContainersWidth","_syncLockedContentHeight","_syncLockedHeaderHeight","_updateStickyColumns","_resizable","columnStart","isMobile","Resizable","handle","hint","location","rtlMultiplier","currentWidth","resizeend","newWidth","oldWidth","_draggable","kendoDraggable","autoScroll","dragstart","dragend","_reorderable","kendoReorderable","draggable","dropFilter","dragOverContainers","lockable","inSameContainer","change","oldIndex","newIndex","reorderColumn","_reorderHeader","destPosition","sourceLockedColumnsCount","lockedColumnDepth","nonLockedColumnDepth","sourceLockedColumns","targetLockedColumns","_reorderContent","headerCol","footerCol","beforeVisibleColumn","visibleSources","destIndex","colSourceIndex","colDest","lockedCount","columnsArray","_findClosestVisibleColumnIndex","slice","_hasFilterRow","_hasVirtualColumns","reverse","closestVisibleColumn","leafIndex","autoFitColumn","_hasReorderableRows","_hasDragHandleColumn","_draggableRows","_checkBoxSelection","Selectable","parseOptions","select","clone","elm","innerText","_reorderableRows","smartPosition","allowIcon","orientation","reorderDropCue","positionDropCue","dropTarget","firstCellLeft","getOffset","transform","externalDraggable","_triggerRowRorder","args","reorderRows","rowsLength","targetItem","dataItem","_rowDropping","pushMove","autoFitColumns","headerTable","leafCols","minWidth","contentDiv","menu","thWidth","visibleLocked","notGroupOrHierarchyCol","notGroupOrHierarchyVisibleCell","footerTable","tables","safari","oldColumnWidth","newColumnWidth","lockChanged","destColumn","groupHeaderColumnTemplateColumns","groupHeaderColumnTemplate","sourceColumns","_updateLockedCols","_updateCols","_updateColumnCellIndex","_updateColumnSorters","_renderGroupRows","_updateTablesWidth","_updateFirstColumnClass","lockColumn","unstickColumn","unlockColumn","stickColumn","_removeStickyAttributes","_removeStickyStyles","_anyStickyColumns","_updateStickyFilterCells","cellIndex","td","lockedColumnOffset","_modelForContainer","_editMode","getByUid","_calculateColumnIndex","virtualOffset","editContainer","_editContainer","_mousedownOnEditCell","tap","isLockedCell","has","end","closeCell","editCell","_scrollVirtualWrapper","shouldCloseCell","_virtualColScroll","_belongsToGrid","editRow","_isVirtualInlineEditable","stopPropagation","removeRow","_confirmation","model","isColumnEditable","_attachModelChange","_shouldClearEditableState","_clearEditableState","kendoEditable","fields","skipFocus","_isVirtualIncellEditable","_editableState","adjustRowHeight","_relatedRow","_syncLockedScroll","_adjustLockedHorizontalScrollBar","touchScroller","_adjustRowsHeight","table1","table2","diff","lockedHeigth","tableHeigth","syncTableHeight","_syncLockedFooterHeight","editView","_editCancelClickHandler","_editUpdateClickHandler","_detachModelChange","_destroyEditView","_editableIsClosing","close","_confirmDialog","purge","navigate","_modelChangeHandler","_modelChange","isCancel","_displayCell","ns","state","storage","settings","Template","templateSettings","tmpl","template","_cellTmpl","_removeRow","key","schema","mode","cancelRow","_removeGroupIfEmpty","idField","sync","_createPopupEditor","_createInlineEditor","_editCancelClick","_editUpdateClick","saveRow","_setCurrent","focusTable","_editFields","updateText","cancelText","updateIconClass","cancelIconClass","tempCommand","buttonsHTML","editMenuGuid","unescape","getCommand","_createButton","kendoWindow","modal","userTriggered","clearContainer","Form","buttonsTemplate","formData","_openPopUpEditor","windowEditor","windowOptions","_editAnimation","center","open","Editable","cancelChanges","_displayRow","valid","deferred","Deferred","reject","promise","resolve","related","newRow","nextRow","isSelected","isAlt","replaceWith","angularElements","angularData","_showMessage","Confirm","preventScroll","closable","okText","done","fail","confirmDialog","confirm","_isVirtualEditable","_virtualPageToTop","saveChanges","addRow","createAt","view","createAtBottom","toLowerCase","virtualEditable","serverPaging","_removeCurrent","_virtualAddRow","insert","_editModel","_firstEditableColumnIndex","_virtualAddRowAtBottom","_virtualAddRowAtTop","at","_virtualPageToBottom","_virtualPage","_toolbarTmpl","prependTo","saveAsExcel","saveAsPDF","_pdfInitialized","input","_searchTimeOut","searchFields","expression","filters","logic","getColumnsFields","endless","_endlessPageSize","_pushExpression","isServerFiltering","serverFiltering","defaultOperators","string","number","date","enums","boolean","operator","modelInfo","reader","fieldInfo","parseFn","parse","searchText","attributeClassMatch","split","renderButton","_hasFooters","groupRow","collapseGroup","expandGroup","_isLocked","_attachGroupable","draggables","enabled","chrome","Groupable","groupContainer","draggableElements","allowDrag","removeGroup","_showUngroupedColumn","_hideGroupedColumns","_resetEndless","_addGroupableOptionsToHeader","colID","hideOnGroup","showColumn","hideColumn","_skip","_pageSize","_take","headerCell","columnOptions","columnFieldMap","headerCells","_headerCells","kendoGroupable","_removeGroupableOptionsFromHeader","removeData","_continuousItems","lockedItems","nonLockedItems","multi","notString","multiple","aria","dragToSelect","selectedValues","_persistSelectedRows","_uncheckCheckBoxes","_checkRows","_toggleHeaderCheckState","event","useAllItems","relatedTarget","continuousItems","ignoreOverlapped","addIdToRanges","triggerChange","lastSelection","eventObject","keyCode","SPACEBAR","shiftKey","_deselectCheckRows","clear","_lastActive","LEFT","RIGHT","UP","DOWN","selectRange","_firstSelectee","toCompare","compareElements","grid","stopImmediatePropagation","tableClick","copySelection","areaClipBoard","val","getTSV","copySelectionToClipboard","includeHeaders","_createAreaClipBoard","execCommand","jQuery","Event","metaKey","getSelection","toString","selection","createRange","opacity","selected","delimeter","hasLockedCols","cellsOffset","lockedCols","inLockedArea","_getCellField","cellText","rowsOffset","getTitle","headerIndex","findIndex","_anyColumnHasMediaQuery","_setColumnsMediaVisibility","_attachColumnMediaResizeHandler","_columnsWithMediaQuery","_columnMediaResizeHandler","_onColumnMediaResize","_setContentMediaWidth","_setColumnMediaVisibility","_showColumnByMedia","_hideColumnByMedia","initiallyHidden","headerColumns","headerColgroup","headerColumnsCount","visibleHeaderColumnsCount","hiddenHeaderColumnsCount","totalHeaderWidth","currentHeaderWidth","colgroupChild","columnStyleWidth","hideMinScreenCols","screenWidth","innerWidth","screen","_iterateMinScreenCols","any","_setStickyColumns","filterCells","stickyStyle","updateStyles","visibleStickyColumns","stickyWidths","_calculateStickyWidths","_setStickyClassAttributes","_setStickyStyleAttributes","_setStickyStyles","initialLeftWidth","initialRightWidth","nextColumnLeft","nextColumnRight","fill","_sumColumnWidth","masterIndex","stickyLeft","stickyRight","childCols","childStickyWidths","cellClassRegExp","headerClassRegExp","footerClassRegExp","headerClassNoBorderRegExp","leafsCols","_getColumnHeader","groupHeaderColumnTemplateClass","_sumCurrentWidths","getSelectedData","selectedRanges","selectedRangeNames","Object","selectedSingleItems","_mapSelectionToData","exportSelectedToExcel","ooxml","exporter","ExcelExporter","book","sheets","autoWidth","freezePane","exportData","sortHandler","exportDataSort","isExcelExportableColumn","_addRangeSelectionRows","_addSingleSelectionRows","workbook","Workbook","skipCustomHeight","toDataURLAsync","dataURI","saveAs","fileName","proxyURL","forceProxy","_setExporterColumns","_createExportRows","_rows","_dataRows","_prepareColumn","columnsFilter","curr","isRowSelection","nodeName","columnMapHandler","fieldAttr","_relatedCell","clearSelection","checked","prop","rangeSelectedAttr","modelId","allRows","selectedViewIds","selectedKeyNames","ids","_updateCurrentAttr","nextId","descId","headerId","_current","_scrollCurrent","tableContainer","isInLockedContainer","isInContent","scrollableContainer","addBack","_rowVirtualIndex","preventTrigger","_filterFocusable","siblings","colspan","_virtualCellIndex","_lastCellIndex","_updateSelctCheckbox","nextCheckbox","focus","elementToLowercase","tagName","isHorizontal","elementOffsetDir","containerOffsetDir","abs","offsetLeft","bottomDistance","firefoxCorrection","edge","dataTables","headerTables","_tableFocus","_tableBlur","_tableKeyDown","_filterFocus","_findCellIndex","startIndex","reversed","_scrollToColumn","HOME","END","requestInProgress","canHandle","isDefaultPrevented","altKey","handled","_moveUp","_moveDown","_moveRight","_moveLeft","PAGEDOWN","_handlePageDown","PAGEUP","_handlePageUp","_handleHome","_handleEnd","_handleSpaceKey","ENTER","F2","_handleEnterKey","ESC","_handleEscKey","TAB","_handleTabKey","currentTable","collapseRow","_moveColumn","_prevHorizontalCell","_tabNext","_horizontalContainer","expandRow","_nextHorizontalCell","nextAll","_prevVerticalCell","_verticalContainer","_nextVerticalCell","isLeft","ctrl","rowContainer","isInLockedTable","isInBody","filterFocusable","_handleEditing","active","isInCell","blur","_toggleCurrent","descriptors","_canDrag","dir","link","focusable","originalIndex","_currentDataIndex","lockedColumnsCount","tmpIndex","currentRowCells","hiddenColumns","up","step","back","switchRow","isEdited","isIE","_initMobile","_createPane","Pane","viewEngine","viewOptions","renderOnInit","wrapInSections","detachOnHide","detachOnDestroy","_scrollable","asLowerString","parseVirtualSettings","insertBefore","_createVirtualScrollable","_scrollLeft","isScrollingLeft","originalPageSize","_endlessFetchInProgress","_skipRerenderItemsCount","_cacheEditableState","_restoreEditableState","movable","one","_averageRowHeight","scroll","_focusEditable","loadStart","_progress","loadEnd","_onVirtualPaging","_isVirtualPopupEditable","editableState","editedModel","inlineMode","incellMode","virtualColumns","_getByUid","editedField","_canFocusEditable","isElementVisibleInWrapper","widget","widgetInstance","_renderNoRecordsContent","noRecordsElement","_setContentWidth","expander","hiddenDivClass","isNaN","footerWrap","contentWidth","nonLockedCols","nonLockedColsWidth","initialHeight","scrollableHeight","itemsCount","_rowHeight","_sum","_measures","currentRowHeight","_requestStart","_error","relatedRow","selectableRow","childCells","originalCells","pagerWrap","_groupPaging","_togglePagerVisibility","_wrapFooter","_appendLockedColumnFooter","footerRow","_appendCols","_columnMenu","menuOptions","hasMultiColumnHeaders","hasLockableColumns","hasStickableColumns","stickable","initCallback","openCallback","closeCallback","stickCallback","unstickCallback","filterHandler","compare","forceUnique","checkSource","owner","stick","unstick","filtering","componentType","kendoColumnMenu","_hasFilterMenu","_filterable","filterInit","filterOpen","columnFilterable","kendoFilterMultiCheck","kendoFilterMenu","_filterRow","rowheader","_updateHeader","suggestDataSource","operators","customDataSource","cellOptions","delay","inputWidth","suggestionOperator","minLength","dataTextField","showOperators","kendoFilterCell","_sortable","sorterInstance","kendoColumnSorter","draggableColumns","initialColumns","len","normalizeHeaderCells","_updateColumnIDs","_checkboxClick","_headerCheckboxClick","_foreignKeyBindings","_fetchForeignKeyValues","_hasBoundForeignKey","dataValueField","checkBox","isSelecting","_tmpl","alt","skipGroupCells","classAttribute","paramName","dirtyCellTemplate","expr","_dirtyCellTemplate","charAt","_headerCellText","headerTemplate","_dirtyIndicatorTemplate","stringify","useWithBlock","_virtualCols","considerNext","widths","c","sumOfWidths","colsToRender","firstColspan","lastColspan","widthOfHiddenColumns","virtualCols","columnLeafs","columnsLocked","groupHeaderColumnTemplateLockedColumns","groupHeaderColumnTemplateNonLockedColumns","_detailTmpl","_footerTmpl","g","_groupHeaderTmpl","lockedGroupHeaderColumnTemplate","_noRecordsTmpl","scrollableNoGridHeightStyles","templateName","rowClass","scope","fieldsMap","_emptyAggregates","headerTemplateIndex","groupCellBuilder","groupCellLockedContentBuilder","templateFunctionStorage","templateFunctionCount","hasFiltering","columnsWithoutFiltering","_toggleDetails","omitAnimation","detailRow","expanding","masterRow","masterRowIndex","ariaLabelText","ariaExpandText","toggleClass","detailCell","toggle","correctIdx","classesRegEx","sectionRowIndex","_createHeaderCells","isGroupedBy","_appendLockedColumnContent","spanIdx","skipHiddenCount","colOffset","detach","lockedCells","_appendLockedColumnHeader","filtercellCells","hasFilterRow","filterCellOffset","leafColumnsCount","removeRowSpanValue","syncHeight","hasTHead","headerContent","_updateHeadersAttr","_prepareColumns","filterRow","existingFilterRow","hasLockedColumns","_retrieveFirstColumn","parentRow","childRow","totalColSpan","_updateHeaderCols","_autoColumns","toJSON","_rowsHtml","templates","_groupData","skipFooter","firstColumn","footerDefaults","_groupAggregatesDefaultObject","groupItems","headerData","footerData","subgroupsCount","_groupRowHtml","groupHeaderBuilder","skipColspan","skipLastGroup","isLockedTable","groupData","firstVisibleColumnGroupHeaderTemplate","groupHeaderTemplate","currentItems","expanded","_groupsState","isNew","excludeHeader","templateColspan","groupHtmlBuilder","_skippedGroups","shift","groupToCollapse","footerCount","showFooter","relatedGroup","groupCountAfterCollapse","groupUid","groupObject","_getGroupByUid","currentGroupCount","_calculateGroupsTotal","_serverGroupsTotal","_currentRangeStart","toHide","_groupToCollapse","footersVisibility","groupsCount","groupCountAfterExpand","groupCount","toggleVisibility","pop","_firstDataItem","grouped","headerCellIndex","_columnVisibilitySetter","_setParentsVisibility","_updateContentWidth","predicate","p","originalColumn","columnLeafIndex","_buildSkeleton","loaderHTML","columnsCount","skeleton","progress","_resize","size","force","_isActiveInTable","contentScrollLeft","cachedItemsToSkip","isCurrentInHeader","_renderContent","_renderLockedContent","_restoreCurrent","contentResized","resetTouchEvents","_muteAngularRebind","_restoreSelection","selectedRows","dataItemKey","cmd","_cleanupDetailItems","_angularGroupItems","_angularGroupFooterItems","endlessAppend","flatViewLength","flatView","groupRowLockedContentBuilder","groupRowBuilder","groupRowBuilderFunc","groupHeaderData","prevElement","newGroupRowElement","firstColumnGroupData","alwaysVisible","rows2","containers","containersLength","heights","offsetHeight1","offsetHeight2","row1","row2","direct","focusElement","isInputElement","isHeader","isInput","activeEl","halfHeight","includeAdditionalData","backslashEscapeQuotes","exportable","ExcelMixin","PDFMixin","_drawPDF_autoPageBreak","allPages","origBody","cont","toggleUnexportableColumns","paddingRight","_initPDFProgress","startingPage","draw","_destructive","pageNumber","pageNum","drawing","drawDOM","always","err","renderPage","restore","visibleInExport","visibleInExportOnly","_toggledDuringExport","_drawPDF","paperSize","doc","Group","exportPage","_drawPDFShadow","avoidLinks","loading","pb","kendoProgressBar","chunkCount","plugin"],"sources":["kendo.grid.js"],"mappings":"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","sourcesContent":["import './kendo.data.js';\nimport './kendo.columnsorter.js';\nimport './kendo.editable.js';\nimport './kendo.window.js';\nimport './kendo.filtermenu.js';\nimport './kendo.filtercell.js';\nimport './kendo.columnmenu.js';\nimport './kendo.groupable.js';\nimport './kendo.pager.js';\nimport './kendo.selectable.js';\nimport './kendo.sortable.js';\nimport './kendo.reorderable.js';\nimport './kendo.resizable.js';\nimport './kendo.ooxml.js';\nimport './kendo.excel.js';\nimport './kendo.pane.js';\nimport './kendo.progressbar.js';\nimport './kendo.pdf.js';\nimport './kendo.dialog.js';\nimport './kendo.switch.js';\nimport './kendo.html.button.js';\nimport './kendo.textbox.js';\nimport './kendo.form.js';\n\nvar __meta__ = {\n    id: \"grid\",\n    name: \"Grid\",\n    category: \"web\",\n    description: \"The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.\",\n    depends: [ \"data\", \"columnsorter\", \"sortable\", \"html.button\" ],\n    features: [ {\n        id: \"grid-editing\",\n        name: \"Editing\",\n        description: \"Support for record editing\",\n        depends: [ \"editable\", \"window\", \"textbox\", \"form\" ]\n    }, {\n        id: \"grid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for record filtering\",\n        depends: [ \"filtermenu\" ]\n    }, {\n        id: \"grid-columnmenu\",\n        name: \"Column menu\",\n        description: \"Support for header column menu\",\n        depends: [ \"columnmenu\" ]\n    }, {\n        id: \"grid-grouping\",\n        name: \"Grouping\",\n        description: \"Support for grid grouping\",\n        depends: [ \"groupable\" ]\n    }, {\n        id: \"grid-filtercell\",\n        name: \"Row filter\",\n        description: \"Support for grid header filtering\",\n        depends: [ \"filtercell\" ]\n    }, {\n        id: \"grid-paging\",\n        name: \"Paging\",\n        description: \"Support for grid paging\",\n        depends: [ \"pager\" ]\n    }, {\n        id: \"grid-selection\",\n        name: \"Selection\",\n        description: \"Support for row selection\",\n        depends: [ \"selectable\" ]\n    }, {\n        id: \"grid-column-reorder\",\n        name: \"Column reordering\",\n        description: \"Support for column reordering\",\n        depends: [ \"reorderable\" ]\n    }, {\n        id: \"grid-column-resize\",\n        name: \"Column resizing\",\n        description: \"Support for column resizing\",\n        depends: [ \"resizable\" ]\n    }, {\n        id: \"grid-mobile\",\n        name: \"Grid adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"grid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export grid data as Excel spreadsheet\",\n        depends: [ \"excel\" ]\n    }, {\n        id: \"grid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\", \"progressbar\" ]\n    } ]\n};\n\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        DataSource = kendo.data.DataSource,\n        ObservableObject = kendo.data.ObservableObject,\n        tbodySupportsInnerHtml = kendo.support.tbodyInnerHtml,\n        activeElement = kendo._activeElement,\n        Widget = ui.Widget,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        keys = kendo.keys,\n\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        map = $.map,\n        grep = $.grep,\n        isArray = Array.isArray,\n        inArray = $.inArray,\n        push = Array.prototype.push,\n        isFunction = kendo.isFunction,\n        isEmptyObject = $.isEmptyObject,\n        contains = $.contains,\n        math = Math,\n\n        DOT = \".\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        HIERARCHY_CELL_CLASS = \"k-hierarchy-cell\",\n        DATA_CELL = \":not(.k-group-cell):not([\" + kendo.attr(\"virtual\") + \"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible\",\n        SELECTION_CELL_SELECTOR = \"tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        NAVROW = \"tr:not(.k-footer-template):visible\",\n        NAVCELL = \":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible\",\n        ITEMROW = \"tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible\",\n        COLGROUP = \"col:not(.k-group-col, .k-hierarchy-col)\",\n        HEADERCELLS = \"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)\",\n        WRAPPER = \".k-grid.k-widget\",\n        NS = \".kendoGrid\",\n        CONTENTRLOCKEDCONTAINER = \"k-grid-content-locked\",\n        GROUPCELLCLASS = \"k-group-cell\",\n\n        EDIT = \"edit\",\n        BEFOREEDIT = \"beforeEdit\",\n        SAVE = \"save\",\n        REMOVE = \"remove\",\n        DETAILINIT = \"detailInit\",\n        FILTERMENUINIT = \"filterMenuInit\",\n        COLUMNMENUINIT = \"columnMenuInit\",\n        FILTERMENUOPEN = \"filterMenuOpen\",\n        COLUMNMENUOPEN = \"columnMenuOpen\",\n        CELLCLOSE = \"cellClose\",\n        CHANGE = \"change\",\n        COLUMNHIDE = \"columnHide\",\n        COLUMNSHOW = \"columnShow\",\n        SAVECHANGES = \"saveChanges\",\n        DATABOUND = \"dataBound\",\n        DETAILEXPAND = \"detailExpand\",\n        DETAILCOLLAPSE = \"detailCollapse\",\n        ITEM_CHANGE = \"itemchange\",\n        PAGE = \"page\",\n        PAGING = \"paging\",\n        SCROLL = \"scroll\",\n        SYNC = \"sync\",\n        LOAD_START = \"loadStart\",\n        LOAD_END = \"loadEnd\",\n\n        FOCUSED = \"k-focus\",\n        FOCUSABLE = \":kendoFocusable\",\n        SELECTED = \"k-selected\",\n        CHECKBOX = \"k-checkbox\",\n        CHECKBOXINPUT = \"input[data-role='checkbox'].k-select-checkbox.\" + CHECKBOX,\n        NORECORDSCLASS = \"k-grid-norecords\",\n        LINK_CLASS = \"k-link\",\n        ICON_CLASS = \"k-icon\",\n        ORDER_CLASS = \"k-sort-order\",\n        SORTED_CLASS = \"k-sorted\",\n        HEADER_COLUMN_MENU_CLASS = \"k-header-column-menu\",\n        FILTER_MENU_CLASS = \"k-grid-filter\",\n        STICKY_CELL_CLASS = \"k-grid-content-sticky\",\n        STICKY_HEADER_CLASS = \"k-grid-header-sticky\",\n        STICKY_FOOTER_CLASS = \"k-grid-footer-sticky\",\n        STICKY_HEADER_NO_BORDER_CLASS = \"k-grid-no-left-border\",\n        RESIZE = \"resize\",\n        COLUMNRESIZE = \"columnResize\",\n        COLUMNREORDER = \"columnReorder\",\n        COLUMNLOCK = \"columnLock\",\n        COLUMNUNLOCK = \"columnUnlock\",\n        COLUMNSTICK = \"columnStick\",\n        COLUMNUNSTICK = \"columnUnstick\",\n        ROWREORDER = \"rowReorder\",\n        NAVIGATE = \"navigate\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        HEIGHT = \"height\",\n        TABINDEX = \"tabIndex\",\n        FUNCTION = \"function\",\n        STRING = \"string\",\n        BOTTOM = \"bottom\",\n        CONTAINER_FOR = \"container-for\",\n        FIELD = \"field\",\n        INPUT = \"input\",\n        INCELL = \"incell\",\n        INLINE = \"inline\",\n        UNIQUE_ID = \"uid\",\n        MINCOLSPANVALUE = 1,\n        COLSPAN = \"colSpan\",\n        OVERFLOW = \"overflow\",\n        HIDDEN = \"hidden\",\n        SORT = \"sort\",\n        GROUP_SORT = \"group-sort\",\n        DELETECONFIRM = \"Are you sure you want to delete this record?\",\n        NORECORDS = \"No records available.\",\n        CONFIRMDELETE = \"Delete\",\n        CANCELDELETE = \"Cancel\",\n        COLLAPSE = \"Collapse\",\n        EXPAND = \"Expand\",\n        ID = \"id\",\n\n        ARIA_LABEL = \"aria-label\",\n        ARIA_OWNS = \"aria-owns\",\n        ARIA_ROWCOUNT = \"aria-rowcount\",\n        ARIA_COLCOUNT = \"aria-colcount\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_COLINDEX = \"aria-colindex\",\n        ARIA_ROWINDEX = \"aria-rowindex\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_CHECKED = \"aria-checked\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ROLE = \"role\",\n        NONE = \"none\",\n        ROW = \"row\",\n        ROWGROUP = \"rowgroup\",\n        COLUMNHEADER = \"columnheader\",\n        GRIDCELL = \"gridcell\",\n\n        formatRegExp = /(\\}|\\#)/ig,\n        templateHashRegExp = /#/ig,\n        whitespaceRegExp = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n        leftRegExp = new RegExp(\"(\\\\s*left\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        rightRegExp = new RegExp(\"(\\\\s*right\\\\s*:\\\\s*\\\\d*px;?)*\", \"ig\"),\n        nonDataCellsRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-group-cell|k-hierarchy-cell)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        filterRowRegExp = new RegExp(\"(^|\" + whitespaceRegExp + \")\" + \"(k-filter-row)\" + \"(\" + whitespaceRegExp + \"|$)\"),\n        COMMANDBUTTONTMPL = '<button type=\"button\" class=\"#=className#\" #=attr#>#=text#</button>',\n        SELECTCOLUMNTMPL = '<input tabindex=\"-1\" class=\"k-select-checkbox ' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select row\" aria-checked=\"false\" type=\"checkbox\">',\n        SELECTCOLUMNHEADERTMPL = '<input tabindex=\"-1\" class=\"k-select-checkbox ' + CHECKBOX + ' k-checkbox-md k-rounded-md\" data-role=\"checkbox\" aria-label=\"Select all rows\" aria-checked=\"false\" type=\"checkbox\">',\n        DRAGHANDLECOLUMNTMPL = '<span class=\"k-icon k-i-reorder\"></span>',\n        SORTHEADERTMPL = '<span class=\"k-cell-inner\"><span class=\"k-link\"><span class=\"k-column-title\">#=text#</span></span></span>',\n        isRtl = false,\n        browser = kendo.support.browser;\n\n    var isIE11 = browser.msie && browser.version === 11;\n    var isMac = /Mac OS/.test(navigator.userAgent);\n    var classNames = {\n        content: \"k-content\",\n        widget: \"k-widget\",\n        scrollContainer: \"k-scroll-container\",\n        headerCellInner: \"k-cell-inner\"\n    };\n    var GroupsPager;\n\n    if (ui.Pager) {\n        GroupsPager = ui.Pager.extend({\n            init: function(element, options) {\n                ui.Pager.fn.init.call(this, element, extend(true, {}, options));\n                this.dataSource.options.useRanges = true;\n                this.dataSource._omitPrefetch = true;\n            },\n            options: {\n                name: \"GroupsPager\"\n            },\n\n            totalPages: function() {\n                var that = this;\n\n                return Math.ceil((that._collapsedTotal() || 0) / (that.pageSize() || 1));\n            },\n            _collapsedTotal: function() {\n                var dataSource = this.dataSource;\n                return dataSource ? (dataSource.groupsTotal(true) || 0) : 0;\n            }\n        });\n    }\n\n    var VirtualScrollable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            that._refreshHandler = that.refresh.bind(that);\n            that.setDataSource(options.dataSource);\n            that.wrap();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            }\n            that.dataSource = dataSource;\n            that.dataSource.bind(CHANGE, that._refreshHandler);\n            that.dataSource.options.useRanges = true;\n            that.dataSource.options.virtual = true;\n        },\n\n        options: {\n            name: \"VirtualScrollable\",\n            itemHeight: $.noop,\n            prefetch: true,\n            maxScrollHeight: 250000\n        },\n\n        events: [\n            PAGING,\n            PAGE,\n            SCROLL,\n            LOAD_START,\n            LOAD_END\n        ],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource.unbind(CHANGE, that._refreshHandler);\n            that.wrapper.add(that.verticalScrollbar).off(NS);\n\n            clearTimeout(that._timeout);\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            if (that.drag) {\n                that.drag.destroy();\n                that.drag = null;\n            }\n            that.wrapper = that.element = that.verticalScrollbar = null;\n            that._refreshHandler = null;\n        },\n\n        wrap: function() {\n            var that = this,\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                scrollbar = kendo.support.scrollbar() + 1,\n                element = that.element,\n                wrapper;\n\n            element.css( {\n                width: \"auto\",\n                overflow: \"hidden\"\n            }).css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar);\n            that.content = element.children().first();\n            wrapper = that.wrapper = that.content.wrap('<div class=\"k-virtual-scrollable-wrap\"/>')\n                                .parent()\n                                .on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            that._wrapper();\n\n            if (kendo.support.kineticScrollNeeded || kendo.support.touch) {\n                that.wrapper.css(\"touch-action\", NONE);\n                that.drag = new kendo.UserEvents(that.wrapper, {\n                    global: true,\n                    allowSelection: true,\n                    start: function(e) {\n                        e.sender.capture();\n                    },\n                    move: function(e) {\n                        that.verticalScrollbar.scrollTop(that.verticalScrollbar.scrollTop() - e.y.delta);\n                        kendo.scrollLeft(wrapper, kendo.scrollLeft(wrapper) - e.x.delta);\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            that.verticalScrollbar = $('<div class=\"k-scrollbar k-scrollbar-vertical\" />')\n                                        .css({\n                                            width: scrollbar\n                                        }).appendTo(element)\n                                        .on(\"scroll\" + NS, that._scroll.bind(that));\n        },\n\n        _wrapper: function() {\n            var that = this;\n\n            if (isIE11) {\n                //scrolling the virtual scrollbar to the bottom and then\n                //scrolling the horizontal content scrollbar does not fire the \"scroll\" event\n                //seems like a problem in IE 11 only (after version 11.0.9600.18860)\n                //https://github.com/telerik/kendo-ui-core/issues/3779\n                that.wrapper.css({\n                    \"overflow-y\": SCROLL\n                });\n\n                //hide the wrapper behind the virtual scrollbar\n                that.element.css((isRtl ? \"padding-left\" : \"padding-right\"), 0);\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var scrollbar = this.verticalScrollbar,\n                scrollTop = scrollbar.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta && !(delta > 0 && scrollTop === 0) && !(delta < 0 && scrollTop + scrollbar[0].clientHeight == scrollbar[0].scrollHeight)) {\n                e.preventDefault();\n                this.verticalScrollbar.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _scroll: function(e) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                scrollTop = e.currentTarget.scrollTop,\n                dataSource = that.dataSource,\n                rowHeight = that.itemHeight,\n                skip = dataSource.skip() || 0,\n                start = that._rangeStart || skip,\n                height = that.element.innerHeight(),\n                isScrollingUp = !!(that._scrollbarTop && that._scrollbarTop > scrollTop),\n                firstItemIndex = math.max(math.floor(scrollTop / rowHeight), 0),\n                lastItemOffset = isScrollingUp ? math.ceil(height / rowHeight) : math.floor(height / rowHeight),\n                lastItemIndex = math.max(firstItemIndex + lastItemOffset, 0);\n\n            if (that._preventScroll) {\n                that._preventScroll = false;\n                return;\n            }\n            that._prevScrollTop = that._scrollTop;\n            that._scrollTop = scrollTop - (start * rowHeight);\n            that._scrollbarTop = scrollTop;\n\n            that._scrolling = delayLoading;\n\n            if (!that._fetch(firstItemIndex, lastItemIndex, isScrollingUp)) {\n                that.wrapper[0].scrollTop = that._scrollTop;\n            }\n\n            that.trigger(SCROLL);\n\n            if (delayLoading) {\n                if (that._scrollingTimeout) {\n                    clearTimeout(that._scrollingTimeout);\n                }\n\n                that._scrollingTimeout = setTimeout(function() {\n                    that._scrolling = false;\n                    that._page(that._rangeStart, that.dataSource.take());\n                }, 100);\n            }\n        },\n\n        scrollToTop: function() {\n            this._scrollTo(0);\n        },\n\n        scrollToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            this._scrollTo(scrollbar[0].scrollHeight - scrollbar.height());\n        },\n\n        _scrollWrapperToTop: function() {\n            this.wrapper.scrollTop(0);\n        },\n\n        _scrollWrapperToBottom: function() {\n            this.wrapper.scrollTop(this.wrapper[0].scrollHeight);\n        },\n\n        _scrollWrapperOnColumnResize: function() {\n            var that = this;\n            var wrapper = this.wrapper;\n            var initialScrollTop = wrapper.scrollTop();\n\n            if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {\n                if ((!that._wrapperScrolled && initialScrollTop) || that._isScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop + kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                    that._wrapperScrolled = true;\n                }\n            } else if (that._wrapperScrolled) {\n                if (!that._isWrapperScrolledToBottom()) {\n                    wrapper.scrollTop(initialScrollTop - kendo.support.scrollbar());\n                    that._scrollTop = wrapper.scrollTop();\n                }\n\n                that._wrapperScrolled = false;\n            }\n        },\n\n        _scrollTo: function(scrollTop) {\n            var that = this;\n            var scrollbar = that.verticalScrollbar;\n\n            if (scrollbar.scrollTop() !== scrollTop) {\n                that._preventScroll = true;\n            }\n\n            that.wrapper.scrollTop(scrollTop);\n            that._scrollTop = that.wrapper.scrollTop();\n\n            scrollbar.scrollTop(scrollTop);\n            that._scrollbarTop = scrollbar.scrollTop();\n        },\n\n        _isScrolledToTop: function() {\n            return this.verticalScrollbar.scrollTop() === 0;\n        },\n\n        _isScrolledToBottom: function() {\n            var scrollbar = this.verticalScrollbar;\n            var scrollTop = scrollbar.scrollTop();\n\n            return (scrollTop > 0 && scrollTop >= parseInt(scrollbar[0].scrollHeight - scrollbar.height(), 10));\n        },\n\n        _isWrapperScrolledToBottom: function() {\n            var wrapper = this.wrapper;\n\n            return (wrapper.scrollTop() >= parseInt(wrapper[0].scrollHeight - wrapper.height(), 10));\n        },\n\n        itemIndex: function(rowIndex) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n\n            return rangeStart + rowIndex;\n        },\n\n        position: function(index) {\n            var rangeStart = this._rangeStart || this.dataSource.skip() || 0;\n            var pageSize = this.dataSource.pageSize();\n            var result;\n\n            if (index > rangeStart) {\n                result = index - rangeStart;\n            } else {\n                result = rangeStart - index - 1;\n            }\n\n            return result > pageSize ? pageSize : result;\n        },\n\n        scrollIntoView: function(row) {\n            var container = this.wrapper[0];\n            var containerHeight = container.clientHeight;\n            var containerScroll = !this._isScrolledToBottom() ? (this._scrollTop || container.scrollTop) : container.scrollTop;\n            var elementOffset = row[0].offsetTop;\n            var elementHeight = row[0].offsetHeight;\n\n            if (containerScroll > elementOffset) {\n                this.verticalScrollbar[0].scrollTop -= containerHeight / 2;\n            } else if (elementOffset + elementHeight >= containerScroll + containerHeight) {\n                this.verticalScrollbar[0].scrollTop += containerHeight / 2;\n            }\n        },\n\n        _fetch: function(firstItemIndex, lastItemIndex, scrollingUp) {\n            var that = this,\n                dataSource = that.dataSource,\n                itemHeight = that.itemHeight,\n                take = dataSource.take(),\n                rangeStart = that._rangeStart || dataSource.skip() || 0,\n                currentSkip = math.floor(firstItemIndex / take) * take,\n                fetching = false,\n                prefetchAt = 0.33;\n            var scrollbar = that.verticalScrollbar;\n            var webkitCorrection = browser.webkit ? 1 : 0;\n            var total = dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total();\n\n            if (firstItemIndex < rangeStart) {\n\n                fetching = true;\n                rangeStart = math.max(0, lastItemIndex - take);\n                that._scrollTop = scrollbar.scrollTop() - (rangeStart * itemHeight);\n                that._page(rangeStart, take);\n\n            } else if (lastItemIndex >= rangeStart + take && !scrollingUp) {\n\n                fetching = true;\n                rangeStart = math.min(firstItemIndex, total - take);\n\n                //ensure the scrollbar can be scrolled to bottom with mouse drag\n                if (scrollbar.scrollTop() >= scrollbar[0].scrollHeight - scrollbar[0].offsetHeight - webkitCorrection) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight;\n                } else if (that.dataSource._isGroupPaged() && firstItemIndex >= total - take) {\n                    that._scrollTop = that.wrapper[0].scrollHeight - that.wrapper[0].offsetHeight - (that._scrollTop - that._prevScrollTop);\n                } else {\n                    that._scrollTop = itemHeight;\n                }\n\n                that._page(rangeStart, take);\n\n            } else if (!that._fetching && that.options.prefetch) {\n\n                if (firstItemIndex < (currentSkip + take) - take * prefetchAt && firstItemIndex > take) {\n                    dataSource.prefetch(currentSkip - take, take, $.noop);\n                }\n                if (lastItemIndex > currentSkip + take * prefetchAt) {\n                    dataSource.prefetch(currentSkip + take, take, $.noop);\n                }\n\n            }\n            return fetching;\n        },\n\n        fetching: function() {\n            return this._fetching;\n        },\n\n        _page: function(skip, take, callback) {\n            var that = this,\n                delayLoading = !that.options.prefetch,\n                dataSource = that.dataSource,\n                isGroupPaged = dataSource._isGroupPaged();\n            callback = isFunction(callback) ? callback : $.noop;\n\n            if (that.trigger(PAGING, { skip: skip, take: take })) {\n                return;\n            }\n\n            clearTimeout(that._timeout);\n            that._fetching = true;\n            that._rangeStart = skip;\n\n            if ((isGroupPaged && dataSource._groupRangeExists(skip, skip + take)) || (!isGroupPaged && dataSource.inRange(skip, take))) {\n                that.trigger(LOAD_START);\n\n                dataSource.range(skip, take, function() {\n                    that.trigger(LOAD_END);\n                    callback();\n                    that.trigger(PAGE);\n                }, \"page\");\n            } else {\n                if (!delayLoading) {\n                    that.trigger(LOAD_START);\n                }\n\n                that._timeout = setTimeout(function() {\n                    if (!that._scrolling) {\n\n                        if (delayLoading) {\n                            that.trigger(LOAD_START);\n                        }\n\n                        dataSource.range(skip, take, function() {\n                            that.trigger(LOAD_END);\n                            callback();\n                            that.trigger(PAGE);\n                        });\n                    }\n                }, 100);\n            }\n        },\n\n        repaintScrollbar: function(shouldScrollWrapper) {\n            var that = this,\n                html = \"\",\n                maxHeight = that.options.maxScrollHeight,\n                dataSource = that.dataSource,\n                scrollbar = !kendo.support.kineticScrollNeeded ? kendo.support.scrollbar() : 0,\n                wrapperElement = that.wrapper[0],\n                totalHeight,\n                idx,\n                itemHeight;\n            var wasScrolledToBottom = that._isScrolledToBottom();\n\n            itemHeight = that.itemHeight = that.options.itemHeight() || 0;\n\n            var addScrollBarHeight = (wrapperElement.scrollWidth > wrapperElement.offsetWidth) ? scrollbar : 0;\n\n            totalHeight = (dataSource._isGroupPaged() ? dataSource.groupsTotal(true) : dataSource.total()) * itemHeight + addScrollBarHeight;\n\n            for (idx = 0; idx < math.floor(totalHeight / maxHeight); idx++) {\n                html += '<div style=\"width:1px;height:' + maxHeight + 'px\"></div>';\n            }\n\n            if (totalHeight % maxHeight) {\n                html += '<div style=\"width:1px;height:' + (totalHeight % maxHeight) + 'px\"></div>';\n            }\n\n            that.verticalScrollbar.html(html);\n\n            if (wasScrolledToBottom && !that._isScrolledToBottom() && !that.dataSource._isGroupPaged()) {\n                that.scrollToBottom();\n            }\n\n            if (typeof(that._scrollTop) !== \"undefined\" && !!shouldScrollWrapper) {\n                wrapperElement.scrollTop = that._scrollTop;\n                that._scrollWrapperOnColumnResize();\n            }\n        },\n\n        refresh: function(e) {\n            var that = this,\n                dataSource = that.dataSource,\n                rangeStart = that._rangeStart;\n            var action = (e || {}).action;\n            var shouldScrollWrapper = that._isScrolledToBottom() || !action || (action !== ITEM_CHANGE && action !== REMOVE && action !== SYNC);\n\n            that.trigger(LOAD_END);\n            clearTimeout(that._timeout);\n\n            that.repaintScrollbar(shouldScrollWrapper);\n\n            if (that.drag) {\n                that.drag.cancel();\n            }\n\n            if (typeof(rangeStart) !== \"undefined\" && !that._fetching) { // we are rebound from outside local range should be reset\n                if (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\")) {\n                    that._rangeStart = dataSource.skip();\n                }\n\n                if (dataSource.page() === 1 && (!action || (action !== SYNC && action !== ITEM_CHANGE && action !== \"expandGroup\" && action !== \"collapseGroup\"))) {\n                    // reset the scrollbar position if datasource is filtered\n                    that.verticalScrollbar[0].scrollTop = 0;\n                }\n            }\n\n            that._fetching = false;\n        }\n    });\n\n    function attrEquals(attrName, attrValue) {\n        return \"[\" + kendo.attr(attrName) + \"=\" + attrValue + \"]\";\n    }\n\n    function groupCells(count) {\n        return new Array(count + 1).join('<td class=\"k-group-cell\">&nbsp;</td>');\n    }\n\n    function stringifyAttributes(attributes) {\n        var attr,\n            result = \" \";\n\n        if (attributes) {\n            if (typeof attributes === STRING) {\n                return attributes;\n            }\n\n            for (attr in attributes) {\n                if (attributes[attr] !== '') {\n                    result += attr + '=\"' + attributes[attr] + '\"';\n                }\n            }\n        }\n        return result;\n    }\n\n    var defaultCommands = {\n        create: {\n            text: \"Add new record\",\n            className: \"k-grid-add\",\n            iconClass: \"k-icon k-i-plus\"\n        },\n        cancel: {\n            text: \"Cancel changes\",\n            className: \"k-grid-cancel-changes\",\n            iconClass: \"k-icon k-i-cancel\"\n        },\n        save: {\n            text: \"Save changes\",\n            className: \"k-grid-save-changes\",\n            iconClass: \"k-icon k-i-check\"\n        },\n        destroy: {\n            text: \"Delete\",\n            className: \"k-grid-delete\",\n            iconClass: \"k-icon k-i-close\"\n        },\n        edit: {\n            text: \"Edit\",\n            className: \"k-grid-edit\",\n            iconClass: \"k-icon k-i-edit\"\n        },\n        update: {\n            text: \"Update\",\n            className: \"k-grid-update\",\n            iconClass: \"k-icon k-i-check\",\n            themeColor: \"primary\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-grid-cancel\",\n            iconClass: \"k-icon k-i-cancel\"\n        },\n        excel: {\n            text: \"Export to Excel\",\n            className: \"k-grid-excel\",\n            iconClass: \"k-icon k-i-file-excel\"\n        },\n        pdf: {\n            text: \"Export to PDF\",\n            className: \"k-grid-pdf\",\n            iconClass: \"k-icon k-i-file-pdf\"\n        },\n        search: {\n            text: \"Search...\",\n            className: \"k-grid-search\"\n        }\n    };\n\n    function cursor(context, value) {\n        $('th, th .k-grid-filter, th .k-link', context)\n            .add(document.body)\n            .css('cursor', value);\n    }\n\n    function reorder(selector, source, dest, before, count) {\n        var sourceIndex = source;\n        source = $();\n        count = count || 1;\n        for (var idx = 0; idx < count; idx++) {\n            source = source.add(selector.eq(sourceIndex + idx));\n        }\n\n        if (typeof dest == \"number\") {\n            source[before ? \"insertBefore\" : \"insertAfter\"](selector.eq(dest));\n        } else {\n            source.appendTo(dest);\n        }\n    }\n\n    function elements(lockedContent, content, filter) {\n        return $(lockedContent).add(content).find(filter);\n    }\n\n    function attachCustomCommandEvent(context, container, commands) {\n        var idx,\n            length,\n            command,\n            commandName;\n\n        commands = !isArray(commands) ? [commands] : commands;\n\n        for (idx = 0, length = commands.length; idx < length; idx++) {\n            command = commands[idx];\n\n            if (isPlainObject(command) && command.click) {\n                commandName = command.name || command.text;\n                container.on(CLICK + NS, \".k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"), { commandName: commandName }, command.click.bind(context));\n            }\n        }\n    }\n\n    function normalizeColumns(columns, encoded, hide, locked, parentIds) {\n        return map(columns, function(column) {\n            column = typeof column === STRING ? { field: column } : column;\n\n            var hidden;\n            column.parentIds = parentIds;\n\n            if (!isVisible(column) || hide) {\n                column.attributes = addHiddenStyle(column.attributes);\n                column.footerAttributes = addHiddenStyle(column.footerAttributes);\n                column.headerAttributes = addHiddenStyle(column.headerAttributes);\n                hidden = true;\n            }\n\n            var uid = kendo.guid();\n            if (locked && !column.locked) {\n                column.locked = locked;\n            }\n\n            column.headerAttributes = extend({ headers: parentIds }, column.headerAttributes);\n            if (!column.headerAttributes.id) {\n                column.headerAttributes = extend({ id: uid }, column.headerAttributes);\n                column.uid = uid;\n            } else {\n                column.uid = uid = column.headerAttributes.id;\n            }\n\n            if (column.columns) {\n                column.columns = normalizeColumns(column.columns, encoded, hidden, column.locked, parentIds ? (parentIds + \" \" + uid) : uid);\n            }\n            return extend({ encoded: encoded, hidden: hidden, locked: locked }, column);\n        });\n    }\n\n    function columnParent(column, columns) {\n        var parents = [];\n        columnParents(column, columns, parents);\n        return parents[parents.length - 1];\n    }\n\n    function columnParents(column, columns, parents) {\n        parents = parents || [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (column === columns[idx]) {\n                return true;\n            } else if (columns[idx].columns) {\n                var inserted = parents.length;\n                parents.push(columns[idx]);\n                if (!columnParents(column, columns[idx].columns, parents)) {\n                    parents.splice(inserted, parents.length - inserted);\n                } else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function setColumnVisibility(column, visible) {\n        setVisibility(column, visible, visible);\n    }\n\n    function setVisibility(column, visible, show) {\n        var method = show ? removeHiddenStyle : addHiddenStyle;\n        column.hidden = !visible;\n        column.attributes = method(column.attributes);\n        column.footerAttributes = method(column.footerAttributes);\n        column.headerAttributes = method(column.headerAttributes);\n    }\n\n\n    function setColumnMediaVisibility(column, visible) {\n        setColumnMatchesMedia(column);\n        var hideByMedia = column._hideByMedia;\n        setVisibility(column, visible, hideByMedia ? column.matchesMedia : visible);\n    }\n\n    function setColumnMatchesMedia(column) {\n        column.matchesMedia = columnMatchesMedia(column);\n    }\n\n    function columnMatchesMedia(column) {\n        return column && (isUndefined(column.media) || (!isUndefined(column.media) && kendo.matchesMedia(column.media)));\n    }\n\n    function isCellVisible() {\n        return this.style.display !== NONE;\n    }\n\n    function isElementVisible(element) {\n        return $(element)[0].style.display !== NONE;\n    }\n\n    function isVisible(column) {\n        return visibleColumns([column]).length > 0;\n    }\n\n    function visibleColumns(columns) {\n        return grep(columns, function(column) {\n            var result = !column.hidden && column.matchesMedia !== false;\n\n            if (result && column.columns) {\n                result = visibleColumns(column.columns).length > 0;\n            }\n            return result;\n        });\n    }\n\n    function columnsWithMedia(columns) {\n        var result = [];\n        var column;\n\n        for (var i = 0; i < columns.length; i++) {\n            column = columns[i];\n\n            if (!isUndefined(column.media)) {\n                if (!isUndefined(column.minScreenWidth)) {\n                    throw new Error(\"Using 'media' and 'minScreenWidth' options at the same time is not supported.\");\n                }\n\n                result.push(column);\n            }\n\n            if (column.columns) {\n                result = result.concat(columnsWithMedia(column.columns));\n            }\n        }\n\n        return result;\n    }\n\n    function isUndefined(value) {\n        return typeof value === \"undefined\";\n    }\n\n    function toJQuery(elements) {\n        return $(elements).map(function() { return this.toArray(); });\n    }\n\n    function updateCellRowSpan(cell, columns, sourceLockedColumnsCount) {\n        var lockedColumnDepth = depth(lockedColumns(columns));\n        var nonLockedColumnDepth = depth(nonLockedColumns(columns));\n\n        var rowSpan = cell.rowSpan;\n        if (sourceLockedColumnsCount) {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = (rowSpan - (lockedColumnDepth - nonLockedColumnDepth)) || 1;\n            } else {\n                cell.rowSpan = rowSpan + (nonLockedColumnDepth - lockedColumnDepth);\n            }\n        } else {\n            if (lockedColumnDepth > nonLockedColumnDepth) {\n                cell.rowSpan = rowSpan + (lockedColumnDepth - nonLockedColumnDepth);\n            } else {\n                cell.rowSpan = (rowSpan - (nonLockedColumnDepth - lockedColumnDepth)) || 1;\n            }\n        }\n    }\n\n    function findColumnByField(columns, field) {\n        for (var i = 0; i < columns.length; i++) {\n            if (columns[i].field == field) {\n                return columns[i];\n            }\n        }\n    }\n\n    function moveCellsBetweenContainers(sources, target, leafs, columns, container, destination, groups, action) {\n        var sourcesDepth = depth(sources);\n        var targetDepth = depth([target]);\n\n        if (sourcesDepth > targetDepth) {\n            var groupCells = new Array(groups + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">&nbsp;</th>');\n            var rows = destination.children(\":not(.k-filter-row)\");\n            $(new Array((sourcesDepth - targetDepth) + 1).join(\"<tr>\" + groupCells + \"</tr>\")).insertAfter(rows.last());\n        }\n\n        addRowSpanValue(destination, sourcesDepth - targetDepth);\n\n        moveCells(leafs, columns, container, destination, action);\n    }\n\n    function updateCellIndex(thead, columns, offset) {\n        offset = offset || 0;\n\n        var position;\n        var cell;\n        var allColumns = columns;\n        columns = leafColumns(columns);\n\n        var cells = {};\n        var rows = thead.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        for (var idx = 0, length = columns.length; idx < length; idx++) {\n            position = columnPosition(columns[idx], allColumns);\n\n            if (!cells[position.row]) {\n                cells[position.row] = rows.eq(position.row)\n                    .find(\".k-header\")\n                    .filter(filter);\n            }\n\n            cell = cells[position.row].eq(position.cell);\n            cell.attr(kendo.attr(\"index\"), offset + idx);\n        }\n\n\n        return columns.length;\n    }\n\n    function depth(columns) {\n        var result = 1;\n        var max = 0;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                var temp = depth(columns[idx].columns);\n                if (temp > max) {\n                    max = temp;\n                }\n            }\n        }\n        return result + max;\n    }\n\n    function moveCells(leafs, columns, container, destination, action) {\n        var sourcePosition = columnVisiblePosition(leafs[0], columns);\n\n        var ths = container.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row).children(\"th.k-header\");\n\n        var t = $();\n        var sourceIndex = sourcePosition.cell;\n        var idx;\n\n        for (idx = 0; idx < leafs.length; idx++) {\n            t = t.add(ths.eq(sourceIndex + idx));\n        }\n\n        destination.find(\">tr:not(.k-filter-row)\").eq(sourcePosition.row)[action](t);\n\n        var children = [];\n        for (idx = 0; idx < leafs.length; idx++) {\n            if (leafs[idx].columns) {\n                children = children.concat(leafs[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            moveCells(children, columns, container, destination, action);\n        }\n    }\n\n    function columnPosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnPosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           cellCounts[row]++;\n        }\n        return result;\n    }\n    function findParentColumnWithChildren(columns, index, source, rtl) {\n        var target;\n        var locked = !!source.locked;\n        var targetLocked;\n\n        do {\n            target = columns[index];\n            index += rtl ? 1 : -1;\n            targetLocked = !!target.locked;\n        } while (target && index > -1 && index < columns.length && target != source && !target.columns && targetLocked === locked);\n\n        return target;\n    }\n\n    function findReorderTarget(columns, target, source, before, masterColumns) {\n        if (target.columns) {\n            target = target.columns;\n            return target[before ? 0 : target.length - 1];\n        } else {\n            var parent = columnParent(target, columns);\n            var parentColumns;\n\n            if (parent) {\n                parentColumns = parent.columns;\n            } else {\n                parentColumns = columns;\n            }\n\n            var index = inArray(target, parentColumns);\n            if (index === 0 && before) {\n                index++;\n            } else if ((index == parentColumns.length - 1 && !before) || (!source.locked && !target.columns && !before)) {\n                index--;\n            } else if (index > 0 || (index === 0 && !before)) {\n                index++;\n            }\n\n            var sourceIndex = inArray(source, parentColumns);\n            target = findParentColumnWithChildren(parentColumns, index, source, sourceIndex > index);\n            var targetIndex = inArray(target, masterColumns);\n            if (target.columns && (!targetIndex || targetIndex === parentColumns.length - 1)) {\n                return null;\n            }\n\n            if (target && target != source && target.columns) {\n                return findReorderTarget(columns, target, source, before, masterColumns);\n            }\n        }\n        return null;\n    }\n\n    function columnVisiblePosition(column, columns, row, cellCounts) {\n        var result;\n        var idx;\n\n        row = row || 0;\n        cellCounts = cellCounts || {};\n        cellCounts[row] = cellCounts[row] || 0;\n\n        for (idx = 0; idx < columns.length; idx++) {\n           if (columns[idx] == column) {\n                result = { cell: cellCounts[row], row: row };\n                break;\n           } else if (columns[idx].columns) {\n               result = columnVisiblePosition(column, columns[idx].columns, row + 1, cellCounts);\n               if (result) {\n                    break;\n               }\n           }\n\n           if (!columns[idx].hidden) {\n               cellCounts[row]++;\n           }\n        }\n        return result;\n    }\n\n    function flatColumnsInDomOrder(columns) {\n        var result = flatColumns(lockedColumns(columns));\n        return result.concat(flatColumns(nonLockedColumns(columns)));\n    }\n\n    function targetParentContainerIndex(flatColumns, columns, sourceIndex, targetIndex) {\n        var column = flatColumns[sourceIndex];\n        var target = flatColumns[targetIndex];\n\n        var parent = columnParent(column, columns);\n        columns = parent ? parent.columns : columns;\n\n        return inArray(target, columns);\n    }\n\n    function flatColumns(columns) {\n        var result = [];\n        var children = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n\n        }\n        if (children.length) {\n            result = result.concat(flatColumns(children));\n        }\n        return result;\n    }\n\n    function hiddenLeafColumnsCount(columns) {\n        var counter = 0;\n        var column;\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            column = columns[idx];\n\n            if (column.columns) {\n                counter += hiddenLeafColumnsCount(column.columns);\n            } else if (column.hidden) {\n                counter++;\n            }\n        }\n        return counter;\n    }\n\n    function sumWidths(cols) {\n        var width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            if (!cols[idx].hidden) {\n                width += parseInt(cols[idx].width, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function columnsWidth(cols) {\n        var colWidth, width = 0;\n\n        for (var idx = 0, length = cols.length; idx < length; idx++) {\n            colWidth = cols[idx].style.width;\n            if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                width += parseInt(colWidth, 10);\n            }\n        }\n\n        return width;\n    }\n\n    function removeRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        var rowSpan;\n        for (var idx = 0; idx < cells.length; idx++) {\n            rowSpan = cells[idx].rowSpan;\n            if (rowSpan > 1) {\n                cells[idx].rowSpan = (rowSpan - count) || 1;\n            }\n        }\n    }\n\n    function addRowSpanValue(container, count) {\n        var cells = container.find(\"tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            cells[idx].rowSpan += count;\n        }\n    }\n\n    function removeEmptyRows(container) {\n        var rows = container.find(\"tr:not(.k-filter-row)\");\n\n        var emptyRowsCount = rows.filter(function() {\n            return !$(this).children().length;\n        }).remove().length;\n\n        var cells = rows.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n\n        for (var idx = 0; idx < cells.length; idx++) {\n            if (cells[idx].rowSpan > 1) {\n                cells[idx].rowSpan -= emptyRowsCount;\n            }\n        }\n        return rows.length - emptyRowsCount;\n    }\n\n    function mapColumnToCellRows(columns, cells, rows, rowIndex, offset) {\n        var idx, row, length, children = [];\n\n        for (idx = 0, length = columns.length; idx < length; idx++) {\n            row = rows[rowIndex] || [];\n            row.push(cells.eq(offset + idx));\n            rows[rowIndex] = row;\n\n            if (columns[idx].columns) {\n                children = children.concat(columns[idx].columns);\n            }\n        }\n\n        if (children.length) {\n            mapColumnToCellRows(children, cells, rows, rowIndex + 1, offset + columns.length);\n        }\n    }\n\n    function setLeftAndRightStyles(element, left, right) {\n        element.css({\n            \"left\": left,\n            \"right\": right\n        });\n    }\n\n    function createColumnAttribute(column, attribute, property) {\n        column[attribute] = column[attribute] || {};\n        column[attribute][property] = column[attribute][property] || \"\";\n    }\n\n    function addColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        if (column[attribute][property] !== \"\") {\n            column[attribute][property] += \" \" + value;\n        } else {\n            column[attribute][property] = value;\n        }\n    }\n\n    function removeColumnAttribute(column, attribute, property, value) {\n        createColumnAttribute(column, attribute, property);\n\n        column[attribute][property] = column[attribute][property].replace(value, \"\");\n    }\n\n    function lockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked;\n        });\n    }\n\n    function nonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked;\n        });\n    }\n\n    function stickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked;\n        });\n    }\n\n    function visibleStickyColumns(columns) {\n        return grep(columns, function(column) {\n            return column.sticky && !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleNonLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return !column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLockedColumns(columns) {\n        return grep(columns, function(column) {\n            return column.locked && isVisible(column);\n        });\n    }\n\n    function visibleLeafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push(columns[idx]);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleLeafExportColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].hidden) {\n                continue;\n            }\n\n            if (columns[idx].columns) {\n                result = result.concat(visibleLeafColumns(columns[idx].columns));\n            } else {\n                result.push({\n                    field: columns[idx].field,\n                    width: columns[idx].width,\n                    values: columns[idx].values\n                });\n            }\n        }\n\n        return result;\n    }\n\n    function childColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (columns[idx].columns) {\n                result = result.concat(columns[idx].columns);\n            }\n        }\n\n        return result;\n    }\n\n    function visibleChildColumns(columns) {\n        var result = childColumns(columns);\n\n        result = result.filter(function(e) {\n            return !e.hidden;\n        });\n\n        return result;\n    }\n\n    function leafColumns(columns) {\n        var result = [];\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (!columns[idx].columns) {\n                result.push(columns[idx]);\n                continue;\n            }\n            result = result.concat(leafColumns(columns[idx].columns));\n        }\n\n        return result;\n    }\n\n    function getColumnsFields(columns) {\n        var result = [];\n        columns = leafColumns(columns);\n\n        for (var idx = 0; idx < columns.length; idx++) {\n            if (typeof columns[idx] === \"string\") {\n                result.push(columns[idx]);\n            } else if (columns[idx].field) {\n                result.push(columns[idx].field);\n            }\n        }\n        return result;\n    }\n\n    function editField(column) {\n        return {\n            field: column.field,\n            title: column.title,\n            format: column.format,\n            editor: column.editor,\n            values: column.values,\n            editorOptions: extend(true, { format: column.format }, column.editorOptions),\n            label: column.title || column.field || \"\"\n        };\n    }\n\n    function leafDataCells(container) {\n        var rows = container.find(\">tr:not(.k-filter-row)\");\n\n        var filter = function() {\n            var el = $(this);\n            return !el.hasClass(\"k-group-cell\") && !el.hasClass(\"k-hierarchy-cell\");\n        };\n\n        var cells = $();\n        if (rows.length > 1) {\n            cells = rows.find(\"th\")\n                .filter(filter)\n                .filter(function() { return this.rowSpan > 1; });\n        }\n\n        cells = cells.add(rows.last().find(\"th\").filter(filter));\n\n        var indexAttr = kendo.attr(\"index\");\n        cells.sort(function(a, b) {\n            a = $(a);\n            b = $(b);\n\n            var indexA = a.attr(indexAttr);\n            var indexB = b.attr(indexAttr);\n\n            if (indexA === undefined$1) {\n                indexA = $(a).index();\n            }\n            if (indexB === undefined$1) {\n                indexB = $(b).index();\n            }\n\n            indexA = parseInt(indexA, 10);\n            indexB = parseInt(indexB, 10);\n            return indexA > indexB ? 1 : (indexA < indexB ? -1 : 0);\n        });\n\n        return cells;\n    }\n\n    function parentColumnsCells(cell) {\n        var container = cell.closest(\"table\");\n        var result = $().add(cell);\n\n        var row = cell.closest(\"tr\");\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row);\n        if (level > 0) {\n            var parent = headerRows.eq(level - 1);\n            var parentCellsWithChildren = parent.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return !$(this).attr(\"rowspan\");\n            });\n\n            var offset = 0;\n            var index = row.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\").index(cell);\n\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\").filter(function() {\n                return this.colSpan > 1;\n            });\n\n            for (var idx = 0; idx < prevCells.length; idx++) {\n                offset += prevCells[idx].colSpan || 1;\n            }\n\n            index += Math.max(offset - 1, 0);\n\n            offset = 0;\n            for (idx = 0; idx < parentCellsWithChildren.length; idx++) {\n                var parentCell = parentCellsWithChildren.eq(idx);\n                if (parentCell.attr(\"data-colspan\")) {\n                    offset += parentCell[0].getAttribute(\"data-colspan\");\n                } else {\n                    offset += 1;\n                }\n                if (index >= idx && index < offset) {\n                    result = parentColumnsCells(parentCell).add(result);\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n\n    function childColumnsCells(cell) {\n        var container = cell.closest(\"thead\");\n        var result = $().add(cell);\n\n        var row = cell.closest(\"tr\");\n        var headerRows = container.find(\"tr:not(.k-filter-row)\");\n        var level = headerRows.index(row) + cell[0].rowSpan;\n        var colSpanAttr = kendo.attr(\"colspan\");\n\n        if (level <= headerRows.length - 1) {\n            var child = row.next();\n            var prevCells = cell.prevAll(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var idx;\n\n            prevCells = prevCells.filter(function() {\n                return !this.rowSpan || this.rowSpan === 1;\n            });\n\n            var offset = 0;\n\n            for (idx = 0; idx < prevCells.length; idx++) {\n                offset += parseInt(prevCells.eq(idx).attr(colSpanAttr), 10) || 1;\n            }\n\n            var cells = child.find(\"th:not(.k-group-cell,.k-hierarchy-cell)\");\n            var colSpan = parseInt(cell.attr(colSpanAttr), 10) || 1;\n\n            idx = 0;\n\n            while (idx < colSpan) {\n                child = cells.eq(idx + offset);\n                result = result.add(childColumnsCells(child));\n                var value = parseInt(child.attr(colSpanAttr), 10);\n                if (value > 1) {\n                    colSpan -= value - 1;\n                }\n                idx++;\n            }\n        }\n\n        return result;\n    }\n\n    function appendContent(tbody, table, html, empty) {\n        var placeholder,\n            tmp = tbody;\n\n        // necessary for AngularJS to cleanup its guts.\n        if (empty) {\n            tbody.empty();\n        }\n\n        if (tbodySupportsInnerHtml) {\n            tbody[0].innerHTML = html;\n        } else {\n            placeholder = document.createElement(\"div\");\n            placeholder.innerHTML = \"<table><tbody>\" + html + \"</tbody></table>\";\n            tbody = placeholder.firstChild.firstChild;\n            table[0].replaceChild(tbody, tmp[0]);\n            tbody = $(tbody);\n        }\n        return tbody;\n    }\n\n    function addHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style;\n\n        if (!style) {\n            style = \"display:none\";\n        } else {\n            style = style.replace(/display:[^;]*/i, \"display:none\");\n            if (!style.match(/display:/i)) {\n                style = style.replace(/(.*)?/i, \"display:none;$1\");\n            }\n        }\n\n        return extend({}, attr, { style: style });\n    }\n\n    function hasHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style || \"\";\n\n        return style.indexOf(\"display:none\") !== -1;\n    }\n\n    function removeHiddenStyle(attr) {\n        attr = attr || {};\n        var style = attr.style;\n\n        if (style) {\n            attr.style = style.replace(/(display\\s*:\\s*none\\s*;?)*/ig, \"\");\n        }\n\n        return attr;\n    }\n\n    function normalizeCols(table, visibleColumns, hasDetails, groups) {\n        var colgroup = table.find(\">colgroup\"),\n            width,\n            cols = map(visibleColumns, function(column) {\n                    width = column.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}\"/>', typeof width === STRING ? width : width + \"px\");\n                    }\n\n                    return \"<col />\";\n                });\n\n        if (hasDetails || colgroup.find(\".k-hierarchy-col\").length) {\n            cols.splice(0, 0, '<col class=\"k-hierarchy-col\" />');\n        }\n\n        if (colgroup.length) {\n            colgroup.remove();\n        }\n\n        colgroup = $(new Array(groups + 1).join('<col class=\"k-group-col\">') + cols.join(\"\"));\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        table.prepend(colgroup);\n    }\n\n    function normalizeHeaderCells(container, columns) {\n        var lastIndex = 0;\n        var idx , len;\n        var th = container.find(\"th:not(.k-group-cell)\");\n\n        for (idx = 0, len = columns.length; idx < len; idx ++) {\n            if (columns[idx].locked) {\n                th.eq(idx).insertBefore(th.eq(lastIndex));\n                th = container.find(\"th:not(.k-group-cell)\");\n                lastIndex ++;\n            }\n        }\n    }\n\n    function convertToObject(array) {\n        var result = {},\n            item,\n            idx,\n            length;\n\n        for (idx = 0, length = array.length; idx < length; idx++) {\n            item = array[idx];\n            result[item.value] = item.text;\n        }\n\n        return result;\n    }\n\n    function formatGroupValue(value, format, columnValues, encoded) {\n        var isForeignKey = columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0],\n            groupValue = isForeignKey ? convertToObject(columnValues)[value] : value;\n\n        groupValue = groupValue != null ? groupValue : \"\";\n\n        return format ? kendo.format(format, groupValue) : (encoded === false ? groupValue : kendo.htmlEncode(groupValue));\n    }\n\n    function setCellVisibility(cells, index, visible) {\n        var pad = 0,\n            state,\n            cell = cells[pad];\n\n        while (cell) {\n            state = visible ? true : cell.style.display !== NONE;\n\n            if (state && !nonDataCellsRegExp.test(cell.className) && --index < 0) {\n                cell.style.display = visible ? \"\" : NONE;\n                break;\n            }\n\n            cell = cells[++pad];\n        }\n    }\n\n    function hideColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) - 1);\n                    cell.find(\"col\").eq(columnIndex).remove();\n                    row = cell.find(\"tr\").first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, false);\n            }\n        }\n    }\n\n    function groupRows(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            result.push(item);\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupRows(item.items));\n            }\n        }\n\n        return result;\n    }\n\n    function groupFooters(data) {\n        var result = [];\n        var item;\n\n        for (var idx = 0; idx < data.length; idx++) {\n            item = data[idx];\n            if (!(\"field\" in item && \"value\" in item && \"items\" in item)) {\n                break;\n            }\n\n            if (item.hasSubgroups) {\n                result = result.concat(groupFooters(item.items));\n            }\n\n            result.push(item.aggregates);\n        }\n\n        return result;\n    }\n\n    function showColumnCells(rows, columnIndex) {\n        var idx = 0,\n            length = rows.length,\n            cell, row, columns;\n\n        for ( ; idx < length; idx += 1) {\n            row = rows.eq(idx);\n            if (row.is(\".k-grouping-row,.k-detail-row\")) {\n                cell = row.children(\":not(.k-group-cell):first,.k-detail-cell\").last();\n                cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n            } else {\n                if (row.hasClass(\"k-grid-edit-row\") && (cell = row.children(\".k-edit-container\")[0])) {\n                    cell = $(cell);\n                    cell.attr(\"colspan\", parseInt(cell.attr(\"colspan\"), 10) + 1);\n                    normalizeCols(cell.find(\">form>table\"), visibleColumns(columns), false, 0);\n                    row = cell.find(\"tr\").first();\n                }\n\n                setCellVisibility(row[0].cells, columnIndex, true);\n            }\n        }\n    }\n\n    function updateColspan(toAdd, toRemove, num) {\n        num = num || 1;\n\n        var item, idx, length;\n        for (idx = 0, length = toAdd.length; idx < length; idx++) {\n            item = toAdd.eq(idx).children().last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) + num);\n\n            item = toRemove.eq(idx).children().last();\n            item.attr(\"colspan\", parseInt(item.attr(\"colspan\"), 10) - num);\n        }\n    }\n\n    function tableWidth(table) {\n        var idx, length, width = 0;\n        var cols = table.find(\">colgroup>col\");\n\n        for (idx = 0, length = cols.length; idx < length; idx += 1) {\n            width += parseInt(cols[idx].style.width, 10);\n        }\n\n        return width;\n    }\n\n    var Grid = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options, events) {\n            var that = this;\n\n            options = isArray(options) ? { dataSource: options } : options;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (events) {\n                that._events = events;\n            }\n\n            isRtl = kendo.support.isRtl(element);\n\n            that._element();\n\n            that._ariaId();\n\n            that._columns($.extend(true, [], that.options.columns));\n\n            if (that._foreignKeyPromises) {\n                $.when.apply(null, that._foreignKeyPromises)\n                    .then(function() {\n                        that._foreignKeyPromises = null;\n                        that._continueInit();\n                    });\n            } else {\n                that._continueInit();\n            }\n        },\n\n        _continueInit: function() {\n            var that = this;\n\n            that._dataSource();\n\n            that._stickyColumns();\n\n            that._tbody();\n\n            that._thead();\n\n            that._groupable();\n\n            that._toolbar();\n\n            that._pageable();\n\n            that._setContentHeight();\n\n            that._templates();\n\n            that._navigatable();\n\n            that._selectable();\n\n            that._clipboard();\n\n            that._details();\n\n            that._editable();\n\n            that._attachCustomCommandsEvent();\n\n            that._adaptiveColumns();\n\n            that._minScreenSupport();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._group = that._groups() > 0;\n                that._footer();\n            }\n\n            if (that.lockedContent) {\n                that.wrapper.addClass(\"k-grid-lockedcolumns\");\n                that._resizeHandler = function() {\n                    that.resize();\n                };\n                $(window).on(\"resize\" + NS, that._resizeHandler);\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n           CHANGE,\n           \"dataBinding\",\n           \"cancel\",\n           DATABOUND,\n           DETAILEXPAND,\n           DETAILCOLLAPSE,\n           DETAILINIT,\n           FILTERMENUINIT,\n           FILTERMENUOPEN,\n           COLUMNMENUINIT,\n           COLUMNMENUOPEN,\n           EDIT,\n           BEFOREEDIT,\n           SAVE,\n           REMOVE,\n           SAVECHANGES,\n           CELLCLOSE,\n           COLUMNRESIZE,\n           COLUMNREORDER,\n           COLUMNSHOW,\n           COLUMNHIDE,\n           COLUMNLOCK,\n           COLUMNUNLOCK,\n           COLUMNSTICK,\n           COLUMNUNSTICK,\n           ROWREORDER,\n           NAVIGATE,\n           \"page\",\n           \"sort\",\n           \"filter\",\n           \"group\",\n           \"groupExpand\",\n           \"groupCollapse\",\n           \"kendoKeydown\"\n        ],\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var scrollable = that.options.scrollable;\n            var scrollableContent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            that._pageable();\n\n            that._thead();\n\n            if (scrollable) {\n                if (scrollable.virtual) {\n                    scrollableContent = that.content.find(\">.k-virtual-scrollable-wrap\");\n                    kendo.scrollLeft(scrollableContent, leftMostPosition(scrollableContent, isRtl));\n                } else {\n                    scrollableContent = that.tbody;\n                    kendo.scrollLeft(that.content, leftMostPosition(scrollableContent, isRtl));\n                }\n            }\n\n            if (that.options.groupable) {\n                that._groupable();\n            }\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.setDataSource(that.options.dataSource);\n            }\n\n            if (that.options.navigatable) {\n                that._navigatable();\n            }\n\n            if (that.options.selectable) {\n                that._selectable();\n            }\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            } else {\n                that._footer();\n            }\n        },\n\n        options: {\n            name: \"Grid\",\n            columns: [],\n            toolbar: null,\n            autoBind: true,\n            filterable: false,\n            scrollable: true,\n            sortable: false,\n            selectable: false,\n            allowCopy: false,\n            navigatable: false,\n            pageable: false,\n            persistSelection: false,\n            editable: false,\n            encodeTitles: false,\n            groupable: false,\n            rowTemplate: \"\",\n            altRowTemplate: \"\",\n            search: false,\n            noRecords: false,\n            dataSource: {},\n            height: null,\n            resizable: false,\n            reorderable: false,\n            columnMenu: false,\n            detailTemplate: null,\n            columnResizeHandleWidth: 3,\n            mobile: \"\",\n            loaderType: \"loadingPanel\",\n            messages: {\n                editable: {\n                    cancelDelete: CANCELDELETE,\n                    confirmation: DELETECONFIRM,\n                    confirmDelete: CONFIRMDELETE\n                },\n                commands: {\n                    create: defaultCommands.create.text,\n                    cancel: defaultCommands.cancel.text,\n                    save: defaultCommands.save.text,\n                    destroy: defaultCommands.destroy.text,\n                    edit: defaultCommands.edit.text,\n                    update: defaultCommands.update.text,\n                    canceledit: defaultCommands.canceledit.text,\n                    excel: defaultCommands.excel.text,\n                    pdf: defaultCommands.pdf.text,\n                    search: defaultCommands.search.text\n                },\n                noRecords: NORECORDS,\n                expandCollapseColumnHeader: \"\",\n                groupHeader: \"Press ctrl + space to group\",\n                ungroupHeader: \"Press ctrl + space to ungroup\",\n                itemsSelected: \"items selected\",\n                dragHandleLabel: \"Drag row\",\n                toolbarLabel: \"grid toolbar\",\n                groupingHeaderLabel: \"grid grouping header\",\n                filterCellTitle: \"filter cell\"\n            },\n            width: null\n        },\n\n        destroy: function() {\n            var that = this,\n                element,\n                reorderableInstance;\n\n            that._angularItems(\"cleanup\");\n            that._destroyColumnAttachments();\n\n            Widget.fn.destroy.call(that);\n\n            if (this._navigatableTables) {\n                this._navigatableTables.off(NS);\n                this._navigatableTables = null;\n                this._headertables = null;\n            }\n\n            if (that._resizeHandler) {\n                $(window).off(\"resize\" + NS, that._resizeHandler);\n            }\n\n            if (that.pager && that.pager.element) {\n                that.pager.destroy();\n            }\n\n            if (that.timer) {\n                clearTimeout(that.timer);\n            }\n\n            if (that._progressTimeOut) {\n                clearTimeout(that._progressTimeOut);\n            }\n\n            if (that._collapseGroupsTimeOut) {\n                clearTimeout(that._collapseGroupsTimeOut);\n            }\n\n            if (that._endlessFetchTimeOut) {\n                clearTimeout(that._endlessFetchTimeOut);\n            }\n\n            that.pager = null;\n\n            that._destroyGroupable();\n\n            reorderableInstance = that.wrapper.data(\"kendoReorderable\");\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            reorderableInstance = that.tbody ? that.tbody.data(\"kendoReorderable\") : null;\n            if (reorderableInstance) {\n                reorderableInstance.destroy();\n            }\n\n            if (that.selectable && that.selectable.element) {\n                that.selectable.destroy();\n\n                that.clearArea();\n                that._selectedIds = null;\n\n                if (that.copyHandler) {\n                    that.wrapper.off(\"keydown\", that.copyHandler);\n                    that.unbind(that.copyHandler);\n                }\n                if (that.updateClipBoardState) {\n                    that.unbind(that.updateClipBoardState);\n                    that.updateClipBoardState = null;\n                }\n                if (that.clearAreaHandler) {\n                    that.wrapper.off(\"keyup\", that.clearAreaHandler);\n                }\n            }\n\n            that.selectable = null;\n\n            if (that.resizable) {\n                that.resizable.destroy();\n\n                if (that._resizeUserEvents) {\n                    if (that._resizeHandleDocumentClickHandler) {\n                        $(document).off(\"click\", that._resizeHandleDocumentClickHandler);\n                    }\n                    that._resizeUserEvents.destroy();\n                    that._resizeUserEvents = null;\n                }\n                that.resizable = null;\n            }\n\n            that._destroyVirtualScrollable();\n\n            if (that.editableUserEvents) {\n                that.editableUserEvents.destroy();\n                that.editableUserEvents = null;\n            }\n\n            if (that._lockedContentUserEvents) {\n                that._lockedContentUserEvents.destroy();\n                that._lockedContentUserEvents = null;\n            }\n\n            that._destroyEditable();\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                           .unbind(PROGRESS, that._progressHandler)\n                           .unbind(ERROR, that._errorHandler)\n                           .unbind(SORT, that._clearSortClasses);\n\n                that._refreshHandler = that._progressHandler = that._errorHandler = that._sortHandler = null;\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.table)\n                .add(that.thead)\n                .add(that.wrapper.find(\">.k-grid-toolbar\"));\n\n            if (that.content) {\n                element = element\n                        .add(that.content)\n                        .add(that.content.find(\">.k-virtual-scrollable-wrap\"));\n            }\n\n            if (that.lockedHeader) {\n                that._removeLockedContainers();\n            }\n\n            if (that.pane) {\n                that.pane.destroy();\n            }\n\n            if (that._isMobile) {\n                that.wrapper.off(\"transitionend\" + NS);\n                that.wrapper.off(\"contextmenu\" + NS);\n            }\n\n            if (that.minScreenResizeHandler) {\n                $(window).off(\"resize\", that.minScreenResizeHandler);\n            }\n\n            that._detachColumnMediaResizeHandler();\n\n            if (that._draggableInstance && that._draggableInstance.element) {\n                that._draggableInstance.destroy();\n            }\n\n            that._draggableInstance = null;\n\n            if (that._draggableRowsInstance && that._draggableRowsInstance.element) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            that._draggableRowsInstance = null;\n\n            element.off(NS);\n\n            kendo.destroy(that.wrapper);\n\n            that.rowTemplate =\n            that.altRowTemplate =\n            that.lockedRowTemplate =\n            that.lockedAltRowTemplate =\n            that.detailTemplate =\n            that.footerTemplate =\n            that.groupFooterTemplate =\n            that.lockedGroupFooterTemplate =\n            that.noRecordsTemplate = null;\n\n            that.scrollables =\n            that.thead =\n            that.tbody =\n            that.element =\n            that.table =\n            that.content =\n            that.footer =\n            that.wrapper =\n            that.lockedTable =\n            that.lockedContent =\n            that.lockedHeader =\n            that.lockedFooter =\n            that._groupableClickHandler =\n            that._groupRows =\n            that._setContentWidthHandler = null;\n        },\n\n        getOptions: function() {\n            var options = this.options;\n            options.dataSource = null;\n\n            var result = extend(true, {}, this.options);\n            result.columns = kendo.deepExtend([], this.columns);\n\n            var dataSource = this.dataSource;\n\n            var initialData = dataSource.options.data && dataSource._data;\n            dataSource.options.data = null;\n\n            result.dataSource = $.extend(true, {}, dataSource.options);\n\n            dataSource.options.data = initialData;\n\n            result.dataSource.data = initialData;\n            result.dataSource.page = dataSource.page();\n            result.dataSource.filter = $.extend(true, {}, dataSource.filter());\n            result.dataSource.pageSize = dataSource.pageSize();\n            result.dataSource.sort = dataSource.sort();\n            result.dataSource.group = dataSource.group();\n            result.dataSource.aggregate = dataSource.aggregate();\n\n            if (result.dataSource.transport) {\n                result.dataSource.transport.dataSource = null;\n            }\n\n            if (result.pageable && result.pageable.pageSize) {\n                result.pageable.pageSize = dataSource.pageSize();\n            }\n\n            result.$angular = undefined$1;\n\n            return result;\n        },\n\n        setOptions: function(options) {\n            var currentOptions = this.getOptions();\n            kendo.deepExtend(currentOptions, options);\n            if (!options.dataSource) {\n                currentOptions.dataSource = this.dataSource;\n            } else {\n              if (options.dataSource.filter) {\n                  currentOptions.dataSource.filter = options.dataSource.filter;\n              }\n            }\n            var wrapper = this.wrapper;\n            var events = this._events;\n            var element = this.element;\n\n            this.destroy();\n            this.options = null;\n            if (this._isMobile) {\n                var mobileWrapper = wrapper.closest(kendo.roleSelector(\"pane\")).parent();\n                mobileWrapper.after(wrapper);\n                mobileWrapper.remove();\n                wrapper.removeClass(\"k-grid-mobile\");\n            }\n            if (wrapper[0] !== element[0]) {\n                wrapper.before(element);\n                wrapper.remove();\n            }\n            element.empty();\n\n            this.init(element, currentOptions, events);\n            this._setEvents(currentOptions);\n        },\n\n        items: function() {\n            if (this.lockedContent) {\n                return this._items(this.tbody).add(this._items(this.lockedTable.children(\"tbody\")));\n            } else {\n                return this._items(this.tbody);\n            }\n        },\n\n        _items: function(container, includeGroupRows) {\n            return container.children().filter(function() {\n                var tr = $(this);\n                return (includeGroupRows ? !tr.hasClass(\"k-detail-row\") : !tr.hasClass(\"k-grouping-row\")) && !tr.hasClass(\"k-detail-row\") && !tr.hasClass(\"k-group-footer\");\n            });\n        },\n\n        dataItems: function() {\n            var dataItems = kendo.ui.DataBoundWidget.fn.dataItems.call(this);\n            if (this.lockedContent) {\n                var n = dataItems.length, tmp = new Array(2 * n);\n                for (var i = n; --i >= 0;) {\n                    tmp[i] = tmp[i + n] = dataItems[i];\n                }\n                dataItems = tmp;\n            }\n\n            return dataItems;\n        },\n\n        _destroyColumnAttachments: function() {\n            var that = this;\n\n            that.resizeHandle = null;\n\n            if (!that.thead) {\n                return;\n            }\n\n            this.angular(\"cleanup\", function() {\n                return { elements: that.thead.get() };\n            });\n\n            that.thead.add(that.lockedHeader).find(\"th\").each(function() {\n                var th = $(this),\n                    filterMenu = th.data(\"kendoFilterMenu\"),\n                    sortable = th.data(\"kendoColumnSorter\"),\n                    columnMenu = th.data(\"kendoColumnMenu\");\n\n                if (filterMenu) {\n                    filterMenu.destroy();\n                }\n\n                if (sortable) {\n                    sortable.destroy();\n                }\n\n                if (columnMenu) {\n                    columnMenu.destroy();\n                }\n            });\n        },\n\n        _attachCustomCommandsEvent: function() {\n            var that = this,\n                columns = leafColumns(that.columns || []),\n                command,\n                idx,\n                length;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                command = columns[idx].command;\n\n                if (command) {\n                    attachCustomCommandEvent(that, that.wrapper, command);\n                }\n            }\n        },\n\n        _aria: function() {\n            var wrapper = this.wrapper,\n                gridRole = this._hasDetails() ? \"treegrid\" : this.options.navigatable ? \"grid\" : null,\n                table = this.table,\n                toolbar = wrapper.find(\".k-grid-toolbar\"),\n                groupingHeader = wrapper.find(\".k-grouping-header\"),\n                gridId = table.attr(ID),\n                tableTabindex = table.attr(TABINDEX),\n                tbodyId, headerGroupId, footerGroupId, tableOwned,\n                numberOfFixedRows = this.thead.find(\"tr\").length + this.wrapper.find(\".k-grid-footer-wrap table tr\").length,\n                trailingColumns = this._trailingColumns(),\n                virtual = this.virtualScroll,\n                pageable = this.options.pageable,\n                rowsCount;\n\n            table.attr(TABINDEX, tableTabindex >= 0 ? tableTabindex : 0);\n\n            if (gridRole) {\n                table.attr(ROLE, gridRole);\n            }\n\n            table.find(\"tbody, thead, tfoot\").attr(ROLE, ROWGROUP);\n            table.find(\"tr\").attr(ROLE, ROW);\n            table.find(\"th\").attr(ROLE, COLUMNHEADER);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            if ((pageable && this.dataSource.totalPages() > 1) || (virtual && virtual.rows)) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else if (this._hasDetails()) {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                } else {\n                    rowsCount = numberOfFixedRows + this.dataSource.total();\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            } else if (this._hasDetails()) {\n                if (this._groups() > 0) {\n                    rowsCount = -1;\n                } else {\n                    rowsCount = numberOfFixedRows + (this.dataSource.total() * 2);\n                }\n\n                table.attr(ARIA_ROWCOUNT, rowsCount);\n            }\n\n            if (rowsCount && rowsCount > 0) {\n                this._ariaRowIndex();\n            }\n\n            if ((virtual && virtual.columns) ||\n                (!table.attr(ARIA_COLCOUNT) &&\n                    (table.find(\"td:hidden\").length > 0 ||\n                    wrapper.find(\".k-grid-content-locked td:hidden\").length > 0))) {\n                        table.attr(ARIA_COLCOUNT, trailingColumns + leafColumns(this.columns).length);\n                        this._ariaColumnIndex();\n            }\n\n            if (!gridId) {\n                gridId = kendo.guid();\n                table.attr(ID, gridId);\n            }\n\n            if (this.pager) {\n                this.pager.element.attr(ARIA_CONTROLS, gridId);\n            }\n\n            toolbar.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.toolbarLabel,\n                \"aria-controls\": gridId\n            });\n\n            groupingHeader.attr({\n                role: \"toolbar\",\n                \"aria-label\": this.options.messages.groupingHeaderLabel,\n                \"aria-controls\": gridId\n            });\n\n            headerGroupId = this._ariaHeaderFooter(\"header\", \"thead\", \"th, td\", COLUMNHEADER);\n            footerGroupId = this._ariaHeaderFooter(\"footer\", \"tfoot\", \"td\", GRIDCELL);\n\n            if (wrapper.find(\".k-grid-content-locked\").length > 0) {\n                this._ariaLockedContent();\n            }\n\n            if (!!headerGroupId || !!footerGroupId) {\n                tbodyId = this.tbody.attr(ID) || kendo.guid();\n                tableOwned = [headerGroupId, tbodyId, footerGroupId].join(\" \");\n\n                this.tbody.attr(ID, tbodyId);\n                table.attr(ARIA_OWNS, tableOwned);\n            }\n\n            if (this.options.groupable) {\n                this._ariaGroupTitles();\n            }\n        },\n\n        _ariaColumnIndex: function() {\n            var trailingColumns = this._trailingColumns(),\n                dataVirtual = this.tbody.find(\">tr\").last().find(\"> td[data-virtual]\"),\n                headerRows = this.thead.find(\">tr\").not(\".k-filter-row\"),\n                lockedHeaderRows = this.wrapper.find(\".k-grid-header-locked thead > tr\").not(\".k-filter-row\"),\n                firstIndex = Number.MAX_VALUE,\n                lastIndex = 0,\n                lockedLastIndex = 0,\n                previousVirtual = 0,\n                nextVirtual = 0,\n                previousIndex, i, cells, dataIndex, cellsIndex,\n                eachHeaderCell = function(j, cell) {\n                    var current = cell.getAttribute(\"data-index\"),\n                        currentIndex = Number(current),\n                        lockedParent = $(cell).closest(\".k-grid-header-locked\");\n\n                    if (lockedParent.length === 0 && currentIndex < firstIndex) {\n                        firstIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length > 0 && lockedLastIndex < currentIndex) {\n                        lockedLastIndex = currentIndex;\n                    }\n\n                    if (lockedParent.length === 0 && lastIndex < currentIndex) {\n                        lastIndex = currentIndex;\n                    }\n\n                    if (current !== null) {\n                        cell.setAttribute(ARIA_COLINDEX, Number(currentIndex) + 1);\n                        previousIndex = Number(currentIndex) + 1 + cell.getAttribute(\"colspan\");\n                    } else {\n                        cell.setAttribute(ARIA_COLINDEX, previousIndex + 1);\n                        previousIndex = previousIndex + cell.getAttribute(\"colspan\");\n                    }\n                };\n\n            if (dataVirtual.length === 2) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n                nextVirtual = Number(dataVirtual[1].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 0) {\n                previousVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            } else if (dataVirtual.length === 1 && dataVirtual.prev().length === 1) {\n                nextVirtual = Number(dataVirtual[0].getAttribute(\"colspan\"));\n            }\n\n            for (i = 0; i < lockedHeaderRows.length; i++) {\n                previousIndex = 0;\n                lockedHeaderRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i < headerRows.length; i++) {\n                previousIndex = 0;\n                headerRows.eq(i).find(\"th\").each(eachHeaderCell);\n            }\n\n            for (i = 0; i <= lockedLastIndex; i++) {\n                dataIndex = i + trailingColumns;\n                cells = this.wrapper.find(\".k-grid-content-locked tbody > tr > td:nth-child(\" + (i + 1) + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n\n            for (i = previousVirtual; i <= lastIndex - firstIndex - nextVirtual; i++) {\n                if (previousVirtual === 0 ) {\n                    cellsIndex = i + 1;\n                } else {\n                    cellsIndex = i - previousVirtual + 2;\n                }\n\n                dataIndex = firstIndex + i + trailingColumns;\n\n                cells = this.tbody.find(\"> tr > td:nth-child(\" + cellsIndex + \")\");\n                cells.attr(ARIA_COLINDEX, dataIndex + 1);\n            }\n        },\n\n        _ariaGroupTitles: function() {\n            var that = this,\n                groups = that.dataSource.group(),\n                ths = that.wrapper.find(\".k-grid-header th\");\n\n            ths.each(function(i, el) {\n                if (el.getAttribute(\"title\") === that.options.messages.ungroupHeader) {\n                        el.setAttribute(\"title\", that.options.messages.groupHeader);\n                }\n            });\n\n            if (groups && groups.length > 0) {\n                groups.forEach(function(group) {\n                    var field = group.field,\n                        el = ths.filter(\"[\" + kendo.attr(\"field\") + \"='\" + field + \"']\");\n\n                    if (el.attr(\"title\") === that.options.messages.groupHeader) {\n                        el.attr(\"title\", that.options.messages.ungroupHeader);\n                    }\n                });\n            }\n        },\n\n        _ariaHeaderFooter: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                groupId = \"\",\n                rowGroup;\n\n            if (table.length > 0) {\n                rowGroup = table.find(group + \", tbody\");\n                groupId = rowGroup.attr(ID) || kendo.guid();\n\n                table.attr(ROLE, NONE);\n                table.find(\"tr\").attr(ROLE, ROW);\n                table.find(el).attr(ROLE, role);\n                rowGroup.attr({\n                    role: ROWGROUP,\n                    id: groupId\n                });\n            }\n\n            if (lockedTable.length > 0) {\n                that._ariaLocked(type, group, el, role);\n            }\n\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n            table.find(\"td\").attr(ROLE, GRIDCELL);\n\n            return groupId;\n        },\n\n        _ariaId: function() {\n            var id = this.element.attr(ID) || \"aria\";\n\n            if (id) {\n                this._cellId = id + \"_active_cell\";\n            }\n        },\n\n        _ariaLocked: function(type, group, el, role) {\n            var that = this,\n                wrapper = that.wrapper,\n                table = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-wrap table\"),\n                lockedTable = wrapper.find(\".k-grid-\" + type + \" .k-grid-\" + type + \"-locked table\"),\n                rows = table.find(\"tr\"),\n                lockedRows = lockedTable.find(\"tr\");\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(group + \", tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n\n            lockedTable.find(el).attr(ROLE, role);\n\n            rows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(el), \"locked_\" + type, i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(el), type, i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaLockedContent: function() {\n            var that = this,\n                table = that.table,\n                tableRows = table.find(\"tr\"),\n                lockedTable = that.wrapper.find(\".k-grid-content-locked table\"),\n                lockedRows = lockedTable.find(\"tr\");\n\n            lockedTable.attr(ROLE, NONE);\n            lockedTable.find(\"tbody\").attr(ROLE, NONE);\n            lockedRows.attr(ROLE, NONE);\n            lockedTable.find(\"td\").attr(ROLE, GRIDCELL);\n\n            tableRows.each(function(i, row) {\n                var ownedCells = [];\n\n                ownedCells = that._cellsIds(lockedRows.eq(i).find(\"td\"), \"locked_datacell\", i);\n                ownedCells = ownedCells.concat(that._cellsIds($(row).find(\"td\"), \"datacell\", i));\n\n                row.setAttribute(ARIA_OWNS, ownedCells.join(\" \"));\n            });\n        },\n\n        _ariaAddHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                table = this.table,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && !table.attr(ARIA_COLCOUNT)) {\n                this._ariaColumnIndex();\n\n                table.attr(ARIA_COLCOUNT, leafColsCount);\n            }\n        },\n\n        _ariaRemoveHiddenColIndex: function() {\n            var virtualScroll = this.virtualScroll || {},\n                columns = this.columns,\n                leafColsCount = leafColumns(columns).length;\n\n            if (!virtualScroll.columns && (leafColsCount === visibleLeafColumns(this.columns).length)) {\n                this.wrapper.find(\"td, th\").removeAttr(ARIA_COLINDEX);\n\n                this.table.removeAttr(ARIA_COLCOUNT);\n            }\n        },\n\n        _ariaRowIndex: function() {\n            var headerRows = this.thead.find(\">tr\"),\n                numberOfHeaderRows = headerRows.length,\n                bodyRows = this.tbody.find(\">tr\"),\n                footerRows = this.wrapper.find(\".k-grid-footer-wrap tfoot > tr\"),\n                totalNumberOfItems = this.dataSource.total(),\n                previousItems = this.dataSource.skip() || 0,\n                currentIndex = 1,\n                previousMaster = false,\n                i, currentRow;\n\n            if (this._hasDetails()) {\n                totalNumberOfItems = totalNumberOfItems * 2;\n                previousItems = previousItems * 2;\n            }\n\n            for (i = 0; i < numberOfHeaderRows; i++) {\n                headerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n\n            currentIndex = numberOfHeaderRows + previousItems;\n\n            for (i = 0; i < bodyRows.length; i++) {\n                currentRow = bodyRows.eq(i);\n\n                if (this._hasDetails() && currentRow.hasClass(\"k-master-row\")) {\n                    if (previousMaster) {\n                        currentIndex = currentIndex + 2;\n                    } else {\n                        currentIndex = currentIndex + 1;\n                    }\n\n                    previousMaster = true;\n                } else {\n                    currentIndex = currentIndex + 1;\n                    previousMaster = false;\n                }\n\n                currentRow.attr(ARIA_ROWINDEX, currentIndex);\n            }\n\n            currentIndex = numberOfHeaderRows + totalNumberOfItems + 1;\n\n            for (i = 0; i < footerRows.length; i++) {\n                footerRows.eq(i).attr(ARIA_ROWINDEX, currentIndex + i);\n            }\n        },\n\n        _cellsIds: function(elements, prefix, i) {\n            var ownedCells = [];\n\n            elements.each(function(j, cell) {\n                var id = cell.getAttribute(ID) || prefix + \"_\" + i + \"_\" + j;\n\n                cell.setAttribute(ID, id);\n\n                ownedCells.push(id);\n            });\n\n            return ownedCells;\n        },\n\n        _trailingColumns: function() {\n            return this._groups() + (this._hasDetails() ? 1 : 0);\n        },\n\n        _element: function() {\n            var that = this,\n                table = that.element;\n\n            if (!table.is(\"table\")) {\n                if (that.options.scrollable) {\n                    table = that.element.find(\"> .k-grid-content > table\");\n                } else {\n                    table = that.element.children(\"table\");\n                }\n\n                if (!table.length) {\n                    table = $(\"<table />\").appendTo(that.element);\n                }\n            }\n\n            that.table = table;\n\n            that._wrapper();\n        },\n\n        _createResizeHandle: function(container, th) {\n            var that = this;\n            var indicatorWidth = that.options.columnResizeHandleWidth;\n            var scrollable = that.options.scrollable;\n            var resizeHandle = that.resizeHandle;\n            var halfResizeHandle = (indicatorWidth * 3) / 2;\n            var rtlCorrection = 0;\n            var headerWrap;\n            var ieCorrection;\n            var webkitCorrection;\n            var firefoxCorrection;\n            var leftMargin;\n            var invisibleSpace;\n            var leftBorderWidth;\n            var scrollLeft;\n            var left;\n            var top;\n\n            if (resizeHandle && that.lockedContent && resizeHandle.data(\"th\")[0] !== th[0]) {\n                resizeHandle.off(NS).remove();\n                resizeHandle = null;\n            }\n\n            if (!resizeHandle) {\n                resizeHandle = that.resizeHandle = $('<div class=\"k-resize-handle\"><div class=\"k-resize-handle-inner\"></div></div>');\n                container.append(resizeHandle);\n            }\n\n            scrollLeft = kendo.scrollLeft(container);\n\n            if (isRtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeft = scrollLeft * -1;\n            }\n\n            leftBorderWidth = parseFloat(container.css(\"borderLeftWidth\"));\n\n            left = th.offset().left + scrollLeft - parseFloat(th.css(\"marginLeft\")) - (container.offset().left + leftBorderWidth);\n\n            if (!isRtl) {\n                left += th[0].offsetWidth;\n           } else {\n                if (scrollable) {\n                    rtlCorrection = (left <= scrollLeft ? halfResizeHandle : 0);// when shown on first column headers are misaligned due to the width of the resize handler\n                    headerWrap = th.closest(\".k-grid-header-wrap, .k-grid-header-locked\");\n                    invisibleSpace = headerWrap[0].scrollWidth - headerWrap[0].offsetWidth; // the difference between the entire width and the visible area\n                    leftMargin = parseFloat(headerWrap.css(\"marginLeft\"));\n                    ieCorrection = browser.msie ? 2 * kendo.scrollLeft(headerWrap) + leftBorderWidth - leftMargin - rtlCorrection : 0;\n                    webkitCorrection = -rtlCorrection;\n                    firefoxCorrection = browser.mozilla ? leftBorderWidth - leftMargin - rtlCorrection : 0;\n\n                    left -= webkitCorrection + firefoxCorrection + ieCorrection;\n                }\n            }\n\n            top = th.offset().top - parseFloat(th.css(\"marginTop\")) - (container.offset().top + parseFloat(container.css(\"borderTopWidth\")));\n\n            resizeHandle.css({\n                top: top, //scrollable ? 0 : heightAboveHeader(that.wrapper),\n                left: left - halfResizeHandle,\n                height: outerHeight(th),\n                width: indicatorWidth * 3 - rtlCorrection\n            })\n            .data(\"th\", th)\n            .show();\n\n            resizeHandle.off(\"dblclick\" + NS).on(\"dblclick\" + NS, function() {\n                that._autoFitLeafColumn(parseInt(th.attr(kendo.attr(\"index\")), 10));\n            });\n        },\n\n        _positionColumnResizeHandle: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that.thead.add(lockedHead).on(\"mousemove\" + NS, \"tr:not(.k-filter-row) > th\", function(e) {\n                var button = typeof e.buttons !== \"undefined\" ? e.buttons : (e.which || e.button);\n\n                var th = $(this);\n                if (th.hasClass(\"k-group-cell\") || th.hasClass(\"k-hierarchy-cell\")) {\n                    return;\n                }\n\n                if (typeof button !== \"undefined\" && button !== 0) {\n                    //do not create a new resize handle if a mouse button is still pressed\n                    //this happens during resizing or before UserEvents trigger \"start\"\n                    return;\n                }\n\n                if (th[0].hasAttribute(kendo.attr(COLSPAN))) {\n                    // resizing multi-column headers is not supported\n                    return;\n                }\n\n                that._createResizeHandle(th.closest(\"div\"), th);\n            });\n        },\n\n        _resizeHandleDocumentClick: function(e) {\n            if ($(e.target).closest(\".k-column-active\").length) {\n                return;\n            }\n\n            $(document).off(e);\n\n            this._resetResizeHandleHeader();\n            this._hideResizeHandle();\n        },\n\n        _resetResizeHandleHeader: function() {\n            var th;\n\n            if (!this.resizeHandle) {\n                return;\n            }\n\n            th = $(this.resizeHandle).data(\"th\");\n\n            if (th) {\n                th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).show();\n                th.find(DOT + ORDER_CLASS).show();\n                th.find(DOT + HEADER_COLUMN_MENU_CLASS).show();\n                th.find(DOT + FILTER_MENU_CLASS).show();\n            }\n        },\n\n        _hideResizeHandle: function() {\n            if (this.resizeHandle) {\n                this.resizeHandle.data(\"th\")\n                    .removeClass(\"k-column-active\");\n\n                if (this.lockedContent && !this._isMobile) {\n                    this.resizeHandle.off(NS).remove();\n                    this.resizeHandle = null;\n                } else {\n                    this.resizeHandle.hide();\n                }\n            }\n        },\n\n        _positionColumnResizeHandleTouch: function() {\n            var that = this,\n                lockedHead = that.lockedHeader ? that.lockedHeader.find(\"thead\").first() : $();\n\n            that._resizeUserEvents = new kendo.UserEvents(lockedHead.add(that.thead), {\n                filter: \"th:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                threshold: 10,\n                minHold: 500,\n                hold: function(e) {\n                    var th = $(e.target);\n\n                    e.preventDefault();\n\n                    if (that.resizeHandle) {\n                        that.resizeHandle.data(\"th\")\n                            .removeClass(\"k-column-active\");\n                        that._resetResizeHandleHeader();\n                    }\n\n                    th.addClass(\"k-column-active\");\n\n                    th.find(DOT + LINK_CLASS).find(DOT + ICON_CLASS).hide();\n                    th.find(DOT + ORDER_CLASS).hide();\n                    th.find(DOT + HEADER_COLUMN_MENU_CLASS).hide();\n                    th.find(DOT + FILTER_MENU_CLASS).hide();\n\n                    that._createResizeHandle(th.closest(\"div\"), th);\n\n                    if (!that._resizeHandleDocumentClickHandler) {\n                        that._resizeHandleDocumentClickHandler = that._resizeHandleDocumentClick.bind(that);\n                    }\n\n                    $(document).on(\"click\", that._resizeHandleDocumentClickHandler);\n                }\n            });\n        },\n\n        resizeColumn: function(column, columnWidth) {\n            var that = this;\n            var isLocked = !!column.locked;\n            var isHidden = !!column.hidden;\n            var options = this.options;\n            var scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n            var index = isLocked ? inArray(column, visibleLockedColumns(visibleLeafColumns(that.columns))) : inArray(column, visibleNonLockedColumns(visibleLeafColumns(that.columns)));\n            var contentTable = isLocked ? that.lockedTable : that.table;\n            var footer = that.footer || $();\n            var header = isLocked ? that.lockedHeader.find(\"table\") : that.thead.closest(\"table\");\n            var columnMinWidth = column.minResizableWidth || 10;\n            var gridWidth = isLocked ? outerWidth(contentTable.find(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n            var col;\n\n            if (isHidden) {\n                column.width = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n                return;\n            }\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            if (options.scrollable) {\n\n                col = header.find(\"col:not(.k-group-col,.k-hierarchy-col)\").eq(index)\n                    .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                    .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n            } else {\n                col = contentTable.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n            }\n\n            if (options.scrollable) {\n                var constrain = false;\n                var totalWidth = that.wrapper.width() - scrollbar;\n                var width = columnWidth = columnWidth > columnMinWidth ? columnWidth : columnMinWidth;\n\n                if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                    width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                    if (width < 0) {\n                        width = columnWidth;\n                    }\n                    constrain = true;\n                }\n\n                if (width > 10 && width >= columnMinWidth) {\n                    col.css('width', width);\n\n                    if (gridWidth) {\n                        if (constrain) {\n                            width = totalWidth - scrollbar * 2;\n                        } else {\n                            width = gridWidth + (columnWidth - column.width);\n                        }\n\n                        contentTable\n                            .add(header)\n                            .add(footer)\n                            .css('width', width);\n\n                        if (!isLocked) {\n                            that._footerWidth = width;\n                        }\n                    }\n                }\n\n            that._scrollVirtualWrapperOnColumnResize();\n            } else if (columnWidth > 10 && columnWidth >= columnMinWidth) {\n                col.css('width', columnWidth);\n            }\n\n            column.width = columnWidth;\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        _resizable: function() {\n            var that = this,\n                options = that.options,\n                container,\n                columnStart,\n                columnWidth,\n                columnMinWidth,\n                gridWidth,\n                isMobile = this._isMobile,\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0,\n                isLocked,\n                col, th;\n\n            if (options.resizable) {\n                container = options.scrollable ? that.wrapper.find(\".k-grid-header-wrap\").first() : that.wrapper;\n\n                if (isMobile) {\n                    that._positionColumnResizeHandleTouch(container);\n                } else {\n                    that._positionColumnResizeHandle(container);\n                }\n\n                if (that.resizable) {\n                    that.resizable.destroy();\n                }\n\n                that.resizable = new ui.Resizable(container.add(that.lockedHeader), {\n                    handle: (!!options.scrollable ? \"\" : \">\") + \".k-resize-handle\",\n                    hint: function(handle) {\n                        return $('<div class=\"k-grid-resize-indicator\" />').css({\n                            height: outerHeight(handle.data(\"th\")) + that.tbody.attr(\"clientHeight\")\n                        });\n                    },\n                    start: function(e) {\n                        th = $(e.currentTarget).data(\"th\");\n\n                        if (isMobile) {\n                            that._hideResizeHandle();\n                        }\n\n                        var header = th.closest(\"table\"),\n                            index = $.inArray(th[0], leafDataCells(th.closest(\"thead\")).filter(\":visible\"));\n\n                        isLocked = header.parent().hasClass(\"k-grid-header-locked\");\n\n                        var contentTable = isLocked ? that.lockedTable : that.table,\n                            footer = that.footer || $();\n\n                        if (that.footer && that.lockedContent) {\n                            footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n                        }\n\n                        cursor(that.wrapper, 'col-resize');\n\n                        if (options.scrollable) {\n                            col = header.find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index)\n                                .add(contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index))\n                                .add(footer.find(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index));\n                        } else {\n                            col = contentTable.children(\"colgroup\").find(\"col:not(.k-group-col):not(.k-hierarchy-col)\").eq(index);\n                        }\n\n                        var columns = $.map(that.columns, function(a) {\n                            return !a.hidden && ((isLocked && a.locked) || ((!isLocked && !a.locked))) ? a : null;\n                        });\n\n                        columnStart = e.x.location;\n                        columnWidth = outerWidth(th);\n                        columnMinWidth = leafColumns(columns)[index].minResizableWidth || 10;\n                        gridWidth = isLocked ? outerWidth(contentTable.children(\"tbody\")) : outerWidth(that.tbody); // IE returns 0 if grid is empty and scrolling is enabled\n\n                        // fix broken UI in Chrome38+\n                        if (browser.webkit) {\n                            that.wrapper.addClass(\"k-grid-column-resizing\");\n                        }\n                    },\n                    resize: function(e) {\n                        var rtlMultiplier = isRtl ? -1 : 1,\n                            currentWidth = columnWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n\n                        if (options.scrollable) {\n                            var footer;\n                            if (isLocked && that.lockedFooter) {\n                                footer = that.lockedFooter.children(\"table\");\n                            } else if (that.footer) {\n                                footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                            }\n                            if (!footer || !footer[0]) {\n                                footer = $();\n                            }\n                            var header = th.closest(\"table\");\n                            var contentTable = isLocked ? that.lockedTable : that.table;\n                            var constrain = false;\n                            var totalWidth = that.wrapper.width() - scrollbar;\n                            var width = currentWidth;\n\n                            if (isLocked && gridWidth - columnWidth + width > totalWidth) {\n                                width = columnWidth + (totalWidth - gridWidth - scrollbar * 2);\n                                if (width < 0) {\n                                    width = currentWidth;\n                                }\n                                constrain = true;\n                            }\n\n                            if (width > 10 && width >= columnMinWidth) {\n                                col.css('width', width);\n\n                                if (gridWidth) {\n                                    if (constrain) {\n                                        width = totalWidth - scrollbar * 2;\n                                    } else {\n                                        width = gridWidth + (e.x.location * rtlMultiplier) - (columnStart * rtlMultiplier);\n                                    }\n\n                                    contentTable\n                                        .add(header)\n                                        .add(footer)\n                                        .css('width', width);\n\n                                    if (!isLocked) {\n                                        that._footerWidth = width;\n                                    }\n                                }\n                            }\n\n                            that._scrollVirtualWrapperOnColumnResize();\n                        } else if (currentWidth > 10 && currentWidth >= columnMinWidth) {\n                            col.css('width', currentWidth);\n                        }\n                    },\n                    resizeend: function() {\n                        var newWidth = outerWidth(th),\n                            column,\n                            header;\n\n                        cursor(that.wrapper, \"\");\n\n                        if (browser.webkit) {\n                            that.wrapper.removeClass(\"k-grid-column-resizing\");\n                        }\n\n                        if (columnWidth != newWidth) {\n                            header = that.lockedHeader ? that.lockedHeader.find(\"thead\").first().find(\"tr\").first().add(that.thead.find(\"tr\").first()) : th.parent();\n\n                            var index = th.attr(kendo.attr(\"index\"));\n                            if (!index) {\n                                index = header.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").index(th);\n                            }\n                            column = leafColumns(that.columns)[index];\n\n                            column.width = newWidth;\n\n                            that.trigger(COLUMNRESIZE, {\n                                column: column,\n                                oldWidth: columnWidth,\n                                newWidth: newWidth\n                            });\n\n                            that._applyLockedContainersWidth();\n                            that._syncLockedContentHeight();\n                            that._syncLockedHeaderHeight();\n                            that._updateStickyColumns();\n                        }\n\n                        that._resetResizeHandleHeader();\n                        that._hideResizeHandle();\n                        th = null;\n                    }\n                });\n\n            }\n        },\n\n        _draggable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n\n                if (that._draggableInstance) {\n                    that._draggableInstance.destroy();\n                }\n\n                var header = that.wrapper.children(\".k-grid-header\");\n\n                that._draggableInstance = that.wrapper.kendoDraggable({\n                    group: kendo.guid(),\n                    autoScroll: true,\n                    filter: that.content ? \".k-grid-header:first \" + HEADERCELLS : \"table:first>.k-grid-header \" + HEADERCELLS,\n                    dragstart: function() {\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\").on(\"scroll\" + NS + \"scrolling\", function(e) {\n                            if (that.virtualScrollable) {\n                                kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\"), this.scrollLeft);\n                            } else {\n                                kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                            }\n                        });\n                    },\n                    dragend: function() {\n                        that._resetResizeHandleHeader();\n                        header.children(\".k-grid-header-wrap\").off(\"scroll\" + NS + \"scrolling\");\n                    },\n                    drag: function() {\n                        that._hideResizeHandle();\n                    },\n                    hint: function(target) {\n                        var title = target.attr(kendo.attr(\"title\"));\n                        if (title) {\n                            title = kendo.htmlEncode(title);\n                        }\n                        return $('<div class=\"k-reorder-clue k-drag-clue\" />')\n                            .html(title || target.attr(kendo.attr(\"field\")) || target.text())\n                            .prepend('<span class=\"k-icon k-drag-status k-i-cancel\"></span>');\n                    }\n                }).data(\"kendoDraggable\");\n            }\n        },\n\n        _reorderable: function() {\n            var that = this,\n                reorderable = that.options.reorderable;\n\n            if (reorderable === true || (reorderable && reorderable.columns)) {\n                if (that.wrapper.data(\"kendoReorderable\")) {\n                    that.wrapper.data(\"kendoReorderable\").destroy();\n                }\n\n                that.wrapper.kendoReorderable({\n                    draggable: that._draggableInstance,\n                    dropFilter: HEADERCELLS,\n                    dragOverContainers: function(sourceIndex, targetIndex) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        return columns[sourceIndex].lockable !== false && targetParentContainerIndex(columns, that.columns, sourceIndex, targetIndex) > -1;\n                    },\n                    inSameContainer: function(e) {\n                        return $(e.source).parent()[0] === $(e.target).parent()[0] && targetParentContainerIndex(flatColumnsInDomOrder(that.columns), that.columns, e.sourceIndex, e.targetIndex) > -1;\n                    },\n                    change: function(e) {\n                        var columns = flatColumnsInDomOrder(that.columns);\n                        var column = columns[e.oldIndex];\n                        var newIndex = targetParentContainerIndex(columns, that.columns, e.oldIndex, e.newIndex);\n\n                        that.trigger(COLUMNREORDER, {\n                            newIndex: newIndex,\n                            oldIndex: inArray(column, columns),\n                            column: column\n                        });\n\n                        that.reorderColumn(newIndex, column, e.position === \"before\");\n                    }\n                });\n            }\n        },\n\n        _reorderHeader: function(sources, target, before, container) {\n            var that = this;\n            var sourcePosition = columnPosition(sources[0], that.columns);\n            var destPosition = columnPosition(target, that.columns);\n            var action;\n            var ths;\n\n            var leafs = [];\n            for (var idx = 0; idx < sources.length; idx++) {\n                if (sources[idx].columns) {\n                    leafs = leafs.concat(sources[idx].columns);\n                }\n            }\n            if (container) {\n                ths = elements(container, container, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            } else {\n                ths = elements(that.lockedHeader, that.thead, \"tr:eq(\" + sourcePosition.row + \")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            }\n\n            var sourceLockedColumns = lockedColumns(sources).length;\n            var targetLockedColumns = lockedColumns([target]).length;\n\n            if (leafs.length) {\n                if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                    action = \"prepend\";\n                    moveCellsBetweenContainers(sources, target, leafs, that.columns, that.lockedHeader.find(\"thead\"), that.thead, this._groups(), action);\n                } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                    action = destPosition.cell === 0 && sources[0].columns && !target.columns && !that._group ? \"prepend\" : \"append\";\n                    moveCellsBetweenContainers(sources, target, leafs, nonLockedColumns(that.columns), that.thead, that.lockedHeader.find(\"thead\"), this._groups(), action);\n                }\n\n                if (target.columns || sourcePosition.cell - destPosition.cell > 1 || destPosition.cell - sourcePosition.cell > 1) {\n                    target = findReorderTarget(that.columns, target, sources[0], before, that.columns);\n                    if (target) {\n                        if (sourceLockedColumns > 0 && targetLockedColumns === 0) {\n                            that._reorderHeader(leafs, target, before, that.thead);\n                        } else if (sourceLockedColumns === 0 && targetLockedColumns > 0) {\n                            that._reorderHeader(leafs, target, before, that.lockedHead);\n                        } else {\n                            that._reorderHeader(leafs, target, before);\n                        }\n                    }\n                }\n            } else if (sourceLockedColumns !== targetLockedColumns) { // move between containers\n                updateCellRowSpan(ths[sourcePosition.cell], that.columns, sourceLockedColumns);\n            }\n\n            reorder(ths, sourcePosition.cell, destPosition.cell, before, sources.length);\n        },\n\n        _reorderContent: function(sources, destination, before) {\n            var that = this;\n            var lockedRows = $();\n            var source = sources[0];\n            var visibleSources = visibleColumns(sources);\n            var sourceIndex = inArray(source, leafColumns(that.columns));\n            var destIndex = inArray(destination, leafColumns(that.columns));\n\n            var colSourceIndex = inArray(visibleSources[0], visibleLeafColumns(that.columns));\n            var colDest = inArray(destination, visibleLeafColumns(that.columns));\n            var lockedCount = lockedColumns(that.columns).length;\n            var isLocked = !!destination.locked;\n            var footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            var headerCol, footerCol, beforeVisibleColumn;\n            headerCol = footerCol = colDest;\n\n            if (destination.hidden) {\n                var columnsArray = isLocked ? lockedColumns(that.columns) : nonLockedColumns(that.columns);\n\n                if (visibleColumns(columnsArray).length > 0) {\n                    headerCol = footerCol = colDest = this._findClosestVisibleColumnIndex(columnsArray, destIndex);\n                    beforeVisibleColumn = visibleColumns(columnsArray.slice(destIndex)).length > 0;\n                }\n                else {\n                    if (isLocked) {\n                        colDest = that.lockedTable.find(\"colgroup\");\n                        headerCol = that.lockedHeader.find(\"colgroup\");\n                        footerCol = $(that.lockedFooter).find(\">table>colgroup\");\n                    } else {\n                        colDest = that.tbody.prev();\n                        headerCol = that.thead.prev();\n                        footerCol = footer.find(\".k-grid-footer-wrap\").find(\">table>colgroup\");\n                    }\n                }\n            }\n\n            if (that._hasFilterRow()) {\n                reorder(that.wrapper.find(\".k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            if (colSourceIndex >= 0) {\n                reorder(elements(that.lockedHeader, that.thead.prev(), COLGROUP), colSourceIndex, headerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n            }\n\n            if (that.options.scrollable) {\n                if (colSourceIndex >= 0 && !that._hasVirtualColumns()) {\n                    reorder(elements(that.lockedTable, that.tbody.prev(), COLGROUP), colSourceIndex, colDest, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n            }\n\n            if (footer && footer.length) {\n                if (colSourceIndex >= 0) {\n                    reorder(elements(that.lockedFooter, footer.find(\".k-grid-footer-wrap\"), \">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)\"), colSourceIndex, footerCol, beforeVisibleColumn ? beforeVisibleColumn : before, visibleSources.length);\n                }\n                reorder(footer.find(\".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n\n            var rows = that.tbody.children(\":not(.k-grouping-row,.k-detail-row)\");\n            if (that.lockedTable) {\n                if (lockedCount > destIndex) {\n                    if (lockedCount <= sourceIndex) {\n                        updateColspan(\n                            that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                            that.table.find(\">tbody>tr.k-grouping-row\"),\n                            sources.length\n                        );\n                    }\n                } else if (lockedCount > sourceIndex) {\n                    updateColspan(\n                        that.table.find(\">tbody>tr.k-grouping-row\"),\n                        that.lockedTable.find(\">tbody>tr.k-grouping-row\"),\n                        sources.length\n                    );\n                }\n\n                lockedRows = that.lockedTable.find(\">tbody>tr:not(.k-grouping-row,.k-detail-row)\");\n            }\n\n            for (var idx = 0, length = rows.length; idx < length; idx += 1) {\n                reorder(elements(lockedRows[idx], rows[idx], \">td:not(.k-group-cell,.k-hierarchy-cell)\"), sourceIndex, destIndex, before, sources.length);\n            }\n        },\n\n        _findClosestVisibleColumnIndex: function(columns, columnIndex) {\n            var columnsArray = visibleColumns(columns.slice(columnIndex)).length > 0 ? columns.slice(columnIndex) : columns.slice(0, columnIndex + 1).reverse(),\n                closestVisibleColumn = visibleColumns(columnsArray)[0];\n\n            return inArray(closestVisibleColumn, visibleColumns(this.columns));\n        },\n\n        _autoFitLeafColumn: function(leafIndex) {\n            this.autoFitColumn(leafColumns(this.columns)[leafIndex]);\n        },\n\n        _hasReorderableRows: function() {\n            return this._hasDragHandleColumn || (this.options.reorderable && this.options.reorderable.rows);\n        },\n\n        _draggableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that._draggableRowsInstance) {\n                that._draggableRowsInstance.destroy();\n            }\n\n            that._draggableRowsInstance = that.tbody.kendoDraggable({\n                group: \"row-draggable\",\n                autoScroll: true,\n                filter: (selectable ? \" > .k-selected\" : \" > \" + ITEMROW) + (that._hasDragHandleColumn ? \" > .k-drag-cell\" : \"\"),\n                hint: function(target) {\n                    var hint = $('<div class=\"k-reorder-clue k-drag-clue\"><span class=\"k-icon k-drag-status k-i-cancel\"></span></div>');\n\n                    if (selectable && that.select().length > 1) {\n                        hint.append(\"<span>\" + that.select().length + \" \" + that.options.messages.itemsSelected + \"</span>\");\n                    } else {\n                        var clone = target.closest(ITEMROW).clone();\n                        clone.find(\"td.k-command-cell\").remove();\n                        clone.find(\"td\").each(function(index, elm) {\n                            hint.append(\"<span>\" + elm.innerText + \"&nbsp;</span>\");\n                        });\n                    }\n\n                    return hint;\n                }\n            }).data(\"kendoDraggable\");\n        },\n\n        _reorderableRows: function() {\n            var that = this,\n                selectable = that._checkBoxSelection ||\n                            (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (that.tbody.data(\"kendoReorderable\")) {\n                that.tbody.data(\"kendoReorderable\").destroy();\n            }\n\n            that.tbody.kendoReorderable({\n                smartPosition: false,\n                draggable: that._draggableRowsInstance,\n                dragOverContainers: function(sourceIndex, targetIndex) {\n                    var result = true,\n                        target = $(ITEMROW, that.content).eq(targetIndex);\n\n                    if (selectable) {\n                        result = !target.is(\".k-selected\");\n                    }\n\n                    return result;\n                },\n                inSameContainer: function(e) {\n                    if (selectable) {\n                        return !$(e.target).is(\".k-selected\");\n                    }\n\n                    return true;\n                },\n                dropFilter: \"> \" + ITEMROW,\n                allowIcon: \"k-i-insert-middle\",\n                orientation: \"vertical\",\n                reorderDropCue: $('<div class=\"k-drop-hint k-drop-hint-h\"><div class=\"k-drop-hint-start\"></div><div class=\"k-drop-hint-line\"></div></div>'),\n                positionDropCue: function(reorderDropCue, dropTarget) {\n                    var firstCellLeft = kendo.getOffset(dropTarget.children(DATA_CELL).eq(0)).left;\n                    reorderDropCue.css({\n                        transform: \"translate(0,-50%)\",\n                        left: firstCellLeft\n                    });\n                },\n                externalDraggable: function(e) {\n                    var draggable = e.draggable;\n\n                    if (draggable) {\n                        return draggable;\n                    }\n                },\n                change: function(e) {\n                    that._triggerRowRorder(e);\n                }\n            });\n        },\n\n        _triggerRowRorder: function(e) {\n            var that = this,\n                args = {\n                    newIndex: e.position === \"after\" ? e.newIndex + 1 : e.newIndex,\n                    oldIndex: e.oldIndex\n                },\n                row = e.element,\n                selectable = that._checkBoxSelection ||\n                (that.options.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell);\n\n            if (selectable && that.select().length > 1) {\n                args = extend(args, {\n                    rows: that.select()\n                });\n            } else {\n                args = extend(args, {\n                    row: row\n                });\n            }\n\n            if (!that.trigger(ROWREORDER, args)) {\n                that.reorderRows(selectable ? that.select() : row, args.newIndex);\n            }\n        },\n\n        reorderRows: function(rows, index) {\n            var that = this,\n                dataSource = that.dataSource,\n                rowsLength = that.tbody.children(ITEMROW).length,\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(index)),\n                items = rows.toArray().map(function(row) {\n                    return that.dataItem(row);\n                });\n\n            if (!targetItem) {\n                // If index is after last row dataItem wouldn't exist\n                targetItem = that.dataItem(that.tbody.children(ITEMROW).eq(rowsLength - 1));\n                index = dataSource.indexOf(targetItem) + 1;\n            } else {\n                index = dataSource.indexOf(targetItem);\n            }\n\n            if (index >= 0) {\n                that._rowDropping = true;\n                dataSource.pushMove(index, items);\n                that._rowDropping = false;\n            }\n        },\n\n        autoFitColumns: function(columns) {\n            var that = this;\n\n            columns = columns || that.columns;\n\n            for (var i = 0; i < columns.length; i++) {\n                var column = columns[i];\n\n                if (column.columns) {\n                    that.autoFitColumns(column.columns);\n                } else {\n                    that.autoFitColumn(column);\n                }\n            }\n        },\n\n        autoFitColumn: function(column) {\n            var that = this,\n                options = that.options,\n                columns = that.columns,\n                index,\n                th,\n                headerTable,\n                leafCols,\n                isLocked,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                col,\n                minWidth,\n                contentDiv, scrollLeft,\n                notGroupOrHierarchyCol = \"col:not(.k-group-col):not(.k-hierarchy-col)\",\n                notGroupOrHierarchyVisibleCell = \"td:visible:not(.k-group-cell):not(.k-hierarchy-cell)\",\n                menu,\n                thWidth;\n\n            //  retrieve the column object, depending on the method argument\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            leafCols = leafColumns(columns);\n            minWidth = column.minResizableWidth;\n            index = inArray(column, leafCols);\n            isLocked = column.locked;\n\n            if (isLocked) {\n                headerTable = that.lockedHeader.children(\"table\");\n            } else {\n                headerTable = that.thead.parent();\n            }\n\n            th = headerTable.find(\"[data-index='\" + index + \"']\");\n            menu = th.find('a.k-header-column-menu, a.k-grid-filter');\n\n            var contentTable = isLocked ? that.lockedTable : that.table,\n                footer = that.footer || $();\n\n            if (that.footer && that.lockedContent) {\n                footer = isLocked ? that.footer.children(\".k-grid-footer-locked\") : that.footer.children(\".k-grid-footer-wrap\");\n            }\n\n            var footerTable = footer.find(\"table\").first();\n\n            if (that.lockedHeader && !isLocked) {\n                index -= visibleLocked;\n            }\n\n            // adjust column index, depending on previous hidden columns\n            for (var j = 0; j < leafCols.length; j++) {\n                if (leafCols[j] === column) {\n                    break;\n                } else {\n                    if (leafCols[j].hidden) {\n                        index--;\n                    }\n                }\n            }\n\n            // get col elements\n            if (options.scrollable) {\n                col = headerTable.find(notGroupOrHierarchyCol).eq(index)\n                    .add(contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index))\n                    .add(footerTable.find(\"colgroup\").find(notGroupOrHierarchyCol).eq(index));\n\n                if (!isLocked) {\n                    contentDiv = contentTable.parent();\n                    scrollLeft = kendo.scrollLeft(contentDiv);\n                }\n            } else {\n                col = contentTable.children(\"colgroup\").find(notGroupOrHierarchyCol).eq(index);\n            }\n\n            var tables = headerTable.add(contentTable).add(footerTable);\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"initial\");\n            }\n\n            var oldColumnWidth = outerWidth(th);\n\n            // reset the table and autofitted column widths\n            // if scrolling is disabled, we need some additional repainting of the table\n            col.width(\"\");\n            tables.css(\"table-layout\", \"fixed\");\n            col.width(\"auto\");\n            tables.addClass(\"k-autofitting\");\n            tables.css(\"table-layout\", \"\");\n\n            thWidth = menu.length ? outerWidth(menu) + outerWidth(th) : outerWidth(th);\n\n            // +1 is required by IE, regardless of the border widths, otherwise unexpected wrapping may occur with hyphenated text\n            var newColumnWidth = Math.ceil(Math.max(\n                thWidth,\n                outerWidth(contentTable.find(\"tr:not(.k-grouping-row)\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index)),\n                outerWidth(footerTable.find(\"tr\").eq(0).children(notGroupOrHierarchyVisibleCell).eq(index))\n            )) + 1;\n\n            if (minWidth && minWidth > newColumnWidth) {\n                newColumnWidth = minWidth;\n            }\n\n            col.width(newColumnWidth);\n            column.width = newColumnWidth;\n\n            if (browser.safari) {\n                th.css(\"white-space\", \"\");\n            }\n\n            // if all visible columns have widths, the table needs a pixel width as well\n            if (options.scrollable) {\n                var cols = headerTable.find(\"col\"),\n                    colWidth,\n                    totalWidth = 0;\n                for (var idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        totalWidth += parseInt(colWidth, 10);\n                    } else if (cols.eq(idx).hasClass(\"k-group-col\")) {\n                        totalWidth += parseInt(cols.eq(idx).width(), 10);\n                    } else {\n                        totalWidth = 0;\n                        break;\n                    }\n                }\n\n                if (totalWidth) {\n                    tables.each(function() {\n                        this.style.width = totalWidth + \"px\";\n                    });\n                }\n            }\n\n            tables.removeClass(\"k-autofitting\");\n\n            if (scrollLeft) {\n                kendo.scrollLeft(contentDiv, scrollLeft);\n            }\n\n            that.trigger(COLUMNRESIZE, {\n                column: column,\n                oldWidth: oldColumnWidth,\n                newWidth: newColumnWidth\n            });\n\n            that._applyLockedContainersWidth();\n            that._syncLockedContentHeight();\n            that._syncLockedHeaderHeight();\n            that._updateStickyColumns();\n        },\n\n        reorderColumn: function(destIndex, column, before) {\n            var that = this,\n                parent = columnParent(column, that.columns),\n                columns = parent ? parent.columns : that.columns,\n                sourceIndex = inArray(column, columns),\n                destColumn = columns[destIndex],\n                virtualScroll = that.virtualScroll || {},\n                lockChanged,\n                isLocked = !!destColumn.locked,\n                lockedCount = lockedColumns(that.columns).length,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (sourceIndex === destIndex) {\n                return;\n            }\n\n            if (!column.locked && isLocked && nonLockedColumns(that.columns).length == 1) {\n                return;\n            }\n\n            if (column.locked && !isLocked && lockedCount == 1) {\n                return;\n            }\n\n            that._hideResizeHandle();\n\n            if (before === undefined$1) {\n                before = destIndex < sourceIndex;\n            }\n\n            var sourceColumns = [column];\n\n            that._reorderHeader(sourceColumns, destColumn, before);\n\n            if (that.lockedHeader) {\n                removeEmptyRows(that.thead);\n                removeEmptyRows(that.lockedHeader);\n            }\n\n            if (destColumn.columns) {\n                destColumn = leafColumns(destColumn.columns);\n                destColumn = destColumn[before ? 0 : destColumn.length - 1];\n            }\n\n            if (column.columns) {\n                sourceColumns = leafColumns(column.columns);\n            }\n\n            that._reorderContent(sourceColumns, destColumn, before);\n\n            lockChanged = !!column.locked;\n            lockChanged = lockChanged != isLocked;\n            column.locked = isLocked;\n\n            columns.splice(before ? destIndex : destIndex + 1, 0, column);\n            columns.splice(sourceIndex < destIndex ? sourceIndex : sourceIndex + 1, 1);\n\n            that._updateLockedCols();\n            that._updateCols();\n            that._templates();\n\n            that._updateColumnCellIndex();\n            that._updateColumnSorters();\n\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._updateTablesWidth();\n            that._applyLockedContainersWidth();\n            that._syncLockedHeaderHeight();\n            that._syncLockedContentHeight();\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n\n            if (virtualScroll.columns) {\n                that.refresh();\n            }\n\n            if (!lockChanged) {\n                return;\n            }\n\n            if (isLocked) {\n                that.trigger(COLUMNLOCK, {\n                    column: column\n                });\n            } else {\n                that.trigger(COLUMNUNLOCK, {\n                    column: column\n                });\n            }\n        },\n\n        _updateColumnCellIndex: function() {\n            var header;\n            var offset = 0;\n\n            if (this.lockedHeader) {\n                header = this.lockedHeader.find(\"thead\");\n                offset = updateCellIndex(header, lockedColumns(this.columns));\n            }\n            updateCellIndex(this.thead, nonLockedColumns(this.columns), offset);\n        },\n\n        lockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.locked || column.hidden) {\n                return;\n            }\n\n            if (column.sticky) {\n                this.unstickColumn(columns.indexOf(column));\n            }\n\n            var index = lockedColumns(columns).length - 1;\n            this.reorderColumn(index, column, false);\n        },\n\n        unlockColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.locked || column.hidden) {\n                return;\n            }\n\n            var index = lockedColumns(columns).length;\n            this.reorderColumn(index, column, true);\n        },\n\n        stickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || column.sticky || column.hidden) {\n                return;\n            }\n\n            if (column.locked) {\n                this.unlockColumn(columns.indexOf(column));\n\n                if (column.locked) {\n                    return;\n                }\n            }\n\n            column.sticky = true;\n            this._updateStickyColumns();\n        },\n\n        unstickColumn: function(column) {\n            var columns = this.columns;\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else {\n                column = grep(columns, function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !column.sticky || column.locked || column.hidden) {\n                return;\n            }\n\n            this._removeStickyAttributes([column]);\n            this._removeStickyStyles(stickyColumns(columns));\n\n            column.sticky = false;\n            this._updateStickyColumns();\n\n            if (this._anyStickyColumns() === 0) {\n                this._templates();\n                if (this._hasFilterRow()) {\n                    this._updateStickyFilterCells();\n                }\n            }\n        },\n\n        cellIndex: function(td) {\n            var lockedColumnOffset = 0;\n\n            if (this.lockedTable && !$.contains(this.lockedTable[0], td[0])) {\n                lockedColumnOffset = leafColumns(lockedColumns(this.columns)).length;\n            }\n\n            return $(td).parent().children('td:not(.k-group-cell,.k-hierarchy-cell)').index(td) + lockedColumnOffset;\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container);\n\n            if (!container.is(\"tr\") && this._editMode() !== \"popup\") {\n                container = container.closest(\"tr\");\n            }\n\n            var id = container.attr(kendo.attr(\"uid\")) || container.find(\".k-popup-edit-form\").attr(kendo.attr(\"uid\"));\n\n            return this.dataSource.getByUid(id);\n        },\n\n        _calculateColumnIndex: function(cell) {\n            var cellIndex = this.cellIndex(cell);\n            var virtualOffset = 0;\n\n            if (this._hasVirtualColumns()) {\n                virtualOffset = parseInt($(cell).closest(\"tr\").find(\"td\").first().attr(\"colspan\"), 10);\n                virtualOffset = (virtualOffset > 1 ? virtualOffset - 1 : 0);\n            }\n\n            return cellIndex + virtualOffset;\n        },\n\n        _editable: function() {\n            var that = this,\n                editable = that.options.editable,\n                handler = function() {\n                    var target = activeElement(),\n                        cell = that._editContainer;\n\n                    if (cell && cell[0] && !$.contains(cell[0], target) && cell[0] !== target && !$(target).closest(\".k-animation-container\").length) {\n                        if (that.editable.end()) {\n                            that.closeCell();\n                        } else {\n                            that._scrollVirtualWrapper();\n                        }\n                    }\n                };\n\n            if (editable) {\n                this.wrapper.addClass(\"k-editable\");\n\n                var mode = that._editMode();\n                if (mode === \"incell\") {\n                    that.table.add(that.lockedTable)\n                        .on(\"mousedown\" + NS, NAVROW + \">\" + NAVCELL, function(e) {\n                            var target = $(e.target);\n                            if (that._editMode() === \"incell\" && target.hasClass(\"k-checkbox\") && target.prev().attr(kendo.attr(\"bind\"))) {\n                                e.preventDefault();\n                            }\n                        });\n\n                    if (editable.update !== false) {\n                        if (isMac) {\n                            that.wrapper\n                                .on(CLICK + NS, \".k-edit-cell > input[type='checkbox']\", function(e) {\n                                    // checking /unchecking a checkbox does not change the document.activeElement to be the checkbox\n                                    // this is necessary for the \"focusout\" event to be fired\n                                    $(e.target).trigger(\"focus\");\n                                })\n                                .on(CLICK + NS, \".k-edit-cell\", function(e) {\n                                    if (!$(e.target).is(\"input\")) {\n                                        $(e.currentTarget).find(\"input[type='checkbox']\").trigger(\"focus\");\n                                    }\n                                })\n                                .on(MOUSEDOWN + NS, \"tr:not(.k-grouping-row) > td\", function(e) {\n                                    var editContainer = that._editContainer;\n\n                                    if (editContainer && editContainer[0] && ($.contains(editContainer[0], e.target) || editContainer[0] === e.target)) {\n                                        that._mousedownOnEditCell = true;\n                                    } else {\n                                        that._mousedownOnEditCell = false;\n                                    }\n                                });\n                        }\n\n                        that.editableUserEvents = new kendo.UserEvents(that.wrapper, {\n                            filter: \"tr:not(.k-grouping-row) > td\",\n                            allowSelection: true,\n                            tap: function(e) {\n                                var td = $(e.target),\n                                isLockedCell = that.lockedTable && td.closest(\"table\")[0] === that.lockedTable[0];\n\n                                that._mousedownOnEditCell = false;\n\n                                if (td.hasClass(\"k-hierarchy-cell\") ||\n                                    td.hasClass(\"k-detail-cell\") ||\n                                    td.hasClass(\"k-group-cell\") ||\n                                    td.hasClass(\"k-edit-cell\") ||\n                                    td.has(\".k-grid-delete\").length ||\n                                    (td.closest(\"tbody\")[0] !== that.tbody[0] && !isLockedCell) ||\n                                    $(e.target).is(\":input\")) {\n                                    return;\n                                }\n\n                                if (that.editable) {\n                                    if (that.editable.end()) {\n                                        $(activeElement()).trigger(\"blur\");\n                                        that.closeCell();\n                                        that.editCell(td);\n                                    } else {\n                                        that._scrollVirtualWrapper();\n                                    }\n                                } else {\n                                    that.editCell(td);\n                                }\n                            }\n                        });\n\n                        that.wrapper.on(\"focusin\" + NS, function() {\n                            // fix focus issue in IE\n                            if (!$.contains(this, activeElement())) {\n                                clearTimeout(that.timer);\n                                that.timer = null;\n                            }\n                        })\n                        .on(\"focusout\" + NS, function(e) {\n                            var shouldCloseCell = true;\n\n                            if ((isMac && that._mousedownOnEditCell) || that._virtualColScroll) {\n                                shouldCloseCell = false;\n                            }\n\n                            that._mousedownOnEditCell = false;\n\n                            if (shouldCloseCell) {\n                                that.timer = setTimeout(function() {\n                                    handler(e);\n                                }, 1);\n                            }\n                        });\n                    }\n                } else {\n                    if (editable.update !== false) {\n                        that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit\", function(e) {\n                            var element = $(this);\n                            if (!that._belongsToGrid(element)) {\n                                return;\n                            }\n                            e.preventDefault();\n                            that.editRow(element.closest(\"tr\"));\n                        });\n\n                        if (that._isVirtualInlineEditable()) {\n                            that.wrapper.on(\"focusout\" + NS, \"tr:not(.k-grouping-row) > td\", function() {\n                                if (that.editable && !that.editable.end()) {\n                                    that._scrollVirtualWrapper();\n                                }\n                            });\n                        }\n                    }\n                }\n\n                if (editable.destroy !== false) {\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete\", function(e) {\n                        var element = $(this);\n                        if (!that._belongsToGrid(element)) {\n                            return;\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                        that.removeRow(element.closest(\"tr\"));\n                    });\n                } else {\n                    //Required for the MVC server wrapper delete button\n                    that.wrapper.on(CLICK + NS, \"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete\", function(e) {\n                        if (!that._belongsToGrid($(this))) {\n                            return;\n                        }\n                        e.stopPropagation();\n\n                        if (!that._confirmation()) {\n                            e.preventDefault();\n                        }\n                    });\n                }\n            }\n        },\n\n        editCell: function(cell) {\n            cell = $(cell);\n\n            var that = this,\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)],\n                model = that._modelForContainer(cell);\n\n            that.closeCell();\n\n            if (model && isColumnEditable(column, model) && !column.command) {\n                if (that.trigger(BEFOREEDIT, { model: model })) {\n                    return;\n                }\n\n                that._attachModelChange(model);\n\n                that._editContainer = cell;\n\n                if (that._shouldClearEditableState) {\n                    that._clearEditableState();\n                }\n                that.editable = cell.addClass(\"k-edit-cell\")\n                    .kendoEditable({\n                        fields: editField(column),\n                        model: model,\n                        target: that,\n                        change: function(e) {\n                            if (that.trigger(SAVE, { values: e.values, container: cell, model: model } )) {\n                                e.preventDefault();\n                            }\n                        },\n                        skipFocus: (that._isVirtualIncellEditable() || that._hasVirtualColumns()) && that._editableState ? true : false\n\n                    }).data(\"kendoEditable\");\n\n                var tr = cell.parent().addClass(\"k-grid-edit-row\");\n\n                if (that.lockedContent) {\n                    adjustRowHeight(tr[0], that._relatedRow(tr).addClass(\"k-grid-edit-row\")[0]);\n                    that._syncLockedScroll();\n                }\n\n                that.trigger(EDIT, { container: cell, model: model });\n            }\n        },\n\n        _adjustLockedHorizontalScrollBar: function() {\n            var table = this.table,\n                content = table.parent();\n\n            var scrollbar = table[0].offsetWidth > content[0].clientWidth ? kendo.support.scrollbar() : 0;\n            this.lockedContent.height(content[0].offsetHeight - scrollbar);\n        },\n\n        _syncLockedScroll: function() {\n            this.lockedContent[0].scrollTop = this.content[0].scrollTop;\n            if (this.virtualScrollable) {\n                this.lockedContent[0].scrollTop = this.wrapper.find(\".k-virtual-scrollable-wrap\")[0].scrollTop;\n            }\n        },\n\n        _syncLockedContentHeight: function() {\n            if (this.lockedTable) {\n                if (!this.touchScroller) {\n                    this._adjustLockedHorizontalScrollBar();\n                }\n                this._adjustRowsHeight(this.table, this.lockedTable);\n            }\n        },\n\n        _syncLockedHeaderHeight: function() {\n            if (this.lockedHeader) {\n                var lockedTable = this.lockedHeader.children(\"table\");\n                var table = this.thead.parent();\n\n                this._adjustRowsHeight(lockedTable, table);\n\n                syncTableHeight(lockedTable, table);\n            }\n        },\n\n        _syncLockedFooterHeight: function() {\n            if (this.lockedFooter && this.footer && this.footer.length) {\n                this._adjustRowsHeight(this.lockedFooter.children(\"table\"), this.footer.find(\".k-grid-footer-wrap > table\"));\n            }\n        },\n\n        _destroyEditable: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n\n                    var container = that.editView ? that.editView.element : that._editContainer;\n                    var window = that._editContainer.data(\"kendoWindow\");\n\n                    if (container) {\n                        container.off(CLICK + NS, \".k-grid-cancel\", that._editCancelClickHandler);\n                        container.off(CLICK + NS, \".k-grid-update\", that._editUpdateClickHandler);\n                    }\n\n                    that._detachModelChange();\n                    that.editable.destroy();\n                    that.editable = null;\n                    if (window) {\n                        window.destroy();\n                    }\n                    that._editContainer = null;\n                    that._destroyEditView();\n                    that._editableIsClosing = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._editMode() === \"popup\" && !that._isMobile) {\n                    if (that._editableIsClosing) {\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy);\n                    }\n                    else {\n                        that._editableIsClosing = true;\n                        that._editContainer.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                    }\n                } else {\n                    destroy();\n                }\n            }\n            if (that._confirmDialog) {\n                that._confirmDialog.close();\n                that._confirmDialog.destroy();\n                that._confirmDialog = null;\n            }\n        },\n\n        _destroyEditView: function() {\n            if (this.editView) {\n                this.editView.purge();\n                this.editView = null;\n                this.pane.navigate(\"\");\n            }\n        },\n\n        _attachModelChange: function(model) {\n            var that = this;\n\n            that._modelChangeHandler = function(e) {\n                that._modelChange({ field: e.field, model: this });\n            };\n\n            model.bind(\"change\", that._modelChangeHandler);\n        },\n\n        _detachModelChange: function() {\n            var that = this,\n                container = that._editContainer,\n                model = that._modelForContainer(container);\n\n            if (model) {\n                model.unbind(CHANGE, that._modelChangeHandler);\n            }\n        },\n\n        closeCell: function(isCancel) {\n            var that = this,\n                cell = that._editContainer,\n                column,\n                tr,\n                model;\n\n            if (!cell) {\n                return;\n            }\n\n            model = that._modelForContainer(cell);\n\n            if (isCancel && that.trigger(\"cancel\", { container: cell, model: model })) {\n                return;\n            }\n\n            that.trigger(CELLCLOSE, { type: isCancel ? \"cancel\" : \"save\", model: model, container: cell });\n\n            cell.removeClass(\"k-edit-cell\");\n            column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n            tr = cell.parent().removeClass(\"k-grid-edit-row\");\n\n            if (that.lockedContent) {\n                that._relatedRow(tr).removeClass(\"k-grid-edit-row\");\n            }\n\n            that._destroyEditable(); // editable should be destroyed before content of the container is changed\n\n            that._displayCell(cell, column, model);\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.trigger(\"itemChange\", { item: tr, data: model, ns: ui });\n\n            if (that.lockedContent) {\n                adjustRowHeight(tr.css(\"height\", \"\")[0], that._relatedRow(tr).css(\"height\", \"\")[0]);\n            }\n        },\n\n        _displayCell: function(cell, column, dataItem) {\n            var that = this,\n                state = { storage: {}, count: 0 },\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            cell.empty().html(tmpl(dataItem));\n\n            that.angular(\"compile\", function() {\n                return {\n                    elements: cell,\n                    data: [ { dataItem: dataItem } ]\n                };\n            });\n        },\n\n        removeRow: function(row) {\n            if (!this._confirmation(row)) {\n                return;\n            }\n\n            this._removeRow(row);\n        },\n\n        _removeRow: function(row) {\n            var that = this,\n                model,\n                modelId,\n                key,\n                schema,\n                mode = that._editMode();\n\n            if (mode !== \"incell\") {\n                that.cancelRow();\n            }\n\n            row = $(row);\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row = row.hide();\n            if (that.dataSource._isGroupPaged()) {\n                that._removeGroupIfEmpty(row);\n            }\n\n            model = that._modelForContainer(row);\n\n            if (model && !that.trigger(REMOVE, { row: row, model: model })) {\n                schema = that.dataSource.options.schema;\n                if (that._selectedIds && schema && schema.model) {\n                    modelId = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n                    key = model[modelId];\n                    delete that._selectedIds[key];\n                }\n\n                that.dataSource.remove(model);\n\n                if (mode === \"inline\" || mode === \"popup\") {\n                    that.dataSource.sync();\n                }\n            } else if (mode === \"incell\") {\n                that._destroyEditable();\n            }\n        },\n\n        _editMode: function() {\n            var mode = \"incell\",\n                editable = this.options.editable;\n\n            if (editable !== true) {\n                if (typeof editable == \"string\") {\n                    mode = editable;\n                } else {\n                    mode = editable.mode || mode;\n                }\n            }\n\n            return mode;\n        },\n\n        editRow: function(row) {\n            var model;\n            var that = this;\n\n            if (row instanceof ObservableObject) {\n                model = row;\n            } else {\n                row = $(row);\n                model = that._modelForContainer(row);\n            }\n\n            var mode = that._editMode();\n            var container;\n\n            that.cancelRow();\n\n            if (model) {\n                row = that.tbody.children(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n                that._attachModelChange(model);\n\n                if (mode === \"popup\") {\n                    that._createPopupEditor(model);\n                } else if (mode === \"inline\") {\n                    that._createInlineEditor(row, model);\n                } else if (mode === \"incell\") {\n                    $(row).children(DATA_CELL).each(function() {\n                        var cell = $(this);\n                        var column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                        model = that._modelForContainer(cell);\n\n                        if (model && (!model.editable || model.editable(column.field)) && column.field && !column.selectable) {\n                            that.editCell(cell);\n                            return false;\n                        }\n                    });\n                }\n\n\n                container = that.editView ? that.editView.element : that._editContainer;\n\n                if (container) {\n                    if (!this._editCancelClickHandler) {\n                        this._editCancelClickHandler = this._editCancelClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-cancel\", this._editCancelClickHandler);\n\n                    if (!this._editUpdateClickHandler) {\n                        this._editUpdateClickHandler = this._editUpdateClick.bind(this);\n                    }\n\n                    container.on(CLICK + NS, \".k-grid-update\", this._editUpdateClickHandler);\n                }\n            }\n        },\n\n        _editUpdateClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            this.saveRow();\n        },\n\n        _editCancelClick: function(e) {\n            var that = this;\n            var navigatable = that.options.navigatable;\n            var model = that.editable.options.model;\n            var container = that.editView ? that.editView.element : that._editContainer;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                return;\n            }\n\n            var currentIndex = that.items().index($(that.current()).parent());\n\n            that.cancelRow();\n\n            if (navigatable) {\n                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                focusTable(that.table, true);\n            }\n        },\n\n        _editFields: function(columns, model) {\n            var fields = [];\n            var column;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                column = columns[idx];\n                if (column.selectable || column.command) {\n                    continue;\n                }\n                if (isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                }\n            }\n            return fields;\n        },\n\n        _createPopupEditor: function(model) {\n            var that = this;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form\"><' + (that._isMobile ? 'ul class=\"k-edit-form-container k-listgroup k-listgroup-flush\">' : 'div class=\"k-edit-form-container\">');\n            var column;\n            var command;\n            var idx;\n            var length;\n            var tmpl;\n            var updateText;\n            var cancelText;\n            var updateIconClass;\n            var cancelIconClass;\n            var tempCommand;\n            var columns = leafColumns(that.columns);\n            var attr;\n            var editMenuGuid = kendo.guid();\n            var editable = that.options.editable;\n            var template = editable.template;\n            var options = isPlainObject(editable) ? editable.window : {};\n            var settings = extend({}, kendo.Template, that.options.templateSettings);\n            var state;\n            var container;\n            var buttonsHTML;\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            options = options || {};\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n\n                html += (kendo.template(template, settings))(model);\n\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            } else {\n                for (idx = 0, length = columns.length; idx < length; idx++) {\n                    column = columns[idx];\n                    if (column.selectable) {\n                        continue;\n                    }\n                    if (!column.command) {\n                        if (that._isMobile) {\n                            html += '<li class=\"k-item k-listgroup-item\">';\n\n                            if (isColumnEditable(column, model)) {\n                                html += '<label class=\"k-label k-listgroup-form-row\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<div class=\"k-listgroup-form-field-wrapper\" id=\"' + column.field + '_' + editMenuGuid + '\" ' + kendo.attr(\"container-for\") + '=\"' + column.field + '\"></div>';\n                                html += '</label>';\n                            } else {\n                                state = { storage: {}, count: 0 };\n\n                                tmpl = kendo.template(that._cellTmpl(column, state), settings);\n\n                                if (state.count > 0) {\n                                    tmpl = tmpl.bind(state.storage);\n                                }\n\n                                html += '<label class=\"k-label k-listgroup-form-row k-no-click\">';\n                                html += '<span class=\"k-item-title k-listgroup-form-field-label\">' + (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || column.field || \"\") + '</span>';\n                                html += '<span class=\"k-no-editor k-listgroup-form-field-wrapper\">' + tmpl(model) + '</span>';\n                                html += '</label>';\n                            }\n\n                            html += \"</li>\";\n                        }\n                    } else if (column.command) {\n                        tempCommand = getCommand(column.command, \"edit\");\n                        if (tempCommand) {\n                            command = tempCommand;\n                        }\n                    }\n                }\n            }\n\n            if (command) {\n                if (isPlainObject(command)) {\n                    if (isPlainObject(command.text)) {\n                        updateText = command.text.update;\n                        cancelText = command.text.cancel;\n                    }\n                    if (isPlainObject(command.iconClass)) {\n                        updateIconClass = command.iconClass.update;\n                        cancelIconClass = command.iconClass.cancel;\n                    }\n\n                   if (command.attr) {\n                       attr = command.attr;\n                   }\n                }\n            }\n\n            if (!that._isMobile) {\n                buttonsHTML = '<div class=\"k-edit-buttons k-actions-end\">';\n                buttonsHTML += that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) + that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass });\n                buttonsHTML += '</div>';\n\n                html += template ? buttonsHTML + '</div>' : '</div>';\n\n                container = that._editContainer = $(html)\n                .appendTo(that.wrapper).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.commands.edit || \"Edit\",\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            //The bellow line is required due to: draggable window in IE, change event will be triggered while the window is closing\n                            e.sender.element.trigger(\"focus\");\n                            if (that.trigger(\"cancel\", { container: container, model: model })) {\n                                e.preventDefault();\n                                return;\n                            }\n\n                            var currentIndex = that.items().index($(that.current()).parent());\n\n                            that._editableIsClosing = true;\n                            that.cancelRow();\n                            if (that.options.navigatable) {\n                                that._setCurrent(that.items().eq(currentIndex).children().filter(NAVCELL).first());\n                                focusTable(that.table, true);\n                            }\n                        }\n                    }\n                }, options));\n            } else {\n                html += \"</ul></div>\";\n                that.editView = that.pane.append(\n                    '<div data-' + kendo.ns + 'role=\"view\" class=\"k-grid-edit-form\">' +\n                        '<div data-' + kendo.ns + 'role=\"header\" class=\"k-header\">' +\n                            '<a href=\"\\\\#\" class=\"k-header-cancel k-link k-grid-cancel\" title=\"#=messages.cancel#\" ' +\n                            'aria-label=\"#=messages.cancel#\"><span class=\"k-icon k-i-arrow-chevron-left\"></span></a>' +\n                            (that.options.messages.commands.edit || \"Edit\") +\n                            '<a href=\"\\\\#\" class=\"k-header-done k-link k-grid-update\" title=\"#=messages.done#\" ' +\n                            'aria-label=\"#=messages.done#\"><span class=\"k-icon k-i-check\"></span></a>' +\n                        '</div>' +\n                        '<div data-' + kendo.ns + 'role=\"content\" class=\"' + classNames.content + '\">' +\n                            html +\n                        '</div>' +\n                    '</div>');\n                container = that._editContainer = that.editView.element.find(\".k-popup-edit-form\");\n            }\n\n            if (!template && !that._isMobile) {\n                that.editable = new ui.Form(that._editContainer.find(\".k-edit-form-container\"), {\n                    items: that._editFields(columns, model),\n                    buttonsTemplate: \"\",\n                    formData: model\n                }).editable;\n                that._editContainer.append(buttonsHTML);\n            } else {\n                that.editable = that._editContainer\n                .kendoEditable({\n                    fields: that._isMobile ? that._editFields(columns, model) : null,\n                    model: model,\n                    clearContainer: false,\n                    target: that\n                }).data(\"kendoEditable\");\n            }\n\n            that._openPopUpEditor();\n\n            that.trigger(EDIT, { container: container, model: model });\n        },\n\n        _openPopUpEditor: function() {\n            var that = this;\n            var windowEditor = that._editContainer ? that._editContainer.data(\"kendoWindow\") : null;\n            var windowOptions = (that.options.editable || {}).window || {};\n\n            if (!this._isMobile) {\n                if (windowEditor) {\n                    if (!windowOptions.position) {\n                        windowEditor.center();\n                    }\n\n                    windowEditor.open();\n                }\n            } else {\n                this.pane.navigate(this.editView, this._editAnimation);\n            }\n        },\n\n        _createInlineEditor: function(row, model) {\n            var that = this;\n            var column;\n            var cell;\n            var command;\n            var fields = [];\n\n            if (that.trigger(BEFOREEDIT, { model: model })) {\n                return;\n            }\n\n            if (that.lockedContent) {\n                row = row.add(that._relatedRow(row));\n            }\n\n            row.children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                cell = $(this);\n                column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                if (!column.command && isColumnEditable(column, model)) {\n                    fields.push(editField(column));\n                    cell.attr(kendo.attr(\"container-for\"), column.field);\n                    cell.empty();\n                } else if (column.command) {\n                    command = getCommand(column.command, \"edit\");\n                    if (command) {\n                        cell.empty();\n\n                        var updateText,\n                            cancelText,\n                            updateIconClass,\n                            cancelIconClass,\n                            attr;\n\n                        if (isPlainObject(command)) {\n                                if (isPlainObject(command.text)) {\n                                    updateText = command.text.update;\n                                    cancelText = command.text.cancel;\n                                }\n                                if (isPlainObject(command.iconClass)) {\n                                    updateIconClass = command.iconClass.update;\n                                    cancelIconClass = command.iconClass.cancel;\n                                }\n\n                            if (command.attr) {\n                                attr = command.attr;\n                            }\n                        }\n\n                        $(that._createButton({ name: \"update\", text: updateText, attr: attr, iconClass: updateIconClass }) +\n                            that._createButton({ name: \"canceledit\", text: cancelText, attr: attr, iconClass: cancelIconClass })).appendTo(cell);\n                    }\n                }\n            });\n\n            that._editContainer = row;\n            that._editContainer.addClass(\"k-grid-edit-row\");\n\n            if (that._shouldClearEditableState) {\n                that._clearEditableState();\n            }\n\n            that.editable = new kendo.ui.Editable(that._editContainer, {\n                target: that,\n                fields: fields,\n                model: model,\n                skipFocus: (that._isVirtualInlineEditable() && that._editableState && (that._editableState.field ? true : false)) || that._hasVirtualColumns(),\n                clearContainer: false\n            });\n\n            if (row.length > 1) {\n\n                adjustRowHeight(row[0], row[1]);\n                that._applyLockedContainersWidth();\n            }\n\n            that.trigger(EDIT, { container: row, model: model });\n        },\n\n        cancelRow: function(notify) {\n            var that = this,\n                container = that._editContainer,\n                model;\n\n            if (container) {\n                model = that._modelForContainer(container);\n\n                if (!model || (notify && that.trigger(\"cancel\", { container: container, model: model }))) {\n                    return;\n                }\n\n                that._destroyEditable();\n\n                that.dataSource.cancelChanges(model);\n\n                that._clearEditableState();\n\n                if (that._editMode() !== \"popup\") {\n                    that._displayRow(container);\n                } else {\n                    that._displayRow(that.tbody.find(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"));\n                }\n            }\n        },\n\n        saveRow: function() {\n            var that = this;\n            var container = this._editContainer;\n            var model = this._modelForContainer(container);\n            var deferred = $.Deferred();\n            var valid;\n\n            if (!container || !this.editable) {\n                return deferred.resolve().promise();\n            }\n\n            valid = that.editable && that.editable.end();\n\n            if (!valid || this.trigger(SAVE, { container: container, model: model })) {\n                if (!valid) {\n                    that._scrollVirtualWrapper();\n                }\n\n                return deferred.reject().promise();\n            }\n\n            that._clearEditableState();\n\n            return this.dataSource.sync();\n        },\n\n        _displayRow: function(row) {\n            var that = this,\n                model = that._modelForContainer(row),\n                related,\n                newRow,\n                nextRow,\n                isSelected = row.hasClass(\"k-selected\"),\n                isAlt = row.hasClass(\"k-alt\");\n\n            if (model) {\n\n                if (that.lockedContent) {\n                    related = $((isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model));\n                    that._relatedRow(row.last()).replaceWith(related);\n                }\n\n                that.angular(\"cleanup\", function() { return { elements: row.get() }; });\n\n                newRow = $((isAlt ? that.altRowTemplate : that.rowTemplate)(model));\n                if (!row.is(\":visible\")) {\n                    newRow.hide();\n                }\n                row.replaceWith(newRow);\n\n                that.trigger(\"itemChange\", { item: newRow, data: model, ns: ui });\n\n                if (related && related.length) {\n                    that.trigger(\"itemChange\", { item: related, data: model, ns: ui });\n                }\n\n                var angularElements = newRow;\n                var angularData = [{ dataItem: model }];\n\n                if (related && related.length) {\n                    angularElements = newRow.add(related);\n                    angularData.push({ dataItem: model });\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: angularElements.get(),\n                        data: angularData\n                    };\n                });\n\n\n                if (isSelected && (that.options.selectable || that._checkBoxSelection)) {\n                    that.select(newRow.add(related));\n                }\n\n                if (related) {\n                    adjustRowHeight(newRow[0], related[0]);\n                }\n\n                nextRow = newRow.next();\n                if (nextRow.hasClass(\"k-detail-row\") && nextRow.is(\":visible\")) {\n                    newRow.find(\".k-hierarchy-cell .k-icon\")\n                        .removeClass(\"k-i-expand\")\n                        .addClass(\"k-i-collapse\");\n                }\n            }\n        },\n\n        _showMessage: function(messages, row) {\n            var that = this;\n\n            if (!that._isMobile) {\n                // eslint-disable-next-line no-alert\n                return window.confirm(messages.title);\n            }\n\n            var confirmDialog = that._confirmDialog = new kendo.ui.Confirm($(\"<div />\").appendTo(document.body), {\n                modal: {\n                    preventScroll: true\n                },\n                closable: false,\n                title: false,\n                content: messages.title,\n                messages: {\n                    okText: messages.confirmDelete,\n                    cancel: messages.cancelDelete\n                },\n                open: function() {\n                    if (that.content) {\n                        that.content.data(OVERFLOW, that.content.css(OVERFLOW));\n                        that.content.css(OVERFLOW, HIDDEN);\n                    }\n                },\n                close: function() {\n                    if (that.content) {\n                        that.content.css(OVERFLOW, that.content.data(OVERFLOW));\n                    }\n                }\n            });\n\n            confirmDialog.result\n                .done(function() {\n                    that._removeRow(row);\n                })\n                .fail(function() {\n                    var confirmDialog = that._confirmDialog;\n\n                    if (confirmDialog) {\n                        confirmDialog.close();\n                        confirmDialog.destroy();\n                    }\n                });\n\n            return false;\n        },\n\n        _confirmation: function(row) {\n            var that = this,\n                editable = that.options.editable,\n                confirmation = (editable === true || typeof editable === STRING) ? that.options.messages.editable.confirmation : editable.confirmation;\n\n            if (isPlainObject(editable) && typeof editable.mode === STRING && typeof confirmation !== FUNCTION && typeof confirmation !== STRING && confirmation !== false) {\n                confirmation = that.options.messages.editable.confirmation;\n            }\n\n            if (confirmation !== false && confirmation != null) {\n\n                if (typeof confirmation === FUNCTION) {\n                    confirmation = confirmation(that._modelForContainer(row));\n                }\n\n                return that._showMessage({\n                        confirmDelete: editable.confirmDelete || that.options.messages.editable.confirmDelete,\n                        cancelDelete: editable.cancelDelete || that.options.messages.editable.cancelDelete,\n                        title: confirmation === true ? that.options.messages.editable.confirmation : confirmation\n                    }, row);\n            }\n\n            return true;\n        },\n\n        cancelChanges: function() {\n            var that = this;\n\n            that.dataSource.cancelChanges();\n\n            if (that._isVirtualEditable()) {\n                that._virtualPageToTop(function() {\n                    that.virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        saveChanges: function() {\n            var that = this;\n            var valid = that.editable && that.editable.end();\n\n            if ((valid || !that.editable) && !that.trigger(SAVECHANGES)) {\n                that.dataSource.sync();\n            } else if (!valid) {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        addRow: function() {\n            var that = this,\n                index,\n                dataSource = that.dataSource,\n                mode = that._editMode(),\n                createAt = that.options.editable.createAt || \"\",\n                pageSize = dataSource.pageSize(),\n                view = dataSource.view() || [];\n            var createAtBottom = createAt.toLowerCase() === BOTTOM;\n            var model;\n            var virtualEditable = that._isVirtualEditable();\n\n            if ((that.editable && that.editable.end()) || !that.editable) {\n                if (mode != \"incell\") {\n                    that.cancelRow();\n                }\n\n                index = dataSource.indexOf(view[0]);\n\n                if (createAtBottom) {\n                    index += view.length;\n\n                    if (pageSize && !dataSource.options.serverPaging && pageSize <= view.length) {\n                        index -= 1;\n                    }\n                }\n\n                if (index < 0) {\n                    if (dataSource.page() > dataSource.totalPages()) {\n                        index = (dataSource.page() - 1) * pageSize;\n                    } else {\n                        index = 0;\n                    }\n                }\n\n                if (that.options.navigatable && mode == \"incell\") {\n                    that._removeCurrent();\n                }\n\n                if (virtualEditable) {\n                    that._virtualAddRow();\n                } else {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                }\n            } else {\n                that._scrollVirtualWrapper();\n            }\n        },\n\n        _editModel: function(model) {\n            var that = this;\n            var createAt = that.options.editable.createAt || \"\";\n            var mode = that._editMode();\n\n            if (model) {\n                var id = model.uid,\n                    table = that.lockedContent ? that.lockedTable : that.table,\n                    row = table.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + id + \"]\"),\n                    cell = row.children(\"td:not(.k-group-cell,.k-hierarchy-cell)\").eq(that._firstEditableColumnIndex(row));\n\n                if (mode === \"inline\" && row.length) {\n                    that.editRow(row);\n                } else if (mode === \"popup\") {\n                    that.editRow(model);\n                } else if (cell.length) {\n                    that.editCell(cell);\n                }\n\n                if (createAt.toLowerCase() == \"bottom\" && that.lockedContent) {\n                    //scroll the containers to the bottom\n                    that.lockedContent[0].scrollTop = that.content[0].scrollTop = that.table[0].offsetHeight;\n                }\n            }\n        },\n\n        _virtualAddRow: function() {\n            var that = this;\n            var createAtBottom = (that.options.editable.createAt || \"\").toLowerCase() === BOTTOM;\n\n            that._clearEditableState();\n\n            if (createAtBottom) {\n                that._virtualAddRowAtBottom();\n            } else {\n                that._virtualAddRowAtTop();\n            }\n        },\n\n        _virtualAddRowAtTop: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var model;\n\n            if (dataSource.page() === 1) {\n                model = dataSource.insert(0, {});\n                that._editModel(model);\n                virtualScrollable.scrollToTop();\n            } else {\n                that._virtualPageToTop(function() {\n                    model = dataSource.insert(0, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToTop();\n                });\n            }\n        },\n\n        _virtualAddRowAtBottom: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n            var virtualScrollable = that.virtualScrollable;\n            var index = dataSource.total();\n            var model;\n\n            if (dataSource.at(index - 1) instanceof ObservableObject) {\n                model = dataSource.insert(index, {});\n\n                that._virtualPageToBottom(function() {\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            } else {\n                that._virtualPageToBottom(function() {\n                    model = dataSource.insert(index, {});\n                    that._editModel(model);\n                    virtualScrollable.scrollToBottom();\n                });\n            }\n        },\n\n        _virtualPageToTop: function(callback) {\n            var that = this;\n\n            that._virtualPage(0, that.dataSource.take(), function() {\n                callback();\n            });\n        },\n\n        _virtualPageToBottom: function(callback) {\n            var that = this;\n            var dataSource = that.dataSource;\n            var take = dataSource.take();\n            var total = dataSource.total();\n            var skip = total > take ? (total - take) : 0;\n\n            that._virtualPage(skip, take, function() {\n                callback();\n            });\n        },\n\n        _virtualPage: function(skip, take, callback) {\n            var that = this;\n\n            if (that._isVirtualEditable()) {\n                that.virtualScrollable._preventScroll = true;\n                that.virtualScrollable._page(skip, take, callback);\n            }\n        },\n\n        _firstEditableColumnIndex: function(container) {\n            var that = this,\n                column,\n                columns = leafColumns(that.columns),\n                idx,\n                length,\n                model = that._modelForContainer(container);\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (model && (!model.editable || model.editable(column.field)) && !column.command && column.field && column.hidden !== true) {\n                    return idx;\n                }\n            }\n            return -1;\n        },\n\n        _toolbar: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                toolbar = that.options.toolbar,\n                editable = that.options.editable,\n                container;\n\n            if (toolbar) {\n                container = that.wrapper.find(\".k-grid-toolbar\");\n\n                if (!container.length) {\n                    if (!isFunction(toolbar)) {\n                        toolbar = (typeof toolbar === STRING ? toolbar : that._toolbarTmpl(toolbar).replace(templateHashRegExp, \"\\\\#\"));\n                        toolbar = kendo.template(toolbar).bind(that);\n                    }\n\n                    container = $('<div class=\"k-toolbar k-grid-toolbar\" />')\n                        .html(toolbar({}))\n                        .prependTo(wrapper);\n\n                    that.angular(\"compile\", function() {\n                        return { elements: container.get() };\n                    });\n                }\n\n                if (editable && editable.create !== false) {\n                    container.on(CLICK + NS, \".k-grid-add\", function(e) { e.preventDefault(); that.addRow(); })\n                        .on(CLICK + NS, \".k-grid-cancel-changes\", function(e) { e.preventDefault(); that.cancelChanges(); })\n                        .on(CLICK + NS, \".k-grid-save-changes\", function(e) { e.preventDefault(); that.saveChanges(); });\n                }\n\n                container.on(CLICK + NS, \".k-grid-excel\", function(e) {\n                    e.preventDefault();\n\n                    that.saveAsExcel();\n                });\n\n                container.on(CLICK + NS, \".k-grid-pdf\", function(e) {\n                    e.preventDefault();\n\n                    var promise = that.saveAsPDF();\n                    if (promise) {\n                        promise.done(function() {\n                            that._pdfInitialized = false;\n                        });\n                    }\n                });\n\n                container.on(INPUT + NS, \".k-grid-search input\", function(e) {\n                    var input = e.currentTarget;\n                    clearTimeout(that._searchTimeOut);\n                    that._searchTimeOut = setTimeout(function() {\n                        that._searchTimeOut = null;\n                        var options = that.options;\n                        var searchFields = options.search ? options.search.fields : null;\n                        var expression = { filters: [], logic: \"or\" };\n                        var value = input.value;\n\n                        if (!searchFields) {\n                            searchFields = getColumnsFields(options.columns);\n                        }\n\n                        if (that.dataSource.options.endless) {\n                            that.dataSource.options.endless = null;\n                            that._endlessPageSize = that.dataSource.options.pageSize;\n                        }\n\n                        if (value) {\n                            for (var i = 0; i < searchFields.length; i++) {\n                                that._pushExpression(expression.filters, searchFields[i], value);\n                            }\n                        } else {\n                            expression = {};\n                        }\n\n                        that.dataSource.filter(expression);\n\n                    }, 300);\n                });\n            }\n        },\n\n        _pushExpression: function(filters, field, value) {\n            var that = this,\n                isServerFiltering = that.dataSource.options.serverFiltering,\n                defaultOperators = {\n                    string: \"contains\",\n                    number: \"gte\",\n                    date: \"gte\",\n                    enums: \"eq\",\n                    boolean: \"eq\"\n                },\n                name = field.name || field,\n                operator = field.operator,\n                modelInfo = that.dataSource.reader.model && that.dataSource.reader.model.fields,\n                fieldInfo = modelInfo && modelInfo[name],\n                parseFn = fieldInfo && fieldInfo.parse,\n                expression = {\n                    field: name,\n                    operator: operator || defaultOperators.string,\n                    value: value\n                };\n\n            if ((operator || isServerFiltering) && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) !== null) {\n                extend(expression, {\n                    operator: operator || defaultOperators[fieldInfo.type],\n                    value: parseFn(value)\n                });\n            }\n\n            if (isServerFiltering && fieldInfo && kendo.isFunction(parseFn) && parseFn(value) === null) {\n                return;\n            }\n\n            filters.push(expression);\n        },\n\n        _toolbarTmpl: function(commands) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                command,\n                searchText = \"\",\n                messages = that.options.messages.commands;\n\n            if (isArray(commands)) {\n                for (idx = 0, length = commands.length; idx < length; idx++) {\n                    command = typeof commands[idx] === 'string' ? commands[idx].toLowerCase() : (commands[idx].name || \"\").toLowerCase();\n                    if (command === \"search\") {\n                        if (typeof commands[idx] !== 'string') {\n                            searchText = commands[idx].text;\n                        }\n                        searchText = searchText || messages.search;\n                        html += \"<span class='k-spacer'></span>\";\n                        html += \"<span class='k-searchbox k-input k-input-md k-rounded-md k-input-solid k-grid-search'>\";\n                        html += \"<span class='k-input-icon k-icon k-i-search'></span>\";\n                        html += \"<input autocomplete='off' placeholder='\" + searchText + \"' title='\" + searchText + \"' aria-label='\" + searchText + \"' class='k-input-inner' />\";\n                        html += \"</span>\";\n                    } else {\n                        html += that._createButton(commands[idx]);\n                    }\n                }\n            }\n\n            return html;\n        },\n\n        _createButton: function(command) {\n            var button,\n                template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                className = defaultCommands[commandName] ? defaultCommands[commandName].className : \"k-grid-\" + (commandName || \"\").replace(/\\s/g, \"\"),\n                options = { className: className, text: commandName, attr: \"\", iconClass: \"\" },\n                messages = this.options.messages.commands,\n                attributeClassMatch;\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                command = extend(true, {}, command);\n\n                if (command.className && inArray(options.className, command.className.split(\" \")) < 0) {\n                    command.className += \" \" + options.className;\n                } else if (command.className === undefined$1) {\n                    command.className = options.className;\n                }\n\n                if (command.className.indexOf(\"k-primary\") > -1) {\n                    command.className = command.className.replace(\"k-primary\", \"\");\n                    command.themeColor = \"primary\";\n                }\n\n                if (commandName === \"edit\") {\n                    command = extend(true, {}, command);\n                    command.text = isPlainObject(command.text) ? command.text.edit : command.text;\n                    command.iconClass = isPlainObject(command.iconClass) ? command.iconClass.edit : command.iconClass;\n                }\n\n                if (command.attr) {\n                    if (isPlainObject(command.attr)) {\n                        command.attr = stringifyAttributes(command.attr);\n                    }\n\n                    if (typeof command.attr === STRING) {\n                        attributeClassMatch = command.attr.match(/class=\"(.+?)\"/);\n\n                        if (attributeClassMatch && inArray(attributeClassMatch[1], command.className.split(\" \")) < 0) {\n                            command.className += \" \" + attributeClassMatch[1];\n                        }\n                    }\n                }\n\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] }, command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName], { text: messages[commandName] });\n            }\n\n            button = kendo.template(template)(options);\n\n            if (!command.template) {\n                return kendo.html.renderButton($(button), options);\n            } else {\n                return button;\n            }\n        },\n\n        _hasFooters: function() {\n            return !!this.footerTemplate ||\n                !!this.groupFooterTemplate ||\n                (this.footer && this.footer.length > 0) ||\n                this.wrapper.find(\".k-grid-footer\").length > 0;\n        },\n\n        _groupable: function() {\n            var that = this;\n\n            if (that._groupableClickHandler) {\n                that.table.add(that.lockedTable).off(CLICK + NS, that._groupableClickHandler);\n            } else {\n                that._groupableClickHandler = function(e) {\n                    var element = $(this),\n                    groupRow = element.closest(\"tr\");\n\n                    var group = that._groupRows ? that._groupRows[that.wrapper.find(\".k-grouping-row\").index(groupRow)] : { };\n\n                    if (element.hasClass('k-i-collapse')) {\n                        if (!that.trigger(\"groupCollapse\", { group: group, element: groupRow })) {\n                            that.collapseGroup(groupRow);\n                        }\n                    } else {\n                        if (!that.trigger(\"groupExpand\", { group: group, element: groupRow })) {\n                            that.expandGroup(groupRow);\n                        }\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                };\n            }\n\n            if (that._isLocked()) {\n                that.lockedTable.on(CLICK + NS, \".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse\", that._groupableClickHandler);\n            } else {\n                that.table.on(CLICK + NS, \".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse\", that._groupableClickHandler);\n            }\n\n            that._attachGroupable();\n        },\n\n        _attachGroupable: function() {\n            var that = this,\n                wrapper = that.wrapper,\n                groupable = that.options.groupable,\n                draggables = HEADERCELLS + \"[\" + kendo.attr(\"field\") + \"]\",\n                filter = that.content ? \".k-grid-header:first \" + draggables : \"table:first>.k-grid-header \" + draggables;\n\n            if (groupable && groupable.enabled !== false) {\n                if (!wrapper.has(\"div.k-grouping-header\")[0]) {\n                    $(\"<div>&nbsp;</div>\").addClass(\"k-grouping-header\").prependTo(wrapper);\n                }\n\n                if (that.groupable) {\n                    that._destroyGroupable();\n                }\n\n                if (browser.chrome) {\n                    wrapper.find(\"div.k-grouping-header\").css(\"touch-action\", NONE);\n                    wrapper.find(filter).css(\"touch-action\", NONE);\n                }\n\n                that.groupable = new ui.Groupable(wrapper, extend({}, groupable, {\n                    draggable: that._draggableInstance,\n                    groupContainer: \">div.k-grouping-header\",\n                    dataSource: that.dataSource,\n                    draggableElements: filter,\n                    filter: filter,\n                    allowDrag: that.options.reorderable,\n                    removeGroup: function(e) {\n                        that._showUngroupedColumn(e);\n                    },\n                    change: function(e) {\n                        if (that.trigger(\"group\", { groups: e.groups })) {\n                            e.preventDefault();\n                        } else {\n                            that._clearEditableState();\n                            that._hideGroupedColumns(e.groups);\n                            if (that.dataSource.options.endless) {\n                                that._resetEndless();\n                            }\n                        }\n                    }\n                }));\n\n                that._addGroupableOptionsToHeader();\n            }\n        },\n\n        _showUngroupedColumn: function(group) {\n            var columns = leafColumns(this.columns);\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                if (columns[i].uid == group.colID && columns[i].hideOnGroup) {\n                    this.showColumn(columns[i]);\n                }\n            }\n        },\n\n        _hideGroupedColumns: function(groups) {\n            if (!groups) {\n                return;\n            }\n            var columns = leafColumns(this.columns);\n            var fields = [];\n            var i;\n\n            for (i = 0; i < groups.length; i++) {\n                if (groups[i].colID) {\n                    fields.push(groups[i].colID);\n                }\n            }\n\n            for (i = 0; i < columns.length; i++) {\n                if (fields.indexOf(columns[i].uid) >= 0 && columns[i].hideOnGroup) {\n                    this.hideColumn(columns[i]);\n                }\n            }\n        },\n\n        _resetEndless: function() {\n            var that = this;\n            that.dataSource.options.endless = null;\n            that._endlessPageSize = that.dataSource.options.pageSize;\n            that.dataSource._skip = 0;\n            that.dataSource._pageSize = that.dataSource._take = that._endlessPageSize;\n            that.dataSource._page = 1;\n        },\n\n        _addGroupableOptionsToHeader: function() {\n            var that = this;\n            var columns = flatColumns(that.columns);\n            var columnFieldMap = {};\n            var field = \"\";\n            var headerCells = that._headerCells();\n            var cellFieldAttr = \"\";\n            var headerCell;\n            var columnOptions;\n            var i;\n\n            for (i = 0; i < columns.length; i++) {\n                field = columns[i].field;\n                columnFieldMap[columns[i].field] = columns[i];\n            }\n\n            for (i = 0; i < headerCells.length; i++) {\n                headerCell = headerCells.eq(i);\n                cellFieldAttr = headerCell.attr(kendo.attr(FIELD));\n                columnOptions = columnFieldMap[cellFieldAttr];\n\n                if (columnOptions && columnOptions.groupable && columnOptions.groupable.sort) {\n                    headerCell.data(GROUP_SORT, columnOptions.groupable.sort);\n                }\n            }\n        },\n\n        _destroyGroupable: function() {\n            var that = this;\n\n            if (that.groupable && that.groupable.element) {\n                that.groupable.element.kendoGroupable(\"destroy\");\n            }\n\n            that.groupable = null;\n\n            that._removeGroupableOptionsFromHeader();\n        },\n\n        _removeGroupableOptionsFromHeader: function() {\n            var that = this;\n            var headerCells = that._headerCells();\n\n            for (var i = 0; i < headerCells.length; i++) {\n                headerCells.eq(i).removeData(GROUP_SORT);\n            }\n        },\n\n        _continuousItems: function(filter, cell) {\n            if (!this.lockedContent) {\n                return;\n            }\n\n            var that = this;\n\n            var elements = that.table.add(that.lockedTable);\n\n            var lockedItems = $(filter, elements[0]);\n            var nonLockedItems = $(filter, elements[1]);\n            var columns = cell ? lockedColumns(that.columns).length : 1;\n            var nonLockedColumns = cell ? that.columns.length - columns : 1;\n            var result = [];\n\n            for (var idx = 0; idx < lockedItems.length; idx += columns) {\n                push.apply(result, lockedItems.slice(idx, idx + columns));\n                push.apply(result, nonLockedItems.splice(0, nonLockedColumns));\n            }\n\n            return result;\n        },\n\n        _selectable: function() {\n            var that = this,\n                multi,\n                cell,\n                notString = [],\n                isLocked = that._isLocked(),\n                selectable = that.options.selectable;\n\n            if (selectable) {\n\n                if (that.selectable) {\n                    that.selectable.destroy();\n                }\n\n                that._selectedIds = {};\n\n                selectable = kendo.ui.Selectable.parseOptions(selectable);\n\n                multi = selectable.multiple;\n                cell = selectable.cell;\n\n                if (that._hasDetails()) {\n                    notString[notString.length] = \".k-detail-row\";\n                }\n                if (that.options.groupable || that._hasFooters() || that._groups()) {\n                    notString[notString.length] = \".k-grouping-row,.k-group-footer\";\n                }\n\n                notString = notString.join(\",\");\n\n                if (notString !== \"\") {\n                    notString = \":not(\" + notString + \")\";\n                }\n\n                var elements = that.table;\n                if (isLocked) {\n                    elements = elements.add(that.lockedTable);\n                }\n\n                var filter = \">\" + (cell ? SELECTION_CELL_SELECTOR : \"tbody>tr\" + notString);\n                that.selectable = new kendo.ui.Selectable(elements, {\n                    filter: filter,\n                    aria: true,\n                    multiple: multi,\n                    dragToSelect: that.options.selectable && that.options.selectable.dragToSelect,\n                    change: function(e) {\n                        var selectedValues;\n                        if (!cell) {\n                            that._persistSelectedRows();\n                        }\n\n                        if (that._checkBoxSelection) {\n                            selectedValues = that.selectable.value();\n                            that._uncheckCheckBoxes();\n                            that._checkRows(selectedValues);\n                            if (selectedValues.length && selectedValues.length === that.items().length) {\n                                that._toggleHeaderCheckState(true);\n                            } else {\n                                that._toggleHeaderCheckState(false);\n                            }\n                        }\n\n                        if (e.event) {\n                            that.trigger(CHANGE);\n                        }\n                    },\n                    useAllItems: isLocked && multi && cell,\n                    relatedTarget: function(items) {\n                        if (cell || !isLocked) {\n                            return;\n                        }\n\n                        var related;\n                        var result = $();\n                        for (var idx = 0, length = items.length; idx < length; idx ++) {\n                            related = that._relatedRow(items[idx]);\n\n                            if (inArray(related[0], items) < 0) {\n                                result = result.add(related);\n                            }\n                        }\n\n                        return result;\n                    },\n                    continuousItems: function() {\n                        return that._continuousItems(filter, cell);\n                    },\n                    ignoreOverlapped: that.options.selectable && that.options.selectable.ignoreOverlapped,\n                    addIdToRanges: true\n                });\n\n                if (that.options.navigatable) {\n                    elements.on(\"keydown\" + NS, function(e) {\n                        var current = that.current();\n                        var target = e.target;\n                        var eventObject = { event: e };\n                        var triggerChange;\n                        var lastSelection;\n                        if (!current) {\n                            return;\n                        }\n                        if (e.keyCode === keys.SPACEBAR && !e.shiftKey && $.inArray(target, elements) > -1 &&\n                            !current.is(\".k-edit-cell,.k-header\") &&\n                            current.parent().is(\":not(.k-grouping-row,.k-detail-row,.k-group-footer)\")) {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                current = cell ? current : current.parent();\n                                triggerChange = !current.hasClass(SELECTED) || that.selectable.value().length > 1;\n\n                                if (isLocked && !cell) {\n                                    current = current.add(that._relatedRow(current));\n                                }\n\n                                if (multi) {\n                                    if (!e.ctrlKey) {\n                                        that.selectable.clear();\n                                    } else {\n                                        if (current.hasClass(SELECTED)) {\n                                            that._deselectCheckRows(current);\n                                            that.trigger(CHANGE);\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    that.selectable.clear();\n                                }\n                                if (!cell) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.value(current);\n                                if (triggerChange) {\n                                    that.trigger(CHANGE);\n                                }\n                        } else if (!cell &&\n                            ($(target).is(\"td\") || ($(target).is(\"table\") && inArray(target, this._navigatableTables))) &&\n                          ((e.shiftKey && e.keyCode == keys.LEFT) ||\n                           (e.shiftKey && e.keyCode == keys.RIGHT) ||\n                           (e.shiftKey && e.keyCode == keys.UP) ||\n                           (e.shiftKey && e.keyCode == keys.DOWN) ||\n                           (e.keyCode === keys.SPACEBAR && e.shiftKey))) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            current = current.parent();\n\n                            lastSelection = that.selectable.value();\n\n                            if (isLocked) {\n                                current = current.add(that._relatedRow(current));\n                            }\n\n                            if (multi) {\n                                if (!that.selectable._lastActive) {\n                                    that.selectable._lastActive = current;\n                                }\n                                that.selectable.selectRange(that.selectable._firstSelectee(), current);\n\n                                if (!compareElements(lastSelection, that.selectable.value())) {\n                                    that.trigger(CHANGE, eventObject);\n                                }\n                            } else if (!current.hasClass(\"k-selected\")) {\n                                that.selectable.clear();\n                                that.selectable.value(current);\n                                that.trigger(CHANGE);\n                            }\n                        }\n                    });\n                }\n            }\n        },\n\n        _clipboard: function() {\n            var options = this.options;\n            var selectable = options.selectable;\n            if (selectable && options.allowCopy) {\n                var grid = this;\n                if (!options.navigatable) {\n                    grid.table.attr(TABINDEX, 0);\n\n                    grid.table.add(grid.lockedTable)\n                        .on(\"mousedown\" + NS + \" keydown\" + NS, \".k-detail-cell\", function(e) {\n                            if (e.target !== e.currentTarget) {\n                                e.stopImmediatePropagation();\n                            }\n                        })\n                        .on(\"mousedown\" + NS, NAVROW + \">\" + NAVCELL, tableClick.bind(grid));\n                }\n                grid.copyHandler = grid.copySelection.bind(grid);\n                grid.updateClipBoardState = function() {\n                    if (grid.areaClipBoard) {\n                        grid.areaClipBoard.val(grid.getTSV()).trigger(\"focus\").select();\n                    }\n                };\n                grid.bind(\"change\",grid.updateClipBoardState);\n                grid.wrapper.on(\"keydown\", grid.copyHandler);\n                grid.clearAreaHandler = grid.clearArea.bind(grid);\n                grid.wrapper.on(\"keyup\", grid.clearAreaHandler);\n            }\n        },\n\n        copySelectionToClipboard: function(includeHeaders) {\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV(includeHeaders)).trigger(\"focus\").select();\n            document.execCommand('copy');\n        },\n\n        copySelection: function(e) {\n            if ((e instanceof jQuery.Event && !(e.ctrlKey || e.metaKey)) ||\n                $(e.target).is(\"input:visible,textarea:visible\") ||\n                (window.getSelection && window.getSelection().toString()) ||\n                (document.selection && document.selection.createRange().text) ) {\n                return;\n            }\n\n            this._createAreaClipBoard();\n            this.areaClipBoard.val(this.getTSV()).trigger(\"focus\").select();\n\n        },\n\n        _createAreaClipBoard: function() {\n            if (!this.areaClipBoard) {\n                this.areaClipBoard =\n                    $(\"<textarea />\")\n                    .css({\n                        position: \"fixed\",\n                        top: \"50%\",\n                        left: \"50%\",\n                        opacity: 0,\n                        width: 0,\n                        height: 0\n                    })\n                    .appendTo(this.wrapper);\n            }\n        },\n\n        getTSV: function(includeHeaders) {\n            var grid = this;\n            var selected = grid.select();\n            var delimeter = \"\\t\";\n            var allowCopy = grid.options.allowCopy;\n            var onlyVisible = true;\n            var hasLockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n\n            if ($.isPlainObject(allowCopy) && allowCopy.delimeter) {\n                delimeter = allowCopy.delimeter;\n            }\n            var text = \"\";\n            if (selected.length) {\n                if (selected.eq(0).is(\"tr\")) {\n                    selected = selected.find(\"td:not(.k-group-cell)\");\n                }\n                if (onlyVisible) {\n                    selected.filter(\":visible\");\n                }\n\n                var result = [];\n                var cellsOffset = this.columns.length;\n                var lockedCols = grid._isLocked() && lockedColumns(grid.columns).length;\n                var inLockedArea = true;\n                var fields = [];\n                var field;\n                var columns = visibleLeafColumns(this.columns);\n\n                $.each(selected, function(idx, cell) {\n                    cell = $(cell);\n                    field = grid._getCellField(cell, hasLockedCols);\n\n                    var tr = cell.closest(\"tr\");\n                    var rowIndex = tr.index();\n                    var cellIndex = cell.index();\n                    if (onlyVisible) {\n                        cellIndex -= cell.prevAll(\":hidden\").length;\n                    }\n                    if (lockedCols && inLockedArea) {\n                        inLockedArea = $.contains(grid.lockedTable[0], cell[0]);\n                    }\n                    if (grid._groups() && inLockedArea) {\n                        cellIndex -= grid._groups();\n                    }\n                    cellIndex = inLockedArea ? cellIndex : (cellIndex + lockedCols );\n                    if (field) {\n                        fields[cellIndex] = field;\n                    }\n                    if (cellsOffset > cellIndex) {\n                        cellsOffset = cellIndex;\n                    }\n                    var cellText = cell.text();\n                    if (!result[rowIndex]) {\n                        result[rowIndex] = [];\n                    }\n                    result[rowIndex][cellIndex] = cellText;\n                });\n\n                var rowsOffset = result.length;\n                result = $.each(result, function(idx, val) {\n                    if (val) {\n                        result[idx] = val.slice(cellsOffset);\n                        if (rowsOffset > idx) {\n                            rowsOffset = idx;\n                        }\n                    }\n                });\n\n                if (includeHeaders && fields.length) {\n                    result.splice(rowsOffset, 0, fields.map(function(field) {\n                        return getTitle(field, columns);\n                    }));\n\n                    var headerIndex = result.findIndex(function(el) {\n                        return el !== undefined$1;\n                    });\n\n                    result[headerIndex] = result[headerIndex].slice(cellsOffset);\n                }\n\n                $.each(result.slice(rowsOffset), function(idx, val) {\n                    if (val) {\n                        text += val.join(delimeter) + \"\\r\\n\";\n                    } else {\n                        text += \"\\r\\n\";\n                    }\n                });\n            }\n            return text;\n        },\n\n        clearArea: function(e) {\n            if (this.areaClipBoard && e && e.target === this.areaClipBoard[0]) {\n                focusTable(this.table, true);\n            }\n\n            if (this.areaClipBoard) {\n                this.areaClipBoard.remove();\n                this.areaClipBoard = null;\n            }\n        },\n\n        _adaptiveColumns: function() {\n            var that = this;\n\n            if (that._anyColumnHasMediaQuery()) {\n                that._setColumnsMediaVisibility(that.columns);\n                that._attachColumnMediaResizeHandler();\n            }\n        },\n\n        _anyColumnHasMediaQuery: function() {\n            return this._columnsWithMediaQuery().length;\n        },\n\n        _columnsWithMediaQuery: function() {\n            return columnsWithMedia(this.columns);\n        },\n\n        _attachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            that._detachColumnMediaResizeHandler();\n            that._columnMediaResizeHandler = that._onColumnMediaResize.bind(that);\n            $(window).on(RESIZE + NS, that._columnMediaResizeHandler);\n        },\n\n        _detachColumnMediaResizeHandler: function() {\n            var that = this;\n\n            if (that._columnMediaResizeHandler) {\n                $(window).off(RESIZE + NS, that._columnMediaResizeHandler);\n            }\n        },\n\n        _onColumnMediaResize: function() {\n            var that = this;\n            that._setColumnsMediaVisibility(that.columns);\n            that._setContentMediaWidth();\n        },\n\n        _setColumnsMediaVisibility: function(columns) {\n            var cols = columns || [];\n\n            for (var i = 0; i < cols.length; i++) {\n                this._setColumnMediaVisibility(cols[i]);\n            }\n        },\n\n        _setColumnMediaVisibility: function(column) {\n            var that = this;\n\n            if (isUndefined(column.media)) {\n                that._setColumnsMediaVisibility(column.columns);\n            } else {\n                if (columnMatchesMedia(column)) {\n                    that._showColumnByMedia(column);\n\n                    if (!column.hidden) {\n                        that._setColumnsMediaVisibility(column.columns);\n                    }\n                } else {\n                    that._hideColumnByMedia(column);\n                }\n            }\n        },\n\n        _showColumnByMedia: function(column) {\n            if (!column.hidden) {\n                // \"hidden\" has a priority over \"matchesMedia\"\n                this.showColumn(column);\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _hideColumnByMedia: function(column) {\n            var initiallyHidden = column.hidden;\n\n            if (!initiallyHidden) {\n                column._hideByMedia = true;\n                this.hideColumn(column);\n                column._hideByMedia = false;\n\n                // hiding is tracked in \"matchesMedia\" instead of \"hidden\" flag\n                column.hidden = initiallyHidden;\n            }\n\n            setColumnMatchesMedia(column);\n        },\n\n        _setContentMediaWidth: function() {\n            var that = this;\n            var options = that.options;\n            var isLocked = that._isLocked();\n            var footer;\n\n            if (options.scrollable && options.resizable) {\n                if (isLocked && that.lockedFooter) {\n                    footer = that.lockedFooter.children(\"table\");\n                } else if (that.footer) {\n                    footer = that.footer.find(\">.k-grid-footer-wrap>table\");\n                }\n\n                if (!footer || !footer[0]) {\n                    footer = $();\n                }\n\n                var header = isLocked ? that.wrapper.find(\".k-grid-header-locked\").find(\"table\") : that.wrapper.find(\".k-grid-header\").find(\"table\");\n                var contentTable = isLocked ? that.lockedTable : that.table;\n\n                var headerColumns = header.find(\"th\");\n                var headerColgroup = header.find(\"colgroup\");\n\n                var headerColumnsCount = headerColumns.length;\n                var visibleHeaderColumnsCount = headerColumns.filter(isCellVisible).length;\n                var hiddenHeaderColumnsCount = headerColumns.length - visibleHeaderColumnsCount;\n\n                var totalHeaderWidth = 0;\n\n                if (header[0].style.width !== \"\" && parseFloat(header[0].style.width) !== totalHeaderWidth) {\n                    var currentHeaderWidth = header.css(\"width\");\n\n                    for (var i = 0; i < headerColumnsCount; i++) {\n                        if (isElementVisible(headerColumns[i])) {\n                            var columnWidth;\n                            var cellIndex = Math.max(i, (i - hiddenHeaderColumnsCount));\n                            var colgroupChild = headerColgroup.children()[cellIndex];\n                            var columnStyleWidth = colgroupChild ? colgroupChild.style.width : \"\";\n\n                            if (columnStyleWidth !== \"\") {\n                                columnWidth = parseFloat(columnStyleWidth);\n                            } else {\n                                // remove the header width to calculate the height of a column without fixed width\n                                header.css(\"width\", \"auto\");\n                                columnWidth = outerWidth(headerColumns.eq(i));\n                                header.css(\"width\", currentHeaderWidth);\n                            }\n\n                            totalHeaderWidth += columnWidth;\n                        }\n                    }\n\n                    contentTable.css('width', totalHeaderWidth - 1); // subtract 1 to remove the horizontal scroll\n                    header.css('width', totalHeaderWidth);\n                    footer.css('width', totalHeaderWidth);\n                    that._updateStickyColumns();\n                }\n            }\n        },\n\n        _minScreenSupport: function() {\n            var any = this.hideMinScreenCols();\n\n            if (any) {\n                this.minScreenResizeHandler = this.hideMinScreenCols.bind(this);\n                $(window).on(\"resize\", this.minScreenResizeHandler);\n            }\n        },\n\n        hideMinScreenCols: function() {\n            var cols = this.columns,\n                screenWidth = (window.innerWidth > 0) ? window.innerWidth : screen.width;\n\n            return this._iterateMinScreenCols(cols, screenWidth);\n        },\n\n        _iterateMinScreenCols: function(cols, screenWidth) {\n            var any = false;\n\n            for (var i = 0; i < cols.length; i++) {\n                var col = cols[i];\n                var minWidth = col.minScreenWidth;\n                if (minWidth !== undefined$1 && minWidth !== null) {\n                    any = true;\n                    if (minWidth > screenWidth) {\n                        this.hideColumn(col);\n                    } else {\n                        this.showColumn(col);\n                    }\n                }\n                if (!col.hidden && col.columns) {\n                    any = this._iterateMinScreenCols(col.columns, screenWidth) || any;\n                }\n            }\n            return any;\n        },\n\n        _stickyColumns: function() {\n            var that = this;\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(false);\n            }\n        },\n\n        _updateStickyColumns: function() {\n            var that = this;\n            var groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (that._anyStickyColumns()) {\n                that._setStickyColumns(true);\n                that._templates();\n\n                if (groupHeaderColumnTemplateColumns.length > 0) {\n                    that._renderGroupRows();\n                }\n\n                if (that._hasFilterRow()) {\n                    that._updateStickyFilterCells();\n                }\n            }\n        },\n\n        _updateStickyFilterCells: function() {\n            var that = this;\n            var filterCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n            if (filterCells.length) {\n                filterCells.each(function() {\n                    var th = $(this);\n                    var column = th.data(\"column\");\n                    var style = th.attr(\"style\") || \"\";\n                    if (column.sticky) {\n                        th.attr(\"style\", style + column.stickyStyle);\n                        th.addClass(STICKY_HEADER_CLASS);\n                    } else {\n                        style = style.replace(leftRegExp, \"\");\n                        style = style.replace(rightRegExp, \"\");\n                        th.attr(\"style\", style);\n                        th.removeClass(STICKY_HEADER_CLASS);\n                    }\n                });\n            }\n        },\n\n        _anyStickyColumns: function() {\n            var that = this;\n\n            return stickyColumns(that.columns).length;\n        },\n\n        _setStickyColumns: function(updateStyles) {\n            var that = this;\n            var columns = stickyColumns(that.columns);\n            var visibleColumns = visibleStickyColumns(that.columns);\n            var stickyWidths = that._calculateStickyWidths(visibleColumns);\n\n            that._removeStickyAttributes(columns);\n            that._setStickyClassAttributes(columns);\n            that._setStickyStyleAttributes(visibleColumns, stickyWidths, updateStyles);\n\n            if (updateStyles) {\n                that._setStickyStyles(visibleColumns, stickyWidths);\n            }\n        },\n\n        _calculateStickyWidths: function(columns, initialLeftWidth, initialRightWidth) {\n            var that = this;\n            var i;\n            var column;\n            var columnWidth;\n            var nextColumnLeft;\n            var nextColumnRight;\n            var left = isRtl ? \"right\" : \"left\";\n            var right = isRtl ? \"left\" : \"right\";\n            var stickyWidths = {\n                left: new Array(columns.length).fill(initialLeftWidth ? initialLeftWidth : 0),\n                right: new Array(columns.length).fill(initialRightWidth ? initialRightWidth : 0)\n            };\n\n            for (i = 0; i < columns.length - 1; i++) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnLeft = columnWidth + stickyWidths[left][i];\n\n                stickyWidths[left][i + 1] = nextColumnLeft;\n            }\n\n            for (i = columns.length - 1; i > 0; i--) {\n                column = columns[i];\n                columnWidth = that._sumColumnWidth(column);\n                nextColumnRight = columnWidth + stickyWidths[right][i];\n\n                stickyWidths[right][i - 1] = nextColumnRight;\n            }\n\n            return stickyWidths;\n        },\n\n        _setStickyClassAttributes: function(columns, masterIndex) {\n            var that = this;\n            var i;\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    if (!masterIndex && i) {\n                        masterIndex = i;\n                    }\n\n                    that._setStickyClassAttributes(childColumns([column]), masterIndex);\n                }\n\n                if (masterIndex) {\n                    addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                addColumnAttribute(column, \"attributes\", \"class\", STICKY_CELL_CLASS);\n                addColumnAttribute(column, \"headerAttributes\", \"class\", STICKY_HEADER_CLASS);\n                addColumnAttribute(column, \"footerAttributes\", \"class\", STICKY_FOOTER_CLASS);\n            }\n        },\n\n        _setStickyStyleAttributes: function(columns, stickyWidths, updateStyles) {\n            var that = this;\n            var i;\n            var column;\n            var stickyLeft;\n            var stickyRight;\n            var stickyStyle;\n            var childCols;\n            var childStickyWidths;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                stickyLeft = stickyWidths.left[i];\n                stickyRight = stickyWidths.right[i];\n                stickyStyle = \"left: \" + stickyLeft + \"px; right: \" + stickyRight + \"px;\";\n\n                if (column.columns) {\n                    childCols = visibleChildColumns([column]);\n                    childStickyWidths = that._calculateStickyWidths(childCols, stickyLeft, stickyRight);\n\n                    that._setStickyStyleAttributes(childCols, childStickyWidths, updateStyles);\n\n                    if (updateStyles) {\n                        that._setStickyStyles(childCols, childStickyWidths);\n                    }\n                }\n\n                addColumnAttribute(column, \"attributes\", \"style\", stickyStyle);\n                addColumnAttribute(column, \"headerAttributes\", \"style\", stickyStyle);\n                addColumnAttribute(column, \"footerAttributes\", \"style\", stickyStyle);\n\n                column.stickyStyle = stickyStyle;\n            }\n        },\n\n        _removeStickyAttributes: function(columns) {\n            var that = this;\n            var i;\n            var cellClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_CELL_CLASS + \")*\", \"ig\");\n            var headerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_CLASS + \")*\", \"ig\");\n            var footerClassRegExp = new RegExp(\"(\\\\s*\" + STICKY_FOOTER_CLASS + \")*\", \"ig\");\n            var headerClassNoBorderRegExp = new RegExp(\"(\\\\s*\" + STICKY_HEADER_NO_BORDER_CLASS + \")*\", \"ig\");\n            var column;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n\n                if (column.columns) {\n                    that._removeStickyAttributes(childColumns([column]));\n                }\n\n                removeColumnAttribute(column, \"attributes\", \"class\", cellClassRegExp);\n                removeColumnAttribute(column, \"attributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"attributes\", \"style\", rightRegExp);\n\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"class\", headerClassNoBorderRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"headerAttributes\", \"style\", rightRegExp);\n\n                removeColumnAttribute(column, \"footerAttributes\", \"class\", footerClassRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"style\", leftRegExp);\n                removeColumnAttribute(column, \"footerAttributes\", \"style\", rightRegExp);\n            }\n        },\n\n        _setStickyStyles: function(columns, stickyWidths) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var left;\n            var right;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                left = stickyWidths.left[i];\n                right = stickyWidths.right[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.addClass(STICKY_HEADER_CLASS);\n                if (column.headerAttributes[\"class\"] && column.headerAttributes[\"class\"].indexOf(STICKY_HEADER_NO_BORDER_CLASS) !== -1) {\n                    header.addClass(STICKY_HEADER_NO_BORDER_CLASS);\n                }\n                setLeftAndRightStyles(header, left, right);\n\n                if (column.columns) {\n                    continue;\n                }\n\n                if (that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.addClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, left, right);\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(\"k-grouping-row\")) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, left, right);\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.addClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, left, right);\n                    }\n                }\n            }\n        },\n\n        _removeStickyStyles: function(columns) {\n            var that = this;\n            var i;\n            var j;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var rows = that.tbody.children(\":not(.k-detail-row)\");\n            var row;\n            var column;\n            var columnIndex;\n            var header;\n            var footer;\n            var groupHeader;\n            var cell;\n\n            for (i = 0; i < columns.length; i++) {\n                column = columns[i];\n                columnIndex = leafsCols.indexOf(column);\n                header = that._getColumnHeader(column);\n\n                header.removeClass(STICKY_HEADER_CLASS);\n                header.removeClass(STICKY_HEADER_NO_BORDER_CLASS);\n                setLeftAndRightStyles(header, \"\", \"\");\n\n                if (column.columns) {\n                    that._removeStickyStyles(column.columns);\n                    continue;\n                }\n\n                if (column.footerTemplate && that.footer) {\n                    footer = that.footer.find(\".k-grid-footer-wrap tr.k-footer-template\").children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                    footer.removeClass(STICKY_FOOTER_CLASS);\n                    setLeftAndRightStyles(footer, \"\", \"\");\n                }\n\n                for (j = 0; j < rows.length; j++) {\n                    row = $(rows[j]);\n\n                    if (row.hasClass(\"k-grouping-row\")) {\n                        groupHeader = row.find(\".\" + column.groupHeaderColumnTemplateClass);\n\n                        groupHeader.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(groupHeader, \"\", \"\");\n                    } else {\n                        cell = row.children().filter(\":not(.k-group-cell,.k-hierarchy-cell)\").eq(columnIndex);\n\n                        cell.removeClass(STICKY_CELL_CLASS);\n                        setLeftAndRightStyles(cell, \"\", \"\");\n                    }\n                }\n            }\n        },\n\n        _getColumnHeader: function(column) {\n            var that = this;\n            var header = $(\"#\" + column.headerAttributes.id).length ? $(\"#\" + column.headerAttributes.id) : $(\"#\" + that._cellId);\n\n            return header;\n        },\n\n        _sumColumnWidth: function(column) {\n            var that = this;\n            var width = 0;\n\n            if (column.columns) {\n                width = that._sumCurrentWidths(leafColumns([column]));\n            } else {\n                width = that._sumCurrentWidths([column]);\n            }\n\n            return width;\n        },\n\n        _sumCurrentWidths: function(cols) {\n            var that = this;\n            var width = 0;\n            var colWidth = 0;\n            var col;\n            var header;\n            var i;\n            var length = cols.length;\n\n            for (i = 0; i < length; i++) {\n                col = cols[i];\n                header = that._getColumnHeader(col);\n\n                if (!col.hidden && columnMatchesMedia(col)) {\n                    colWidth = header.is(\":visible\") ? header.outerWidth() : col.width;\n\n                    width += colWidth ? parseInt(colWidth, 10) : 0;\n                }\n            }\n\n            return width;\n        },\n\n        _belongsToGrid: function(element) {\n            return this.wrapper[0] === element.closest(WRAPPER)[0];\n        },\n\n        getSelectedData: function() {\n            var that = this;\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var result = [];\n            var visibleColumns = visibleLeafColumns(that.columns);\n\n            for (var idx = 0; idx < selectedRangeNames.length; idx++) {\n                result = result.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns));\n            }\n\n            if (selectedSingleItems.length) {\n                result = result.concat(that._mapSelectionToData(selectedSingleItems, visibleColumns));\n            }\n\n            return result;\n        },\n\n        exportSelectedToExcel: function(includeHeaders) {\n            if (!kendo.excel || !kendo.ooxml) {\n                throw new Error(\"The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.\");\n            }\n\n            var that = this;\n            var excel = this.options.excel || {};\n            var visibleColumns = visibleLeafColumns(that.columns);\n            var exporter = new kendo.excel.ExcelExporter({});\n            var columnHandler = function() {return { autoWidth: true };};\n            var book = {\n                sheets: [{\n                    columns: Array.apply(0, Array(visibleColumns.length)).map(columnHandler),\n                    rows: [],\n                    freezePane: {},\n                    filter: false\n                }]\n            };\n            var selectedRanges = that.selectable.selectedRanges();\n            var selectedRangeNames = Object.keys(selectedRanges);\n            var selectedSingleItems = that.selectable.selectedSingleItems();\n            var idx;\n            var exportData = [];\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var sortHandler = exportDataSort.bind(that);\n\n            for (idx = 0; idx < selectedRangeNames.length; idx++) {\n                exportData = exportData.concat(that._mapSelectionToData(selectedRanges[selectedRangeNames[idx]], visibleColumns, isExcelExportableColumn));\n            }\n\n            if (exportData.length) {\n                that._addRangeSelectionRows(book, exporter, exportData, includeHeaders);\n\n            }\n            exportData = selectedSingleItems.length ? that._mapSelectionToData(selectedSingleItems, visibleColumns, isExcelExportableColumn) : [];\n\n            if (exportData.length) {\n                if (hasLockedCols) {\n                    exportData = exportData.sort(sortHandler);\n                }\n                that._addSingleSelectionRows(book, exporter, exportData, includeHeaders);\n            }\n\n            if (book.sheets[0].rows.length) {\n                var workbook = new kendo.ooxml.Workbook(book);\n\n                if (!workbook.options) {\n                    workbook.options = {};\n                }\n                workbook.options.skipCustomHeight = true;\n\n                workbook.toDataURLAsync().then(function(dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: book.fileName || excel.fileName,\n                        proxyURL: excel.proxyURL,\n                        forceProxy: excel.forceProxy\n                    });\n                });\n            }\n        },\n\n        _addSingleSelectionRows: function(book, exporter, data, includeHeaders) {\n            var idx = 0;\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n            var item;\n\n            for (idx = 0; idx < data.length; idx++) {\n                item = data[idx];\n                exporter.data = [item];\n                this._setExporterColumns(exporter, visibleColumns, item);\n                this._createExportRows(book, exporter, includeHeaders);\n            }\n        },\n\n        _addRangeSelectionRows: function(book, exporter, data, includeHeaders) {\n            var visibleColumns = visibleLeafExportColumns(this.columns);\n\n            exporter.data = data;\n            this._setExporterColumns(exporter, visibleColumns, data[0]);\n            this._createExportRows(book, exporter, includeHeaders);\n        },\n\n        _createExportRows: function(book, exporter, includeHeaders) {\n            book.sheets[0].rows = book.sheets[0].rows.concat(includeHeaders ? exporter._rows() : exporter._dataRows(exporter.data, 0));\n        },\n\n        _setExporterColumns: function(exporter, columns, item) {\n            exporter.columns = exporter.options.columns = $.map(columns.filter(function(col) {\n                return Object.keys(item).indexOf(col.field) >= 0;\n            }), exporter._prepareColumn);\n        },\n\n        _mapSelectionToData: function(elements, visibleColumns, columnsFilter) {\n            var that = this;\n            var elementType = elements[0][0].nodeName;\n            var isRowSelection = elementType === 'TR';\n            var dataItem;\n            var result = {};\n            var element;\n            var curr;\n            var field;\n            var columnMapHandler = function(col) {\n                var result = {};\n\n                if (!col.field || (columnsFilter && !columnsFilter(col))) {\n                    return;\n                }\n\n                result[col.field] = dataItem[col.field];\n                return result;\n            };\n            var hasLockedCols = that._isLocked() && lockedColumns(that.columns).length;\n            var column;\n\n            for (var i = 0; i < elements.length; i++) {\n                element = elements[i];\n                dataItem = that.dataItem(isRowSelection ? element : element.parent());\n\n                if (isRowSelection) {\n                    result[dataItem.uid] = $.extend.apply(null, visibleColumns.map(columnMapHandler));\n                } else {\n                    field = that._getCellField(element, hasLockedCols);\n\n                    if (!field) {\n                        continue;\n                    }\n\n                    curr = result[dataItem.uid];\n\n                    if (!curr) {\n                        curr = result[dataItem.uid] = {};\n                    }\n\n                    column = findColumnByField(visibleColumns, field);\n\n                    if (!column || (columnsFilter && !columnsFilter(column))) {\n                        continue;\n                    }\n\n                    curr[field] = dataItem[field];\n                }\n            }\n\n            return Object.keys(result).map(function(id) {\n                result[id].uid = id;\n                return result[id];\n            });\n        },\n\n        _getCellField: function(cell, hasLockedCols) {\n            var grid = this;\n            var inLockedArea = hasLockedCols && $.contains(grid.lockedTable[0], cell[0]);\n            var fieldAttr = kendo.attr('field');\n            var index = kendo.attr('index');\n\n            if (hasLockedCols) {\n                return grid.element.find(\".k-grid-header-\" + (inLockedArea ? \"locked\" : \"wrap\") + \" th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            } else {\n                return grid.thead.find(\"th[\" + index + \"='\" + cell.index() + \"']\").attr(fieldAttr);\n            }\n        },\n\n        _relatedRow: function(row) {\n            var lockedTable = this.lockedTable;\n            row = $(row);\n\n            if (!lockedTable) {\n                return row;\n            }\n\n            var table = row.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr\").index(row);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr\").eq(index);\n        },\n\n        _relatedCell: function(cell) {\n            var lockedTable = this.lockedTable;\n\n            cell = $(cell);\n\n            if (!lockedTable) {\n                return cell;\n            }\n\n            var table = cell.closest(this.table.add(this.lockedTable));\n            var index = table.find(\">tbody>tr>td\").index(cell);\n\n            table = table[0] === this.table[0] ? lockedTable : this.table;\n\n            return table.find(\">tbody>tr>td\").index(index);\n        },\n\n        clearSelection: function() {\n            var that = this;\n\n            if (that.selectable && !that._checkBoxSelection) {\n                that.selectable.clear();\n            }\n\n            if (that._checkBoxSelection) {\n                that._deselectCheckRows(that.select());\n                return;\n            }\n\n            if (that.options.persistSelection) {\n                that._persistSelectedRows();\n            } else {\n                that._selectedIds = {};\n            }\n        },\n\n        select: function(items) {\n            var that = this,\n                selectable = that.selectable,\n                selectableoptions = kendo.ui.Selectable.parseOptions(this.options.selectable),\n                cell = selectableoptions.cell;\n\n            items = that.table.add(that.lockedTable).find(items);\n            if (items.length) {\n                if (selectable && !selectable.options.multiple) {\n                    selectable.clear();\n                    items = items.first();\n                }\n\n                if (that._isLocked()) {\n                    items = items.add(items.map(function() {\n                        if (cell) {\n                            return that._relatedCell(this);\n                        }\n                        else {\n                            return that._relatedRow(this);\n                        }\n                    }));\n                }\n\n                if (selectable && !that._checkBoxSelection) {\n                    selectable.value(items);\n                } else {\n                    that._checkRows(items);\n                    if (that.select().length === that.items().length) {\n                        that._toggleHeaderCheckState(true);\n                    }\n                }\n\n                if (!cell) {\n                    that._persistSelectedRows();\n                }\n\n                return;\n            }\n\n            return selectable ? selectable.value() : that.items().filter(\".\" + SELECTED);\n        },\n\n        _toggleHeaderCheckState: function(checked) {\n            var that = this;\n            if (checked) {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", true).attr(ARIA_CHECKED, true)\n                    .attr(ARIA_LABEL, \"Deselect all rows\");\n            } else {\n                that.thead.add(that.lockedHeader).find(\"tr \" + CHECKBOXINPUT)\n                    .prop(\"checked\", false).attr(ARIA_CHECKED, false)\n                    .attr(ARIA_LABEL, \"Select all rows\");\n            }\n        },\n\n        _uncheckCheckBoxes: function() {\n            var that = this;\n            var tables = that.table.add(that.lockedTable);\n\n            tables.find(\"tbody \" + CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n\n        },\n\n        _deselectCheckRows: function(items) {\n            var that = this,\n            rangeSelectedAttr = kendo.attr(\"range-selected\");\n            items = that.table.add(that.lockedTable).find(items);\n\n            if (that._isLocked()) {\n                items = items.add(items.map(function() {\n                    return that._relatedRow(this);\n                }));\n            }\n\n            items.each(function() {\n                $(this).removeClass(SELECTED).removeAttr(rangeSelectedAttr).find(CHECKBOXINPUT).attr(ARIA_CHECKED, false)\n                    .prop(\"checked\", false).attr(ARIA_LABEL, \"Select row\");\n            });\n            that._toggleHeaderCheckState(false);\n\n            that._persistSelectedRows();\n\n        },\n\n        _checkRows: function(items) {\n            items.each(function() {\n                $(this).addClass(SELECTED).find(CHECKBOXINPUT)\n                    .prop(\"checked\", true)\n                    .attr(ARIA_LABEL, \"Deselect row\")\n                    .attr(ARIA_CHECKED, true);\n            });\n        },\n\n        _persistSelectedRows: function() {\n            var that = this,\n                key,\n                dataItem,\n                allRows = that.items(),\n                dataSourceOptions = that.dataSource.options,\n                schema = dataSourceOptions.schema,\n                modelId,\n                selectedViewIds = {};\n\n            if (!schema || !schema.model || !that._data) {\n                return;\n            }\n\n            modelId = isFunction(schema.model) ? schema.model.fn.idField : schema.model.id;\n\n            if (!modelId) {\n                return;\n            }\n\n            if (!kendo.ui.Selectable.parseOptions(that.options.selectable).multiple && !that._checkBoxSelection) {\n                that._selectedIds = {};\n            }\n\n            that.select().each(function() {\n                dataItem = that.dataItem(this);\n                selectedViewIds[dataItem[modelId]] = true;\n            });\n\n            for (var i = 0; i < allRows.length; i ++) {\n                dataItem = that.dataItem(allRows[i]);\n                key = dataItem[modelId];\n                if (selectedViewIds[key]) {\n                    that._selectedIds[key] = true;\n                } else {\n                    delete that._selectedIds[key];\n                }\n            }\n        },\n\n        selectedKeyNames: function() {\n            var that = this,\n                ids = [];\n            for (var property in that._selectedIds) {\n                ids.push(property);\n            }\n            ids.sort();\n            return ids;\n        },\n\n        _updateCurrentAttr: function(current, next) {\n            var headerId = $(current).data(\"headerId\");\n            var nextId;\n            var descId;\n\n            $(current).removeClass(FOCUSED);\n            this.table.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n            if (headerId) {\n                headerId = headerId.replace(this._cellId, \"\");\n                $(current).attr(ID, headerId);\n            } else {\n                $(current).removeAttr(ID);\n            }\n\n            nextId = next.attr(ID);\n\n            if (nextId != this._cellId) {\n                next.data(\"headerId\", nextId);\n            }\n\n            if (!!nextId) {\n                descId = nextId;\n            } else {\n                next.attr(ID, this._cellId);\n            }\n\n            next.addClass(FOCUSED);\n            this.table.attr(ARIA_ACTIVEDESCENDANT, descId || this._cellId);\n\n            this._current = next;\n        },\n\n        _scrollCurrent: function() {\n            var current = this._current;\n            var scrollable = this.options.scrollable;\n\n            if (!current || !scrollable) {\n                return;\n            }\n\n            var row = current.parent();\n            var tableContainer = row.closest(\"table\").parent();\n\n            var isInLockedContainer = tableContainer.is(\".k-grid-content-locked,.k-grid-header-locked\");\n            var isInContent = tableContainer.is(\".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap\");\n\n            var scrollableContainer = $(this.content).find(\">.k-virtual-scrollable-wrap\").addBack().last()[0];\n\n            //adjust scroll vertically\n            if (isInContent) {\n                if (this.virtualScroll) {\n                    var rowIndex = Math.max(inArray(row[0], this._items(row.parent())), 0);\n                    if (this.virtualScroll.rows) {\n                        this._rowVirtualIndex = this.virtualScrollable.itemIndex(rowIndex);\n                        this.virtualScrollable.scrollIntoView(row);\n                    } else {\n                        this._rowVirtualIndex = rowIndex;\n                        this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                    }\n                } else {\n                    this._scrollTo(this._relatedRow(row)[0], scrollableContainer);\n                }\n            }\n\n            if (this.lockedContent) {\n                //sync locked and non-locked content scrollTop\n                this.lockedContent[0].scrollTop = scrollableContainer.scrollTop;\n            }\n\n            //adjust scroll horizontally, if not inside locked tables\n            if (!isInLockedContainer) {\n                this._scrollTo(current[0], scrollableContainer);\n            }\n        },\n\n        current: function(next) {\n            return this._setCurrent(next, true);\n        },\n\n        _setCurrent: function(next, preventTrigger, preventScroll) {\n            var current = this._current;\n\n            next = $(next);\n\n            if (current && next && current.length && next.length && current.closest(\".k-filter-row\").length > 0 && next.closest(\".k-filter-row\").length === 0) {\n                this._filterFocusable().attr(TABINDEX, -1);\n            }\n\n            if (next.length) {\n                if (!current || current[0] !== next[0]) {\n                    var parent = next.parent();\n                    var siblings = parent.children(DATA_CELL);\n                    var colspan = parseInt(parent.children().first().attr(\"colspan\"), 10);\n\n                    if (this._hasVirtualColumns()) {\n                        this._virtualCellIndex = (colspan > 1 ? colspan : 0) + siblings.index(next);\n                    }\n                    this._updateCurrentAttr(current, next);\n\n                    if (!preventScroll) {\n                        this._scrollCurrent();\n                    }\n\n                    if (!preventTrigger) {\n                        this.trigger(NAVIGATE, {\n                            element: next\n                        });\n                    }\n                }\n            }\n\n            if (next && next.length) {\n                this._lastCellIndex = next.parent().children(DATA_CELL).index(next);\n            }\n\n            this._updateSelctCheckbox(current, next);\n\n            return this._current;\n        },\n\n        _removeCurrent: function() {\n            if (this._current) {\n                this._current.removeClass(FOCUSED);\n                this._current = null;\n            }\n        },\n\n        _updateSelctCheckbox: function(current, next) {\n            var nextCheckbox;\n\n            if (next && next.length) {\n                nextCheckbox = next.find(\".k-select-checkbox\");\n\n                if (nextCheckbox.length > 0) {\n                    nextCheckbox.focus();\n                } else if (current && current.find(\".k-select-checkbox\").length > 0) {\n                    focusTable(this.table, true);\n                }\n            }\n        },\n\n        _scrollTo: function(element, container) {\n            var elementToLowercase = element.tagName.toLowerCase();\n            var isHorizontal = elementToLowercase === \"td\" || elementToLowercase === \"th\";\n            var table = $(element).closest(\"table\")[0];\n            var elementOffsetDir = element[isHorizontal ? \"offsetWidth\" : \"offsetHeight\"];\n            var containerScroll = container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"];\n            var containerOffsetDir = container[isHorizontal ? \"clientWidth\" : \"clientHeight\"];\n            var elementOffset = $(element).css(\"position\") === \"relative\" && isRtl && isHorizontal ? Math.abs(table.offsetLeft - element.offsetLeft) : element[isHorizontal ? \"offsetLeft\" : \"offsetTop\"];\n            var bottomDistance = elementOffset + elementOffsetDir;\n            var result = 0;\n            var ieCorrection = 0;\n            var firefoxCorrection = 0;\n\n            if (isRtl && isHorizontal) {\n                if (browser.msie || browser.edge) {\n                    ieCorrection = table.offsetLeft;\n                } else if (browser.mozilla || (browser.webkit && (browser.version > 85))) {\n                    firefoxCorrection = table.offsetLeft - kendo.support.scrollbar();\n                }\n            }\n\n            containerScroll = Math.abs(containerScroll + ieCorrection - firefoxCorrection);\n\n            if (containerScroll > elementOffset) {\n                result = elementOffset;\n            } else if (bottomDistance > (containerScroll + containerOffsetDir)) {\n                if (elementOffsetDir <= containerOffsetDir) {\n                    result = (bottomDistance - containerOffsetDir);\n                } else {\n                    result = elementOffset;\n                }\n            } else {\n                result = containerScroll;\n            }\n\n            result = Math.abs(result + ieCorrection) + firefoxCorrection;\n\n            container[isHorizontal ? \"scrollLeft\" : \"scrollTop\"] = result;\n        },\n\n        _navigatable: function() {\n            var that = this;\n\n            if (!that.options.navigatable) {\n                return;\n            }\n\n            //data tables - locked and non-locked\n            var dataTables = that.table.add(that.lockedTable);\n            //header tables - locked and non-locked\n            var headerTables = that.thead.parent().add($(\">table\", that.lockedHeader));\n\n            //the over wich keys will be handled\n            var tables = dataTables;\n\n            if (that.options.scrollable) {\n                //add the header table when the widget is scrollable\n                tables = tables.add(headerTables);\n            }\n\n            this._navigatableTables = tables;\n            this._headertables = headerTables;\n\n            //dettach all previous events\n            tables.off(\"mousedown\" + NS + \" focus\" + NS + \" focusout\" + NS + \" keydown\" + NS);\n\n            headerTables\n                .find(\"a.k-link\").attr(\"tabIndex\", -1);\n\n            //prevent propagation when clicked inside detail grid\n            dataTables\n                .on(\"keydown\" + NS, \".k-detail-cell\", function(e) {\n                    if (e.target !== e.currentTarget) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n            tables\n                //handle click on tables, will attempt to focus the table\n                .on((kendo.support.touch ? \"touchstart\" + NS : \"mousedown\" + NS), NAVROW + \">\" + NAVCELL, tableClick.bind(that))\n                .on(\"focus\" + NS, that._tableFocus.bind(that))\n                .on(\"focusout\" + NS, that._tableBlur.bind(that))\n                .on(\"keydown\" + NS, that, that._tableKeyDown.bind(that));\n\n            that._filterFocusable().on(\"focus\", that._filterFocus.bind(that));\n        },\n\n        _filterFocus: function(e) {\n            var header = e.target.closest(\"th\");\n\n            this._filterFocusable().attr(TABINDEX, 0);\n            this._setCurrent(header);\n            $(header).removeClass(FOCUSED);\n        },\n\n        _tableFocus: function() {\n            var current = this.current();\n            var table = this.lockedTable ? this.lockedTable : this.table;\n\n            //if there is already current, highlighted it\n            //otherwise highlight the first possible cell\n            if (current && current.is(\":visible\")) {\n                current.addClass(FOCUSED);\n            } else {\n                if (this._virtualColScroll) {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first(), true, true);\n                } else {\n                    this._setCurrent(table.find(NAVROW).first().children(NAVCELL).first());\n                }\n            }\n\n            this.table.attr(TABINDEX, 0);\n        },\n\n        _tableBlur: function() {\n            var current = this.current();\n\n            if (current) {\n                current.removeClass(FOCUSED);\n            }\n        },\n\n        _findCellIndex: function(columns, startIndex, reversed) {\n            var cellIndex;\n            var i;\n\n            if (reversed) {\n                for (i = startIndex; i >= 0; i--) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            } else {\n                for (i = startIndex; i < columns.length; i++) {\n                    cellIndex = i;\n                    if (!columns[i].hidden) {\n                        break;\n                    }\n                }\n            }\n\n            return cellIndex;\n        },\n\n        _scrollToColumn: function(key, e) {\n            if (this._virtualCellIndex === undefined$1) {\n                return false;\n            }\n\n            var that = this;\n            var cellIndex = that._virtualCellIndex;\n            var leafsCols = leafColumns(nonLockedColumns(that.columns));\n            var scrollWidth = 0;\n\n            if (key == (isRtl ? keys.LEFT : keys.RIGHT) && (cellIndex !== leafsCols.length - 1)) {\n                cellIndex = that._findCellIndex(leafsCols, cellIndex + 1);\n            } else if (key == (isRtl ? keys.RIGHT : keys.LEFT) && cellIndex) {\n                cellIndex = that._findCellIndex(leafsCols,cellIndex - 1, true);\n            } else if (key == keys.HOME) {\n                cellIndex = that._findCellIndex(leafsCols, 0);\n            } else if (key == keys.END) {\n                cellIndex = that._findCellIndex(leafsCols, leafsCols.length - 1, true);\n            }\n\n            for (var i = 0; i < cellIndex; i++) {\n                scrollWidth += leafsCols[i].width;\n            }\n\n            that._virtualCellIndex = cellIndex;\n            if (e) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n            kendo.scrollLeft(that.content, scrollWidth);\n            return true;\n        },\n\n        _tableKeyDown: function(e) {\n            var current = this.current();\n            var virtualScroll = this.virtualScroll || {};\n            var requestInProgress = this.virtualScrollable && this.virtualScrollable.fetching();\n            var target = $(e.target);\n            var canHandle = !e.isDefaultPrevented() && !target.is(\":button,a,:input:not(.k-select-checkbox),a>.k-icon\");\n\n            if (e.altKey && e.keyCode == keys.DOWN) {\n                this.current().find(\".k-grid-filter, .k-header-column-menu\").click();\n                e.stopImmediatePropagation();\n                return;\n            }\n\n            // do not handle key down if request in progress\n            // or there isn't current set\n            if (requestInProgress) {\n                // swallow key events while in progress\n                e.preventDefault();\n                return;\n            }\n\n            if (virtualScroll.columns && (!current || !document.body.contains(current[0])) && (this._scrollToColumn(e.keyCode, e))) {\n                return;\n            }\n\n            if (!current) {\n                current = $(this.lockedTable).add(this.options.scrollable ? this.table : this.tbody).find(NAVROW).first().children(NAVCELL).first();\n            }\n\n            if (!current.length) {\n                return;\n            }\n\n            var handled = false;\n\n            if (canHandle && e.keyCode == keys.UP) {\n                handled = this._moveUp(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.DOWN) {\n                handled = this._moveDown(current, e.shiftKey, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.LEFT : keys.RIGHT)) {\n                handled = this._moveRight(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == (isRtl ? keys.RIGHT : keys.LEFT)) {\n                handled = this._moveLeft(current, e.altKey, e.shiftKey, e.ctrlKey, e.currentTarget);\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEDOWN) {\n                handled = this._handlePageDown();\n            }\n\n            if (canHandle && e.keyCode == keys.PAGEUP) {\n                handled = this._handlePageUp();\n            }\n\n            if (canHandle && e.keyCode == keys.HOME) {\n                handled = this._handleHome(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.END) {\n                handled = this._handleEnd(current, e.ctrlKey);\n            }\n\n            if (canHandle && e.keyCode == keys.SPACEBAR) {\n                handled = this._handleSpaceKey(current, e.ctrlKey);\n            }\n\n            if (e.keyCode == keys.ENTER || e.keyCode == keys.F2) {\n                handled = this._handleEnterKey(current, e.currentTarget, target);\n            }\n\n            if (e.keyCode == keys.ESC) {\n                handled = this._handleEscKey(current, e.currentTarget);\n            }\n\n            if (e.keyCode == keys.TAB) {\n                handled = this._handleTabKey(current, e.currentTarget, e.shiftKey, target);\n            }\n\n            if (handled) {\n                //prevent scrolling while pressing the keys\n                e.preventDefault();\n                //required in hierarchy\n                e.stopPropagation();\n            }\n        },\n\n        _moveLeft: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(\"k-grouping-row\")) {\n                    this.collapseGroup(row);\n                } else {\n                    this.collapseRow(row);\n                }\n            } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n               this._moveColumn(current, true);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._prevHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                        if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.lockedTable[0], row[0])) {\n                                next = next.prevAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).last();\n                        } else {\n                            next = this._tabNext(current, currentTable, true);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container);\n\n                        next = this._prevHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveRight: function(current, altKey, shiftKey, ctrlKey, currentTable) {\n            var next, index;\n            var row = current.parent();\n            //thead or tbody\n            var container = row.parent();\n\n            if (altKey) {\n                if (row.hasClass(\"k-grouping-row\")) {\n                    this.expandGroup(row);\n                } else {\n                    this.expandRow(row);\n                }\n             } else if (ctrlKey && current.is(\".k-header\") && this.options.reorderable) {\n                this._moveColumn(current, false);\n            } else {\n                index = container.find(NAVROW).index(row);\n                next = this._nextHorizontalCell(container, current, index);\n\n                if (!next[0]) {\n                    if (shiftKey) {\n                       if (this.lockedTable) {\n                            next = this._relatedRow(row);\n                            if ($.contains(this.table[0], row[0])) {\n                                next = next.nextAll(ITEMROW).first();\n                            }\n                            next = next.children(DATA_CELL).first();\n                        } else {\n                            next = this._tabNext(current, currentTable, false);\n                        }\n                    } else {\n                        container = this._horizontalContainer(container, true);\n\n                        next = this._nextHorizontalCell(container, current, index);\n\n                        if (next[0] !== current[0]) {\n                            focusTable(this.table, true);\n                        }\n                    }\n                }\n\n                this._setCurrent(next);\n            }\n\n            return true;\n        },\n\n        _moveUp: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n               next = current.parent();\n               next = next.prevAll(ITEMROW).first();\n               next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).last();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.prevAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n               next = this._prevVerticalCell(container, current);\n               if (!next[0]) {\n                  this._lastCellIndex = 0;\n                  container = this._verticalContainer(container, true);\n\n                  next = this._prevVerticalCell(container, current);\n\n                  if (next[0]) {\n                      focusTable(this.table, true);\n                  }\n               }\n            }\n\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n\n            return true;\n        },\n\n        _moveDown: function(current, shiftKey, ctrlKey) {\n            //thead or tbody\n            var container = current.parent().parent();\n            var next, cellIndex, index, oldIndex;\n\n            if (shiftKey) {\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                next = current.parent().is(ITEMROW) ? next.children().eq(current.index()) : next.children(DATA_CELL).first();\n            } else if (ctrlKey && current.parent().is(ITEMROW) && this._hasReorderableRows()) {\n                cellIndex = current.index();\n                next = current.parent();\n                next = next.nextAll(ITEMROW).first();\n                index = this.tbody.children(ITEMROW).index(next);\n                oldIndex = this.tbody.children(ITEMROW).index(current.parent());\n\n                if (index >= 0 && !this.trigger(ROWREORDER, { oldIndex: oldIndex, newIndex: index, row: current.parent() })) {\n                    this.reorderRows(current.parent(), index + 1);\n                    next = this.tbody.children(ITEMROW).eq(index).children().eq(cellIndex);\n                }\n            } else {\n                next = this._nextVerticalCell(container, current);\n                if (!next[0]) {\n                    this._lastCellIndex = 0;\n                    container = this._verticalContainer(container);\n\n                    next = this._nextVerticalCell(container, current);\n                    if (next[0]) {\n                        focusTable(this.table, true);\n                    }\n                }\n            }\n            var tmp = this._lastCellIndex || 0;\n            this._setCurrent(next);\n            this._lastCellIndex = tmp;\n            return true;\n        },\n\n        _moveColumn: function(current, isLeft) {\n            var elements = this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter + \":visible\");\n\n            var columns = visibleColumns(flatColumnsInDomOrder(this.columns));\n            var oldIndex = elements.index($(current));\n            var offset = isLeft ? - 1 : 1;\n            var column = columns[oldIndex];\n            var newIndex = targetParentContainerIndex(columns, this.columns, oldIndex, oldIndex + offset);\n            if (newIndex >= 0) {\n                this.reorderColumn(newIndex, column, isLeft);\n                this.trigger(COLUMNREORDER, {\n                    newIndex: newIndex,\n                    oldIndex: oldIndex,\n                    column: column\n                });\n            }\n        },\n\n        _handleHome: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var prev;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(kendo.keys.HOME);\n                return true;\n            }\n\n            if (ctrl) {\n                if (this.lockedTable) {\n                    prev = this.lockedTable.find(ITEMROW).first().children(NAVCELL).first();\n                } else {\n                    prev = this.table.find(ITEMROW).first().children(NAVCELL).first();\n                }\n            } else if (isInBody || isInLockedTable) {\n                if (isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                prev = row.children(DATA_CELL).first();\n            }\n\n            if (prev && prev.length) {\n                this._setCurrent(prev);\n                return true;\n            }\n        },\n\n        _handleEnd: function(current, ctrl) {\n            var row = current.parent();\n            var rowContainer = row.parent();\n            var isInLockedTable = this.lockedTable && this.lockedTable.children(\"tbody\")[0] === rowContainer[0];\n            var isInBody = rowContainer[0] === this.tbody[0];\n            var next;\n\n            if (this._hasVirtualColumns()) {\n                this._scrollToColumn(kendo.keys.END);\n                return true;\n            }\n\n            if (ctrl) {\n                next = this.table.find(ITEMROW).last().children(NAVCELL).last();\n            } else if (isInBody || isInLockedTable) {\n                if (!isInBody && this.lockedTable) {\n                    row = this._relatedRow(row);\n                }\n                next = row.children(DATA_CELL).last();\n            }\n\n            if (next && next.length) {\n                this._setCurrent(next);\n                return true;\n            }\n        },\n\n        _handlePageDown: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() + 1);\n\n            return true;\n        },\n\n        _handlePageUp: function() {\n            if (!this.options.pageable) {\n                return false;\n            }\n\n            this.dataSource.page(this.dataSource.page() - 1);\n\n            return true;\n        },\n\n        _handleTabKey: function(current, currentTable, shiftKey, target) {\n            var isInCell = this.options.editable && this._editMode() == \"incell\";\n            var cell, filterFocusable;\n\n            if (!isInCell ||\n                current.is(\"th\") ||\n                (this.options.scrollable ? this._headertables.filter(currentTable).length : this.thead.filter(target).length)) {\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        filterFocusable = this._filterFocusable();\n\n                        if (!shiftKey && filterFocusable[filterFocusable.length - 1] === document.activeElement) {\n                            filterFocusable.first().trigger(\"focus\");\n\n                            return true;\n                        } else if (shiftKey && filterFocusable[0] === document.activeElement) {\n                            filterFocusable.last().trigger(\"focus\");\n\n                            return true;\n                        }\n                    }\n\n                    return false;\n            }\n\n            cell = $(activeElement()).closest(\".k-edit-cell\");\n\n            if (cell[0] && cell[0] !== current[0]) {\n                current = cell;\n            }\n\n            cell = this._tabNext(current, currentTable, shiftKey);\n\n            if (cell[0] === current[0]) {\n                return false;\n            }\n\n            if (cell.length) {\n                this._handleEditing(current, cell, cell.closest(\"table\"));\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleEscKey: function(current) {\n            var active = activeElement();\n            var isInCell = this._editMode() == \"incell\";\n\n            if (!isInEdit(current)) {\n                if (current.has(active).length) {\n                    // return focus back to the table\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                if (current.parent().hasClass(\"k-filter-row\")) {\n                    this._filterFocusable().attr(TABINDEX, -1);\n                    focusTable(this.table, true);\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (isInCell) {\n                this.closeCell(true);\n            } else {\n                var currentIndex = $(current).parent().index();\n                if (active) {\n                    active.blur();\n                }\n                this.cancelRow(true);\n                if (currentIndex >= 0) {\n                    this._setCurrent(this.items().eq(currentIndex).children(NAVCELL).first());\n                }\n            }\n\n            focusTable(this.table, true);\n\n            return true;\n        },\n\n        _toggleCurrent: function(current, editable, hasDetails) {\n            var row = current.parent();\n\n            if (current.is(\".k-command-cell\")) {\n                return false;\n            }\n\n            if (row.is(\".k-grouping-row\")) {\n                row.find(\".k-icon\").first().click();\n\n                return true;\n            }\n\n            if (!editable && hasDetails) {\n                row.find(\".k-icon\").first().click();\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _handleSpaceKey: function(current, ctrlKey) {\n            var that = this;\n\n            if (!ctrlKey || !that.groupable || !current.hasClass(\"k-header\")) {\n                return;\n            }\n\n            var descriptors = that.groupable.descriptors();\n            var field = current.attr(kendo.attr(\"field\"));\n            var aggregates = that.groupable.aggregates();\n\n            if (that.groupable._canDrag(current)) {\n                descriptors.push({\n                    field: field,\n                    dir: \"asc\",\n                    aggregates: aggregates || []\n                });\n            } else {\n                descriptors = $.grep(descriptors, function(item)\n                {\n                    return item.field !== field;\n                });\n            }\n\n            that.dataSource.group(descriptors);\n\n            return true;\n        },\n\n        _handleEnterKey: function(current, currentTable, target) {\n            var editable = this.options.editable && this.options.editable.update !== false;\n            var container = target.closest(\"td\");\n            var hasDetails = this._hasDetails();\n            var link, filterFocusable;\n\n            if (!target.is(\"table\") && !$.contains(current[0], target[0])) {\n                current = container;\n            }\n\n            if (current.is(\"th\")) {\n                // sort the column, if possible\n                link = current.find(\".k-link\");\n\n                if (current.has($(activeElement())).length > 0) {\n                    return false;\n                } else if (link.length) {\n                    link.click();\n                } else if (current.parent().hasClass(\"k-filter-row\")) {\n                    filterFocusable = this._filterFocusable();\n                    filterFocusable.attr(TABINDEX, 0);\n                    current.find(\":kendoFocusable\").first().focus();\n                } else {\n                    current.find(CHECKBOXINPUT).trigger(\"focus\");\n                }\n\n                return true;\n            }\n            if (this._toggleCurrent(current, editable, hasDetails)) {\n                return true;\n            }\n\n            var focusable = current.find(\":kendoFocusable\").first();\n            if (focusable[0] && !current.hasClass(\"k-edit-cell\") && current.hasClass(\"k-focus\")) {\n                focusable.trigger(\"focus\");\n\n                return true;\n            }\n\n            if (editable && !target.is(\":button,.k-button,textarea\")) {\n                if (!container[0]) {\n                    container = current;\n                }\n\n                this._handleEditing(container, false, currentTable);\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _nextHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.nextAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        mapColumnToCellRows([lockedColumns(this.columns)[0]], childColumnsCells(rows.eq(0).children(\":visible\").first()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).first();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).first();\n                }\n            }\n\n            return cells.first();\n        },\n\n        _prevHorizontalCell: function(table, current, originalIndex) {\n            var cells = current.prevAll(DATA_CELL);\n\n            if (!cells.length) {\n                var rows = table.find(NAVROW);\n                var rowIndex = rows.index(current.parent());\n\n                //no sibling cells are found and we've changed the table\n                if (rowIndex == -1) {\n                    if (current.hasClass(\"k-header\")) {\n                        var headerRows = [];\n                        var columns = lockedColumns(this.columns);\n                        mapColumnToCellRows([columns[columns.length - 1]], childColumnsCells(rows.eq(0).children().last()), headerRows, 0, 0);\n\n                        if (headerRows[originalIndex]) {\n                            return headerRows[originalIndex][0];\n                        }\n\n                        return current;\n                    }\n\n                    //current is in filter row\n                    if (current.parent().hasClass(\"k-filter-row\")) {\n                        return rows.last().children(DATA_CELL).last();\n                    }\n\n                    //get the same row index in the new table\n                    return rows.eq(originalIndex).children(DATA_CELL).last();\n                }\n            }\n\n            return cells.first();\n        },\n\n        _currentDataIndex: function(table, current) {\n            var index = current.attr(\"data-index\");\n\n            if (!index) {\n                return undefined$1;\n            }\n\n            var lockedColumnsCount = lockedColumns(this.columns).length;\n            if (lockedColumnsCount && !table.closest(\"div\").hasClass(\"k-grid-content-locked\")[0]) {\n                return index - lockedColumnsCount;\n            }\n\n            return index;\n        },\n\n        _prevVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n\n            //current is in the header, but not at the last level of multi-level columns\n            if (index || current.hasClass(\"k-header\")) {\n                cells = parentColumnsCells(current);\n                return cells.eq(cells.length - 2);\n            }\n\n            //check this out\n            index = Math.max(row.children(DATA_CELL).index(current), this._lastCellIndex || 0);\n\n            //if current is inside filter row\n            if (row.hasClass(\"k-filter-row\")) {\n                return leafDataCells(container).filter(isCellVisible).eq(index);\n            }\n\n            //move up to header container\n            if (rowIndex == -1) {\n                if (this._hasVirtualColumns()) {\n                    index = this._virtualCellIndex;\n                }\n                //is there filter row in the header container\n                row = container.find(\"tr.k-filter-row:visible\");\n                if (!row[0]) {\n                    // in hierarchical grid we need to correct the index\n                    // since the k-hierarchy cell is navigatable\n                    if ((this._hasDetails() || current.parent().find('.k-hierarchy-cell').length) && index) {\n                        index--;\n                    }\n                    return leafDataCells(container).filter(isCellVisible).eq(index);\n                }\n            } else {\n                row = rowIndex === 0 ? $() : rows.eq(rowIndex - 1);\n            }\n\n            cells = row.children(DATA_CELL);\n            if (cells.length > index) {\n                return cells.eq(index);\n            }\n\n            return cells.eq(0);\n        },\n\n        _nextVerticalCell: function(container, current) {\n            var cells;\n            var row = current.parent();\n            var rows = container.children(NAVROW);\n            var rowIndex = rows.index(row);\n            //get data-index in case of last level of multi-level columns\n            var index = this._currentDataIndex(container, current);\n            var virtualScroll = this.virtualScroll || {};\n            var colspan;\n\n            //current is in the header, but not at the last level of multi-level columns\n            //and we are not changing the table\n            if (rowIndex != -1 && index === undefined$1 && current.hasClass(\"k-header\")) {\n                return childColumnsCells(current).eq(1);\n            }\n\n            index = index ? parseInt(index, 10) : row.children(DATA_CELL).index(current);\n            index = Math.max(index, this._lastCellIndex || 0);\n\n            //move down to data container\n            if (rowIndex == -1) {\n                row = rows.eq(0);\n                if (virtualScroll.columns) {\n                    colspan = parseInt(row.children().first().attr(\"colspan\"), 10);\n                    index = this._virtualCellIndex - (colspan > 1 ? colspan : 0);\n                }\n                // in hierarchical grid we need to correct the index\n                // since the k-hierarchy cell is navigatable\n                if (this._hasDetails() || row.find('.k-hierarchy-cell').length) {\n                    index++;\n                }\n            } else {\n                row = rows.eq(rowIndex + current[0].rowSpan);\n            }\n\n            var tmpIndex = index;\n            //in case of last level of multi-level columns the index should be updated depending on the hidden columns\n            if (this._currentDataIndex(container, current) !== undefined$1) {\n                var currentRowCells = row.children(\":not(.k-group-cell):not(.k-hierarchy-cell)\");\n                var hiddenColumns = currentRowCells.filter(\":hidden\");\n                for (var idx = 0, length = hiddenColumns.length; idx < length; idx++) {\n                    if (currentRowCells.index(hiddenColumns[idx]) < index) {\n                        tmpIndex--;\n                    }\n                }\n            }\n            index = tmpIndex;\n\n            cells = row.children(DATA_CELL);\n            if (cells.length > index) {\n                return cells.eq(index);\n            }\n\n            return cells.eq(0);\n        },\n\n        _verticalContainer: function(container, up) {\n            var table = container.parent();\n            var length = this._navigatableTables.length;\n            var step = Math.floor(length / 2);\n            var index = inArray(table[0], this._navigatableTables);\n\n            if (up) {\n                step *= -1;\n            }\n            index += step;\n\n            if (index >= 0 || index < length) {\n                table = this._navigatableTables.eq(index);\n            }\n\n            return table.find(up ? \">thead\" : \">tbody\");\n        },\n\n        _filterFocusable: function() {\n            return this.wrapper.find(\".k-filter-row\").find(\".k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible\");\n        },\n\n        _horizontalContainer: function(container, right) {\n            var length = this._navigatableTables.length;\n            if (length <= 2) {\n                return container;\n            }\n\n            var table = container.parent();\n            var index = inArray(table[0], this._navigatableTables);\n\n            index += right ? 1 : -1;\n\n            if (right && (index == 2 || index == length)) {\n                return container;\n            }\n\n            if (!right && (index == 1 || index < 0)) {\n                return container;\n            }\n\n            return this._navigatableTables.eq(index).find(\"thead, tbody\");\n        },\n\n        _tabNext: function(current, currentTable, back) {\n            var switchRow = true;\n            var next = back ? current.prevAll(DATA_CELL).first() : current.nextAll(\":visible\").first();\n\n            if (!next.length) {\n                next = current.parent();\n                if (this.lockedTable) {\n                    switchRow = (back && currentTable == this.lockedTable[0]) || (!back && currentTable == this.table[0]);\n                    next = this._relatedRow(next);\n                }\n\n                if (switchRow) {\n                    if (this._hasVirtualColumns()) {\n                        return current;\n                    }\n                    next = next[back ? \"prevAll\" : \"nextAll\"](\"tr:not(.k-grouping-row):not(.k-detail-row):visible\").first();\n                }\n                if (back) {\n                    next = next.children(DATA_CELL).last();\n                } else {\n                    next = next.children(DATA_CELL).first();\n                }\n            }\n\n            return next;\n        },\n\n        _handleEditing: function(current, next, table) {\n            var that = this,\n                active = $(activeElement()),\n                mode = that._editMode(),\n                isIE = browser.msie,\n                editContainer = that._editContainer,\n                focusable,\n                editable = that.options.editable && that.options.editable.update !== false,\n                isEdited;\n\n            table = $(table);\n            if (mode == \"incell\") {\n                isEdited = current.hasClass(\"k-edit-cell\");\n            } else {\n                isEdited = current.parent().hasClass(\"k-grid-edit-row\");\n            }\n\n            if (that.editable) {\n                if ($.contains(editContainer[0], active[0])) {\n                    active.trigger(\"blur\");\n                    if (isIE) {\n                        //IE10 with jQuery 1.9.x does not trigger blur handler\n                        //numeric textbox does trigger change\n                        active.trigger(\"blur\");\n                    }\n                }\n\n                if (!that.editable) {\n                    focusTable(that.table);\n                    return;\n                }\n\n                if (that.editable.end()) {\n                    if (mode == \"incell\") {\n                        that.closeCell();\n                    } else {\n                        that.saveRow();\n                        isEdited = true;\n                    }\n                } else {\n                    if (mode == \"incell\") {\n                        that._setCurrent(editContainer);\n                    } else {\n                        that._setCurrent(editContainer.children().filter(DATA_CELL).first());\n                    }\n                    focusable = editContainer.find(\":kendoFocusable\").first()[0];\n                    if (focusable) {\n                        focusable.focus();\n                    }\n                    return;\n                }\n            }\n\n            if (next) {\n                that._setCurrent(next);\n            }\n\n            focusTable(that.table, true);\n\n            if (!editable) {\n                return;\n            }\n\n            if ((!isEdited && !next) || next) {\n                if (mode === INCELL) {\n                    if (!$(that.current()).hasClass(HIERARCHY_CELL_CLASS)) {\n                        that.editCell(that.current());\n                    }\n                } else {\n                    that.editRow(that.current().parent());\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                table = that.table,\n                height = that.options.height,\n                width = that.options.width,\n                wrapper = that.element;\n\n            if (!wrapper.is(\"div\")) {\n               wrapper = wrapper.wrap(\"<div/>\").parent();\n            }\n\n            that.wrapper = wrapper.addClass(\"k-grid k-widget k-grid-display-block\");\n\n            if (height) {\n                that.wrapper.css(HEIGHT, height);\n                table.css(HEIGHT, \"auto\");\n            }\n\n            if (width) {\n                that.wrapper.css(\"width\", width);\n            }\n\n            that._initMobile();\n        },\n\n        _initMobile: function() {\n            var options = this.options;\n            var that = this;\n\n            this._isMobile = (options.mobile === true && kendo.support.mobileOS) ||\n                                options.mobile === \"phone\" ||\n                                options.mobile === \"tablet\";\n\n            if (this._isMobile) {\n                var html = this.wrapper.addClass(\"k-grid-mobile\").wrap(\n                    '<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" ' +\n                    'data-' + kendo.ns + 'init-widgets=\"false\"></div>'\n                )\n                .parent();\n\n                this.pane = this._createPane(html);\n                this.view = this.pane.view();\n\n                if (options.height) {\n                    this.pane.element.parent().css(HEIGHT, options.height);\n                } else {\n                    this.pane.element.parent().css(HEIGHT, this.wrapper[0].style.height);\n                }\n\n                this._editAnimation = \"slide\";\n\n                // Grid transitions should not propagate to the view\n                that.wrapper.on(\"transitionend\" + NS, function(e) {\n                    e.stopPropagation();\n                });\n\n                that.wrapper.on(\"contextmenu\" + NS, \"th a\", function(e) {\n                    e.preventDefault();\n                    return false;\n                });\n\n                this.view.bind(\"showStart\", function() {\n                    if (that._isLocked()) {\n                        that._updateTablesWidth();\n                        that._applyLockedContainersWidth();\n                        that._syncLockedContentHeight();\n                        that._syncLockedHeaderHeight();\n                        that._syncLockedFooterHeight();\n                    }\n                });\n            }\n        },\n\n        _createPane: function(html) {\n            var pane = kendo.Pane.wrap(html, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n\n            return pane;\n        },\n\n        _tbody: function() {\n            var that = this,\n                table = that.table,\n                tbody;\n\n            tbody = table.find(\">tbody\");\n\n            if (!tbody.length) {\n                tbody = $(\"<tbody/>\").appendTo(table);\n            }\n\n            that.tbody = tbody;\n        },\n\n        _scrollable: function() {\n            var that = this,\n                header,\n                table,\n                options = that.options,\n                scrollable = options.scrollable,\n                hasVirtualScroll = scrollable !== true && scrollable.virtual,\n                virtualScroll = hasVirtualScroll ? parseVirtualSettings(scrollable.virtual) : null,\n                scrollbar = !kendo.support.kineticScrollNeeded || (virtualScroll && virtualScroll.rows) ? kendo.support.scrollbar() : 0,\n                headerWrap;\n\n            if (scrollable) {\n                header = that.wrapper.children(\".k-grid-header\");\n\n                if (!header[0]) {\n                    header = $('<div class=\"k-grid-header\" />').insertBefore(that.table);\n                }\n\n                // workaround for IE issue where scroll is not raised if container is same width as the scrollbar\n                header.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollable.virtual ? scrollbar + 1 : scrollbar);\n                table = $('<table role=\"none\"/>');\n\n                table.width(that.table[0].style.width);\n\n                table.append(that.thead);\n                header.empty().append($('<div class=\"k-grid-header-wrap k-auto-scrollable\" />').append(table));\n\n\n                that.content = that.table.parent();\n                that.virtualScroll = virtualScroll;\n\n                if (that.content.is(\".k-virtual-scrollable-wrap, \" + DOT + classNames.scrollContainer)) {\n                    that.content = that.content.parent();\n                }\n\n                if (!that.content.is(\".k-grid-content, .k-virtual-scrollable-wrap\")) {\n                    that.content = that.table.wrap('<div class=\"k-grid-content k-auto-scrollable\" />').parent();\n                }\n\n                if (virtualScroll && virtualScroll.rows && !that.virtualScrollable) {\n                    that._createVirtualScrollable();\n                }\n\n                if (virtualScroll && virtualScroll.columns) {\n\n                    that.table.css({\n                        width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n                    });\n                }\n\n                headerWrap = header.children(\".k-grid-header-wrap\");\n\n                that.scrollables = headerWrap.add(that.content);\n\n                // the footer may exists if rendered from the server\n                var footer = that.wrapper.find(\".k-grid-footer\");\n\n                if (footer.length) {\n                    that.scrollables = that.scrollables.add(footer.children(\".k-grid-footer-wrap\"));\n                }\n\n                headerWrap.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                    if (that._scrollLeft !== this.scrollLeft) {\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), this.scrollLeft);\n                    }\n                });\n\n                if (virtualScroll && virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").off(\"scroll\" + NS).on(\"scroll\" + NS, function() {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables, this.scrollLeft);\n                        if (that.lockedContent) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (virtualScroll.columns && isScrollingLeft) {\n                            that.refresh();\n                        }\n                    });\n                } else {\n                    var endless = scrollable.endless;\n                    var originalPageSize = that.dataSource.options.pageSize;\n                    if (endless) {\n                        that._endlessPageSize = originalPageSize;\n                    }\n                    that.content.off(\"scroll\" + NS).on(\"scroll\" + NS, function(e) {\n                        var isScrollingLeft = this.scrollLeft != that._scrollLeft;\n                        that._scrollLeft = this.scrollLeft;\n                        kendo.scrollLeft(that.scrollables.not(e.currentTarget), that._scrollLeft);\n                        if (that.lockedContent && e.currentTarget == that.content[0]) {\n                            that.lockedContent[0].scrollTop = this.scrollTop;\n                        }\n                        if (endless) {\n                            if ((this.scrollTop + this.clientHeight - this.scrollHeight >= -10) &&\n                                !that._endlessFetchInProgress &&\n                                that._endlessPageSize < that.dataSource.total()) {\n                                that._skipRerenderItemsCount = that._endlessPageSize;\n                                that._endlessPageSize = that._endlessPageSize + originalPageSize;\n                                that.dataSource.options.endless = true;\n                                that._endlessFetchInProgress = true;\n                                that.dataSource.pageSize(that._endlessPageSize);\n                            }\n                        }\n\n                        if (virtualScroll && virtualScroll.columns && isScrollingLeft) {\n                              that._virtualColScroll = true;\n                              that._cacheEditableState();\n                              that.refresh();\n                              that._restoreEditableState();\n                              that._virtualColScroll = false;\n                        }\n                    });\n\n                    var touchScroller = that.content.data(\"kendoTouchScroller\");\n                    if (touchScroller) {\n                        touchScroller.destroy();\n                    }\n\n                    touchScroller = kendo.touchScroller(that.content);\n                    if (touchScroller && touchScroller.movable) {\n                        that.touchScroller = touchScroller;\n                        touchScroller.movable.bind(\"change\", function(e) {\n                            kendo.scrollLeft(that.scrollables, -e.sender.x);\n                            if (that.lockedContent) {\n                                that.lockedContent.scrollTop(-e.sender.y);\n                            }\n                        });\n\n                        that.one(DATABOUND, function(e) {\n                            e.sender.wrapper.addClass(\"k-grid-backface\");\n                        });\n                    }\n                }\n            }\n        },\n\n        _createVirtualScrollable: function() {\n            var that = this;\n\n            if (that.virtualScrollable) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = new VirtualScrollable(that.content, {\n                dataSource: that.dataSource,\n                itemHeight: function() { return that._averageRowHeight(); },\n                page: function() {\n                    that._restoreEditableState();\n                },\n                scroll: function() {\n                    that._focusEditable();\n                },\n                loadStart: function() {\n                    that._progress(true);\n                },\n                loadEnd: function() {\n                    that._progress(false);\n                }\n            });\n\n            that.virtualScrollable.bind(PAGING, that._onVirtualPaging.bind(that));\n        },\n\n        _onVirtualPaging: function() {\n            var that = this;\n\n            that._cacheEditableState();\n\n            if (that._isVirtualIncellEditable()) {\n                that._shouldClearEditableState = false;\n                that.closeCell();\n                that._shouldClearEditableState = true;\n            }\n        },\n\n        _isVirtualEditable: function() {\n            return this._isVirtualIncellEditable() || this._isVirtualInlineEditable() || this._isVirtualPopupEditable();\n        },\n\n        _isVirtualInlineEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INLINE;\n        },\n\n        _isVirtualIncellEditable: function() {\n            return (this.virtualScrollable) && this._editMode() === INCELL;\n        },\n\n        _isVirtualPopupEditable: function() {\n            return this.virtualScrollable && this._editMode() === \"popup\";\n        },\n\n        _hasVirtualColumns: function() {\n            return (this.virtualScroll || {}).columns ? true : false;\n        },\n\n        _scrollVirtualWrapper: function() {\n            var that = this;\n            var scrollable = that.virtualScrollable;\n\n            if (that._isVirtualInlineEditable() || that._isVirtualIncellEditable()) {\n                if (scrollable._isScrolledToBottom()) {\n                    scrollable._scrollWrapperToBottom();\n                } else if (scrollable._isScrolledToTop()) {\n                    scrollable._scrollWrapperToTop();\n                }\n            }\n        },\n\n        _scrollVirtualWrapperOnColumnResize: function() {\n            var virtualScrollable = this.virtualScrollable;\n\n            if (virtualScrollable) {\n                virtualScrollable._scrollWrapperOnColumnResize();\n            }\n        },\n\n        _restoreEditableState: function() {\n            var that = this;\n            var editableState = that._editableState || {};\n            var editedModel = editableState.model;\n            var dataSource = that.dataSource;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var row;\n            var cell;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel && dataSource._getByUid(editedModel.uid, dataSource.view())) {\n                if (that._editMode() === INLINE) {\n                    that._shouldClearEditableState = false;\n                    that.editRow(editedModel);\n                    if (!virtualColumns) {\n                        that._focusEditable();\n                    }\n                } else if (that._editMode() === INCELL) {\n                    row = that.tbody.children(attrEquals(UNIQUE_ID, editedModel.uid));\n                    cell = $(row).children(attrEquals(FIELD, editableState.field));\n\n                    if (cell[0]) {\n                        that._shouldClearEditableState = false;\n                        that.editCell(cell);\n                        if (!virtualColumns) {\n                            that._focusEditable();\n                        }\n                    }\n                }\n            }\n\n            that._shouldClearEditableState = true;\n        },\n\n        _focusEditable: function() {\n            var that = this;\n            var editedField = (that._editableState || {}).field;\n            var editContainer = that._editContainer;\n\n            if (editContainer && editContainer.length && !contains(editContainer[0], activeElement()) && that._canFocusEditable()) {\n                if (that._isVirtualInlineEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(attrEquals(CONTAINER_FOR, editedField)).find(FOCUSABLE).eq(0).trigger(\"focus\");\n                } else if (that._isVirtualIncellEditable() || that._hasVirtualColumns()) {\n                    editContainer.find(FOCUSABLE).eq(0).trigger(\"focus\");\n                }\n            }\n        },\n\n        _canFocusEditable: function() {\n            var that = this;\n            var result = ((that._isVirtualIncellEditable() || that._isVirtualInlineEditable() || that._hasVirtualColumns()) &&\n            (isElementVisibleInWrapper((that.virtualScrollable || {}).wrapper, that._editContainer) || isElementVisibleInWrapper(that.content, that._editContainer)));\n\n            return result;\n        },\n\n        _cacheEditableState: function() {\n            var that = this;\n            var editContainer = that._editContainer;\n            var editedModel = editContainer ? that._modelForContainer(editContainer) : null;\n            var inlineMode = that._isVirtualInlineEditable();\n            var incellMode = that._isVirtualIncellEditable();\n            var virtualColumns = that._hasVirtualColumns();\n            var active;\n            var widget;\n\n            if ((inlineMode || incellMode || virtualColumns) && editedModel) {\n                that._clearEditableState();\n                active = $(activeElement());\n\n                if (editContainer && active[0] && contains(editContainer[0], active[0])) {\n                    //change event is not fired if the editable container is scrolled\n                    //out of the virtual view with the mousewheel right after editing\n                    active.change();\n\n                    widget = kendo.widgetInstance(active, kendo.ui);\n\n                    if (widget && isFunction(widget.value) && active.is(INPUT)) {\n                        widget.value(active.val());\n                        widget.trigger(CHANGE);\n                    }\n                }\n\n                if (that._editMode() === INLINE) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: active.closest(\"[\" + kendo.attr(CONTAINER_FOR) + \"]\").attr(kendo.attr(CONTAINER_FOR))\n                    };\n                } else if (that._editMode() === INCELL) {\n                    that._editableState = {\n                        model: editedModel,\n                        field: editContainer.attr(kendo.attr(FIELD))\n                    };\n                }\n            }\n        },\n\n        _clearSortClasses: function() {\n            var that = this,\n                content = that.content || that.table,\n                lockedContent = that.lockedContent;\n\n            if (content) {\n                content.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n\n            if (lockedContent) {\n                lockedContent.find(COLGROUP).removeClass(SORTED_CLASS);\n            }\n        },\n\n        _clearEditableState: function() {\n            var that = this;\n\n            if (that.virtualScrollable || (that.virtualScroll && that._hasVirtualColumns())) {\n                that._editableState = null;\n            }\n        },\n\n        _destroyVirtualScrollable: function() {\n            var that = this;\n\n            that._clearEditableState();\n\n            if (that.virtualScrollable && that.virtualScrollable.element) {\n                that.virtualScrollable.destroy();\n            }\n\n            that.virtualScrollable = null;\n        },\n\n        _renderNoRecordsContent: function() {\n            var that = this;\n\n            if (that.options.noRecords) {\n                var noRecordsElement = that.table.parent().children('.' + NORECORDSCLASS);\n\n                if (noRecordsElement.length) {\n                    that.angular(\"cleanup\", function() {\n                        return { elements: noRecordsElement.get() };\n                    });\n\n                    noRecordsElement.remove();\n                }\n\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    noRecordsElement = $(that.noRecordsTemplate({})).insertAfter(that.table);\n\n                    that.angular(\"compile\", function() {\n                        return {\n                            elements: noRecordsElement.get(),\n                            data: [{}]\n                        };\n                    });\n                }\n            }\n        },\n\n        _setContentWidth: function(scrollLeft) {\n            var that = this,\n                hiddenDivClass = 'k-grid-content-expander',\n                hiddenDiv = '<div class=\"' + hiddenDivClass + '\"></div>',\n                resizable = that.resizable,\n                expander;\n\n            if (that.options.scrollable && that.wrapper.is(\":visible\")) {\n                expander = that.table.parent().children('.' + hiddenDivClass);\n                that._setContentWidthHandler = that._setContentWidth.bind(that);\n                if (!that.dataSource || !that.dataSource.view().length) {\n                    if (!expander[0]) {\n                        expander = $(hiddenDiv).appendTo(that.table.parent());\n                        if (resizable) {\n                            resizable.bind(\"resize\", that._setContentWidthHandler);\n                        }\n                    }\n                    if (that.thead) {\n                        expander.width(that.thead.width());\n                        if (!isNaN(parseFloat(scrollLeft, 10))) {\n                            kendo.scrollLeft(that.content, scrollLeft);\n                        }\n                    }\n                } else if (expander[0]) {\n                    expander.remove();\n                    if (resizable) {\n                        resizable.unbind(\"resize\", that._setContentWidthHandler);\n                    }\n                }\n\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n\n                // workaround IE does not show vertical scrollbar for elements without width\n                if (that.lockedHeader && that.table[0].clientWidth === 0) {\n                    that.table[0].style.width = \"1px\";\n                }\n            }\n        },\n\n        _applyLockedContainersWidth: function() {\n            if (this.options.scrollable && this.lockedHeader) {\n                var headerTable = this.thead.parent(),\n                    headerWrap = headerTable.parent(),\n                    contentWidth = this.wrapper[0].clientWidth,\n                    groups = this._groups(),\n                    scrollbar = kendo.support.scrollbar(),\n                    cols = this.lockedHeader.find(\">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    nonLockedCols = headerTable.find(\">colgroup>col:not(.k-group-col, .k-hierarchy-col)\"),\n                    width = columnsWidth(cols),\n                    nonLockedColsWidth = columnsWidth(nonLockedCols),\n                    footerWrap;\n\n                if (groups > 0) {\n                    width += outerWidth(this.lockedHeader.find(\".k-group-cell\").first()) * groups;\n                }\n\n                if (width >= contentWidth) {\n                    width = contentWidth - 3 * scrollbar;\n                }\n\n                this.lockedHeader\n                    .add(this.lockedContent)\n                    .width(width);\n\n                headerWrap[0].style.width = headerWrap.parent().width() - width - 2 + \"px\";\n\n                headerTable.add(this.table).width(nonLockedColsWidth);\n\n                //https://github.com/telerik/kendo-ui-core/issues/377\n                if (this.virtualScrollable && !isIE11) {\n                    contentWidth -= scrollbar;\n                }\n\n                this.content[0].style.width = contentWidth - width - 1 + \"px\";\n\n                if (this.lockedFooter && this.lockedFooter.length) {\n                    this.lockedFooter.width(width);\n                    footerWrap = this.footer.find(\".k-grid-footer-wrap\");\n                    footerWrap[0].style.width = headerWrap[0].clientWidth + \"px\";\n                    footerWrap.children().first().width(nonLockedColsWidth);\n                }\n            }\n        },\n\n        _setContentHeight: function() {\n            var that = this,\n                options = that.options,\n                height,\n                header = that.wrapper.children(\".k-grid-header\"),\n                scrollbar = kendo.support.scrollbar();\n            var scrollableHeight = (options.scrollable || {}).height;\n\n            if (options.scrollable && that.wrapper.is(\":visible\")) {\n                if (scrollableHeight && that.content[0].style.height === \"\") {\n                    // fallback to client-side setting as ASP.NET MVC Core wrapper does not provide server rendering of the content\n                    that.content[0].style.height = scrollableHeight;\n                }\n\n                height = that.wrapper.innerHeight();\n\n                height -= outerHeight(header);\n\n                if (that.pager && that.pager.element.is(\":visible\")) {\n                    height -= outerHeight(that.pager.element);\n                }\n\n                if (options.groupable) {\n                    height -= outerHeight(that.wrapper.children(\".k-grouping-header\"));\n                }\n\n                if (options.toolbar) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-toolbar\"));\n                }\n\n                if (that.footerTemplate) {\n                    height -= outerHeight(that.wrapper.children(\".k-grid-footer\"));\n                }\n\n                var isGridHeightSet = function(el) {\n                    var initialHeight, newHeight;\n                    if (el[0].style.height) {\n                        return true;\n                    } else {\n                        initialHeight = el.height();\n                    }\n\n                    el.height(\"auto\");\n                    newHeight = el.height();\n\n                    if (initialHeight != newHeight) {\n                        el.height(\"\");\n                        return true;\n                    }\n                    el.height(\"\");\n                    return false;\n                };\n\n                if (isGridHeightSet(that.wrapper)) { // set content height only if needed\n                    if (height > scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                        if (that.lockedContent) {\n                            scrollbar = that.table[0].offsetWidth > that.table.parent()[0].clientWidth ? scrollbar : 0;\n                            that.lockedContent.height(height - scrollbar);\n                        }\n\n                        that.content.height(height);\n                    } else {\n                        that.content.height(scrollbar * 2 + 1);\n                    }\n                }\n            }\n        },\n\n        _averageRowHeight: function() {\n            var that = this,\n                itemsCount = that._items(that.tbody, true).length,\n                rowHeight = that._rowHeight;\n\n            if (itemsCount === 0) {\n                return rowHeight;\n            }\n\n            if (!that._rowHeight) {\n                that._rowHeight = rowHeight = outerHeight(that.table) / itemsCount;\n                that._sum = rowHeight;\n                that._measures = 1;\n            }\n\n            var currentRowHeight = outerHeight(that.table) / itemsCount;\n\n            if (rowHeight !== currentRowHeight) {\n                that._measures ++;\n                that._sum += currentRowHeight;\n                that._rowHeight = that._sum / that._measures;\n            }\n            return rowHeight;\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                pageable,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (isPlainObject(dataSource)) {\n                extend(dataSource, { table: that.table, fields: that.columns });\n\n                pageable = options.pageable;\n\n                if (isPlainObject(pageable) && pageable.pageSize !== undefined$1) {\n                    dataSource.pageSize = pageable.pageSize;\n                }\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                                .unbind(PROGRESS, that._progressHandler)\n                                .unbind(ERROR, that._errorHandler)\n                                .unbind(SORT, that._sortHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n                that._sortHandler = that._clearSortClasses.bind(that);\n            }\n\n            that.dataSource = DataSource.create(dataSource)\n                                .bind(CHANGE, that._refreshHandler)\n                                .bind(PROGRESS, that._progressHandler)\n                                .bind(ERROR, that._errorHandler)\n                                .bind(SORT, that._sortHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _modelChange: function(e) {\n            var that = this,\n                tbody = that.tbody,\n                model = e.model,\n                row = that.tbody.find(\"tr[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\"),\n                relatedRow,\n                cell,\n                column,\n                isAlt = row.hasClass(\"k-alt\"),\n                tmp,\n                idx = that._items(tbody).index(row),\n                isLocked = that.lockedContent,\n                selectable,\n                selectableRow,\n                childCells,\n                originalCells,\n                length;\n\n            if (isLocked) {\n                relatedRow = that._relatedRow(row);\n            }\n\n            if (row.add(relatedRow).children(\".k-edit-cell\").length && !that.options.rowTemplate) {\n                row.add(relatedRow).children(\":not(.k-group-cell,.k-hierarchy-cell)\").each(function() {\n                    cell = $(this);\n                    column = leafColumns(that.columns)[that._calculateColumnIndex(cell)];\n\n                    if (column.field === e.field) {\n                        if (!cell.hasClass(\"k-edit-cell\")) {\n                            that._displayCell(cell, column, model);\n                        } else {\n                            cell.addClass(\"k-dirty-cell\");\n                        }\n                    }\n                });\n\n            } else if (!row.hasClass(\"k-grid-edit-row\")) {\n\n                selectableRow = $().add(row);\n\n                if (isLocked) {\n                    tmp = (isAlt ? that.lockedAltRowTemplate : that.lockedRowTemplate)(model);\n\n                    selectableRow = selectableRow.add(relatedRow);\n\n                    relatedRow.replaceWith(tmp);\n                }\n\n                that.angular(\"cleanup\", function() { return { elements: selectableRow.get() }; });\n\n                tmp = (isAlt ? that.altRowTemplate : that.rowTemplate)(model);\n\n                row.replaceWith(tmp);\n\n                tmp = that._items(tbody).eq(idx);\n\n                var angularData = [ { dataItem: model } ];\n\n                if (isLocked) {\n                    row = row.add(relatedRow);\n\n                    relatedRow = that._relatedRow(tmp)[0];\n                    adjustRowHeight(tmp[0], relatedRow);\n\n                    tmp = tmp.add(relatedRow);\n                    angularData.push({ dataItem: model });\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: tmp.get(),\n                        data: angularData\n                     };\n                });\n\n                selectable = that.options.selectable;\n                if ((selectable || that._checkBoxSelection) && row.hasClass(\"k-selected\")) {\n                   that.select(tmp);\n                }\n\n                originalCells = selectableRow.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n                childCells = tmp.children(\":not(.k-group-cell,.k-hierarchy-cell)\");\n\n                for (idx = 0, length = that.columns.length; idx < length; idx++) {\n                    column = that.columns[idx];\n\n                    cell = childCells.eq(idx);\n                    if (selectable && originalCells.eq(idx).hasClass(\"k-selected\")) {\n                        cell.addClass(\"k-selected\");\n                    }\n                }\n\n                that.trigger(\"itemChange\", { item: tmp, data: model, ns: ui });\n            }\n        },\n\n        _pageable: function() {\n            var that = this,\n                pagerWrap,\n                pageable = that.options.pageable,\n                navigatable = that.options.navigatable;\n\n            if (pageable) {\n                pagerWrap = that.wrapper.children(\"div.k-grid-pager\");\n\n                if (!pagerWrap.length) {\n                    pagerWrap = $('<div class=\"k-pager-wrap k-grid-pager\"/>');\n                }\n\n                if (pageable.position === \"top\") {\n                    pagerWrap.prependTo(that.wrapper).addClass(\"k-grid-pager-top\");\n                } else {\n                    pagerWrap.appendTo(that.wrapper);\n                }\n\n                if (that.pager) {\n                    that.pager.destroy();\n                }\n\n                if (typeof pageable === \"object\" && pageable instanceof kendo.ui.Pager) {\n                    that.pager = pageable;\n                } else {\n                    if (that.dataSource._groupPaging) {\n                        that.pager = new GroupsPager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable }));\n                    } else {\n                        that.pager = new kendo.ui.Pager(pagerWrap, extend({}, pageable, { dataSource: that.dataSource, navigatable: navigatable }));\n                    }\n                }\n\n                that.pager.bind(\"pageChange\", function(e) {\n                    if (that.trigger(\"page\", { page: e.index })) {\n                        e.preventDefault();\n                    }\n                });\n\n                that._togglePagerVisibility();\n            }\n        },\n\n        _footer: function() {\n            var that = this,\n                aggregates = that.dataSource.aggregates(),\n                html = \"\",\n                footerTemplate = that.footerTemplate,\n                options = that.options,\n                footerWrap,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\");\n\n            if (footerTemplate) {\n                html = $(that._wrapFooter(footerTemplate(aggregates)));\n\n                if (footer.length) {\n                    var tmp = html;\n\n                    that.angular(\"cleanup\", function() {\n                        return { elements: footer.get() };\n                    });\n\n                    footer.replaceWith(tmp);\n                    footer = that.footer = tmp;\n                } else {\n                    if (options.scrollable) {\n                        footer = that.footer = options.pageable && options.pageable.position !== \"top\" ? html.insertBefore(that.wrapper.children(\"div.k-grid-pager\")) : html.appendTo(that.wrapper);\n                    } else {\n                        footer = that.footer = html.insertAfter(that.tbody);\n                    }\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: footer.find(\"td:not(.k-group-cell, .k-hierarchy-cell)\").get(),\n                        data: map(that.columns, function(col) {\n                            return {\n                                column: col,\n                                aggregate: aggregates[col.field]\n                            };\n                        })\n                    };\n                });\n\n            } else if (footer && !that.footer) {\n                that.footer = footer;\n            }\n\n            if (footer.length) {\n                if (options.scrollable) {\n                    footerWrap = footer.attr(TABINDEX, -1).children(\".k-grid-footer-wrap\");\n\n                    that.scrollables = $(\n                        that.scrollables\n                            .filter(function() { return !$(this).is(\".k-grid-footer-wrap\"); })\n                            .toArray()\n                    ).add(footerWrap);\n                }\n\n                if (that._footerWidth) {\n                    footer.find(\"table\").css('width', that._footerWidth);\n                }\n\n                if (footerWrap) {\n                    var offset = kendo.scrollLeft(that.content);\n\n                    if (options.scrollable !== true && that.virtualScroll && that.virtualScroll.rows) {\n                        offset = kendo.scrollLeft(that.wrapper.find('.k-virtual-scrollable-wrap'));\n                    }\n                    kendo.scrollLeft(footerWrap, offset);\n                }\n            }\n\n            if (that.lockedContent) {\n                that._appendLockedColumnFooter();\n                that._applyLockedContainersWidth();\n                that._syncLockedFooterHeight();\n            }\n        },\n\n        _wrapFooter: function(footerRow) {\n            var that = this,\n                html = \"\",\n                scrollbar = !kendo.support.mobileOS ? kendo.support.scrollbar() : 0;\n\n            if (that.options.scrollable) {\n                html = $('<div class=\"k-grid-footer\"><div class=\"k-grid-footer-wrap\"><table><tfoot>' + footerRow + '</tfoot></table></div></div>');\n                that._appendCols(html.find(\"table\"));\n                html.css((isRtl ? \"padding-left\" : \"padding-right\"), scrollbar); // Update inner fix.\n\n                return html;\n            }\n\n            return '<tfoot class=\"k-grid-footer\">' + footerRow + '</tfoot>';\n        },\n\n        _columnMenu: function() {\n            var that = this,\n                menu,\n                columns = leafColumns(that.columns),\n                column,\n                options = that.options,\n                columnMenu = options.columnMenu,\n                menuOptions,\n                sortable,\n                filterable,\n                cells,\n                hasMultiColumnHeaders = grep(that.columns, function(item) {\n                    return item.columns !== undefined$1;\n                }).length > 0,\n                hasLockableColumns = grep(that.columns, function(item) {\n                    return item.lockable !== false;\n                }).length > 0,\n                hasStickableColumns = grep(that.columns, function(item) {\n                    return item.stickable === true;\n                }).length > 0,\n                isMobile = this._isMobile,\n                initCallback = function(e) {\n                    that.trigger(COLUMNMENUINIT, { field: e.field, container: e.container });\n                },\n                openCallback = function(e) {\n                    that.trigger(COLUMNMENUOPEN, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                stickCallback = function(e) {\n                    that.trigger(COLUMNSTICK, { column: e.column });\n                },\n                unstickCallback = function(e) {\n                    that.trigger(COLUMNUNSTICK, { column: e.column });\n                },\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                $angular = options.$angular;\n\n            if (columnMenu) {\n                if (typeof columnMenu == \"boolean\") {\n                    columnMenu = {};\n                }\n\n                that._setColumnsMediaVisibility(columns);\n\n                cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n                    var cell = cells.eq(idx);\n\n                    if (column.columnMenu !== false && !column.command && (column.field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        menu = cell.data(\"kendoColumnMenu\");\n                        if (menu) {\n                            menu.destroy();\n                        }\n\n                        sortable = column.sortable !== false && columnMenu.sortable !== false && options.sortable !== false ? extend({}, options.sortable, {\n                            compare: (column.sortable || {}).compare\n                        }) : false;\n\n                        filterable = options.filterable && column.filterable !== false && columnMenu.filterable !== false ? extend({ pane: that.pane }, options.filterable, column.filterable) : false;\n\n                        if (column.filterable && column.filterable.dataSource) {\n                            filterable.forceUnique = false;\n                            filterable.checkSource = column.filterable.dataSource;\n                        }\n\n                        if (filterable) {\n                            filterable.format = column.format;\n                        }\n\n                        menuOptions = {\n                            dataSource: that.dataSource,\n                            values: column.values,\n                            columns: columnMenu.columns,\n                            sortable: sortable,\n                            filterable: filterable,\n                            messages: columnMenu.messages,\n                            owner: that,\n                            closeCallback: closeCallback,\n                            init: initCallback,\n                            open: openCallback,\n                            stick: stickCallback,\n                            unstick: unstickCallback,\n                            pane: that.pane,\n                            sort: sortHandler,\n                            filtering: filterHandler,\n                            filter: isMobile ? \":not(.k-column-active)\" : \"\",\n                            hasLockableColumns: lockedColumns(columns).length > 0 && hasLockableColumns && !hasMultiColumnHeaders,\n                            hasStickableColumns: hasStickableColumns && !hasMultiColumnHeaders,\n                            encodeTitles: that.options.encodeTitles,\n                            componentType: columnMenu.componentType,\n                            appendTo: DOT + classNames.headerCellInner\n                        };\n\n                        if ($angular) {\n                            menuOptions.$angular = $angular;\n                        }\n\n                        cell.kendoColumnMenu(menuOptions);\n                    }\n                }\n            }\n        },\n\n        _headerCells: function() {\n            return $(this.thead).find(\"th\").filter(function() {\n                var th = $(this);\n                return !th.hasClass(\"k-group-cell\") && !th.hasClass(\"k-hierarchy-cell\");\n            });\n        },\n\n        _hasFilterMenu: function() {\n            var filterable = this.options.filterable;\n            if (filterable && typeof filterable.mode == STRING && filterable.mode.indexOf(\"menu\") == -1) {\n                return false;\n            }\n\n            return filterable;\n        },\n\n        _filterable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                filterMenu,\n                cells,\n                cell,\n                filterInit = function(e) {\n                    that.trigger(FILTERMENUINIT, { field: e.field, container: e.container });\n                },\n                closeCallback = function() {\n                    focusTable(that.table, true);\n                },\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                },\n                filterOpen = function(e) {\n                    that.trigger(FILTERMENUOPEN, { field: e.field, container: e.container });\n                },\n                filterable = that._hasFilterMenu();\n\n            if (filterable && !that.options.columnMenu) {\n                cells = leafDataCells(that.thead);//that._headerCells();\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    cell = cells.eq(idx);\n\n                    if (columns[idx].filterable !== false && !columns[idx].command && (columns[idx].field || cell.attr(\"data-\" + kendo.ns + \"field\"))) {\n                        filterMenu = cell.data(\"kendoFilterMenu\");\n\n                        if (filterMenu) {\n                            filterMenu.destroy();\n                        }\n\n                        filterMenu = cell.data(\"kendoFilterMultiCheck\");\n                        if (filterMenu) {\n                           filterMenu.destroy();\n                        }\n\n                        var columnFilterable = columns[idx].filterable;\n\n                        var options = extend({},\n                            filterable,\n                            columnFilterable,\n                            {\n                                dataSource: that.dataSource,\n                                values: columns[idx].values,\n                                format: columns[idx].format,\n                                closeCallback: closeCallback,\n                                title: columns[idx].title || columns[idx].field,\n                                init: filterInit,\n                                open: filterOpen,\n                                pane: that.pane,\n                                change: filterHandler,\n                                appendTo: DOT + classNames.headerCellInner\n                            }\n                        );\n\n                        if (columnFilterable && columnFilterable.messages) {\n                            options.messages = extend(true, {}, filterable.messages, columnFilterable.messages);\n                        }\n                        if (columnFilterable && columnFilterable.dataSource) {\n                            options.forceUnique = false;\n                            options.checkSource = columnFilterable.dataSource;\n                        }\n\n                        if (columnFilterable && columnFilterable.multi) {\n                            cell.kendoFilterMultiCheck(options);\n                        } else {\n                            cell.kendoFilterMenu(options);\n                        }\n                    }\n                }\n            }\n        },\n\n        _filterRow: function() {\n            var that = this;\n            if (!that._hasFilterRow()) {\n               return;\n            }\n\n            var settings;\n            var $angular = that.options.$angular;\n            var columns = leafColumns(that.columns),\n                filterable = that.options.filterable,\n                rowheader = that.thead.find(\".k-filter-row\"),\n                filterHandler = function(e) {\n                    if (that.trigger(\"filter\", { filter: e.filter, field: e.field })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                        if (that.dataSource.options.endless) {\n                            that._resetEndless();\n                        }\n                    }\n                };\n\n\n            this._updateHeader(that._groups());\n\n            for (var i = 0; i < columns.length; i++) {\n                var suggestDataSource,\n                    col = columns[i],\n                    operators = that.options.filterable.operators,\n                    customDataSource = false,\n                    td = $(\"<td title='\" + that.options.messages.filterCellTitle + \"'/>\"),\n                    field = col.field;\n\n                if (col.hidden) {\n                    td.hide();\n                }\n                rowheader.append(td);\n                if (field && col.filterable !== false) {\n                    var cellOptions = col.filterable && col.filterable.cell || {};\n\n                    suggestDataSource = that.options.dataSource;\n                    if (suggestDataSource instanceof DataSource) {\n                        suggestDataSource = that.options.dataSource.options;\n                    }\n\n                    var messages = extend(true, {}, filterable.messages);\n                    if (col.filterable) {\n                        extend(true, messages, col.filterable.messages);\n                    }\n\n                    if (cellOptions.enabled === false) {\n                        td.html(\"&nbsp;\");\n                        continue;\n                    }\n                    if (cellOptions.dataSource) {\n                        suggestDataSource = cellOptions.dataSource;\n                        customDataSource = true;\n                    }\n                    if (col.filterable && col.filterable.operators) {\n                        operators = col.filterable.operators;\n                    }\n\n                    settings = {\n                        column: col,\n                        dataSource: that.dataSource,\n                        suggestDataSource: suggestDataSource,\n                        customDataSource: customDataSource,\n                        field: field,\n                        messages: messages,\n                        values: col.values,\n                        template: cellOptions.template,\n                        delay: cellOptions.delay,\n                        inputWidth: cellOptions.inputWidth,\n                        suggestionOperator: cellOptions.suggestionOperator,\n                        minLength: cellOptions.minLength,\n                        dataTextField: cellOptions.dataTextField,\n                        operator: cellOptions.operator,\n                        operators: operators,\n                        showOperators: cellOptions.showOperators,\n                        change: filterHandler\n                    };\n\n                    if ($angular) {\n                        settings.$angular = $angular;\n                    }\n\n                    $(\"<span/>\").attr(kendo.attr(\"field\"), field)\n                        .appendTo(td)\n                        .kendoFilterCell(settings);\n                } else {\n                    td.html(\"&nbsp;\");\n                }\n                td.data(\"column\", col);\n            }\n\n            this._filterFocusable().attr(TABINDEX, -1);\n        },\n\n        _sortable: function() {\n            var that = this,\n                columns = leafColumns(that.columns),\n                column,\n                sorterInstance,\n                cell,\n                sortable = that.options.sortable,\n                sortHandler = function(e) {\n                    if (that.trigger(\"sort\", { sort: e.sort })) {\n                        e.preventDefault();\n                    } else {\n                        that._clearEditableState();\n                    }\n                };\n\n\n            if (sortable) {\n                var cells = leafDataCells(that.thead);\n\n                for (var idx = 0, length = cells.length; idx < length; idx++) {\n                    column = columns[idx];\n\n                    if (column.sortable !== false && !column.command && column.field) {\n                        cell = cells.eq(idx);\n\n                        sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                        if (sorterInstance) {\n                            sorterInstance.destroy();\n                        }\n\n                        cell.attr(\"data-\" + kendo.ns + \"field\", column.field)\n                            .kendoColumnSorter(\n                                extend({}, sortable, column.sortable, {\n                                    dataSource: that.dataSource,\n                                    aria: true,\n                                    filter: \":not(.k-column-active)\",\n                                    change: sortHandler\n                                })\n                            );\n                    }\n                }\n                cells = null;\n            }\n        },\n\n        _columns: function(columns) {\n            var that = this,\n                table = that.table,\n                encoded,\n                cols = table.find(\"col\"),\n                lockedCols,\n                headerRows = that.element.find('thead tr'),\n                dataSource = that.options.dataSource,\n                draggableColumns;\n\n            // using HTML5 data attributes as a configuration option e.g. <th data-field=\"foo\">Foo</foo>\n            columns = columns.length ? columns : map(table.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\"), function(th, idx) {\n                th = $(th);\n                var sortable = th.attr(kendo.attr(\"sortable\")),\n                    filterable = th.attr(kendo.attr(\"filterable\")),\n                    type = th.attr(kendo.attr(\"type\")),\n                    groupable = th.attr(kendo.attr(\"groupable\")),\n                    field = th.attr(kendo.attr(\"field\")),\n                    title = th.attr(kendo.attr(\"title\")),\n                    columnMenu = th.attr(kendo.attr(\"column-menu\")),\n                    menu = th.attr(kendo.attr(\"menu\"));\n\n                if (!field) {\n                   field = th.text().replace(/\\s|[^A-z0-9]/g, \"\");\n                }\n\n                return {\n                    field: field,\n                    type: type,\n                    title: title,\n                    sortable: sortable !== \"false\",\n                    filterable: filterable !== \"false\",\n                    groupable: groupable !== \"false\",\n                    menu: menu !== \"false\",\n                    columnMenu: columnMenu !== \"false\",\n                    template: th.attr(kendo.attr(\"template\")),\n                    width: cols.eq(idx).css(\"width\")\n                };\n            });\n\n            encoded = !(that.table.find(\"tbody tr\").length > 0 && (!dataSource || !dataSource.transport));\n\n            if (that.options.scrollable) {\n                var initialColumns = columns;\n                lockedCols = lockedColumns(columns);\n                columns = nonLockedColumns(columns);\n\n                if (lockedCols.length > 0 && columns.length === 0) {\n                    throw new Error(\"There should be at least one non locked column\");\n                }\n\n                normalizeHeaderCells(that.element.find(\"tr:has(th)\").first(), initialColumns);\n                columns = lockedCols.concat(columns);\n            }\n\n            if (headerRows.length && columns.length) {\n                that._updateColumnIDs(columns, headerRows.first());\n            }\n\n            that.columns = normalizeColumns(columns, encoded);\n\n            if ($.grep(leafColumns(that.columns), function(col) { return col.selectable;}).length) {\n                that._selectedIds = {};\n                that._checkBoxSelection = true;\n                that.wrapper.on(CLICK + NS, \"tbody > tr \" + CHECKBOXINPUT, that._checkboxClick.bind(that));\n                that.wrapper.on(CLICK + NS, \"thead > tr \" + CHECKBOXINPUT, that._headerCheckboxClick.bind(that));\n            }\n\n            draggableColumns = $.grep(leafColumns(that.columns), function(col) { return col.draggable;});\n\n            if (draggableColumns.length) {\n                that._hasDragHandleColumn = true;\n\n                for (var i = 0; i < draggableColumns.length; i++) {\n                    draggableColumns[i].headerAttributes = $.extend({\n                        \"aria-label\": that.options.messages.dragHandleLabel\n                    }, draggableColumns[i].headerAttributes);\n                }\n            }\n\n            that._foreignKeyBindings(that.columns);\n        },\n\n        _foreignKeyBindings: function(columns) {\n            var that = this;\n            var length = columns.length;\n            var column;\n\n            for (var i = 0; i < length; i++) {\n                column = columns[i];\n\n                if (column.dataSource) {\n                    that._fetchForeignKeyValues(column);\n                }\n            }\n        },\n\n        _fetchForeignKeyValues: function(column) {\n            var that = this;\n            var promise = $.Deferred();\n\n            that._hasBoundForeignKey = true;\n            column.dataSource = DataSource.create(column.dataSource);\n\n            if (!that._foreignKeyPromises) {\n                that._foreignKeyPromises = [];\n            }\n\n            that._foreignKeyPromises.push(promise);\n            column.dataSource.fetch().then(function() {\n                var data = column.dataSource.data();\n                column.values = data.map(function(item) {\n                    return {\n                        value: item[column.dataValueField],\n                        text: item[column.dataTextField]\n                    };\n                });\n                promise.resolve();\n            });\n\n        },\n\n        _updateColumnIDs: function(columns, tr) {\n\n            if (!columns.length) {\n                return;\n            }\n\n            var ths = tr.find(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\");\n            var id;\n            for (var i = 0; i < columns.length; i++) {\n                id = ths.eq(i).attr(ID);\n                if (id) {\n                    columns[i].headerAttributes = extend(columns[i].headerAttributes, { id: id });\n                }\n            }\n\n            this._updateColumnIDs(childColumns(columns), tr.next());\n        },\n\n        _headerCheckboxClick: function(e) {\n            var that = this,\n                checkBox = $(e.target),\n                checked = checkBox.prop(\"checked\");\n\n            if (!that._belongsToGrid(checkBox)) {\n                return;\n            }\n\n            if (checked) {\n                that.select(that.items());\n            } else {\n                that.clearSelection();\n            }\n\n            that.trigger(CHANGE);\n        },\n\n        _checkboxClick: function(e) {\n            var that = this,\n                row = $(e.target).closest(\"tr\"),\n                isSelecting = !row.hasClass(SELECTED);\n\n            if (!that._belongsToGrid(row)) {\n                return;\n            }\n\n            if (isSelecting) {\n                that.select(row);\n            } else {\n                that._deselectCheckRows(row);\n            }\n            that.trigger(CHANGE);\n        },\n\n        _groups: function() {\n            var group = this.dataSource.group();\n\n            return group ? group.length : 0;\n        },\n\n        _tmpl: function(rowTemplate, columns, alt, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                idx,\n                length = columns.length,\n                template,\n                state = { storage: {}, count: 0 },\n                column,\n                type,\n                hasDetails = that._hasDetails(),\n                className = [],\n                groups = that._groups();\n\n            var fieldAttr = kendo.attr(\"field\");\n            var field;\n            var dirtyCellTemplate = \"\";\n            var classAttribute;\n\n            if (!rowTemplate) {\n                rowTemplate = \"<tr\";\n\n                if (alt) {\n                    className.push(\"k-alt\");\n                }\n\n                className.push(\"k-master-row\");\n\n                if (className.length) {\n                    rowTemplate += ' class=\"' + className.join(\" \") + '\"';\n                }\n\n                if (length) { // data item is an object\n                    rowTemplate += ' ' + kendo.attr(\"uid\") + '=\"#=' + kendo.expr(\"uid\", settings.paramName) + '#\"';\n                }\n\n                rowTemplate += \">\";\n\n                if (groups > 0 && !skipGroupCells) {\n                    rowTemplate += groupCells(groups);\n                }\n\n                if (hasDetails) {\n                    rowTemplate += '<td class=\"k-hierarchy-cell\" aria-expanded=\"false\"><a class=\"k-icon k-i-expand\" href=\"\\\\#\" ' + ARIA_LABEL + '=\"' + EXPAND + '\" tabindex=\"-1\"></a></td>';\n                }\n\n                for (idx = 0; idx < length; idx++) {\n                    column = columns[idx];\n                    template = column.template;\n                    type = typeof template;\n                    field = column.field;\n\n                    if (that._editMode() === INCELL && field) {\n                        column.attributes = column.attributes || {};\n\n                        if (that.virtualScroll) {\n                            column.attributes[fieldAttr] = field;\n                        }\n\n                        dirtyCellTemplate = that._dirtyCellTemplate(field, paramName);\n                        column.attributes[\"class\"] = (column.attributes[\"class\"] || \"\");\n\n                        if (column.attributes[\"class\"].indexOf(dirtyCellTemplate) < 0) {\n                            column.attributes[\"class\"] += dirtyCellTemplate;\n                        }\n                    }\n\n                    if (column.colSpan && column.colSpan > 0 && hasHiddenStyle(column.attributes)) { //virtual cell should be visible at all times\n                        column.attributes = removeHiddenStyle(column.attributes);\n                    } else if (!column.colSpan && column.hidden) {\n                        column.attributes = addHiddenStyle(column.attributes);\n                    }\n\n                    if (column.command) {\n                        column.attributes = column.attributes || {};\n                        classAttribute = column.attributes[\"class\"];\n\n                        if (typeof classAttribute !== \"undefined\") {\n                            if (classAttribute.indexOf(\"k-command-cell\") < 0) {\n                                column.attributes[\"class\"] += \" k-command-cell\";\n                            }\n                        } else {\n                            column.attributes[\"class\"] = \"k-command-cell\";\n                        }\n                    }\n\n                    if (column.draggable) {\n                        column.attributes = column.attributes || {};\n\n                        if (typeof column.attributes[\"class\"] !== \"undefined\") {\n                            column.attributes[\"class\"] += \" k-drag-cell k-touch-action-none\";\n                        } else {\n                            column.attributes[\"class\"] = \"k-drag-cell k-touch-action-none\";\n                        }\n\n                        if (typeof column.attributes[ARIA_LABEL] === \"undefined\") {\n                            column.attributes[ARIA_LABEL] = that.options.messages.dragHandleLabel;\n                        }\n\n                        if (typeof column.attributes.style !== \"undefined\") {\n                            column.attributes.style += \" cursor: move;\";\n                        } else {\n                            column.attributes.style = \"cursor: move;\";\n                        }\n                    }\n\n                    rowTemplate += \"<td\" + stringifyAttributes(column.attributes);\n\n                    if (column.colSpan) {\n                        if (column.colSpan > 1) {\n                            rowTemplate += \" \" + kendo.attr(\"virtual\");\n                        }\n                        rowTemplate += \" colSpan='\" + column.colSpan + \"'\";\n                    }\n\n                    rowTemplate += \">\";\n                    rowTemplate += that._cellTmpl(column, state);\n\n                    rowTemplate += \"</td>\";\n                }\n\n                rowTemplate += \"</tr>\";\n            }\n\n            rowTemplate = kendo.template(rowTemplate, settings);\n\n            if (state.count > 0) {\n                return rowTemplate.bind(state.storage);\n            }\n\n            return rowTemplate;\n        },\n\n        _dirtyCellTemplate: function(field, paramName) {\n            var dirtyField;\n\n            if (field && paramName) {\n                dirtyField = field.charAt(0) === \"[\" ? kendo.expr(field, paramName + \".dirtyFields\") : paramName + \".dirtyFields['\" + field + \"']\";\n\n                return \"#= \" + paramName + \" && \" + paramName + \".dirty && \" + paramName + \".dirtyFields && \" + dirtyField + \" ? ' k-dirty-cell' : '' #\";\n            }\n\n            return \"\";\n        },\n\n        _headerCellText: function(column) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.headerTemplate,\n                type = typeof(template),\n                text = column.title && (that.options.encodeTitles ? htmlEncode(column.title) : column.title) || column.field || \"\";\n\n            if (type === FUNCTION) {\n                text = kendo.template(template, settings)({});\n            } else if (type === STRING) {\n                text = template;\n            }\n            return text;\n        },\n\n        _cellTmpl: function(column, state) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                template = column.template,\n                paramName = settings.paramName,\n                field = column.field,\n                html = \"\",\n                idx,\n                length,\n                format = column.format,\n                type = typeof template,\n                columnValues = column.values;\n\n            if (column.command) {\n                if (isArray(column.command)) {\n                    for (idx = 0, length = column.command.length; idx < length; idx++) {\n                        if (column.command[idx].visible) {\n                            html += kendo.format(\"#= {0}(data)? '{1}':'' #\",column.command[idx].visible, that._createButton(column.command[idx]).replace(templateHashRegExp, \"\\\\#\").replace(/'/ig,\"\\\\'\"));\n                        } else {\n                            html += that._createButton(column.command[idx]).replace(templateHashRegExp, \"\\\\#\");\n                        }\n                    }\n                    return html;\n                }\n                return that._createButton(column.command).replace(templateHashRegExp, \"\\\\#\");\n            }\n\n            if (column.selectable) {\n                return SELECTCOLUMNTMPL;\n            }\n\n            if (column.draggable) {\n                return DRAGHANDLECOLUMNTMPL;\n            }\n\n            html += that._dirtyIndicatorTemplate(field, paramName);\n\n            if (type === FUNCTION) {\n                state.storage[\"tmpl\" + state.count] = template;\n                html += \"#=this.tmpl\" + state.count + \"(\" + paramName + \")#\";\n                state.count ++;\n            } else if (type === STRING) {\n                html += template;\n            } else if (columnValues && columnValues.length && isPlainObject(columnValues[0]) && \"value\" in columnValues[0] && field) {\n                html += \"#var v =\" + kendo.stringify(convertToObject(columnValues)).replace(templateHashRegExp, \"\\\\#\") + \"#\";\n                html += \"#var f = v[\";\n\n                if (!settings.useWithBlock) {\n                    html += paramName + \".\";\n                }\n\n                html += field + \"]#\";\n                html += \"${f != null ? f : ''}\";\n            } else {\n                html += column.encoded ? \"#:\" : \"#=\";\n\n                if (format) {\n                    html += 'kendo.format(\\\"' + format.replace(formatRegExp,\"\\\\$1\") + '\\\",';\n                }\n\n                if (field) {\n                    field = kendo.expr(field, paramName);\n                    html += field + \"==null?'':\" + field;\n                } else {\n                    html += \"''\";\n                }\n\n                if (format) {\n                    html += \")\";\n                }\n\n                html += \"#\";\n            }\n            return html;\n        },\n\n        _dirtyIndicatorTemplate: function(field, paramName) {\n            var dirtyField;\n\n            if (field && paramName) {\n                dirtyField = field.charAt(0) === \"[\" ? kendo.expr(field, paramName + \".dirtyFields\") : paramName + \".dirtyFields['\" + field + \"']\";\n\n                return \"#= \" + paramName + \" && \" + paramName + \".dirty && \" + paramName + \".dirtyFields && \" + dirtyField +\n                    \" ? '<span class=\\\"k-dirty\\\"></span>' : '' #\";\n            }\n\n            return \"\";\n        },\n\n        _virtualCols: function(columns) {\n            var that = this;\n            var widths = $.map(columns, function(c) { return c.hidden ? 0 : parseInt(c.width, 10); });\n            var scrollLeft = that.virtualScrollable ? kendo.scrollLeft(that.content.find(\">.k-virtual-scrollable-wrap\")) : kendo.scrollLeft(that.content);\n            var tableWidth = outerWidth(that.content);\n            var sumOfWidths = sumWidths(columns);\n            var colsToRender = [];\n            var firstColspan = 0;\n            var lastColspan = 0;\n            var hiddenColumns = 0;\n            var idx = 0;\n            var widthOfHiddenColumns = 0;\n            var considerNext;\n\n            for (idx = 0; idx < columns.length; idx++) {\n                considerNext = (idx < widths.length - 1) ? widths[idx + 1] : 0;\n                if (widthOfHiddenColumns + widths[idx] + 2 * considerNext < scrollLeft) {\n                    if (widths[idx]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[idx];\n                } else {\n                    firstColspan = 1 + hiddenColumns;\n                    break;\n                }\n            }\n\n            hiddenColumns = 0;\n            widthOfHiddenColumns = 0;\n\n            for (var i = columns.length - 1; i >= 0; i--) {\n                if (widthOfHiddenColumns + 3 * widths[i] < sumOfWidths - tableWidth - scrollLeft) {\n                    if (widths[i]) {\n                        hiddenColumns++;\n                    }\n                    widthOfHiddenColumns += widths[i];\n                } else {\n                    lastColspan = 1 + hiddenColumns;\n                    for (var j = idx; j <= i; j++) {\n                        if (columns[j].locked) {\n                            continue;\n                        }\n                        colsToRender.push(columns[j]);\n                        if (columns[j].colSpan) {\n                            delete columns[j].colSpan;\n                        }\n                    }\n                    colsToRender[0].colSpan = firstColspan;\n                    colsToRender[colsToRender.length - 1].colSpan = lastColspan;\n                    break;\n                }\n            }\n\n            if (colsToRender[0].hidden) {\n                colsToRender[0].colSpan--;\n            }\n\n            that.virtualCols = colsToRender;\n\n            return colsToRender;\n        },\n\n        _templates: function() {\n            var that = this,\n                options = that.options,\n                dataSource = that.dataSource,\n                groups = dataSource.group(),\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                aggregates = dataSource.aggregate(),\n                columnLeafs = leafColumns(that.columns),\n                columnsLocked = leafColumns(lockedColumns(that.columns)),\n                leafsCols = options.scrollable ? leafColumns(nonLockedColumns(that.columns)) : columnLeafs,\n                columns = (that.virtualScroll || {}).columns ? that._virtualCols(leafsCols) : leafsCols,\n                groupHeaderColumnTemplateLockedColumns = grep(visibleColumns(columnsLocked), function(column, index) { return column.groupHeaderColumnTemplate && index !== 0; }),\n                groupHeaderColumnTemplateNonLockedColumns = grep(visibleColumns(columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (options.scrollable && columnsLocked.length) {\n                if (options.rowTemplate || options.altRowTemplate) {\n                    throw new Error(\"Having both row template and locked columns is not supported\");\n                }\n\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns, false, true);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true, true);\n\n                that.lockedRowTemplate = that._tmpl(options.rowTemplate, columnsLocked);\n                that.lockedAltRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columnsLocked, true);\n            } else {\n                that.rowTemplate = that._tmpl(options.rowTemplate, columns);\n                that.altRowTemplate = that._tmpl(options.altRowTemplate || options.rowTemplate, columns, true);\n            }\n\n            if (that._hasDetails()) {\n                that.detailTemplate = that._detailTmpl(options.detailTemplate || \"\");\n            }\n\n            if ((that._group && !isEmptyObject(aggregates)) || (!isEmptyObject(aggregates) && !footer.length) ||\n                grep(columnLeafs, function(column) { return column.footerTemplate; }).length) {\n\n                that.footerTemplate = that._footerTmpl(columnLeafs, aggregates, \"footerTemplate\", \"k-footer-template\");\n            }\n\n            if (groups && grep(columnLeafs, function(column) { return column.groupFooterTemplate; }).length) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupFooterTemplate = that._footerTmpl(columns, aggregates, \"groupFooterTemplate\", \"k-group-footer\", columnsLocked.length);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupFooterTemplate = that._footerTmpl(columnsLocked, aggregates, \"groupFooterTemplate\", \"k-group-footer\");\n                }\n            }\n\n            if (groups && (groupHeaderColumnTemplateLockedColumns.length || groupHeaderColumnTemplateNonLockedColumns.length)) {\n                aggregates = $.map(groups, function(g) { return g.aggregates; });\n\n                that.groupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columns), aggregates, \"groupHeaderColumnTemplate\", \"k-grouping-row\", columnsLocked.length, groupHeaderColumnTemplateNonLockedColumns);\n\n                if (options.scrollable && columnsLocked.length) {\n                    that.lockedGroupHeaderColumnTemplate = that._groupHeaderTmpl(visibleColumns(columnsLocked), aggregates, \"groupHeaderColumnTemplate\", \"k-grouping-row\", 0, groupHeaderColumnTemplateLockedColumns);\n                }\n            } else {\n                that.groupHeaderColumnTemplate = null;\n                that.lockedGroupHeaderColumnTemplate = null;\n            }\n\n                if (that.options.noRecords) {\n                that.noRecordsTemplate = that._noRecordsTmpl();\n            }\n        },\n\n        _noRecordsTmpl: function() {\n            var wrapper = '<div class=\"{0}\">{1}</div>';\n            var defaultTemplate = '<div class=\"k-grid-norecords-template\"{1}>{0}</div>';\n            var scrollableNoGridHeightStyles = (this.options.scrollable && !this.wrapper[0].style.height) ? ' style=\"margin:0 auto;position:static;\"' : '';\n            var state = { storage: {}, count: 0 };\n            var settings = $.extend({}, kendo.Template, this.options.templateSettings);\n            var paramName = settings.paramName;\n            var template;\n            var html = \"\";\n            var type;\n            var tmpl;\n\n            if (this.options.noRecords.template) {\n                template = this.options.noRecords.template;\n            } else {\n                template = kendo.format(defaultTemplate, this.options.messages.noRecords, scrollableNoGridHeightStyles);\n            }\n\n            type = typeof template;\n            if (type === \"function\") {\n                state.storage[\"tmpl\" + state.count] = template;\n                html += \"#=this.tmpl\" + state.count + \"(\" + paramName + \")#\";\n                state.count ++;\n            } else if (type === \"string\") {\n                html += template;\n            }\n\n            tmpl = kendo.template(kendo.format(wrapper, NORECORDSCLASS, html), settings);\n\n            if (state.count > 0) {\n                tmpl = tmpl.bind(state.storage);\n            }\n\n            return tmpl;\n        },\n\n        _footerTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                groups = that._groups(),\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column;\n\n            html += '<tr class=\"' + rowClass + '\">';\n\n            if (groups > 0 && !skipGroupCells) {\n                html += groupCells(groups);\n            }\n\n            if (that._hasDetails()) {\n                html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n            }\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n                template = column[templateName];\n                type = typeof template;\n\n                html += \"<td\" + stringifyAttributes(column.footerAttributes) + \">\";\n\n                if (template) {\n                    if (type !== FUNCTION) {\n                        scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                        template = kendo.template(template, scope);\n                    }\n\n                    storage[\"tmpl\" + count] = template;\n                    html += \"#=this.tmpl\" + count + \"(\" + paramName + \")#\";\n                    count ++;\n                } else {\n                    html += \"&nbsp;\";\n                }\n\n                html += \"</td>\";\n            }\n\n            html += '</tr>';\n\n            html = kendo.template(html, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _groupHeaderTmpl: function(columns, aggregates, templateName, rowClass, skipGroupCells, groupHeaderColumnTemplateColumns) {\n            var that = this,\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                html = \"\",\n                idx,\n                length,\n                template,\n                type,\n                storage = {},\n                count = 0,\n                scope = {},\n                fieldsMap = that.dataSource._emptyAggregates(aggregates),\n                column,\n                headerTemplateIndex = groupHeaderColumnTemplateColumns.length ? inArray(groupHeaderColumnTemplateColumns[0], columns) : -1,\n                groupHeaderColumnTemplateClass;\n\n            html += '<tr class=\"' + rowClass + '\">';\n\n            if (!skipGroupCells) {\n                html += '# for (var i = 0; i < data.groupCells; i++) { #' +\n                '<td class=\"k-group-cell\">' +\n                  '&nbsp;' +\n                '</td>' +\n                '# } #';\n            }\n\n            if (that._hasDetails()) {\n                html += '<td class=\"k-hierarchy-cell\">&nbsp;</td>';\n            }\n\n            if (headerTemplateIndex < 0) {\n                html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                return;\n            }\n\n            if (headerTemplateIndex < MINCOLSPANVALUE && groupHeaderColumnTemplateColumns.length <= 1 && !skipGroupCells) {\n                html += !skipGroupCells ? groupCellBuilder(columns.length) : '';\n                return kendo.template(html, settings);\n            }\n\n            if (headerTemplateIndex < MINCOLSPANVALUE) {\n                headerTemplateIndex = !skipGroupCells ? 1 : 0;\n                html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : '';\n            }\n            else {\n                html += !skipGroupCells ? groupCellBuilder(headerTemplateIndex) : groupCellLockedContentBuilder(headerTemplateIndex);\n            }\n\n            for (idx = headerTemplateIndex, length = columns.length; idx < length; idx++) {\n                column = columns[idx];\n                template = column[templateName];\n                type = typeof template;\n\n                if (column.sticky) {\n                    groupHeaderColumnTemplateClass = (column.groupHeaderColumnTemplateClass || '');\n\n                    if (!groupHeaderColumnTemplateClass) {\n                        groupHeaderColumnTemplateClass = column.groupHeaderColumnTemplateClass = \"group-header-column-template-\" + kendo.guid();\n                    }\n\n                    html += \"<td class='\" + STICKY_CELL_CLASS + \" \" + groupHeaderColumnTemplateClass + \"' style='\" + (column.stickyStyle || '') + \"'>\";\n                } else {\n                    html += \"<td>\";\n                }\n\n                if (template) {\n                    if (type !== FUNCTION) {\n                        scope = fieldsMap[column.field] ? extend({}, settings, { paramName: paramName + \"['\" + column.field + \"']\" }) : {};\n                        template = kendo.template(template, scope);\n                    }\n\n                    storage[\"tmpl\" + count] = template;\n                    html += \"#=this.tmpl\" + count + \"(\" + paramName + \")#\";\n                    count ++;\n                } else {\n                    html += \"&nbsp;\";\n                }\n\n                html += \"</td>\";\n            }\n\n            html += '</tr>';\n\n            html = kendo.template(html, settings);\n\n            if (count > 0) {\n                return html.bind(storage);\n            }\n\n            return html;\n        },\n\n        _detailTmpl: function(template) {\n            var that = this,\n                html = \"\",\n                settings = extend({}, kendo.Template, that.options.templateSettings),\n                paramName = settings.paramName,\n                templateFunctionStorage = {},\n                templateFunctionCount = 0,\n                groups = that._groups(),\n                colspan = visibleColumns(leafColumns(that.columns)).length,\n                type = typeof template;\n\n            html += '<tr role=\"row\" class=\"k-detail-row\">';\n            if (groups > 0) {\n                html += groupCells(groups);\n            }\n            html += '<td role=\"gridcell\" class=\"k-hierarchy-cell\"></td><td role=\"gridcell\" class=\"k-detail-cell\"' + (colspan ? ' colspan=\"' + colspan + '\"' : '') + \">\";\n\n            if (type === FUNCTION) {\n                templateFunctionStorage[\"tmpl\" + templateFunctionCount] = template;\n                html += \"#=this.tmpl\" + templateFunctionCount + \"(\" + paramName + \")#\";\n                templateFunctionCount ++;\n            } else {\n                html += template;\n            }\n\n            html += \"</td></tr>\";\n\n            html = kendo.template(html, settings);\n\n            if (templateFunctionCount > 0) {\n                return html.bind(templateFunctionStorage);\n            }\n\n            return html;\n        },\n\n        _hasDetails: function() {\n            var that = this;\n\n            return that.options.detailTemplate !== null || (that._events[DETAILINIT] || []).length;\n        },\n        _hasFilterRow: function() {\n            var filterable = this.options.filterable;\n            var hasFiltering = filterable &&\n                    typeof filterable.mode == STRING &&\n                    filterable.mode.indexOf(ROW) != -1;\n            var columns = this.columns;\n            var columnsWithoutFiltering = $.grep(columns, function(col) {\n                return col.filterable === false;\n            });\n\n            if (columns.length && columnsWithoutFiltering.length == columns.length) {\n                hasFiltering = false;\n            }\n\n            return hasFiltering;\n        },\n\n        _details: function() {\n            var that = this;\n\n            if (that.options.scrollable && that._hasDetails() && lockedColumns(that.columns).length) {\n                throw new Error(\"Having both detail template and locked columns is not supported\");\n            }\n\n            that.table.on(CLICK + NS, \".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse\", function(e) {\n                var button = $(this);\n\n                that._toggleDetails(button);\n                e.preventDefault();\n                return false;\n            });\n        },\n\n        _toggleDetails: function(button, omitAnimation) {\n            var that = this,\n            cell = button.closest(\"td.k-hierarchy-cell\"),\n            expanding = button.hasClass(\"k-i-expand\"),\n            masterRow = button.closest(\"tr.k-master-row\"),\n            masterRowIndex = masterRow.attr(ARIA_ROWINDEX),\n            detailRow,\n            detailTemplate = that.detailTemplate,\n            data,\n            hasDetails = that._hasDetails(),\n            ariaLabelText = expanding ? COLLAPSE : EXPAND,\n            ariaExpandText = expanding ? true : false;\n\n            button.toggleClass(\"k-i-expand\", !expanding)\n                .toggleClass(\"k-i-collapse\", expanding)\n                .attr(ARIA_LABEL, ariaLabelText);\n\n            cell.attr(ARIA_EXPANDED, ariaExpandText);\n\n            detailRow = masterRow.next();\n\n            if (hasDetails && !detailRow.hasClass(\"k-detail-row\")) {\n                data = that.dataItem(masterRow);\n\n                detailRow = $(detailTemplate(data))\n                    .addClass(masterRow.hasClass(\"k-alt\") ? \"k-alt\" : \"\")\n                    .insertAfter(masterRow);\n\n                if (masterRowIndex || masterRowIndex === 0) {\n                    detailRow.attr(ARIA_ROWINDEX, Number(masterRowIndex) + 1);\n                }\n\n                that.angular(\"compile\", function() {\n                    return {\n                        elements: detailRow.get(),\n                        data: [ { dataItem: data } ]\n                    };\n                });\n\n                that.trigger(DETAILINIT, { masterRow: masterRow, detailRow: detailRow, data: data, detailCell: detailRow.find(\".k-detail-cell\") });\n            }\n\n            that.trigger(expanding ? DETAILEXPAND : DETAILCOLLAPSE, { masterRow: masterRow, detailRow: detailRow });\n\n            if (omitAnimation) {\n                toggleRow(detailRow, expanding);\n            } else {\n                detailRow.toggle(expanding);\n            }\n        },\n\n        dataItem: function(tr) {\n            tr = $(tr)[0];\n            if (!tr) {\n                return null;\n            }\n\n            var rows = this.tbody.children(),\n                classesRegEx = /k-grouping-row|k-detail-row|k-group-footer/,\n                idx = tr.sectionRowIndex,\n                j, correctIdx;\n\n            correctIdx = idx;\n\n            for (j = 0; j < idx; j++) {\n                if (classesRegEx.test(rows[j].className)) {\n                    correctIdx--;\n                }\n            }\n\n            return this._data[correctIdx];\n        },\n\n        expandRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td .k-i-expand');\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        collapseRow: function(tr, omitAnimation) {\n            var button = $(tr).find('> td .k-i-collapse');\n\n            if (button.length) {\n                this._toggleDetails(button, omitAnimation);\n            }\n        },\n\n        _createHeaderCells: function(columns, rowSpan) {\n            var that = this,\n                idx,\n                th,\n                text,\n                html = \"\",\n                length,\n                title,\n                columnMenu = that.options.columnMenu,\n                sortable = that.options.sortable,\n                filterable = that._hasFilterMenu(),\n                messages = that.options.messages,\n                leafs = leafColumns(that.columns),\n                groups = that.dataSource.group(),\n                field;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                th = columns[idx].column || columns[idx];\n                text = that._headerCellText(th);\n                title = th.title;\n                field = \"\";\n\n                var index = inArray(th, leafs);\n\n                if (th.selectable) {\n                    html += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        html += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : kendo.template(SELECTCOLUMNHEADERTMPL)({});\n                    html += \">\" + text + \"</th>\";\n                } else if (th.draggable) {\n                    html += \"<th class='k-header k-drag-cell' scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        html += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n                    text = th.headerTemplate ? text : \"\";\n                    html += \">\" + text + \"</th>\";\n                } else if (th.command) {\n                    html += \"<th scope='col'\" + stringifyAttributes(th.headerAttributes);\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        html += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (index > -1) {\n                        html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    html += \">\" + text + \"</th>\";\n                } else {\n                    if (th.field) {\n                        field = kendo.attr(\"field\") + \"='\" + th.field + \"' \";\n                    }\n\n                    html += \"<th scope='col' \" + field;\n                    if ((columnMenu && th.field && th.menu !== false)) {\n                        html += \" aria-haspopup='menu'\";\n                    } else if (filterable && th.filterable !== false && !th.command) {\n                        html += \" aria-haspopup='dialog'\";\n                    }\n\n                    if (rowSpan && !columns[idx].colSpan) {\n                        html += \" rowspan='\" + rowSpan + \"'\";\n                    }\n\n                    if (columns[idx].colSpan > 1) {\n                        html += 'colspan=\"' + (columns[idx].colSpan - hiddenLeafColumnsCount(th.columns)) + '\" ';\n                        html += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    } else if (columns[idx].colSpan === 1) {\n                        html += kendo.attr(\"colspan\") + \"='\" + columns[idx].colSpan + \"'\";\n                    }\n\n                    if (title) {\n                        title = title && (that.options.encodeTitles ? htmlEncode(title, true) : title);\n                        html += kendo.attr(\"title\") + '=\"' + title + '\" ';\n                    }\n\n                    if (th.groupable !== undefined$1) {\n                        html += kendo.attr(\"groupable\") + \"='\" + th.groupable + \"' \";\n                    }\n\n                    if (isColumnGroupable(that, th) && (!th.headerAttributes || !th.headerAttributes.title)) {\n                        html += \"title='\";\n                        html += isGroupedBy(groups, th.field) ? messages.ungroupHeader : messages.groupHeader;\n                        html += \"' \";\n                    }\n\n                    if (th.aggregates && th.aggregates.length) {\n                        html += kendo.attr(\"aggregates\") + \"='\" + th.aggregates + \"'\";\n                    }\n\n                    if (index > -1) {\n                        html += kendo.attr(\"index\") + \"='\" + index + \"'\";\n                    }\n\n                    html += stringifyAttributes(th.headerAttributes);\n\n                    if (sortable) {\n                        text = kendo.template(SORTHEADERTMPL)({ text: text });\n                    }\n\n                    html += \">\" + text + \"</th>\";\n                }\n            }\n            return html;\n        },\n\n        _appendLockedColumnContent: function() {\n            var columns = this.columns,\n                idx,\n                colgroup = this.table.find(\"colgroup\"),\n                cols = colgroup.find(COLGROUP),\n                length,\n                lockedCols = $(),\n                skipHiddenCount = 0,\n                container,\n                colSpan,\n                spanIdx,\n                colOffset = 0;\n\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n\n                    if (isVisible(columns[idx])) {\n                        colSpan = 1;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumns(columns[idx].columns).length - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            lockedCols = lockedCols.add(cols.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    } else {\n                        skipHiddenCount ++;\n                    }\n                }\n            }\n\n            container = $('<div class=\"k-grid-content-locked\"><table><colgroup></colgroup><tbody></tbody></table></div>');\n            // detach is required for IE8, otherwise it switches to compatibility mode\n            colgroup.detach();\n            container.find(\"colgroup\").append(lockedCols);\n            colgroup.insertBefore(this.table.find(\"tbody\"));\n\n            this.lockedContent = container.insertBefore(this.content);\n            this.lockedTable = container.children(\"table\");\n        },\n\n        _appendLockedColumnFooter: function() {\n            var that = this;\n            var footer = that.footer;\n            var cells = footer.find(\".k-footer-template>td\");\n            var cols = footer.find(\".k-grid-footer-wrap>table>colgroup>col\");\n            var html = $('<div class=\"k-grid-footer-locked\"><table><colgroup></colgroup><tfoot><tr class=\"k-footer-template\"></tr></tfoot></table></div>');\n            var idx, length;\n            var groups = that._groups();\n            var lockedCells = $(), lockedCols = $();\n\n            lockedCells = lockedCells.add(cells.filter(\".k-group-cell\"));\n            for (idx = 0, length = leafColumns(lockedColumns(that.columns)).length; idx < length; idx++) {\n                lockedCells = lockedCells.add(cells.eq(idx + groups));\n            }\n\n            lockedCols = lockedCols.add(cols.filter(\".k-group-col\"));\n            for (idx = 0, length = visibleColumns(leafColumns(visibleLockedColumns(that.columns))).length; idx < length; idx++) {\n                lockedCols = lockedCols.add(cols.eq(idx + groups));\n            }\n\n            lockedCells.appendTo(html.find(\"tr\"));\n            lockedCols.appendTo(html.find(\"colgroup\"));\n            that.lockedFooter = html.prependTo(footer);\n        },\n\n        _appendLockedColumnHeader: function(container) {\n            var that = this,\n                columns = this.columns,\n                idx,\n                html,\n                length,\n                colgroup,\n                tr,\n                trFilter,\n                table,\n                header,\n                filtercellCells,\n                rows = [],\n                skipHiddenCount = 0,\n                cols = $(),\n                hasFilterRow = that._hasFilterRow(),\n                filterCellOffset = 0,\n                filterCells = $(),\n                cell,\n                leafColumnsCount = 0,\n                cells = $();\n\n            colgroup = that.thead.prev().find(COLGROUP);\n            header = that.thead.find(\"tr\").first().find(\".k-header:not(.k-group-cell,.k-hierarchy-cell)\");\n            filtercellCells = that.thead.find(\".k-filter-row\").find(\"td:not(.k-group-cell,.k-hierarchy-cell)\");\n\n            var colOffset = 0;\n            for (idx = 0, length = columns.length; idx < length; idx++) {\n                if (columns[idx].locked) {\n                    cell = header.eq(idx);\n                    leafColumnsCount = leafColumns(columns[idx].columns || []).length;\n\n                    if (isVisible(columns[idx])) {\n                        var colSpan = null;\n\n                        if (columns[idx].columns) {\n                            colSpan = leafColumnsCount - hiddenLeafColumnsCount(columns[idx].columns);\n                        }\n\n                        colSpan = colSpan || 1;\n                        for (var spanIdx = 0; spanIdx < colSpan; spanIdx++) {\n                            cols = cols.add(colgroup.eq(idx + colOffset + spanIdx - skipHiddenCount));\n                        }\n                        colOffset += colSpan - 1;\n                    }\n\n                    mapColumnToCellRows([columns[idx]], childColumnsCells(cell), rows, 0, 0);\n\n                    leafColumnsCount = leafColumnsCount || 1;\n                    for (var j = 0; j < leafColumnsCount; j++) {\n                        filterCells = filterCells.add(filtercellCells.eq(filterCellOffset + j));\n                    }\n                    filterCellOffset += leafColumnsCount;\n                }\n\n                if (columns[idx].columns) {\n                    skipHiddenCount += hiddenLeafColumnsCount(columns[idx].columns);\n                }\n\n                if (!isVisible(columns[idx])) {\n                    skipHiddenCount++;\n                }\n            }\n\n            if (rows.length) {\n                html = '<div class=\"k-grid-header-locked\" style=\"width:1px\"><table><colgroup></colgroup><thead>';\n                html += new Array(rows.length + 1).join(\"<tr></tr>\");\n                html += (hasFilterRow ? '<tr class=\"k-filter-row\"></tr>' : '') + '</thead></table></div>';\n\n                table = $(html);\n\n                colgroup = table.find(\"colgroup\");\n                colgroup.append(that.thead.prev().find(\"col.k-group-col\").add(cols));\n\n                tr = table.find(\"thead tr:not(.k-filter-row)\");\n                for (idx = 0, length = rows.length; idx < length; idx++) {\n                    cells = toJQuery(rows[idx]);\n                    tr.eq(idx).append(that.thead.find(\"tr\").eq(idx).find(\".k-group-cell\").add(cells));\n                }\n\n                var count = removeEmptyRows(this.thead);\n                if (rows.length < count) {\n                    removeRowSpanValue(table, count - rows.length);\n                }\n\n                trFilter = table.find(\".k-filter-row\");\n                trFilter.append(that.thead.find(\".k-filter-row .k-group-cell\").add(filterCells));\n\n                this.lockedHeader = table.prependTo(container);\n                this.thead.find(\".k-group-cell\").remove();\n\n                return true;\n            }\n            return false;\n        },\n\n        _removeLockedContainers: function() {\n            var elements = this.lockedHeader\n                .add(this.lockedContent)\n                .add(this.lockedFooter);\n\n            kendo.destroy(elements);\n            elements.off(NS).remove();\n\n            this.lockedHeader = this.lockedContent = this.lockedFooter = null;\n            this.selectable = null;\n        },\n\n        _thead: function() {\n            var that = this,\n                columns = that.columns,\n                hasDetails = that._hasDetails() && columns.length,\n                hasFilterRow = that._hasFilterRow(),\n                idx,\n                html = \"\",\n                thead = that.table.find(\">thead\"),\n                hasTHead = that.element.find(\"thead\").first().length > 0,\n                headerContent = that.options.messages.expandCollapseColumnHeader,\n                tr;\n\n            if (!thead.length) {\n                thead = $(\"<thead role='rowgroup'/>\").insertBefore(that.tbody);\n            }\n\n            if (that.lockedHeader && that.thead) {\n                tr = that.thead.find(\"tr:has(th):not(.k-filter-row)\").html(\"\");\n                tr.remove();\n                tr = $();\n\n                that._removeLockedContainers();\n            } else if (hasTHead) {\n                tr = that.element.find(\"thead\").first().find(\"tr:has(th):not(.k-filter-row)\");\n            } else {\n                tr = that.element.find(\"tr:has(th)\").first();\n            }\n\n            if (!tr.length) {\n                tr = thead.children().first();\n                if (!tr.length) {\n                   var rows = [{ rowSpan: 1, cells: [], index: 0 }];\n                   that._prepareColumns(rows, columns);\n\n                   for (idx = 0; idx < rows.length; idx++) {\n                       html += \"<tr>\";\n                       if (hasDetails) {\n                           html += '<th class=\"k-hierarchy-cell\" scope=\"col\">' + headerContent + '</th>';\n                       }\n                       html += that._createHeaderCells(rows[idx].cells, rows[idx].rowSpan);\n                       html += \"</tr>\";\n                   }\n\n                   tr = $(html);\n                }\n            } else {\n                for (idx = 0; idx < columns.length; idx++) {\n\t\t\t\t\tvar columnIndex = inArray(columns[idx], leafColumns(columns));\n\t\t\t\t\tvar cell = leafDataCells(tr.parent()).filter(\"th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(columnIndex);\n\t\t\t\t\tif (columns[idx].hidden && columnIndex >= 0) {\n\t\t\t\t\t\tcell[0].style.display = NONE;\n\t\t\t\t\t}\n               }\n\n               that._updateHeadersAttr(childColumns(columns));\n\t\t\t}\n\n            if (hasFilterRow) {\n                var filterRow = $(\"<tr/>\");\n                filterRow.addClass(\"k-filter-row\");\n                if (hasDetails || tr.find(\".k-hierarchy-cell\").length) { // handles server side detail template\n                    filterRow.prepend('<td class=\"k-hierarchy-cell\">&nbsp;</td>');\n                }\n\n                var existingFilterRow = (that.thead || thead).find(\".k-filter-row\");\n                if (existingFilterRow.length) {\n                    kendo.destroy(existingFilterRow);\n                    existingFilterRow.remove();\n                }\n\n                thead.append(filterRow);\n            }\n\n            if (!tr.children().length) {\n                html = \"\";\n                if (hasDetails) {\n                    html += '<th class=\"k-hierarchy-cell\" scope=\"col\">&nbsp;</th>';\n                }\n\n                html += that._createHeaderCells(columns);\n\n                tr.html(html);\n            } else if (hasDetails && !tr.find(\".k-hierarchy-cell\")[0]) {\n                tr.prepend('<th class=\"k-hierarchy-cell\" scope=\"col\">' + (headerContent ? headerContent : '&nbsp;') + '</th>');\n            }\n\n            tr.find(\"th\").addClass(\"k-header\");\n\n            if (!that.options.scrollable) {\n                thead.addClass(\"k-grid-header\");\n            }\n\n            tr.find(\"script\").remove().end().prependTo(thead);\n\n            if (that.thead) {\n                that._destroyColumnAttachments();\n            }\n\n            this.angular(\"cleanup\", function() {\n                return {\n                    elements: thead.find(\"th\" + NAVCELL).get()\n                };\n            });\n\n            this.angular(\"compile\", function() {\n                return {\n                    elements: thead.find(HEADERCELLS).get(),\n                    data: map(columns, function(col) { return { column: col }; })\n                };\n            });\n\n            that.thead = thead;\n\n            that._sortable();\n\n            that._filterable();\n\n            that._filterRow();\n\n            that._scrollable();\n\n            that._columnMenu();\n\n            var syncHeight;\n            var hasLockedColumns = this.options.scrollable && lockedColumns(this.columns).length;\n\n            if (hasLockedColumns) {\n\n                syncHeight = that._appendLockedColumnHeader(that.thead.closest(\".k-grid-header\"));\n\n                that._appendLockedColumnContent();\n\n                that.lockedContent.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n\n                if (kendo.support.touch) {\n                    that._lockedContentUserEvents = new kendo.UserEvents(that.lockedContent, {\n                        move: function(e) {\n                            that.content.scrollTop(that.content.scrollTop() + (-e.y.delta));\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                that._updateLockedCols();\n            }\n\n            that._updateCols();\n\n            that._updateColumnCellIndex();\n\n            that._updateFirstColumnClass();\n\n            that._resizable();\n\n            that._draggable();\n\n            that._reorderable();\n\n            that._updateHeader(that._groups());\n\n            that._updateStickyColumns();\n\n            if (hasLockedColumns) {\n                if (syncHeight) {\n                    that._syncLockedHeaderHeight();\n                }\n\n                that._applyLockedContainersWidth();\n            }\n\n            if (that.groupable) {\n                that._attachGroupable();\n            }\n        },\n\n        _retrieveFirstColumn: function(columns, rows) {\n            var result = $();\n\n            if (rows.length && columns[0]) {\n                var column = columns[0];\n\n                while (column.columns && column.columns.length) {\n                    column = column.columns[0];\n                    rows = rows.filter(\":not(:first)\");\n                }\n\n                result = result.add(rows);\n            }\n\n            return result;\n        },\n\n        _updateFirstColumnClass: function() {\n            var that = this,\n                columns = that.columns || [],\n                hasDetails = that._hasDetails() && columns.length;\n\n            if (!hasDetails && !that._groups()) {\n                var tr = that.thead.find(\">tr:not(.k-filter-row):not(:first)\");\n                columns = nonLockedColumns(columns);\n\n                var rows = that._retrieveFirstColumn(columns, tr);\n\n                if (that._isLocked()) {\n                    tr = that.lockedHeader.find(\"thead>tr:not(.k-filter-row):not(:first)\");\n                    columns = lockedColumns(that.columns);\n\n                    rows = rows.add(that._retrieveFirstColumn(columns, tr));\n                }\n\n                rows.each(function() {\n                    var ths = $(this).find(\"th\");\n                    ths.removeClass(\"k-first\");\n                    ths.eq(0).addClass(\"k-first\");\n                });\n            }\n        },\n\n        _prepareColumns: function(rows, columns, parentCell, parentRow) {\n            var row = parentRow || rows[rows.length - 1];\n\n            var childRow = rows[row.index + 1];\n            var totalColSpan = 0;\n\n            for (var idx = 0; idx < columns.length; idx++) {\n                var cell = { column: columns[idx], colSpan: 0 };\n                row.cells.push(cell);\n\n                if (columns[idx].columns && columns[idx].columns.length) {\n                    if (!childRow) {\n                        childRow = { rowSpan: 0, cells: [], index: rows.length };\n                        rows.push(childRow);\n                    }\n                    cell.colSpan = columns[idx].columns.length;\n                    this._prepareColumns(rows, columns[idx].columns, cell, childRow);\n                    totalColSpan += cell.colSpan - 1;\n                    row.rowSpan = rows.length - row.index;\n                }\n            }\n            if (parentCell) {\n                parentCell.colSpan += totalColSpan;\n            }\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var content = this.content;\n\n            if (this.virtualScroll && this.virtualScroll.rows) {\n                content = this.virtualScrollable.verticalScrollbar;\n            }\n\n            var scrollTop = content.scrollTop(),\n                delta = kendo.wheelDeltaY(e);\n\n            if (delta) {\n                if (content[0].scrollHeight > content[0].clientHeight &&\n                    (content[0].scrollTop < content[0].scrollHeight - content[0].clientHeight && delta < 0 ||\n                    content[0].scrollTop > 0 && delta > 0)) {\n                    e.preventDefault();\n                }\n\n                content.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _isLocked: function() {\n            return this.lockedHeader != null;\n        },\n\n        _updateHeaderCols: function() {\n            var table = this.thead.parent().add(this.table);\n\n            if (this._isLocked()) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), 0);\n            }\n        },\n\n        _updateColumnSorters: function() {\n            var that = this;\n            var cells = leafDataCells(that.thead);\n            var columns = leafColumns(that.columns);\n            var column;\n            var cell;\n            var sorterInstance;\n\n            if (!that.options.sortable) {\n                return;\n            }\n\n            for (var idx = 0, length = cells.length; idx < length; idx++) {\n                column = columns[idx];\n\n                if (column.sortable !== false && !column.command && column.field) {\n                    cell = cells.eq(idx);\n\n                    sorterInstance = cell.data(\"kendoColumnSorter\");\n\n                    if (sorterInstance) {\n                        sorterInstance.refresh();\n                    }\n                }\n            }\n        },\n\n        _updateHeadersAttr: function(columns) {\n            if (!columns.length) {\n                return;\n            }\n\n            var that = this;\n\n            for (var i = 0; i < columns.length; i++) {\n                if (columns[i].headerAttributes) {\n                    var th = that.element.find(\"[id='\" + columns[i].headerAttributes.id + \"']\");\n                    th.attr(\"headers\", columns[i].headerAttributes.headers);\n                }\n            }\n\n            that._updateHeadersAttr(childColumns(columns));\n        },\n\n        _updateCols: function(table) {\n            table = table || this.thead.parent().add(this.table);\n\n            this._appendCols(table, this._isLocked());\n        },\n\n        _updateLockedCols: function(table) {\n            if (this._isLocked()) {\n                table = table || this.lockedHeader.find(\"table\").add(this.lockedTable);\n\n                normalizeCols(table, visibleLeafColumns(visibleLockedColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _appendCols: function(table, locked) {\n            if (locked) {\n                normalizeCols(table, visibleLeafColumns(visibleNonLockedColumns(this.columns)), this._hasDetails(), 0);\n            } else {\n                normalizeCols(table, visibleLeafColumns(visibleColumns(this.columns)), this._hasDetails(), this._groups());\n            }\n        },\n\n        _autoColumns: function(schema) {\n            if (schema && schema.toJSON) {\n                var that = this,\n                    field,\n                    encoded;\n\n                schema = schema.toJSON();\n\n                encoded = !(that.table.find(\"tbody tr\").length > 0 && (!that.dataSource || !that.dataSource.transport));\n\n                for (field in schema) {\n                    that.columns.push({ field: field, encoded: encoded, headerAttributes: { id: kendo.guid() } });\n                }\n\n                that._thead();\n\n                that._templates();\n            }\n        },\n\n        _rowsHtml: function(data, templates) {\n            var that = this,\n                html = \"\",\n                idx,\n                rowTemplate = templates.rowTemplate,\n                altRowTemplate = templates.altRowTemplate,\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (that._skipRerenderItemsCount > 0) {\n                    that._skipRerenderItemsCount--;\n                } else {\n                    if (idx % 2) {\n                        html += altRowTemplate(data[idx]);\n                    } else {\n                        html += rowTemplate(data[idx]);\n                    }\n                }\n                that._data.push(data[idx]);\n            }\n\n            return html;\n        },\n\n        _groupData: function(group, skipFooter, firstColumn) {\n            var that = this,\n                footerDefaults = that._groupAggregatesDefaultObject || {},\n                groupItems = group.items,\n                aggregates = extend({}, footerDefaults, group.aggregates),\n                headerData = extend({}, {\n                    field: group.field,\n                    value: group.value,\n                    items: groupItems,\n                    aggregates: aggregates\n                }, group.aggregates[firstColumn ? firstColumn.field : group.field]),\n                footerData = {};\n\n            if (!skipFooter) {\n                for (var aggregate in aggregates) {\n                    footerData[aggregate] = extend({}, aggregates[aggregate],\n                        { group: { field: group.field, value: group.value, items: groupItems } }\n                    );\n                }\n            }\n            return extend({}, footerData, headerData);\n        },\n\n        _removeGroupIfEmpty: function(row) {\n            var that = this,\n                itemsCount,\n                subgroupsCount,\n                length = that.dataSource._group.length;\n\n            for (var i = 0; i < length; i++) {\n                row = row.prev();\n                itemsCount = +row.attr('data-group-item-count');\n                subgroupsCount = +row.attr('data-sub-group-count');\n\n                if (itemsCount == 1 || subgroupsCount == 1) {\n                    row.hide();\n                }\n\n            }\n        },\n\n        _groupRowHtml: function(group, colspan, level, groupHeaderBuilder, templates, skipColspan, skipLastGroup, isLockedTable) {\n            var that = this,\n                html = \"\",\n                idx,\n                length,\n                isLocked = that.lockedContent != null,\n                field = group.field,\n                column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { },\n                firstColumn = visibleColumns(that.columns)[0],\n                firstVisibleColumnGroupHeaderTemplate = firstColumn ? firstColumn.groupHeaderColumnTemplate : null,\n                template = column.groupHeaderTemplate ? column.groupHeaderTemplate : firstVisibleColumnGroupHeaderTemplate,\n                text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded),\n                groupItems = group.currentItems || group.items,\n                groups = that._groups(),\n                groupFooterTemplate = templates.groupFooterTemplate,\n                groupHeaderColumnTemplate = templates.groupHeaderColumnTemplate,\n                groupData,\n                isGroupPaged = that.dataSource._isGroupPaged(),\n                expanded = isGroupPaged ? that.dataSource._groupsState[group.uid] : true;\n\n            if (that.options.editable && group.items && group.items[0] && group.items[0].isNew && group.items[0].isNew()) {\n                expanded = true;\n            }\n\n            if (templates.groupFooterTemplate || templates.groupHeaderColumnTemplate || column.groupHeaderTemplate) {\n                groupData = that._groupData(group, false, !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false);\n            }\n            if (template && !skipColspan) {\n                text = typeof template === FUNCTION ? template(groupData) : kendo.template(template)(groupData);\n            }\n\n            if (!that._skipRerenderItemsCount) {\n                if (!group.excludeHeader) {\n                    html += groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, groups - level, groupData, level, text, expanded, group, isGroupPaged);\n                } else if (isLocked) {\n                    group.excludeHeader = isLockedTable ? false : true;\n                } else {\n                    group.excludeHeader = false;\n                }\n            } else {\n                groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n            }\n\n            if (expanded) {\n                if (group.hasSubgroups) {\n                    for (idx = 0, length = groupItems.length; idx < length; idx++) {\n                        html += that._groupRowHtml(groupItems[idx], skipColspan ? colspan : colspan - 1, level + 1, groupHeaderBuilder, templates, skipColspan, skipLastGroup && idx === groupItems.length - 1, isLockedTable);\n                    }\n                } else {\n                    html += that._rowsHtml(groupItems, templates);\n                }\n            }\n\n            if (groupFooterTemplate) {\n\n                if (skipLastGroup) {\n                    if (!inArray(group.value, that._skippedGroups)) {\n                        that._skippedGroups.push(group.value);\n                    }\n                } else {\n                    if (that._skippedGroups.length && that._skippedGroups[0] === group.value) {\n                        that._skippedGroups.shift();\n                    }\n                    if (!that._skipRerenderItemsCount) {\n                        html += groupFooterTemplate(groupData);\n                    }\n                }\n            }\n            return html;\n        },\n\n        collapseGroup: function(group) {\n            var level,\n                that = this,\n                groupToCollapse = group,\n                groupable = this.options.groupable,\n                showFooter = groupable.showFooter,\n                footerCount = showFooter ? 0 : 1,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                tr;\n\n            group = $(group);\n            level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var currentGroupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterCollapse;\n\n                that.dataSource._groupsState[groupUid] = false;\n                groupCountAfterCollapse = that.dataSource._calculateGroupsTotal([groupObject], true);\n                that.dataSource._serverGroupsTotal -= currentGroupCount - groupCountAfterCollapse;\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"collapseGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(\"div\").hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(\"tr\");\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(\"tr\").eq(group.index()).nextAll(\"tr\");\n                }\n            }\n\n            group.find(\".k-i-collapse\").addClass(\"k-i-expand\").removeClass(\"k-i-collapse\");\n            group.find(\"td[aria-expanded='true']\").first().attr(ARIA_EXPANDED, false)\n                .find(\"a\").attr(ARIA_LABEL, EXPAND);\n\n            group = group.nextAll(\"tr\");\n\n            var toHide = [];\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n\n                if (tr.hasClass(\"k-grouping-row\")) {\n                    footerCount++;\n                } else if (tr.hasClass(\"k-group-footer\")) {\n                    footerCount--;\n                }\n\n                if (offset <= level || (tr.hasClass(\"k-group-footer\") && footerCount < 0)) {\n                    break;\n                }\n\n                if (relatedGroup.length) {\n                    toHide.push(relatedGroup[idx]);\n                }\n                toHide.push(tr[0]);\n            }\n\n            $(toHide).hide();\n\n            if (this.options.scrollable.endless && this.content) {\n                clearTimeout(that._collapseGroupsTimeOut);\n                that._collapseGroupsTimeOut = setTimeout(function() {\n                    that.content.scroll();\n                    that._groupToCollapse = groupToCollapse;\n                });\n            }\n        },\n\n        expandGroup: function(group) {\n                group = $(group);\n\n            var that = this,\n                showFooter = that.options.groupable.showFooter,\n                level,\n                tr,\n                offset,\n                relatedGroup = $(),\n                idx,\n                length,\n                footersVisibility = [],\n                groupsCount = 1;\n\n                level = group.find(\".k-group-cell\").length;\n\n            if (this.dataSource._isGroupPaged()) {\n                var groupUid = group.attr(\"data-group-uid\");\n                var groupObject = that.dataSource._getGroupByUid(groupUid);\n                var groupCount = that.dataSource._calculateGroupsTotal([groupObject], true);\n                var groupCountAfterExpand;\n\n                that.dataSource._groupsState[groupUid] = true;\n                if (groupObject.items && groupObject.items.length) {\n                    groupCountAfterExpand = that.dataSource._calculateGroupsTotal([groupObject], true);\n                    that.dataSource._serverGroupsTotal += groupCountAfterExpand - groupCount;\n                }\n\n                that._progress(true);\n                that.dataSource.range(that.dataSource._currentRangeStart, that.dataSource.take(), function() {\n                    that._progress(false);\n                }, \"expandGroup\");\n                return;\n            }\n\n            if (this._isLocked()) {\n                if (!group.closest(\"div\").hasClass(\"k-grid-content-locked\")) {\n                    relatedGroup = group.nextAll(\"tr\");\n                    group = this.lockedTable.find(\">tbody>tr\").eq(group.index());\n                } else {\n                    relatedGroup = this.tbody.children(\"tr\").eq(group.index()).nextAll(\"tr\");\n                }\n            }\n\n            group.find(\".k-i-expand\").addClass(\"k-i-collapse\").removeClass(\"k-i-expand\");\n            group.find(\"td[aria-expanded='false']\").first().attr(ARIA_EXPANDED, true)\n                .find(\"a\").attr(ARIA_LABEL, COLLAPSE);\n            group = group.nextAll(\"tr\");\n\n            for (idx = 0, length = group.length; idx < length; idx ++ ) {\n                tr = group.eq(idx);\n                offset = tr.find(\".k-group-cell\").length;\n                if (offset <= level) {\n                    break;\n                }\n\n                if (offset == level + 1 && !tr.hasClass(\"k-detail-row\")) {\n                    tr.show();\n                    relatedGroup.eq(idx).show();\n\n                    if (tr.hasClass(\"k-grouping-row\") && tr.find(\".k-icon\").hasClass(\"k-i-collapse\")) {\n                        that.expandGroup(tr);\n                    }\n\n                    if (tr.hasClass(\"k-master-row\") && tr.find(\".k-icon\").hasClass(\"k-i-collapse\")) {\n                        tr.next().show();\n                        relatedGroup.eq(idx + 1).show();\n                    }\n                }\n\n                if (tr.hasClass(\"k-grouping-row\")) {\n                    if (showFooter) {\n                        footersVisibility.push(tr.is(\":visible\"));\n                    }\n                    groupsCount ++;\n                }\n\n                if (tr.hasClass(\"k-group-footer\")) {\n                    if (showFooter) {\n                        var toggleVisibility = footersVisibility.pop();\n                        tr.toggle(toggleVisibility);\n                        relatedGroup.eq(idx).toggle(toggleVisibility);\n                    }\n                    if (groupsCount == 1) {\n                        tr.show();\n                        relatedGroup.eq(idx).show();\n                    } else {\n                        groupsCount --;\n                    }\n                }\n            }\n\n            if ((level === 0 && that.options.scrollable.endless && this._isLocked()) ||\n            (!that.options.scrollable.endless && this._isLocked())) {\n                that._syncLockedContentHeight();\n            }\n        },\n\n        _updateHeader: function(groups) {\n            var that = this,\n                container = that._isLocked() ? that.lockedHeader.find(\"thead\") : that.thead,\n                filterCells = container.find(\"tr.k-filter-row\").find(\"td.k-group-cell\").length,\n                length = container.find(\"tr\").first().find(\"th.k-group-cell\").length,\n                rows = container.children(\"tr:not(:first)\").filter(function() {\n                    return !$(this).children(\":visible\").length;\n                });\n\n            if (groups > length) {\n                $(new Array(groups - length + 1).join('<th class=\"k-group-cell k-header\" scope=\"col\">' + that.options.messages.expandCollapseColumnHeader + '</th>')).prependTo(container.children(\"tr:not(.k-filter-row)\"));\n                if (that.element.is(\":visible\")) {\n                    rows.find(\"th.k-group-cell\").hide();\n                }\n            } else if (groups < length) {\n                container.find(\"tr\").each(function() {\n                    $(this).find(\".k-group-cell\").eq(groups).remove();\n                    $(this).find(\".k-group-cell\").slice(groups).remove();\n                });\n            }\n            if (groups > filterCells) {\n                $(new Array(groups - filterCells + 1).join('<td class=\"k-group-cell k-header\">&nbsp;</td>')).prependTo(container.find(\".k-filter-row\"));\n            }\n        },\n\n        _firstDataItem: function(data, grouped) {\n            if (data && grouped) {\n                if (data.hasSubgroups) {\n                    data = this._firstDataItem(data.items[0], grouped);\n                } else {\n                    data = data.items[0];\n                }\n            }\n            return data;\n        },\n\n        _updateTablesWidth: function() {\n            var that = this,\n                tables;\n\n            if (!that._isLocked()) {\n                return;\n            }\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-wrap>table\", that.wrapper)\n                .add(that.thead.parent())\n                .add(that.table);\n\n            that._footerWidth = tableWidth(tables.eq(0));\n            tables.width(that._footerWidth);\n\n            tables =\n                $(\">.k-grid-footer>.k-grid-footer-locked>table\", that.wrapper)\n                .add(that.lockedHeader.find(\">table\"))\n                .add(that.lockedTable);\n\n            tables.width(tableWidth(tables.eq(0)));\n        },\n\n        hideColumn: function(column) {\n            var that = this,\n                cell,\n                tables,\n                idx,\n                cols,\n                colWidth,\n                position,\n                width = 0,\n                headerCellIndex,\n                length,\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                virtualScroll = that.virtualScroll || {},\n                columns = that.columns,\n                visibleLocked = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).filter(isCellVisible).length : 0,\n                columnIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                column = grep(flatColumns(columns), function(item) {\n                    return item === column;\n                })[0];\n            } else {\n                column = grep(flatColumns(columns), function(item) {\n                    return item.field === column;\n                })[0];\n            }\n\n            if (!column || !isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnVisiblePosition(column, columns);\n\n                setColumnVisibility(column, false);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, false);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                   this.hideColumn(column.columns[idx]);\n                }\n\n                that._ariaAddHiddenColIndex();\n                that.trigger(COLUMNHIDE, { column: column });\n\n                return;\n            }\n\n            columnIndex = inArray(column, visibleColumns(leafColumns(columns)));\n\n            setColumnVisibility(column, false);\n\n            that._setParentsVisibility(column, false);\n\n            that._templates();\n\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnIndex;\n            if (that.lockedHeader && visibleLocked > columnIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= visibleLocked;\n            }\n\n            cell = leafDataCells(container).filter(isCellVisible).eq(headerCellIndex);\n            cell[0].style.display = NONE;\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnIndex, false);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnIndex, false);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNHIDE, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && visibleLocked > columnIndex) {\n                hideColumnCells(that.lockedTable.find(\">tbody>tr\"), columnIndex);\n            } else {\n                hideColumnCells(that.tbody.children(), columnIndex - visibleLocked);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n                that._syncLockedFooterHeight();\n            } else {\n                cols = that.thead.prev().find(\"col\");\n                for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                    colWidth = cols[idx].style.width;\n\n                    if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                        width += outerWidth(cols[idx]);\n                        continue;\n                    }\n\n                    if (colWidth && colWidth.indexOf(\"%\") == -1) {\n                        width += parseInt(colWidth, 10);\n                    } else {\n                        width = 0;\n                        break;\n                    }\n                }\n\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                that._footerWidth = null;\n\n                if (width) {\n                    tables.each(function() {\n                        this.style.width = width + \"px\";\n                    });\n\n                    that._footerWidth = width;\n                    that._setContentWidth();\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaAddHiddenColIndex();\n            that.trigger(COLUMNHIDE, { column: column });\n        },\n\n        _setParentsVisibility: function(column, visible) {\n            var that = this;\n            var columns = that.columns;\n            var idx;\n            var parents = [];\n            var parent;\n            var position;\n            var cell;\n            var colSpan;\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            var predicate = visible ?\n                function(p) { return visibleColumns(p.columns).length && p.hidden; } :\n                function(p) { return !visibleColumns(p.columns).length && !p.hidden; };\n\n\n            if (columnParents(column, columns, parents) && parents.length) {\n                for (idx = parents.length - 1; idx >= 0; idx--) {\n                    parent = parents[idx];\n                    position = columnPosition(parent, columns);\n                    cell = elements($(\">table>thead\", this.lockedHeader), this.thead, \">tr:eq(\" + position.row + \")>th:not(.k-group-cell):not(.k-hierarchy-cell)\").eq(position.cell);\n\n                    if (predicate(parent)) {\n                        setColumnVisibility(parent, visible);\n                        cell[0].style.display = visible ? \"\" : NONE;\n                    }\n\n                    if (cell.filter(\"[\" + kendo.attr(\"colspan\") + \"]\").length) {\n                        colSpan = parseInt(cell.attr(kendo.attr(\"colspan\")), 10);\n                        cell[0].colSpan = (colSpan - hiddenLeafColumnsCount(parent.columns)) || 1;\n                    }\n                }\n            }\n        },\n\n        _updateContentWidth: function() {\n            var that = this;\n            var tables = that.table.add(that.thead.parent());\n\n            tables.css({\n                width: sumWidths(visibleLeafColumns(visibleNonLockedColumns(that.columns)))\n            });\n            that.refresh();\n        },\n\n        showColumn: function(column) {\n            var that = this,\n                idx,\n                length,\n                cell,\n                tables,\n                width,\n                headerCellIndex,\n                position,\n                colWidth,\n                cols,\n                columns = that.columns,\n                virtualScroll = that.virtualScroll || {},\n                footer = that.footer || that.wrapper.find(\".k-grid-footer\"),\n                lockedColumnsCount = that.lockedHeader ? leafDataCells(that.lockedHeader.find(\">table>thead\")).length : 0,\n                columnIndex,\n                originalColumn,\n                columnLeafIndex,\n                groupHeaderColumnTemplateColumns = grep(leafColumns(that.columns), function(column) { return column.groupHeaderColumnTemplate; });\n\n            if (typeof column == \"number\") {\n                columnIndex = column;\n                column = columns[column];\n            } else if (isPlainObject(column)) {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            } else {\n                $.each(flatColumns(columns), function(index, item) {\n                    if (item.field === column) {\n                        column = item;\n                        columnIndex = index;\n                        return false;\n                    }\n                });\n            }\n\n            if (!column || isVisible(column)) {\n                return;\n            }\n\n            var setColumnVisibility = that._columnVisibilitySetter(column);\n\n            if (column.columns && column.columns.length) {\n                position = columnPosition(column, columns);\n                originalColumn = flatColumns(that.options.columns)[columnIndex];\n\n                setColumnVisibility(column, true);\n\n                setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr:eq(\" + position.row + \")>th\"), position.cell, true);\n\n                for (idx = 0; idx < column.columns.length; idx++) {\n                    if (!originalColumn.columns[idx].hidden) {\n                        this.showColumn(column.columns[idx]);\n                    }\n                }\n\n                that._ariaRemoveHiddenColIndex();\n                that.trigger(COLUMNSHOW, { column: column });\n\n                return;\n            }\n\n            columnLeafIndex = inArray(column, leafColumns(columns));\n\n            setColumnVisibility(column, true);\n\n            that._setParentsVisibility(column, true);\n\n            that._templates();\n            that._updateCols();\n            that._updateLockedCols();\n\n            var container = that.thead;\n\n            headerCellIndex = columnLeafIndex;\n            if (that.lockedHeader && lockedColumnsCount > columnLeafIndex) {\n                container = that.lockedHeader.find(\">table>thead\");\n            } else {\n                headerCellIndex -= lockedColumnsCount;\n            }\n\n            cell = leafDataCells(container).eq(headerCellIndex);\n            cell[0].style.display = \"\";\n\n            setCellVisibility(elements($(\">table>thead\", that.lockedHeader), that.thead, \">tr.k-filter-row>td\"), columnLeafIndex, true);\n            if (footer[0]) {\n                that._updateCols(footer.find(\">.k-grid-footer-wrap>table\"));\n                that._updateLockedCols(footer.find(\">.k-grid-footer-locked>table\"));\n                setCellVisibility(footer.find(\".k-footer-template>td\"), columnLeafIndex, true);\n            }\n\n            if (virtualScroll.columns && !column.locked) {\n                that._updateContentWidth();\n                that.trigger(COLUMNSHOW, { column: column });\n                return;\n            }\n\n            if (that.lockedTable && lockedColumnsCount > columnLeafIndex) {\n                showColumnCells(that.lockedTable.find(\">tbody>tr\"), columnLeafIndex);\n            } else {\n                showColumnCells(that.tbody.children(), columnLeafIndex - lockedColumnsCount);\n            }\n\n            if (that.lockedTable) {\n                that._updateTablesWidth();\n                that._applyLockedContainersWidth();\n                that._syncLockedContentHeight();\n                that._syncLockedHeaderHeight();\n            } else {\n                tables = that.wrapper.find(\">.k-grid-header table\").first().add(that.wrapper.find(\">.k-grid-footer table\").first()).add(that.table);\n                if (!column.width) {\n                    tables.width(\"\");\n                } else {\n                    width = 0;\n                    cols = that.thead.prev().find(\"col\");\n                    for (idx = 0, length = cols.length; idx < length; idx += 1) {\n                        colWidth = cols[idx].style.width;\n\n                        if (cols[idx].className.indexOf(\"k-hierarchy-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (cols[idx].className.indexOf(\"k-group-col\") > -1) {\n                            width += outerWidth(cols[idx]);\n                            continue;\n                        }\n\n                        if (colWidth.indexOf(\"%\") > -1) {\n                            width = 0;\n                            break;\n                        }\n                        width += parseInt(colWidth, 10);\n                    }\n\n                    that._footerWidth = null;\n                    if (width) {\n                        tables.each(function() {\n                            this.style.width = width + \"px\";\n                        });\n                        that._footerWidth = width;\n                        that._setContentWidth();\n                    }\n                }\n            }\n\n            that._updateFirstColumnClass();\n            that._updateStickyColumns();\n            if (groupHeaderColumnTemplateColumns.length > 0) {\n                that._renderGroupRows();\n            }\n            that._ariaRemoveHiddenColIndex();\n            that.trigger(COLUMNSHOW, { column: column });\n        },\n\n        _columnVisibilitySetter: function(column) {\n            var col = column || {};\n\n            if (isUndefined(col.media)) {\n                return setColumnVisibility;\n            } else {\n                return setColumnMediaVisibility;\n            }\n        },\n\n\n        _buildSkeleton: function() {\n            var visibleColumns = this.virtualCols ? this.virtualCols : visibleLeafColumns(this.columns);\n            var pageSize = this.dataSource.pageSize() || this.dataSource.total();\n            var loaderHTML = \"\";\n            var colspan;\n            var groups = this._groups();\n            var columnsCount = visibleColumns.length + groups;\n\n            if (this._hasDetails()) {\n                columnsCount++;\n            }\n\n            if (this._hasVirtualColumns()) {\n                colspan = parseInt(this.content.find(\"tr\").first().find(\"td\").first().attr(\"colspan\"), 10);\n            }\n\n            for (var i = 0; i < pageSize; i++) {\n                loaderHTML += \"<tr>\";\n                for (var j = 0; j < columnsCount; j++) {\n                    if (colspan && !j) {\n                        loaderHTML += \"<td colspan='\" + colspan + \"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>\";\n                    } else {\n                        loaderHTML += \"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>\";\n                    }\n                }\n                loaderHTML += \"</tr>\";\n            }\n            return loaderHTML;\n        },\n\n        _progress: function(toggle) {\n            var element = this.element;\n            var endless = this.options.scrollable && this.options.scrollable.endless;\n            var loaderType = this.options.loaderType;\n            var isVirtualization = this.options.scrollable && this.options.scrollable.virtual;\n            var skeleton;\n\n            if (isVirtualization) {\n                element = this.content;\n            } else if (this._editContainer && this._editMode() === \"popup\") {\n                element = this._editContainer;\n            } else if (this.lockedContent || endless) {\n                element = this.wrapper;\n            } else if (this.element.is(\"table\")) {\n                element = this.element.parent();\n            } else if (this.content && this.content.length) {\n                element = this.content;\n            }\n\n            if (loaderType == \"skeleton\") {\n                if (toggle) {\n                    skeleton = this._buildSkeleton();\n                        element.find(\"tbody\")\n                         .empty()\n                         .append(skeleton);\n                } else {\n                    element.find(\".k-skeleton\").closest(\"tbody\").empty();\n                }\n            } else {\n                if (endless && toggle) {\n                    kendo.ui.progress(element, toggle, { height: this.content.height(), top: this.content[0].offsetTop, opacity: true });\n                } else {\n                    kendo.ui.progress(element, toggle);\n                }\n            }\n        },\n\n        _resize: function(size, force) {\n\n            this._syncLockedContentHeight();\n            this._syncLockedHeaderHeight();\n\n            if (this.content) {\n                this._setContentWidth();\n                this._setContentHeight();\n            }\n\n            if (this.lockedTable) {\n                this._syncLockedScroll();\n            }\n\n            if (this.virtualScrollable && (force || this._rowHeight)) {\n                if (force) {\n                    this._rowHeight = null;\n                }\n                this.virtualScrollable.repaintScrollbar();\n            }\n\n            if (this.pager && this.pager.element) {\n                this.pager.resize(force);\n            }\n\n            if (this._anyStickyColumns()) {\n                this._updateStickyColumns(false);\n            }\n        },\n\n        _isActiveInTable: function() {\n            var active = activeElement();\n\n            if (!active) { return false; }\n\n            return this.table[0] === active ||\n                $.contains(this.table[0], active) ||\n                (this._isLocked() &&\n                    (this.lockedTable[0] === active || $.contains(this.lockedTable[0], active))\n                );\n        },\n\n        refresh: function(e) {\n            var that = this,\n                data = that.dataSource.view(),\n                navigatable = that.options.navigatable,\n                virtualScroll = that.virtualScroll || {},\n                currentIndex,\n                current = $(that.current()),\n                isCurrentInHeader = false,\n                groups = that._groups(),\n                colspan = groups + visibleLeafColumns(visibleColumns(that.columns)).length,\n                contentScrollLeft,\n                cachedItemsToSkip;\n\n            if (e && e.action === \"itemchange\" && (that.editable || that.options.scrollable.endless)) { // skip rebinding if editing is in progress\n                if (this._editMode() != \"popup\" || this._editMode() === \"popup\" && !that._editableIsClosing) { // popup editing animation has not finished yet and the editable is not destoyed\n                    return;\n                }\n            }\n\n\n            if (virtualScroll.columns) {\n                that._templates();\n            }\n\n            //someone remove the edited item\n            if (e && e.action === \"remove\" && that.editable &&\n                that.editable.options.model && inArray(that.editable.options.model, e.items) > -1) {\n                that.editable.options.model.unbind(CHANGE, that._modelChangeHandler);\n            }\n\n            e = e || {};\n\n            if (that.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (e.action === SYNC && that._isVirtualEditable()) {\n                that._destroyEditable();\n                that._clearEditableState();\n            }\n\n            that._angularItems(\"cleanup\");\n\n            if (!that._endlessFetchInProgress) {\n                if (navigatable && (that._isActiveInTable() || (that._editContainer && that._editContainer.data(\"kendoWindow\")))) {\n                    isCurrentInHeader = current.is(\"th\");\n                    currentIndex = isCurrentInHeader ? current.parent().children(\":not(.k-group-cell)\").index(current[0]) : Math.max(that.cellIndex(current), 0);\n                }\n                that._destroyEditable();\n            }\n\n            if (that.options.scrollable && that.options.scrollable.endless && !that._pdfInitialized) {\n                clearTimeout(that._progressTimeOut);\n                that._progressTimeOut = setTimeout(function() {\n                    if (!that._endlessFetchInProgress) {\n                        that._progress(false);\n                    }\n                }, 250);\n            } else {\n                 that._progress(false);\n            }\n\n            that._hideResizeHandle();\n\n            that._data = [];\n\n            if (!that.columns.length) {\n                that._autoColumns(that._firstDataItem(data[0], groups));\n                colspan = groups + that.columns.length;\n            }\n\n            that._group = groups > 0 || that._group;\n\n            if (that._group) {\n                that._templates();\n                that._updateCols();\n                that._updateLockedCols();\n                if (!that._virtualColScroll) {\n                    that._updateHeader(groups);\n                }\n                that._group = groups > 0;\n                that._groupRows = groupRows(data);\n            }\n\n            if (that.content) {\n                contentScrollLeft = kendo.scrollLeft(that.content);\n            }\n            cachedItemsToSkip = that._skipRerenderItemsCount;\n            that._renderContent(data, colspan, groups);\n            if (that.options.scrollable && that.options.scrollable.endless && this.lockedContent) {\n                that._skipRerenderItemsCount = cachedItemsToSkip;\n            }\n            that._renderLockedContent(data, colspan, groups);\n\n            if (!that._virtualColScroll) {\n                that._footer();\n\n                that._renderNoRecordsContent();\n\n                that._togglePagerVisibility();\n\n                that._setContentHeight();\n\n                that._setContentWidth(that.content && contentScrollLeft);\n            }\n\n            if (that.lockedTable) {\n                //requires manual trigger of scroll to sync both tables\n                if (virtualScroll.rows) {\n                    that.content.find(\">.k-virtual-scrollable-wrap\").trigger(\"scroll\");\n                } else if (that.touchScroller) {\n                    that.touchScroller.movable.trigger(\"change\");\n                } else {\n                    that.wrapper.one(\"scroll\", function(e) { e.stopPropagation(); });\n                    that.content.trigger(\"scroll\");\n                }\n            }\n\n            if (!that._endlessFetchInProgress && !that._rowDropping) {\n                that._restoreCurrent(currentIndex, isCurrentInHeader);\n            }\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            }\n\n            if (that.selectable) {\n                that.selectable.resetTouchEvents();\n            }\n\n            that._muteAngularRebind(function() {\n                that._angularItems(\"compile\");\n            });\n\n            if (that._checkBoxSelection) {\n                that._toggleHeaderCheckState(false);\n            }\n\n            if (that.options.persistSelection &&\n                ((that.selectable && !kendo.ui.Selectable.parseOptions(that.options.selectable).cell) || that._checkBoxSelection) &&\n                (that.items().length || that.dataSource._isGroupPaged())) {\n                that._restoreSelection();\n            }\n\n            if (!that.options.persistSelection) {\n                that._selectedIds = {};\n            }\n\n            if (that._hasReorderableRows()) {\n                that._draggableRows();\n                that._reorderableRows();\n            }\n\n            that._aria();\n\n            that.trigger(DATABOUND);\n       },\n\n        _restoreCurrent: function(currentIndex, isCurrentInHeader) {\n            if (currentIndex === undefined$1 || currentIndex < 0) {\n                return;\n            }\n\n            this._removeCurrent();\n\n            if (isCurrentInHeader) {\n                this._setCurrent(this.thead.find(\"th:not(.k-group-cell)\").eq(currentIndex));\n            } else {\n                var rowIndex = 0;\n                var virtualScroll = this.virtualScroll || {};\n\n                if (this._rowVirtualIndex) {\n                    if (virtualScroll.rows) {\n                        rowIndex = this.virtualScrollable.position(this._rowVirtualIndex);\n                    } else {\n                        rowIndex = this._rowVirtualIndex;\n                    }\n                } else {\n                    currentIndex = 0;\n                }\n\n                var row = $();\n                var colspan;\n\n                if (this.lockedTable) {\n                    row = this.lockedTable.find(\">tbody>tr\").eq(rowIndex);\n                }\n                row = row.add(this.tbody.children().eq(rowIndex));\n\n                if (this._hasVirtualColumns()) {\n                    colspan = parseInt(row.find(\"td\").first().attr(\"colspan\"), 10);\n                    currentIndex = this._virtualCellIndex - (colspan > 1 ? colspan - 1 : 0);\n                }\n\n\n                var td = row.find(\">td:not(.k-group-cell):not(.k-hierarchy-cell)\")\n                    .eq(currentIndex);\n\n                if (!td.length || currentIndex < 0) {\n                    return;\n                }\n\n                if (this._hasVirtualColumns()) {\n                    this._setCurrent(td, true, true);\n\n                } else {\n                    this._setCurrent(td);\n                }\n\n            }\n\n            if (this._current) {\n                focusTable(this.table, true);\n            }\n        },\n\n        _restoreSelection: function() {\n            var that = this,\n                allRows = that.items(),\n                selectedRows,\n                id = isFunction(that.dataSource.options.schema.model) ? that.dataSource.options.schema.model.fn.idField : that.dataSource.options.schema.model.id;\n\n            selectedRows = grep(allRows, function(row) {\n                 var dataItemKey = that.dataItem(row)[id];\n                 if (that._selectedIds[dataItemKey]) {\n                    return row;\n                 }\n            });\n\n            that.select(selectedRows);\n        },\n\n       _angularItems: function(cmd) {\n\n           kendo.ui.DataBoundWidget.fn._angularItems.call(this, cmd);\n\n           if (cmd === \"cleanup\" && (!this.dataSource || !this.dataSource.options.endless)) {\n               this._cleanupDetailItems();\n           }\n\n           this._angularGroupItems(cmd);\n\n           this._angularGroupFooterItems(cmd);\n       },\n\n       _cleanupDetailItems: function() {\n           var that = this;\n\n           if (that._hasDetails()) {\n              that.angular(\"cleanup\", function() {\n                   return { elements: that.tbody.children(\".k-detail-row\") };\n               });\n\n               that.tbody.find(\".k-detail-cell\").empty();\n           }\n       },\n\n       _angularGroupItems: function(cmd) {\n           var that = this,\n               container = that.tbody;\n\n           if (that.lockedContent) {\n               container = that.lockedTable.find(\"tbody\");\n           }\n\n           if (that._group) {\n              that.angular(cmd, function() {\n                   return {\n                       elements: container.children(\".k-grouping-row\"),\n                       data: $.map(groupRows(that.dataSource.view()), function(dataItem) {\n                           return { dataItem: dataItem };\n                       })\n                   };\n               });\n           }\n       },\n\n       _angularGroupFooterItems: function(cmd) {\n           var that = this,\n               container = that.tbody;\n\n           if (that.lockedContent) {\n                container = that.element;\n           }\n\n           if (that._group && that.groupFooterTemplate) {\n\n               that.angular(cmd, function() {\n                   return {\n                       elements: container.find(\".k-group-footer\"),\n                       data: $.map(groupFooters(that.dataSource.view()), function(dataItem) {\n                           return { dataItem: dataItem };\n                       })\n                   };\n               });\n           }\n       },\n\n       _renderContent: function(data, colspan, groups) {\n            var that = this,\n                idx,\n                length,\n                html = \"\",\n                isLocked = that.lockedContent != null,\n                endlessAppend = null,\n                skipLastGroup,\n                flatViewLength,\n                scrollable = that.options.scrollable,\n                templates = {\n                        rowTemplate: that.rowTemplate,\n                        altRowTemplate: that.altRowTemplate,\n                        groupFooterTemplate: that.groupFooterTemplate,\n                        groupHeaderColumnTemplate: that.groupHeaderColumnTemplate\n                    };\n            if (scrollable && scrollable.endless && !that.dataSource.options.endless) {\n                that._skipRerenderItemsCount = 0;\n                if (that.content) {\n                    that.content[0].scrollTop = 0;\n                }\n            }\n            endlessAppend = that._skipRerenderItemsCount > 0;\n            colspan = isLocked ? colspan - visibleLeafColumns(visibleLockedColumns(that.columns)).length : colspan;\n            if (groups > 0) {\n\n                colspan = isLocked ? colspan - groups : colspan;\n\n                if (that.detailTemplate) {\n                    colspan++;\n                }\n\n                if (that.groupFooterTemplate) {\n                    that._groupAggregatesDefaultObject = that.dataSource.aggregates();\n                }\n                if (that.options.scrollable.endless) {\n                    flatViewLength = that.dataSource.flatView().length;\n                }\n                for (idx = 0, length = data.length; idx < length; idx++) {\n                    if (!that._skippedGroups) {\n                        that._skippedGroups = [];\n                    }\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== that.dataSource.total();\n                    html += that._groupRowHtml(data[idx], colspan, 0, isLocked ? groupRowLockedContentBuilder : groupRowBuilder, templates, isLocked, skipLastGroup, false);\n                }\n            } else {\n                html += that._rowsHtml(data, templates);\n            }\n\n            if (endlessAppend) {\n                that.tbody.append(html);\n                clearTimeout(that._endlessFetchTimeOut);\n                that._endlessFetchTimeOut = setTimeout(function() {\n                    if (that._groupToCollapse) {\n                        that.collapseGroup(that._groupToCollapse);\n                        that._groupToCollapse = null;\n                    }\n                });\n                that._endlessFetchInProgress = null;\n            } else {\n                that.tbody = appendContent(that.tbody, that.table, html, this.options.$angular);\n            }\n       },\n\n       _renderGroupRows: function() {\n        var that = this,\n        data = that._groupRows,\n        groupRows = that.wrapper.find(\".k-grouping-row\"),\n        groups = that._groups(),\n        groupRowBuilderFunc,\n        isLocked = that.lockedContent != null,\n        columns,\n        colspan,\n        group,\n        field,\n        column,\n        template,\n        text,\n        groupHeaderData,\n        tableContainer,\n        isInLockedContainer,\n        prevElement,\n        newGroupRowElement,\n        currentRow,\n        level,\n        groupHeaderColumnTemplate,\n        firstColumnGroupData;\n\n        groupRows.each(function(index, row) {\n            currentRow = $(row);\n            tableContainer = currentRow.closest(\"table\").parent();\n            isInLockedContainer = tableContainer.is(\".\" + CONTENTRLOCKEDCONTAINER);\n            columns = isInLockedContainer ? visibleLeafColumns(visibleColumns(lockedColumns(that.columns))) : visibleLeafColumns(visibleColumns(nonLockedColumns(that.columns)));\n            level = currentRow.find(\".\" + GROUPCELLCLASS).length;\n            if (isLocked) {\n                groupRowBuilderFunc = isInLockedContainer ? groupRowBuilder : groupRowLockedContentBuilder;\n                colspan = isInLockedContainer ? columns.length + groups - level : columns.length;\n            }\n            else {\n                groupRowBuilderFunc = groupRowBuilder;\n                colspan = columns.length + groups - level;\n            }\n\n            group = index >= data.length ? data[index - data.length] : data[index];\n            field = group.field;\n            column = grep(leafColumns(that.columns), function(column) { return column.field == field; })[0] || { };\n            firstColumnGroupData = !column.groupHeaderTemplate && visibleColumns(that.columns)[0].groupHeaderColumnTemplate ? visibleColumns(that.columns)[0] : false;\n            template = column.groupHeaderTemplate ? column.groupHeaderTemplate : visibleColumns(that.columns)[0].groupHeaderColumnTemplate;\n            text = (column.title && (that.options.encodeTitles ? htmlEncode(column.title, true) : column.title) || field) + ': ' + formatGroupValue(group.value, column.format, column.values, column.encoded);\n            groups = groups;\n            groupHeaderData = that._groupData(group, false, firstColumnGroupData);\n            groupHeaderColumnTemplate = isInLockedContainer ? that.lockedGroupHeaderColumnTemplate : that.groupHeaderColumnTemplate;\n\n            if (template) {\n                text = typeof template === FUNCTION ? template(groupHeaderData) : kendo.template(template)(groupHeaderData);\n            }\n\n            prevElement = currentRow.prev().length ? currentRow.prev() : currentRow.parent();\n\n            newGroupRowElement = $(groupHeaderColumnTemplate ?\n                groupHeaderColumnTemplate(extend({}, groupHeaderData, { groupCells: level, colspan: groups - level, text: text })) :\n                groupRowBuilderFunc(colspan, level, text)\n            );\n\n            if (prevElement.is(\"tbody\")) {\n                prevElement.prepend(newGroupRowElement);\n            }\n            else {\n                prevElement.after(newGroupRowElement);\n            }\n                currentRow.remove();\n           });\n       },\n\n       _renderLockedContent: function(data, colspan, groups) {\n           var html = \"\",\n               idx,\n               length,\n               skipLastGroup,\n               endlessAppend = null,\n               flatViewLength,\n               templates = {\n                   rowTemplate: this.lockedRowTemplate,\n                   altRowTemplate: this.lockedAltRowTemplate,\n                   groupFooterTemplate: this.lockedGroupFooterTemplate,\n                   groupHeaderColumnTemplate: this.lockedGroupHeaderColumnTemplate\n               };\n\n           if (this.lockedContent) {\n\n               var table = this.lockedTable;\n               endlessAppend = this._skipRerenderItemsCount > 0;\n\n               if (groups > 0) {\n                   colspan = colspan - visibleColumns(leafColumns(nonLockedColumns(this.columns))).length;\n                   if (this.options.scrollable.endless) {\n                     flatViewLength = this.dataSource.flatView().length;\n                   }\n                   for (idx = 0, length = data.length; idx < length; idx++) {\n                    skipLastGroup = flatViewLength && idx === data.length - 1 && flatViewLength !== this.dataSource.total();\n                    html += this._groupRowHtml(data[idx], colspan, 0, groupRowBuilder, templates, false, skipLastGroup, true);\n                   }\n               } else {\n                   html = this._rowsHtml(data, templates);\n               }\n\n               if (endlessAppend) {\n                   table.children(\"tbody\").append(html);\n               } else {\n                   appendContent(table.children(\"tbody\"), table, html, this.options.$angular);\n               }\n\n               this._syncLockedContentHeight();\n           }\n       },\n\n       _togglePagerVisibility: function() {\n           if (this.options.pageable.alwaysVisible === false) {\n                this.wrapper.find(\".k-grid-pager\").toggle(this.dataSource.total() >= this.dataSource.pageSize());\n            }\n       },\n\n       _adjustRowsHeight: function(table1, table2) {\n           var rows = table1[0].rows,\n               length = rows.length,\n               idx,\n               rows2 = table2[0].rows,\n               containers = table1.add(table2),\n               containersLength = containers.length,\n               heights = [];\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               if (rows[idx].style.height) {\n                   rows[idx].style.height = rows2[idx].style.height = \"\";\n               }\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (!rows2[idx]) {\n                   break;\n               }\n\n               var offsetHeight1 = rows[idx].offsetHeight;\n               var offsetHeight2 = rows2[idx].offsetHeight;\n               var height = 0;\n\n               if (offsetHeight1 > offsetHeight2) {\n                   height = offsetHeight1;\n               } else if (offsetHeight1 < offsetHeight2) {\n                   height = offsetHeight2;\n               }\n\n               heights.push(height);\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = NONE;\n           }\n\n           for (idx = 0; idx < length; idx++) {\n               if (heights[idx]) {\n                   //add one to resolve row misalignment in IE\n                   rows[idx].style.height = rows2[idx].style.height = (heights[idx] + 1) + \"px\";\n               }\n           }\n\n           for (idx = 0; idx < containersLength; idx++) {\n               containers[idx].style.display = \"\";\n           }\n       }\n   });\n\n   if (kendo.ExcelMixin) {\n       kendo.ExcelMixin.extend(Grid.prototype);\n   }\n\n   if (kendo.PDFMixin) {\n       kendo.PDFMixin.extend(Grid.prototype);\n\n       Grid.prototype._drawPDF_autoPageBreak = function(progress) {\n           var grid = this;\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n           var origBody = grid.wrapper.find('> table > tbody, .k-grid-content > table > tbody').first();\n           var cont = $(\"<div>\")\n               .css({ position: \"absolute\", left: -10000, top: -10000 });\n           var clone;\n\n           grid.toggleUnexportableColumns(grid.columns);\n           clone = grid.wrapper.clone().css({\n               height: \"auto\", width: \"auto\"\n           }).appendTo(cont);\n           clone.find(\".k-grid-content\").css({ height: \"auto\", width: \"auto\", overflow: \"visible\" });\n           clone.find('> table, .k-grid-content > table, .k-grid-footer table').css({ height: \"auto\", width: \"100%\", overflow: \"visible\" });\n           clone.find(\".k-grid-pager, .k-grid-toolbar, .k-grouping-header\").remove();\n           clone.find(\".k-grid-header, .k-grid-footer, .k-auto-scrollable\").css({ paddingRight: 0 });\n\n           this._initPDFProgress(progress);\n\n           var body = clone.find('> table > tbody, .k-grid-content > table > tbody').first().empty();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.one(\"change\", draw);\n                   dataSource.page(startingPage);\n               } else {\n                   grid.refresh();\n                   draw();\n               }\n           }\n\n           function draw() {\n               cont.appendTo(document.body);\n               var options = $.extend({}, grid.options.pdf, {\n                   _destructive: true,\n                   progress: function(p) {\n                       progress.notify({\n                           page: p.page,\n                           pageNumber: p.pageNum,\n                           progress: 0.5 + p.pageNum / p.totalPages / 2,\n                           totalPages: p.totalPages\n                       });\n                   }\n               });\n               kendo.drawing.drawDOM(clone, options)\n                   .always(function() {\n                       cont.remove();\n                   })\n                   .then(function(group) {\n                       result.resolve(group);\n                       grid.toggleUnexportableColumns(grid.columns, true);\n                   })\n                   .fail(function(err) {\n                       result.reject(err);\n                   });\n           }\n\n           function renderPage() {\n               var pageNum = dataSource.page();\n               var totalPages = allPages ? dataSource.totalPages() : 1;\n               body.append(origBody.children(\"tr:not(.k-detail-row)\"));\n               if (pageNum < totalPages) {\n                   dataSource.page(pageNum + 1);\n               } else {\n                   dataSource.unbind(\"change\", renderPage);\n                   resolve();\n               }\n           }\n\n           if (allPages) {\n               dataSource.bind(\"change\", renderPage);\n               dataSource.page(1);\n           } else {\n               renderPage();\n           }\n\n           return result.promise();\n       };\n\n       Grid.prototype.toggleUnexportableColumns = function(columns, restore) {\n           var length = columns.length;\n           var column;\n           var exportable;\n           var visibleInExport;\n           var visibleInExportOnly;\n\n           for (var i = 0; i < length; i++) {\n               column = columns[i];\n               exportable = column.exportable;\n               if (!restore) {\n                   if (typeof column.exportable === \"object\") {\n                       exportable = column.exportable.pdf;\n                   }\n\n                   visibleInExport = !column.hidden && exportable !== false;\n                   visibleInExportOnly = column.hidden && exportable === true;\n                   exportable = visibleInExport || visibleInExportOnly;\n\n                   if (!exportable && !column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.hideColumn(column);\n                   } else if (exportable && column.hidden) {\n                       column._toggledDuringExport = true;\n                       this.showColumn(column);\n                   } else if (exportable && column.columns) {\n                       this.toggleUnexportableColumns(column.columns);\n                   }\n               } else {\n                   if (column._toggledDuringExport) {\n                       column._toggledDuringExport = false;\n\n                       if (column.hidden) {\n                           this.showColumn(column);\n                       } else {\n                           this.hideColumn(column);\n                       }\n                   } else if (column.columns) {\n                       this.toggleUnexportableColumns(column.columns, restore);\n                   }\n               }\n           }\n       };\n\n       Grid.prototype._drawPDF = function(progress) {\n           var grid = this;\n\n           if (grid.options.pdf.paperSize && grid.options.pdf.paperSize != \"auto\") {\n               return grid._drawPDF_autoPageBreak(progress);\n           }\n\n           var result = new $.Deferred();\n           var dataSource = grid.dataSource;\n           var allPages = grid.options.pdf.allPages;\n\n           this._initPDFProgress(progress);\n\n           // This group will be our document containing all pages\n           var doc = new kendo.drawing.Group();\n           var startingPage = dataSource.page();\n\n           function resolve() {\n               if (allPages && startingPage !== undefined$1) {\n                   dataSource.unbind(\"change\", exportPage);\n                   dataSource.one(\"change\", function() {\n                       result.resolve(doc);\n                   });\n\n                   dataSource.page(startingPage);\n               } else {\n                   result.resolve(doc);\n               }\n           }\n\n           function exportPage() {\n                grid.toggleUnexportableColumns(grid.columns);\n                grid._drawPDFShadow({\n                    width: grid.wrapper.width()\n                }, {\n                    avoidLinks: grid.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var pageNum = dataSource.page();\n                    var totalPages = allPages ? dataSource.totalPages() : 1;\n\n                    var args = {\n                        page: group,\n                        pageNumber: pageNum,\n                        progress: pageNum / totalPages,\n                        totalPages: totalPages\n                    };\n\n                    grid.toggleUnexportableColumns(grid.columns, true);\n                    progress.notify(args);\n                    doc.append(args.page);\n\n                    if (pageNum < totalPages) {\n                        dataSource.page(pageNum + 1);\n                    } else {\n                        resolve();\n                    }\n                })\n                .fail(function(err) {\n                    result.reject(err);\n                });\n            }\n\n            if (allPages) {\n                dataSource.bind(\"change\", exportPage);\n                dataSource.page(1);\n            } else {\n                exportPage();\n            }\n\n            return result.promise();\n        };\n\n        Grid.prototype._initPDFProgress = function(deferred) {\n           var loading = $(\"<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>\");\n           loading.prepend(this.wrapper.clone().css({\n               position: \"absolute\", top: 0, left: 0\n           }));\n\n           this._pdfInitialized = true;\n           this.wrapper.append(loading);\n\n           var pb = $(\"<div class='k-loading-pdf-progress'>\")\n           .appendTo(loading)\n           .kendoProgressBar({\n               type: \"chunk\",\n               chunkCount: 10,\n               min: 0,\n               max: 1,\n               value: 0\n           }).data(\"kendoProgressBar\");\n\n           deferred.progress(function(e) {\n               pb.value(e.progress);\n           })\n           .always(function() {\n               kendo.destroy(loading);\n               loading.remove();\n           });\n        };\n   }\n\n   function syncTableHeight(table1, table2) {\n       table1 = table1[0];\n       table2 = table2[0];\n\n       if (table1.rows.length !== table2.rows.length) {\n           var lockedHeigth = table1.offsetHeight;\n           var tableHeigth = table2.offsetHeight;\n\n           var row;\n           var diff;\n           if (lockedHeigth > tableHeigth) {\n               row = table2.rows[table2.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table2.rows[table2.rows.length - 2];\n               }\n\n               diff = lockedHeigth - tableHeigth;\n           } else {\n               row = table1.rows[table1.rows.length - 1];\n\n               if (filterRowRegExp.test(row.className)) {\n                   row = table1.rows[table1.rows.length - 2];\n               }\n\n               diff = tableHeigth - lockedHeigth;\n           }\n           row.style.height = row.offsetHeight + diff + \"px\";\n       }\n   }\n\n   function adjustRowHeight(row1, row2) {\n       var height;\n       var offsetHeight1 = row1.offsetHeight;\n       var offsetHeight2 = row2.offsetHeight;\n\n       if (offsetHeight1 > offsetHeight2) {\n           height = offsetHeight1 + \"px\";\n       } else if (offsetHeight1 < offsetHeight2) {\n           height = offsetHeight2 + \"px\";\n       }\n\n       if (height) {\n           row1.style.height = row2.style.height = height;\n       }\n   }\n\n   function getCommand(commands, name) {\n       var idx, length, command;\n\n       if (typeof commands === STRING && commands === name) {\n          return commands;\n       }\n\n       if (isPlainObject(commands) && commands.name === name) {\n           return commands;\n       }\n\n       if (isArray(commands)) {\n           for (idx = 0, length = commands.length; idx < length; idx++) {\n               command = commands[idx];\n\n               if ((typeof command === STRING && command === name) || (command.name === name)) {\n                   return command;\n               }\n           }\n       }\n       return null;\n   }\n\n   function compareElements(element, toCompare) {\n       if (element.length !== toCompare.length) {\n           return false;\n       }\n\n       for (var i = 0; i < element.length; i++) {\n           if (element[i] !== toCompare[i]) {\n               return false;\n           }\n       }\n\n       return true;\n   }\n\n   function focusTable(table, direct) {\n       if (!table || table.length === 0) {\n           return;\n       }\n\n       if (direct === true) {\n           table = $(table);\n           var scrollLeft = kendo.scrollLeft(table.parent());\n\n            kendo.focusElement(table);\n            kendo.scrollLeft(table.parent(), scrollLeft);\n        } else {\n            $(table).one(\"focusin\", function(e) { e.preventDefault(); }).trigger(\"focus\");\n        }\n    }\n\n   function isColumnGroupable(grid, column) {\n       return grid.options.groupable && (column.groupable || column.groupable === undefined$1);\n   }\n\n   function isGroupedBy(groups, field) {\n       return !!$.grep(groups, function(item) {\n           return item.field === field;\n       }).length;\n   }\n\n   function isColumnEditable(column, model) {\n       if (!column.field || column.selectable) {\n           return false;\n       }\n       if (model.editable && !model.editable(column.field)) {\n           return false;\n       }\n       if (column.editable && !column.editable(model)) {\n           return false;\n       }\n       return true;\n   }\n\n   function isInputElement(element) {\n       return $(element).is(\":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on\");\n   }\n\n    function tableClick(e) {\n        var that = this,\n            currentTarget = $(e.currentTarget),\n            isHeader = currentTarget.is(\"th\"),\n            table = this.table.add(this.lockedTable),\n            headerTable = this.thead.parent().add($(\">table\", this.lockedHeader)),\n            isInput = isInputElement(e.target),\n            preventScroll = $(e.target).is('.k-checkbox'),\n            target = $(e.target),\n            currentTable = currentTarget.closest(\"table\")[0];\n\n        if (isInput && currentTarget.find(kendo.roleSelector(\"filtercell\")).length) {\n            this._setCurrent(currentTarget);\n            return;\n        }\n\n        if (currentTable !== table[0] && currentTable !== table[1] && currentTable !== headerTable[0] && currentTable !== headerTable[1]) {\n            return;\n        }\n\n        if (target.is(\"a.k-i-expand, a.k-i-collapse\")) {\n            return;\n        }\n\n        if (this.options.navigatable) {\n            this._setCurrent(currentTarget, false, preventScroll);\n        }\n\n        if (isHeader || !isInput) {\n            setTimeout(function() {\n                var activeEl = $(kendo._activeElement());\n                if ((activeEl.hasClass(\"k-widget\") || activeEl.hasClass(\"k-dropdownlist\")) && !activeEl.hasClass(\"k-grid-pager\")) {\n                    return;\n                }\n\n                //Only if input element is not selected yet and it is not descendant of the grid's table\n                if (that.table && (activeEl.is(CHECKBOXINPUT) || !isInputElement(kendo._activeElement()) || !$.contains(currentTable, kendo._activeElement()))) {\n                    //DOMElement.focus() only for header, because IE doesn't really focus the table\n                    focusTable(that.table[0], true);\n                }\n            });\n        }\n\n        if (isHeader && !kendo.support.touch) {\n            e.preventDefault(); //if any problem occurs, call preventDefault only for the clicked header links\n        }\n    }\n\n   function leftMostPosition(element, rtl) {\n       if (!rtl) {\n           return 0;\n       }\n\n       var result = 0;\n\n       if (kendo.support.browser.webkit) {\n           result = element.width();\n       }\n\n       return result;\n   }\n\n   function parseVirtualSettings(options) {\n        var asLowerString;\n\n        if (typeof options === \"string\") {\n            asLowerString = options.toLowerCase();\n            if (asLowerString === \"true\") {\n                return {\n                    rows: true\n                };\n            } else {\n                return {\n                    rows: asLowerString.indexOf(\"rows\") > -1,\n                    columns: asLowerString.indexOf(\"columns\") > -1\n                };\n            }\n\n        } else if (options === true) {\n            return {\n                rows: true\n            };\n        }\n   }\n\n   function isElementVisibleInWrapper(wrapper, element) {\n       var offsetTop;\n       var halfHeight;\n\n       if (!wrapper) {\n         return false;\n       }\n\n       element = $(element);\n\n       if (element[0] && contains(wrapper[0], element[0])) {\n           offsetTop = element.offset().top - wrapper.offset().top;\n           halfHeight = element.outerHeight() / 2;\n\n           if ((offsetTop >= 0 || math.abs(offsetTop) <= halfHeight) && (math.floor(offsetTop + halfHeight) <= wrapper.height())) {\n               return true;\n           }\n       }\n\n       return false;\n   }\n\n   function isInEdit(cell) {\n       return cell &&\n           (cell.hasClass(\"k-edit-cell\") ||\n            cell.parent().hasClass(\"k-grid-edit-row\"));\n   }\n\n    function groupHtmlBuilder(groupHeaderColumnTemplate, groupHeaderBuilder, colspan, templateColspan, groupData, level, text, expanded, group, isGroupPaged) {\n        var html;\n\n        if (groupHeaderColumnTemplate) {\n            html = groupHeaderColumnTemplate(extend({}, groupData, {\n                groupCells: level,\n                colspan: templateColspan,\n                text: text\n            }));\n        } else {\n            html = groupHeaderBuilder(colspan, level, text, expanded, group.uid, isGroupPaged);\n        }\n\n        return html;\n    }\n\n   function groupCellBuilder(headerTemplateIndex) {\n    return '<td colspan=\"#=data.colspan +' + headerTemplateIndex + '#\">' +\n    '<p class=\"k-reset\">' +\n    '<a class=\"k-icon k-i-collapse\" href=\"\\\\#\" tabindex=\"-1\" ' +\n    ARIA_LABEL + '=\"' + COLLAPSE +\n    '\"></a>#=data.text#' +\n    '</p></td>';\n   }\n\n   function groupCellLockedContentBuilder(headerTemplateIndex) {\n    return '<td colspan=\"' + headerTemplateIndex + '\">' +\n    '<p class=\"k-reset\">&nbsp;</p></td>';\n   }\n\n   function groupRowBuilder(colspan, level, text, expanded, uid, includeAdditionalData) {\n    return '<tr ' + (includeAdditionalData ? 'data-group-uid=\"' + uid + '\"' : '') + 'class=\"k-grouping-row\">' + groupCells(level) +\n        '<td colspan=\"' + colspan + '\" aria-expanded=\"' + !!expanded + '\">' +\n        '<p class=\"k-reset\">' +\n        '<a class=\"k-icon ' + (expanded ? 'k-i-collapse' : 'k-i-expand') + '\" href=\"#\" tabindex=\"-1\" ' + ARIA_LABEL + '=\"' + (expanded ? COLLAPSE : EXPAND) + '\"></a>' + text +\n    '</p></td></tr>';\n   }\n\n   function groupRowLockedContentBuilder(colspan) {\n    return '<tr class=\"k-grouping-row\">' +\n        '<td colspan=\"' + colspan + '\" aria-expanded=\"true\">' +\n        '<p class=\"k-reset\">&nbsp;</p></td></tr>';\n   }\n\n   function toggleRow(row, visible) {\n       row = $(row)[0];\n       if (visible) {\n           row.style.display = \"\";\n       } else {\n           row.style.display = NONE;\n       }\n   }\n\n   function htmlEncode(value, backslashEscapeQuotes) {\n       var ampRegExp = /&/g,\n           ltRegExp = /</g,\n           quoteRegExp = /\"/g,\n           aposRegExp = /'/g,\n           gtRegExp = />/g;\n\n       return (\"\" + value)\n           .replace(ampRegExp, \"&amp;\")\n           .replace(ltRegExp, \"&lt;\")\n           .replace(gtRegExp, \"&gt;\")\n           .replace(quoteRegExp, function(match) {\n               if (backslashEscapeQuotes) {\n                   return \"\\\\\" + match;\n               }\n               return \"&quot;\";\n           })\n           .replace(aposRegExp, \"&#39;\");\n   }\n\n   function getTitle(field, columns) {\n        return columns.filter(function(col) {\n            return col.field === field;\n        })[0].title || field;\n    }\n\n    function exportDataSort(a, b) {\n        return this.dataSource.indexOf(this.dataSource.getByUid(a.uid)) - this.dataSource.indexOf(this.dataSource.getByUid(b.uid));\n    }\n\n    function isExcelExportableColumn(column) {\n        return !(column.exportable === false || (column.exportable && column.exportable.excel === false));\n    }\n\n   ui.plugin(Grid);\n   ui.plugin(VirtualScrollable);\n\n})(window.kendo.jQuery);\n"]}